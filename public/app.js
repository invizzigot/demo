(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))d(f);new MutationObserver(f=>{for(const m of f)if(m.type==="childList")for(const y of m.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&d(y)}).observe(document,{childList:!0,subtree:!0});function s(f){const m={};return f.integrity&&(m.integrity=f.integrity),f.referrerPolicy&&(m.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?m.credentials="include":f.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function d(f){if(f.ep)return;f.ep=!0;const m=s(f);fetch(f.href,m)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Gn(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const Me={},fi=[],dt=()=>{},Uu=()=>!1,qn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ss=t=>t.startsWith("onUpdate:"),Ne=Object.assign,Ts=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},Hu=Object.prototype.hasOwnProperty,ke=(t,e)=>Hu.call(t,e),_e=Array.isArray,di=t=>Kn(t)==="[object Map]",Ja=t=>Kn(t)==="[object Set]",xe=t=>typeof t=="function",je=t=>typeof t=="string",Xt=t=>typeof t=="symbol",Fe=t=>t!==null&&typeof t=="object",Qa=t=>(Fe(t)||xe(t))&&xe(t.then)&&xe(t.catch),$a=Object.prototype.toString,Kn=t=>$a.call(t),Wu=t=>Kn(t).slice(8,-1),el=t=>Kn(t)==="[object Object]",Os=t=>je(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Pi=Gn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Zn=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},Vu=/-(\w)/g,ht=Zn(t=>t.replace(Vu,(e,s)=>s?s.toUpperCase():"")),Xu=/\B([A-Z])/g,Yt=Zn(t=>t.replace(Xu,"-$1").toLowerCase()),Jn=Zn(t=>t.charAt(0).toUpperCase()+t.slice(1)),mr=Zn(t=>t?`on${Jn(t)}`:""),Ht=(t,e)=>!Object.is(t,e),_n=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},Yr=(t,e,s,d=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:d,value:s})},Gr=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Yu=t=>{const e=je(t)?Number(t):NaN;return isNaN(e)?t:e};let ho;const tn=()=>ho||(ho=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ks(t){if(_e(t)){const e={};for(let s=0;s<t.length;s++){const d=t[s],f=je(d)?Zu(d):ks(d);if(f)for(const m in f)e[m]=f[m]}return e}else if(je(t)||Fe(t))return t}const Gu=/;(?![^(]*\))/g,qu=/:([^]+)/,Ku=/\/\*[^]*?\*\//g;function Zu(t){const e={};return t.replace(Ku,"").split(Gu).forEach(s=>{if(s){const d=s.split(qu);d.length>1&&(e[d[0].trim()]=d[1].trim())}}),e}function Ie(t){let e="";if(je(t))e=t;else if(_e(t))for(let s=0;s<t.length;s++){const d=Ie(t[s]);d&&(e+=d+" ")}else if(Fe(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const Ju="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",Qu=Gn(Ju),$u="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",eh=Gn($u);function tl(t){return!!t||t===""}const il=t=>!!(t&&t.__v_isRef===!0),de=t=>je(t)?t:t==null?"":_e(t)||Fe(t)&&(t.toString===$a||!xe(t.toString))?il(t)?de(t.value):JSON.stringify(t,nl,2):String(t),nl=(t,e)=>il(e)?nl(t,e.value):di(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[d,f],m)=>(s[vr(d,m)+" =>"]=f,s),{})}:Ja(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>vr(s))}:Xt(e)?vr(e):Fe(e)&&!_e(e)&&!el(e)?String(e):e,vr=(t,e="")=>{var s;return Xt(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ve;class th{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ve,!e&&Ve&&(this.index=(Ve.scopes||(Ve.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=Ve;try{return Ve=this,e()}finally{Ve=s}}}on(){++this._on===1&&(this.prevScope=Ve,Ve=this)}off(){this._on>0&&--this._on===0&&(Ve=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,d;for(s=0,d=this.effects.length;s<d;s++)this.effects[s].stop();for(this.effects.length=0,s=0,d=this.cleanups.length;s<d;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,d=this.scopes.length;s<d;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const f=this.parent.scopes.pop();f&&f!==this&&(this.parent.scopes[this.index]=f,f.index=this.index)}this.parent=void 0}}}function rl(){return Ve}function ih(t,e=!1){Ve&&Ve.cleanups.push(t)}let Re;const yr=new WeakSet;class sl{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ve&&Ve.active&&Ve.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,yr.has(this)&&(yr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||al(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,fo(this),ll(this);const e=Re,s=pt;Re=this,pt=!0;try{return this.fn()}finally{cl(this),Re=e,pt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Ps(e);this.deps=this.depsTail=void 0,fo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?yr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){qr(this)&&this.run()}get dirty(){return qr(this)}}let ol=0,Ii,Mi;function al(t,e=!1){if(t.flags|=8,e){t.next=Mi,Mi=t;return}t.next=Ii,Ii=t}function As(){ol++}function Es(){if(--ol>0)return;if(Mi){let e=Mi;for(Mi=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Ii;){let e=Ii;for(Ii=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(d){t||(t=d)}e=s}}if(t)throw t}function ll(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cl(t){let e,s=t.depsTail,d=s;for(;d;){const f=d.prevDep;d.version===-1?(d===s&&(s=f),Ps(d),nh(d)):e=d,d.dep.activeLink=d.prevActiveLink,d.prevActiveLink=void 0,d=f}t.deps=e,t.depsTail=s}function qr(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(ul(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function ul(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Wi)||(t.globalVersion=Wi,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!qr(t))))return;t.flags|=2;const e=t.dep,s=Re,d=pt;Re=t,pt=!0;try{ll(t);const f=t.fn(t._value);(e.version===0||Ht(f,t._value))&&(t.flags|=128,t._value=f,e.version++)}catch(f){throw e.version++,f}finally{Re=s,pt=d,cl(t),t.flags&=-3}}function Ps(t,e=!1){const{dep:s,prevSub:d,nextSub:f}=t;if(d&&(d.nextSub=f,t.prevSub=void 0),f&&(f.prevSub=d,t.nextSub=void 0),s.subs===t&&(s.subs=d,!d&&s.computed)){s.computed.flags&=-5;for(let m=s.computed.deps;m;m=m.nextDep)Ps(m,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function nh(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let pt=!0;const hl=[];function It(){hl.push(pt),pt=!1}function Mt(){const t=hl.pop();pt=t===void 0?!0:t}function fo(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=Re;Re=void 0;try{e()}finally{Re=s}}}let Wi=0;class rh{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Is{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Re||!pt||Re===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Re)s=this.activeLink=new rh(Re,this),Re.deps?(s.prevDep=Re.depsTail,Re.depsTail.nextDep=s,Re.depsTail=s):Re.deps=Re.depsTail=s,fl(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const d=s.nextDep;d.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=d),s.prevDep=Re.depsTail,s.nextDep=void 0,Re.depsTail.nextDep=s,Re.depsTail=s,Re.deps===s&&(Re.deps=d)}return s}trigger(e){this.version++,Wi++,this.notify(e)}notify(e){As();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Es()}}}function fl(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let d=e.deps;d;d=d.nextDep)fl(d)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const Kr=new WeakMap,ri=Symbol(""),Zr=Symbol(""),Vi=Symbol("");function Xe(t,e,s){if(pt&&Re){let d=Kr.get(t);d||Kr.set(t,d=new Map);let f=d.get(s);f||(d.set(s,f=new Is),f.map=d,f.key=s),f.track()}}function kt(t,e,s,d,f,m){const y=Kr.get(t);if(!y){Wi++;return}const h=i=>{i&&i.trigger()};if(As(),e==="clear")y.forEach(h);else{const i=_e(t),a=i&&Os(s);if(i&&s==="length"){const u=Number(d);y.forEach((r,o)=>{(o==="length"||o===Vi||!Xt(o)&&o>=u)&&h(r)})}else switch((s!==void 0||y.has(void 0))&&h(y.get(s)),a&&h(y.get(Vi)),e){case"add":i?a&&h(y.get("length")):(h(y.get(ri)),di(t)&&h(y.get(Zr)));break;case"delete":i||(h(y.get(ri)),di(t)&&h(y.get(Zr)));break;case"set":di(t)&&h(y.get(ri));break}}Es()}function oi(t){const e=Oe(t);return e===t?e:(Xe(e,"iterate",Vi),ut(t)?e:e.map(He))}function Qn(t){return Xe(t=Oe(t),"iterate",Vi),t}const sh={__proto__:null,[Symbol.iterator](){return br(this,Symbol.iterator,He)},concat(...t){return oi(this).concat(...t.map(e=>_e(e)?oi(e):e))},entries(){return br(this,"entries",t=>(t[1]=He(t[1]),t))},every(t,e){return wt(this,"every",t,e,void 0,arguments)},filter(t,e){return wt(this,"filter",t,e,s=>s.map(He),arguments)},find(t,e){return wt(this,"find",t,e,He,arguments)},findIndex(t,e){return wt(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return wt(this,"findLast",t,e,He,arguments)},findLastIndex(t,e){return wt(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return wt(this,"forEach",t,e,void 0,arguments)},includes(...t){return _r(this,"includes",t)},indexOf(...t){return _r(this,"indexOf",t)},join(t){return oi(this).join(t)},lastIndexOf(...t){return _r(this,"lastIndexOf",t)},map(t,e){return wt(this,"map",t,e,void 0,arguments)},pop(){return wi(this,"pop")},push(...t){return wi(this,"push",t)},reduce(t,...e){return po(this,"reduce",t,e)},reduceRight(t,...e){return po(this,"reduceRight",t,e)},shift(){return wi(this,"shift")},some(t,e){return wt(this,"some",t,e,void 0,arguments)},splice(...t){return wi(this,"splice",t)},toReversed(){return oi(this).toReversed()},toSorted(t){return oi(this).toSorted(t)},toSpliced(...t){return oi(this).toSpliced(...t)},unshift(...t){return wi(this,"unshift",t)},values(){return br(this,"values",He)}};function br(t,e,s){const d=Qn(t),f=d[e]();return d!==t&&!ut(t)&&(f._next=f.next,f.next=()=>{const m=f._next();return m.value&&(m.value=s(m.value)),m}),f}const oh=Array.prototype;function wt(t,e,s,d,f,m){const y=Qn(t),h=y!==t&&!ut(t),i=y[e];if(i!==oh[e]){const r=i.apply(t,m);return h?He(r):r}let a=s;y!==t&&(h?a=function(r,o){return s.call(this,He(r),o,t)}:s.length>2&&(a=function(r,o){return s.call(this,r,o,t)}));const u=i.call(y,a,d);return h&&f?f(u):u}function po(t,e,s,d){const f=Qn(t);let m=s;return f!==t&&(ut(t)?s.length>3&&(m=function(y,h,i){return s.call(this,y,h,i,t)}):m=function(y,h,i){return s.call(this,y,He(h),i,t)}),f[e](m,...d)}function _r(t,e,s){const d=Oe(t);Xe(d,"iterate",Vi);const f=d[e](...s);return(f===-1||f===!1)&&Ds(s[0])?(s[0]=Oe(s[0]),d[e](...s)):f}function wi(t,e,s=[]){It(),As();const d=Oe(t)[e].apply(t,s);return Es(),Mt(),d}const ah=Gn("__proto__,__v_isRef,__isVue"),dl=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Xt));function lh(t){Xt(t)||(t=String(t));const e=Oe(this);return Xe(e,"has",t),e.hasOwnProperty(t)}class pl{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,d){if(s==="__v_skip")return e.__v_skip;const f=this._isReadonly,m=this._isShallow;if(s==="__v_isReactive")return!f;if(s==="__v_isReadonly")return f;if(s==="__v_isShallow")return m;if(s==="__v_raw")return d===(f?m?yh:yl:m?vl:ml).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(d)?e:void 0;const y=_e(e);if(!f){let i;if(y&&(i=sh[s]))return i;if(s==="hasOwnProperty")return lh}const h=Reflect.get(e,s,Ge(e)?e:d);return(Xt(s)?dl.has(s):ah(s))||(f||Xe(e,"get",s),m)?h:Ge(h)?y&&Os(s)?h:h.value:Fe(h)?f?_l(h):Gt(h):h}}class gl extends pl{constructor(e=!1){super(!1,e)}set(e,s,d,f){let m=e[s];if(!this._isShallow){const i=Wt(m);if(!ut(d)&&!Wt(d)&&(m=Oe(m),d=Oe(d)),!_e(e)&&Ge(m)&&!Ge(d))return i?!1:(m.value=d,!0)}const y=_e(e)&&Os(s)?Number(s)<e.length:ke(e,s),h=Reflect.set(e,s,d,Ge(e)?e:f);return e===Oe(f)&&(y?Ht(d,m)&&kt(e,"set",s,d):kt(e,"add",s,d)),h}deleteProperty(e,s){const d=ke(e,s);e[s];const f=Reflect.deleteProperty(e,s);return f&&d&&kt(e,"delete",s,void 0),f}has(e,s){const d=Reflect.has(e,s);return(!Xt(s)||!dl.has(s))&&Xe(e,"has",s),d}ownKeys(e){return Xe(e,"iterate",_e(e)?"length":ri),Reflect.ownKeys(e)}}class ch extends pl{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const uh=new gl,hh=new ch,fh=new gl(!0);const Jr=t=>t,fn=t=>Reflect.getPrototypeOf(t);function dh(t,e,s){return function(...d){const f=this.__v_raw,m=Oe(f),y=di(m),h=t==="entries"||t===Symbol.iterator&&y,i=t==="keys"&&y,a=f[t](...d),u=s?Jr:e?Mn:He;return!e&&Xe(m,"iterate",i?Zr:ri),{next(){const{value:r,done:o}=a.next();return o?{value:r,done:o}:{value:h?[u(r[0]),u(r[1])]:u(r),done:o}},[Symbol.iterator](){return this}}}}function dn(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function ph(t,e){const s={get(f){const m=this.__v_raw,y=Oe(m),h=Oe(f);t||(Ht(f,h)&&Xe(y,"get",f),Xe(y,"get",h));const{has:i}=fn(y),a=e?Jr:t?Mn:He;if(i.call(y,f))return a(m.get(f));if(i.call(y,h))return a(m.get(h));m!==y&&m.get(f)},get size(){const f=this.__v_raw;return!t&&Xe(Oe(f),"iterate",ri),Reflect.get(f,"size",f)},has(f){const m=this.__v_raw,y=Oe(m),h=Oe(f);return t||(Ht(f,h)&&Xe(y,"has",f),Xe(y,"has",h)),f===h?m.has(f):m.has(f)||m.has(h)},forEach(f,m){const y=this,h=y.__v_raw,i=Oe(h),a=e?Jr:t?Mn:He;return!t&&Xe(i,"iterate",ri),h.forEach((u,r)=>f.call(m,a(u),a(r),y))}};return Ne(s,t?{add:dn("add"),set:dn("set"),delete:dn("delete"),clear:dn("clear")}:{add(f){!e&&!ut(f)&&!Wt(f)&&(f=Oe(f));const m=Oe(this);return fn(m).has.call(m,f)||(m.add(f),kt(m,"add",f,f)),this},set(f,m){!e&&!ut(m)&&!Wt(m)&&(m=Oe(m));const y=Oe(this),{has:h,get:i}=fn(y);let a=h.call(y,f);a||(f=Oe(f),a=h.call(y,f));const u=i.call(y,f);return y.set(f,m),a?Ht(m,u)&&kt(y,"set",f,m):kt(y,"add",f,m),this},delete(f){const m=Oe(this),{has:y,get:h}=fn(m);let i=y.call(m,f);i||(f=Oe(f),i=y.call(m,f)),h&&h.call(m,f);const a=m.delete(f);return i&&kt(m,"delete",f,void 0),a},clear(){const f=Oe(this),m=f.size!==0,y=f.clear();return m&&kt(f,"clear",void 0,void 0),y}}),["keys","values","entries",Symbol.iterator].forEach(f=>{s[f]=dh(f,t,e)}),s}function Ms(t,e){const s=ph(t,e);return(d,f,m)=>f==="__v_isReactive"?!t:f==="__v_isReadonly"?t:f==="__v_raw"?d:Reflect.get(ke(s,f)&&f in d?s:d,f,m)}const gh={get:Ms(!1,!1)},mh={get:Ms(!1,!0)},vh={get:Ms(!0,!1)};const ml=new WeakMap,vl=new WeakMap,yl=new WeakMap,yh=new WeakMap;function bh(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function _h(t){return t.__v_skip||!Object.isExtensible(t)?0:bh(Wu(t))}function Gt(t){return Wt(t)?t:Rs(t,!1,uh,gh,ml)}function bl(t){return Rs(t,!1,fh,mh,vl)}function _l(t){return Rs(t,!0,hh,vh,yl)}function Rs(t,e,s,d,f){if(!Fe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const m=_h(t);if(m===0)return t;const y=f.get(t);if(y)return y;const h=new Proxy(t,m===2?d:s);return f.set(t,h),h}function pi(t){return Wt(t)?pi(t.__v_raw):!!(t&&t.__v_isReactive)}function Wt(t){return!!(t&&t.__v_isReadonly)}function ut(t){return!!(t&&t.__v_isShallow)}function Ds(t){return t?!!t.__v_raw:!1}function Oe(t){const e=t&&t.__v_raw;return e?Oe(e):t}function xh(t){return!ke(t,"__v_skip")&&Object.isExtensible(t)&&Yr(t,"__v_skip",!0),t}const He=t=>Fe(t)?Gt(t):t,Mn=t=>Fe(t)?_l(t):t;function Ge(t){return t?t.__v_isRef===!0:!1}function tt(t){return xl(t,!1)}function Ch(t){return xl(t,!0)}function xl(t,e){return Ge(t)?t:new wh(t,e)}class wh{constructor(e,s){this.dep=new Is,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:Oe(e),this._value=s?e:He(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,d=this.__v_isShallow||ut(e)||Wt(e);e=d?e:Oe(e),Ht(e,s)&&(this._rawValue=e,this._value=d?e:He(e),this.dep.trigger())}}function it(t){return Ge(t)?t.value:t}const Sh={get:(t,e,s)=>e==="__v_raw"?t:it(Reflect.get(t,e,s)),set:(t,e,s,d)=>{const f=t[e];return Ge(f)&&!Ge(s)?(f.value=s,!0):Reflect.set(t,e,s,d)}};function Cl(t){return pi(t)?t:new Proxy(t,Sh)}class Th{constructor(e,s,d){this.fn=e,this.setter=s,this._value=void 0,this.dep=new Is(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Wi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=d}notify(){if(this.flags|=16,!(this.flags&8)&&Re!==this)return al(this,!0),!0}get value(){const e=this.dep.track();return ul(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Oh(t,e,s=!1){let d,f;return xe(t)?d=t:(d=t.get,f=t.set),new Th(d,f,s)}const pn={},Rn=new WeakMap;let ei;function kh(t,e=!1,s=ei){if(s){let d=Rn.get(s);d||Rn.set(s,d=[]),d.push(t)}}function Ah(t,e,s=Me){const{immediate:d,deep:f,once:m,scheduler:y,augmentJob:h,call:i}=s,a=_=>f?_:ut(_)||f===!1||f===0?At(_,1):At(_);let u,r,o,n,c=!1,p=!1;if(Ge(t)?(r=()=>t.value,c=ut(t)):pi(t)?(r=()=>a(t),c=!0):_e(t)?(p=!0,c=t.some(_=>pi(_)||ut(_)),r=()=>t.map(_=>{if(Ge(_))return _.value;if(pi(_))return a(_);if(xe(_))return i?i(_,2):_()})):xe(t)?e?r=i?()=>i(t,2):t:r=()=>{if(o){It();try{o()}finally{Mt()}}const _=ei;ei=u;try{return i?i(t,3,[n]):t(n)}finally{ei=_}}:r=dt,e&&f){const _=r,C=f===!0?1/0:f;r=()=>At(_(),C)}const l=rl(),g=()=>{u.stop(),l&&l.active&&Ts(l.effects,u)};if(m&&e){const _=e;e=(...C)=>{_(...C),g()}}let v=p?new Array(t.length).fill(pn):pn;const b=_=>{if(!(!(u.flags&1)||!u.dirty&&!_))if(e){const C=u.run();if(f||c||(p?C.some((w,k)=>Ht(w,v[k])):Ht(C,v))){o&&o();const w=ei;ei=u;try{const k=[C,v===pn?void 0:p&&v[0]===pn?[]:v,n];v=C,i?i(e,3,k):e(...k)}finally{ei=w}}}else u.run()};return h&&h(b),u=new sl(r),u.scheduler=y?()=>y(b,!1):b,n=_=>kh(_,!1,u),o=u.onStop=()=>{const _=Rn.get(u);if(_){if(i)i(_,4);else for(const C of _)C();Rn.delete(u)}},e?d?b(!0):v=u.run():y?y(b.bind(null,!0),!0):u.run(),g.pause=u.pause.bind(u),g.resume=u.resume.bind(u),g.stop=g,g}function At(t,e=1/0,s){if(e<=0||!Fe(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),e--,Ge(t))At(t.value,e,s);else if(_e(t))for(let d=0;d<t.length;d++)At(t[d],e,s);else if(Ja(t)||di(t))t.forEach(d=>{At(d,e,s)});else if(el(t)){for(const d in t)At(t[d],e,s);for(const d of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,d)&&At(t[d],e,s)}return t}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function nn(t,e,s,d){try{return d?t(...d):t()}catch(f){$n(f,e,s)}}function mt(t,e,s,d){if(xe(t)){const f=nn(t,e,s,d);return f&&Qa(f)&&f.catch(m=>{$n(m,e,s)}),f}if(_e(t)){const f=[];for(let m=0;m<t.length;m++)f.push(mt(t[m],e,s,d));return f}}function $n(t,e,s,d=!0){const f=e?e.vnode:null,{errorHandler:m,throwUnhandledErrorInProduction:y}=e&&e.appContext.config||Me;if(e){let h=e.parent;const i=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${s}`;for(;h;){const u=h.ec;if(u){for(let r=0;r<u.length;r++)if(u[r](t,i,a)===!1)return}h=h.parent}if(m){It(),nn(m,null,10,[t,i,a]),Mt();return}}Eh(t,s,f,d,y)}function Eh(t,e,s,d=!0,f=!1){if(f)throw t;console.error(t)}const Je=[];let xt=-1;const gi=[];let Bt=null,li=0;const wl=Promise.resolve();let Dn=null;function Sl(t){const e=Dn||wl;return t?e.then(this?t.bind(this):t):e}function Ph(t){let e=xt+1,s=Je.length;for(;e<s;){const d=e+s>>>1,f=Je[d],m=Xi(f);m<t||m===t&&f.flags&2?e=d+1:s=d}return e}function Fs(t){if(!(t.flags&1)){const e=Xi(t),s=Je[Je.length-1];!s||!(t.flags&2)&&e>=Xi(s)?Je.push(t):Je.splice(Ph(e),0,t),t.flags|=1,Tl()}}function Tl(){Dn||(Dn=wl.then(kl))}function Ih(t){_e(t)?gi.push(...t):Bt&&t.id===-1?Bt.splice(li+1,0,t):t.flags&1||(gi.push(t),t.flags|=1),Tl()}function go(t,e,s=xt+1){for(;s<Je.length;s++){const d=Je[s];if(d&&d.flags&2){if(t&&d.id!==t.uid)continue;Je.splice(s,1),s--,d.flags&4&&(d.flags&=-2),d(),d.flags&4||(d.flags&=-2)}}}function Ol(t){if(gi.length){const e=[...new Set(gi)].sort((s,d)=>Xi(s)-Xi(d));if(gi.length=0,Bt){Bt.push(...e);return}for(Bt=e,li=0;li<Bt.length;li++){const s=Bt[li];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Bt=null,li=0}}const Xi=t=>t.id==null?t.flags&2?-1:1/0:t.id;function kl(t){const e=dt;try{for(xt=0;xt<Je.length;xt++){const s=Je[xt];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),nn(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;xt<Je.length;xt++){const s=Je[xt];s&&(s.flags&=-2)}xt=-1,Je.length=0,Ol(),Dn=null,(Je.length||gi.length)&&kl()}}let et=null,Al=null;function Fn(t){const e=et;return et=t,Al=t&&t.type.__scopeId||null,e}function ci(t,e=et,s){if(!e||t._n)return t;const d=(...f)=>{d._d&&To(-1);const m=Fn(e);let y;try{y=t(...f)}finally{Fn(m),d._d&&To(1)}return y};return d._n=!0,d._c=!0,d._d=!0,d}function be(t,e){if(et===null)return t;const s=sr(et),d=t.dirs||(t.dirs=[]);for(let f=0;f<e.length;f++){let[m,y,h,i=Me]=e[f];m&&(xe(m)&&(m={mounted:m,updated:m}),m.deep&&At(y),d.push({dir:m,instance:s,value:y,oldValue:void 0,arg:h,modifiers:i}))}return t}function qt(t,e,s,d){const f=t.dirs,m=e&&e.dirs;for(let y=0;y<f.length;y++){const h=f[y];m&&(h.oldValue=m[y].value);let i=h.dir[d];i&&(It(),mt(i,s,8,[t.el,h,t,e]),Mt())}}const Mh=Symbol("_vte"),El=t=>t.__isTeleport,jt=Symbol("_leaveCb"),gn=Symbol("_enterCb");function Rh(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Bs(()=>{t.isMounted=!0}),jl(()=>{t.isUnmounting=!0}),t}const lt=[Function,Array],Pl={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:lt,onEnter:lt,onAfterEnter:lt,onEnterCancelled:lt,onBeforeLeave:lt,onLeave:lt,onAfterLeave:lt,onLeaveCancelled:lt,onBeforeAppear:lt,onAppear:lt,onAfterAppear:lt,onAppearCancelled:lt},Il=t=>{const e=t.subTree;return e.component?Il(e.component):e},Dh={name:"BaseTransition",props:Pl,setup(t,{slots:e}){const s=rr(),d=Rh();return()=>{const f=e.default&&Dl(e.default(),!0);if(!f||!f.length)return;const m=Ml(f),y=Oe(t),{mode:h}=y;if(d.isLeaving)return xr(m);const i=mo(m);if(!i)return xr(m);let a=Qr(i,y,d,s,r=>a=r);i.type!==Qe&&Yi(i,a);let u=s.subTree&&mo(s.subTree);if(u&&u.type!==Qe&&!ti(i,u)&&Il(s).type!==Qe){let r=Qr(u,y,d,s);if(Yi(u,r),h==="out-in"&&i.type!==Qe)return d.isLeaving=!0,r.afterLeave=()=>{d.isLeaving=!1,s.job.flags&8||s.update(),delete r.afterLeave,u=void 0},xr(m);h==="in-out"&&i.type!==Qe?r.delayLeave=(o,n,c)=>{const p=Rl(d,u);p[String(u.key)]=u,o[jt]=()=>{n(),o[jt]=void 0,delete a.delayedLeave,u=void 0},a.delayedLeave=()=>{c(),delete a.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return m}}};function Ml(t){let e=t[0];if(t.length>1){for(const s of t)if(s.type!==Qe){e=s;break}}return e}const Fh=Dh;function Rl(t,e){const{leavingVNodes:s}=t;let d=s.get(e.type);return d||(d=Object.create(null),s.set(e.type,d)),d}function Qr(t,e,s,d,f){const{appear:m,mode:y,persisted:h=!1,onBeforeEnter:i,onEnter:a,onAfterEnter:u,onEnterCancelled:r,onBeforeLeave:o,onLeave:n,onAfterLeave:c,onLeaveCancelled:p,onBeforeAppear:l,onAppear:g,onAfterAppear:v,onAppearCancelled:b}=e,_=String(t.key),C=Rl(s,t),w=(N,X)=>{N&&mt(N,d,9,X)},k=(N,X)=>{const re=X[1];w(N,X),_e(N)?N.every(F=>F.length<=1)&&re():N.length<=1&&re()},z={mode:y,persisted:h,beforeEnter(N){let X=i;if(!s.isMounted)if(m)X=l||i;else return;N[jt]&&N[jt](!0);const re=C[_];re&&ti(t,re)&&re.el[jt]&&re.el[jt](),w(X,[N])},enter(N){let X=a,re=u,F=r;if(!s.isMounted)if(m)X=g||a,re=v||u,F=b||r;else return;let K=!1;const T=N[gn]=J=>{K||(K=!0,J?w(F,[N]):w(re,[N]),z.delayedLeave&&z.delayedLeave(),N[gn]=void 0)};X?k(X,[N,T]):T()},leave(N,X){const re=String(t.key);if(N[gn]&&N[gn](!0),s.isUnmounting)return X();w(o,[N]);let F=!1;const K=N[jt]=T=>{F||(F=!0,X(),T?w(p,[N]):w(c,[N]),N[jt]=void 0,C[re]===t&&delete C[re])};C[re]=t,n?k(n,[N,K]):K()},clone(N){const X=Qr(N,e,s,d,f);return f&&f(X),X}};return z}function xr(t){if(er(t))return t=Vt(t),t.children=null,t}function mo(t){if(!er(t))return El(t.type)&&t.children?Ml(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:s}=t;if(s){if(e&16)return s[0];if(e&32&&xe(s.default))return s.default()}}function Yi(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Yi(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Dl(t,e=!1,s){let d=[],f=0;for(let m=0;m<t.length;m++){let y=t[m];const h=s==null?y.key:String(s)+String(y.key!=null?y.key:m);y.type===Le?(y.patchFlag&128&&f++,d=d.concat(Dl(y.children,e,h))):(e||y.type!==Qe)&&d.push(h!=null?Vt(y,{key:h}):y)}if(f>1)for(let m=0;m<d.length;m++)d[m].patchFlag=-2;return d}/*! #__NO_SIDE_EFFECTS__ */function Ls(t,e){return xe(t)?(()=>Ne({name:t.name},e,{setup:t}))():t}function Fl(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Ri(t,e,s,d,f=!1){if(_e(t)){t.forEach((c,p)=>Ri(c,e&&(_e(e)?e[p]:e),s,d,f));return}if(Di(d)&&!f){d.shapeFlag&512&&d.type.__asyncResolved&&d.component.subTree.component&&Ri(t,e,s,d.component.subTree);return}const m=d.shapeFlag&4?sr(d.component):d.el,y=f?null:m,{i:h,r:i}=t,a=e&&e.r,u=h.refs===Me?h.refs={}:h.refs,r=h.setupState,o=Oe(r),n=r===Me?()=>!1:c=>ke(o,c);if(a!=null&&a!==i&&(je(a)?(u[a]=null,n(a)&&(r[a]=null)):Ge(a)&&(a.value=null)),xe(i))nn(i,h,12,[y,u]);else{const c=je(i),p=Ge(i);if(c||p){const l=()=>{if(t.f){const g=c?n(i)?r[i]:u[i]:i.value;f?_e(g)&&Ts(g,m):_e(g)?g.includes(m)||g.push(m):c?(u[i]=[m],n(i)&&(r[i]=u[i])):(i.value=[m],t.k&&(u[t.k]=i.value))}else c?(u[i]=y,n(i)&&(r[i]=y)):p&&(i.value=y,t.k&&(u[t.k]=y))};y?(l.id=-1,st(l,s)):l()}}}tn().requestIdleCallback;tn().cancelIdleCallback;const Di=t=>!!t.type.__asyncLoader,er=t=>t.type.__isKeepAlive;function Lh(t,e){Ll(t,"a",e)}function Bh(t,e){Ll(t,"da",e)}function Ll(t,e,s=We){const d=t.__wdc||(t.__wdc=()=>{let f=s;for(;f;){if(f.isDeactivated)return;f=f.parent}return t()});if(tr(e,d,s),s){let f=s.parent;for(;f&&f.parent;)er(f.parent.vnode)&&jh(d,e,s,f),f=f.parent}}function jh(t,e,s,d){const f=tr(e,t,d,!0);js(()=>{Ts(d[e],f)},s)}function tr(t,e,s=We,d=!1){if(s){const f=s[t]||(s[t]=[]),m=e.__weh||(e.__weh=(...y)=>{It();const h=rn(s),i=mt(e,s,t,y);return h(),Mt(),i});return d?f.unshift(m):f.push(m),m}}const Rt=t=>(e,s=We)=>{(!qi||t==="sp")&&tr(t,(...d)=>e(...d),s)},zh=Rt("bm"),Bs=Rt("m"),Nh=Rt("bu"),Bl=Rt("u"),jl=Rt("bum"),js=Rt("um"),Uh=Rt("sp"),Hh=Rt("rtg"),Wh=Rt("rtc");function Vh(t,e=We){tr("ec",t,e)}const zl="components",Xh="directives";function Yh(t,e){return Nl(zl,t,!0,e)||t}const Gh=Symbol.for("v-ndc");function Cr(t){return Nl(Xh,t)}function Nl(t,e,s=!0,d=!1){const f=et||We;if(f){const m=f.type;if(t===zl){const h=Bf(m,!1);if(h&&(h===e||h===ht(e)||h===Jn(ht(e))))return m}const y=vo(f[t]||m[t],e)||vo(f.appContext[t],e);return!y&&d?m:y}}function vo(t,e){return t&&(t[e]||t[ht(e)]||t[Jn(ht(e))])}function ct(t,e,s,d){let f;const m=s&&s[d],y=_e(t);if(y||je(t)){const h=y&&pi(t);let i=!1,a=!1;h&&(i=!ut(t),a=Wt(t),t=Qn(t)),f=new Array(t.length);for(let u=0,r=t.length;u<r;u++)f[u]=e(i?a?Mn(He(t[u])):He(t[u]):t[u],u,void 0,m&&m[u])}else if(typeof t=="number"){f=new Array(t);for(let h=0;h<t;h++)f[h]=e(h+1,h,void 0,m&&m[h])}else if(Fe(t))if(t[Symbol.iterator])f=Array.from(t,(h,i)=>e(h,i,void 0,m&&m[i]));else{const h=Object.keys(t);f=new Array(h.length);for(let i=0,a=h.length;i<a;i++){const u=h[i];f[i]=e(t[u],u,i,m&&m[i])}}else f=[];return s&&(s[d]=f),f}const $r=t=>t?sc(t)?sr(t):$r(t.parent):null,Fi=Ne(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>$r(t.parent),$root:t=>$r(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>zs(t),$forceUpdate:t=>t.f||(t.f=()=>{Fs(t.update)}),$nextTick:t=>t.n||(t.n=Sl.bind(t.proxy)),$watch:t=>yf.bind(t)}),wr=(t,e)=>t!==Me&&!t.__isScriptSetup&&ke(t,e),qh={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:d,data:f,props:m,accessCache:y,type:h,appContext:i}=t;let a;if(e[0]!=="$"){const n=y[e];if(n!==void 0)switch(n){case 1:return d[e];case 2:return f[e];case 4:return s[e];case 3:return m[e]}else{if(wr(d,e))return y[e]=1,d[e];if(f!==Me&&ke(f,e))return y[e]=2,f[e];if((a=t.propsOptions[0])&&ke(a,e))return y[e]=3,m[e];if(s!==Me&&ke(s,e))return y[e]=4,s[e];es&&(y[e]=0)}}const u=Fi[e];let r,o;if(u)return e==="$attrs"&&Xe(t.attrs,"get",""),u(t);if((r=h.__cssModules)&&(r=r[e]))return r;if(s!==Me&&ke(s,e))return y[e]=4,s[e];if(o=i.config.globalProperties,ke(o,e))return o[e]},set({_:t},e,s){const{data:d,setupState:f,ctx:m}=t;return wr(f,e)?(f[e]=s,!0):d!==Me&&ke(d,e)?(d[e]=s,!0):ke(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(m[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:d,appContext:f,propsOptions:m}},y){let h;return!!s[y]||t!==Me&&ke(t,y)||wr(e,y)||(h=m[0])&&ke(h,y)||ke(d,y)||ke(Fi,y)||ke(f.config.globalProperties,y)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:ke(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function Kh(){return Zh().slots}function Zh(){const t=rr();return t.setupContext||(t.setupContext=ac(t))}function yo(t){return _e(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let es=!0;function Jh(t){const e=zs(t),s=t.proxy,d=t.ctx;es=!1,e.beforeCreate&&bo(e.beforeCreate,t,"bc");const{data:f,computed:m,methods:y,watch:h,provide:i,inject:a,created:u,beforeMount:r,mounted:o,beforeUpdate:n,updated:c,activated:p,deactivated:l,beforeDestroy:g,beforeUnmount:v,destroyed:b,unmounted:_,render:C,renderTracked:w,renderTriggered:k,errorCaptured:z,serverPrefetch:N,expose:X,inheritAttrs:re,components:F,directives:K,filters:T}=e;if(a&&Qh(a,d,null),y)for(const ie in y){const ae=y[ie];xe(ae)&&(d[ie]=ae.bind(s))}if(f){const ie=f.call(s,s);Fe(ie)&&(t.data=Gt(ie))}if(es=!0,m)for(const ie in m){const ae=m[ie],A=xe(ae)?ae.bind(s,s):xe(ae.get)?ae.get.bind(s,s):dt,W=!xe(ae)&&xe(ae.set)?ae.set.bind(s):dt,R=ze({get:A,set:W});Object.defineProperty(d,ie,{enumerable:!0,configurable:!0,get:()=>R.value,set:I=>R.value=I})}if(h)for(const ie in h)Ul(h[ie],d,s,ie);if(i){const ie=xe(i)?i.call(s):i;Reflect.ownKeys(ie).forEach(ae=>{xn(ae,ie[ae])})}u&&bo(u,t,"c");function ue(ie,ae){_e(ae)?ae.forEach(A=>ie(A.bind(s))):ae&&ie(ae.bind(s))}if(ue(zh,r),ue(Bs,o),ue(Nh,n),ue(Bl,c),ue(Lh,p),ue(Bh,l),ue(Vh,z),ue(Wh,w),ue(Hh,k),ue(jl,v),ue(js,_),ue(Uh,N),_e(X))if(X.length){const ie=t.exposed||(t.exposed={});X.forEach(ae=>{Object.defineProperty(ie,ae,{get:()=>s[ae],set:A=>s[ae]=A})})}else t.exposed||(t.exposed={});C&&t.render===dt&&(t.render=C),re!=null&&(t.inheritAttrs=re),F&&(t.components=F),K&&(t.directives=K),N&&Fl(t)}function Qh(t,e,s=dt){_e(t)&&(t=ts(t));for(const d in t){const f=t[d];let m;Fe(f)?"default"in f?m=Pt(f.from||d,f.default,!0):m=Pt(f.from||d):m=Pt(f),Ge(m)?Object.defineProperty(e,d,{enumerable:!0,configurable:!0,get:()=>m.value,set:y=>m.value=y}):e[d]=m}}function bo(t,e,s){mt(_e(t)?t.map(d=>d.bind(e.proxy)):t.bind(e.proxy),e,s)}function Ul(t,e,s,d){let f=d.includes(".")?ec(s,d):()=>s[d];if(je(t)){const m=e[t];xe(m)&&qe(f,m)}else if(xe(t))qe(f,t.bind(s));else if(Fe(t))if(_e(t))t.forEach(m=>Ul(m,e,s,d));else{const m=xe(t.handler)?t.handler.bind(s):e[t.handler];xe(m)&&qe(f,m,t)}}function zs(t){const e=t.type,{mixins:s,extends:d}=e,{mixins:f,optionsCache:m,config:{optionMergeStrategies:y}}=t.appContext,h=m.get(e);let i;return h?i=h:!f.length&&!s&&!d?i=e:(i={},f.length&&f.forEach(a=>Ln(i,a,y,!0)),Ln(i,e,y)),Fe(e)&&m.set(e,i),i}function Ln(t,e,s,d=!1){const{mixins:f,extends:m}=e;m&&Ln(t,m,s,!0),f&&f.forEach(y=>Ln(t,y,s,!0));for(const y in e)if(!(d&&y==="expose")){const h=$h[y]||s&&s[y];t[y]=h?h(t[y],e[y]):e[y]}return t}const $h={data:_o,props:xo,emits:xo,methods:Ei,computed:Ei,beforeCreate:Ke,created:Ke,beforeMount:Ke,mounted:Ke,beforeUpdate:Ke,updated:Ke,beforeDestroy:Ke,beforeUnmount:Ke,destroyed:Ke,unmounted:Ke,activated:Ke,deactivated:Ke,errorCaptured:Ke,serverPrefetch:Ke,components:Ei,directives:Ei,watch:tf,provide:_o,inject:ef};function _o(t,e){return e?t?function(){return Ne(xe(t)?t.call(this,this):t,xe(e)?e.call(this,this):e)}:e:t}function ef(t,e){return Ei(ts(t),ts(e))}function ts(t){if(_e(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function Ke(t,e){return t?[...new Set([].concat(t,e))]:e}function Ei(t,e){return t?Ne(Object.create(null),t,e):e}function xo(t,e){return t?_e(t)&&_e(e)?[...new Set([...t,...e])]:Ne(Object.create(null),yo(t),yo(e??{})):e}function tf(t,e){if(!t)return e;if(!e)return t;const s=Ne(Object.create(null),t);for(const d in e)s[d]=Ke(t[d],e[d]);return s}function Hl(){return{app:null,config:{isNativeTag:Uu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let nf=0;function rf(t,e){return function(d,f=null){xe(d)||(d=Ne({},d)),f!=null&&!Fe(f)&&(f=null);const m=Hl(),y=new WeakSet,h=[];let i=!1;const a=m.app={_uid:nf++,_component:d,_props:f,_container:null,_context:m,_instance:null,version:zf,get config(){return m.config},set config(u){},use(u,...r){return y.has(u)||(u&&xe(u.install)?(y.add(u),u.install(a,...r)):xe(u)&&(y.add(u),u(a,...r))),a},mixin(u){return m.mixins.includes(u)||m.mixins.push(u),a},component(u,r){return r?(m.components[u]=r,a):m.components[u]},directive(u,r){return r?(m.directives[u]=r,a):m.directives[u]},mount(u,r,o){if(!i){const n=a._ceVNode||Be(d,f);return n.appContext=m,o===!0?o="svg":o===!1&&(o=void 0),r&&e?e(n,u):t(n,u,o),i=!0,a._container=u,u.__vue_app__=a,sr(n.component)}},onUnmount(u){h.push(u)},unmount(){i&&(mt(h,a._instance,16),t(null,a._container),delete a._container.__vue_app__)},provide(u,r){return m.provides[u]=r,a},runWithContext(u){const r=mi;mi=a;try{return u()}finally{mi=r}}};return a}}let mi=null;function xn(t,e){if(We){let s=We.provides;const d=We.parent&&We.parent.provides;d===s&&(s=We.provides=Object.create(d)),s[t]=e}}function Pt(t,e,s=!1){const d=We||et;if(d||mi){let f=mi?mi._context.provides:d?d.parent==null||d.ce?d.vnode.appContext&&d.vnode.appContext.provides:d.parent.provides:void 0;if(f&&t in f)return f[t];if(arguments.length>1)return s&&xe(e)?e.call(d&&d.proxy):e}}const Wl={},Vl=()=>Object.create(Wl),Xl=t=>Object.getPrototypeOf(t)===Wl;function sf(t,e,s,d=!1){const f={},m=Vl();t.propsDefaults=Object.create(null),Yl(t,e,f,m);for(const y in t.propsOptions[0])y in f||(f[y]=void 0);s?t.props=d?f:bl(f):t.type.props?t.props=f:t.props=m,t.attrs=m}function of(t,e,s,d){const{props:f,attrs:m,vnode:{patchFlag:y}}=t,h=Oe(f),[i]=t.propsOptions;let a=!1;if((d||y>0)&&!(y&16)){if(y&8){const u=t.vnode.dynamicProps;for(let r=0;r<u.length;r++){let o=u[r];if(ir(t.emitsOptions,o))continue;const n=e[o];if(i)if(ke(m,o))n!==m[o]&&(m[o]=n,a=!0);else{const c=ht(o);f[c]=is(i,h,c,n,t,!1)}else n!==m[o]&&(m[o]=n,a=!0)}}}else{Yl(t,e,f,m)&&(a=!0);let u;for(const r in h)(!e||!ke(e,r)&&((u=Yt(r))===r||!ke(e,u)))&&(i?s&&(s[r]!==void 0||s[u]!==void 0)&&(f[r]=is(i,h,r,void 0,t,!0)):delete f[r]);if(m!==h)for(const r in m)(!e||!ke(e,r))&&(delete m[r],a=!0)}a&&kt(t.attrs,"set","")}function Yl(t,e,s,d){const[f,m]=t.propsOptions;let y=!1,h;if(e)for(let i in e){if(Pi(i))continue;const a=e[i];let u;f&&ke(f,u=ht(i))?!m||!m.includes(u)?s[u]=a:(h||(h={}))[u]=a:ir(t.emitsOptions,i)||(!(i in d)||a!==d[i])&&(d[i]=a,y=!0)}if(m){const i=Oe(s),a=h||Me;for(let u=0;u<m.length;u++){const r=m[u];s[r]=is(f,i,r,a[r],t,!ke(a,r))}}return y}function is(t,e,s,d,f,m){const y=t[s];if(y!=null){const h=ke(y,"default");if(h&&d===void 0){const i=y.default;if(y.type!==Function&&!y.skipFactory&&xe(i)){const{propsDefaults:a}=f;if(s in a)d=a[s];else{const u=rn(f);d=a[s]=i.call(null,e),u()}}else d=i;f.ce&&f.ce._setProp(s,d)}y[0]&&(m&&!h?d=!1:y[1]&&(d===""||d===Yt(s))&&(d=!0))}return d}const af=new WeakMap;function Gl(t,e,s=!1){const d=s?af:e.propsCache,f=d.get(t);if(f)return f;const m=t.props,y={},h=[];let i=!1;if(!xe(t)){const u=r=>{i=!0;const[o,n]=Gl(r,e,!0);Ne(y,o),n&&h.push(...n)};!s&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!m&&!i)return Fe(t)&&d.set(t,fi),fi;if(_e(m))for(let u=0;u<m.length;u++){const r=ht(m[u]);Co(r)&&(y[r]=Me)}else if(m)for(const u in m){const r=ht(u);if(Co(r)){const o=m[u],n=y[r]=_e(o)||xe(o)?{type:o}:Ne({},o),c=n.type;let p=!1,l=!0;if(_e(c))for(let g=0;g<c.length;++g){const v=c[g],b=xe(v)&&v.name;if(b==="Boolean"){p=!0;break}else b==="String"&&(l=!1)}else p=xe(c)&&c.name==="Boolean";n[0]=p,n[1]=l,(p||ke(n,"default"))&&h.push(r)}}const a=[y,h];return Fe(t)&&d.set(t,a),a}function Co(t){return t[0]!=="$"&&!Pi(t)}const Ns=t=>t[0]==="_"||t==="$stable",Us=t=>_e(t)?t.map(Ct):[Ct(t)],lf=(t,e,s)=>{if(e._n)return e;const d=ci((...f)=>Us(e(...f)),s);return d._c=!1,d},ql=(t,e,s)=>{const d=t._ctx;for(const f in t){if(Ns(f))continue;const m=t[f];if(xe(m))e[f]=lf(f,m,d);else if(m!=null){const y=Us(m);e[f]=()=>y}}},Kl=(t,e)=>{const s=Us(e);t.slots.default=()=>s},Zl=(t,e,s)=>{for(const d in e)(s||!Ns(d))&&(t[d]=e[d])},cf=(t,e,s)=>{const d=t.slots=Vl();if(t.vnode.shapeFlag&32){const f=e.__;f&&Yr(d,"__",f,!0);const m=e._;m?(Zl(d,e,s),s&&Yr(d,"_",m,!0)):ql(e,d)}else e&&Kl(t,e)},uf=(t,e,s)=>{const{vnode:d,slots:f}=t;let m=!0,y=Me;if(d.shapeFlag&32){const h=e._;h?s&&h===1?m=!1:Zl(f,e,s):(m=!e.$stable,ql(e,f)),y=e}else e&&(Kl(t,e),y={default:1});if(m)for(const h in f)!Ns(h)&&y[h]==null&&delete f[h]};function hf(){typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__!="boolean"&&(tn().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1)}const st=Tf;function ff(t){return df(t)}function df(t,e){hf();const s=tn();s.__VUE__=!0;const{insert:d,remove:f,patchProp:m,createElement:y,createText:h,createComment:i,setText:a,setElementText:u,parentNode:r,nextSibling:o,setScopeId:n=dt,insertStaticContent:c}=t,p=(E,x,M,L=null,S=null,O=null,j=void 0,G=null,Y=!!x.dynamicChildren)=>{if(E===x)return;E&&!ti(E,x)&&(L=H(E),I(E,S,O,!0),E=null),x.patchFlag===-2&&(Y=!1,x.dynamicChildren=null);const{type:D,ref:$,shapeFlag:te}=x;switch(D){case nr:l(E,x,M,L);break;case Qe:g(E,x,M,L);break;case Cn:E==null&&v(x,M,L,j);break;case Le:F(E,x,M,L,S,O,j,G,Y);break;default:te&1?C(E,x,M,L,S,O,j,G,Y):te&6?K(E,x,M,L,S,O,j,G,Y):(te&64||te&128)&&D.process(E,x,M,L,S,O,j,G,Y,ee)}$!=null&&S?Ri($,E&&E.ref,O,x||E,!x):$==null&&E&&E.ref!=null&&Ri(E.ref,null,O,E,!0)},l=(E,x,M,L)=>{if(E==null)d(x.el=h(x.children),M,L);else{const S=x.el=E.el;x.children!==E.children&&a(S,x.children)}},g=(E,x,M,L)=>{E==null?d(x.el=i(x.children||""),M,L):x.el=E.el},v=(E,x,M,L)=>{[E.el,E.anchor]=c(E.children,x,M,L,E.el,E.anchor)},b=({el:E,anchor:x},M,L)=>{let S;for(;E&&E!==x;)S=o(E),d(E,M,L),E=S;d(x,M,L)},_=({el:E,anchor:x})=>{let M;for(;E&&E!==x;)M=o(E),f(E),E=M;f(x)},C=(E,x,M,L,S,O,j,G,Y)=>{x.type==="svg"?j="svg":x.type==="math"&&(j="mathml"),E==null?w(x,M,L,S,O,j,G,Y):N(E,x,S,O,j,G,Y)},w=(E,x,M,L,S,O,j,G)=>{let Y,D;const{props:$,shapeFlag:te,transition:ne,dirs:he}=E;if(Y=E.el=y(E.type,O,$&&$.is,$),te&8?u(Y,E.children):te&16&&z(E.children,Y,null,L,S,Sr(E,O),j,G),he&&qt(E,null,L,"created"),k(Y,E,E.scopeId,j,L),$){for(const me in $)me!=="value"&&!Pi(me)&&m(Y,me,null,$[me],O,L);"value"in $&&m(Y,"value",null,$.value,O),(D=$.onVnodeBeforeMount)&&bt(D,L,E)}he&&qt(E,null,L,"beforeMount");const pe=pf(S,ne);pe&&ne.beforeEnter(Y),d(Y,x,M),((D=$&&$.onVnodeMounted)||pe||he)&&st(()=>{D&&bt(D,L,E),pe&&ne.enter(Y),he&&qt(E,null,L,"mounted")},S)},k=(E,x,M,L,S)=>{if(M&&n(E,M),L)for(let O=0;O<L.length;O++)n(E,L[O]);if(S){let O=S.subTree;if(x===O||ic(O.type)&&(O.ssContent===x||O.ssFallback===x)){const j=S.vnode;k(E,j,j.scopeId,j.slotScopeIds,S.parent)}}},z=(E,x,M,L,S,O,j,G,Y=0)=>{for(let D=Y;D<E.length;D++){const $=E[D]=G?zt(E[D]):Ct(E[D]);p(null,$,x,M,L,S,O,j,G)}},N=(E,x,M,L,S,O,j)=>{const G=x.el=E.el;let{patchFlag:Y,dynamicChildren:D,dirs:$}=x;Y|=E.patchFlag&16;const te=E.props||Me,ne=x.props||Me;let he;if(M&&Kt(M,!1),(he=ne.onVnodeBeforeUpdate)&&bt(he,M,x,E),$&&qt(x,E,M,"beforeUpdate"),M&&Kt(M,!0),(te.innerHTML&&ne.innerHTML==null||te.textContent&&ne.textContent==null)&&u(G,""),D?X(E.dynamicChildren,D,G,M,L,Sr(x,S),O):j||ae(E,x,G,null,M,L,Sr(x,S),O,!1),Y>0){if(Y&16)re(G,te,ne,M,S);else if(Y&2&&te.class!==ne.class&&m(G,"class",null,ne.class,S),Y&4&&m(G,"style",te.style,ne.style,S),Y&8){const pe=x.dynamicProps;for(let me=0;me<pe.length;me++){const ye=pe[me],Ee=te[ye],Te=ne[ye];(Te!==Ee||ye==="value")&&m(G,ye,Ee,Te,S,M)}}Y&1&&E.children!==x.children&&u(G,x.children)}else!j&&D==null&&re(G,te,ne,M,S);((he=ne.onVnodeUpdated)||$)&&st(()=>{he&&bt(he,M,x,E),$&&qt(x,E,M,"updated")},L)},X=(E,x,M,L,S,O,j)=>{for(let G=0;G<x.length;G++){const Y=E[G],D=x[G],$=Y.el&&(Y.type===Le||!ti(Y,D)||Y.shapeFlag&198)?r(Y.el):M;p(Y,D,$,null,L,S,O,j,!0)}},re=(E,x,M,L,S)=>{if(x!==M){if(x!==Me)for(const O in x)!Pi(O)&&!(O in M)&&m(E,O,x[O],null,S,L);for(const O in M){if(Pi(O))continue;const j=M[O],G=x[O];j!==G&&O!=="value"&&m(E,O,G,j,S,L)}"value"in M&&m(E,"value",x.value,M.value,S)}},F=(E,x,M,L,S,O,j,G,Y)=>{const D=x.el=E?E.el:h(""),$=x.anchor=E?E.anchor:h("");let{patchFlag:te,dynamicChildren:ne,slotScopeIds:he}=x;he&&(G=G?G.concat(he):he),E==null?(d(D,M,L),d($,M,L),z(x.children||[],M,$,S,O,j,G,Y)):te>0&&te&64&&ne&&E.dynamicChildren?(X(E.dynamicChildren,ne,M,S,O,j,G),(x.key!=null||S&&x===S.subTree)&&Jl(E,x,!0)):ae(E,x,M,$,S,O,j,G,Y)},K=(E,x,M,L,S,O,j,G,Y)=>{x.slotScopeIds=G,E==null?x.shapeFlag&512?S.ctx.activate(x,M,L,j,Y):T(x,M,L,S,O,j,Y):J(E,x,Y)},T=(E,x,M,L,S,O,j)=>{const G=E.component=Rf(E,L,S);if(er(E)&&(G.ctx.renderer=ee),Df(G,!1,j),G.asyncDep){if(S&&S.registerDep(G,ue,j),!E.el){const Y=G.subTree=Be(Qe);g(null,Y,x,M)}}else ue(G,E,x,M,S,O,j)},J=(E,x,M)=>{const L=x.component=E.component;if(wf(E,x,M))if(L.asyncDep&&!L.asyncResolved){ie(L,x,M);return}else L.next=x,L.update();else x.el=E.el,L.vnode=x},ue=(E,x,M,L,S,O,j)=>{const G=()=>{if(E.isMounted){let{next:te,bu:ne,u:he,parent:pe,vnode:me}=E;{const Se=Ql(E);if(Se){te&&(te.el=me.el,ie(E,te,j)),Se.asyncDep.then(()=>{E.isUnmounted||G()});return}}let ye=te,Ee;Kt(E,!1),te?(te.el=me.el,ie(E,te,j)):te=me,ne&&_n(ne),(Ee=te.props&&te.props.onVnodeBeforeUpdate)&&bt(Ee,pe,te,me),Kt(E,!0);const Te=Tr(E),Pe=E.subTree;E.subTree=Te,p(Pe,Te,r(Pe.el),H(Pe),E,S,O),te.el=Te.el,ye===null&&Sf(E,Te.el),he&&st(he,S),(Ee=te.props&&te.props.onVnodeUpdated)&&st(()=>bt(Ee,pe,te,me),S)}else{let te;const{el:ne,props:he}=x,{bm:pe,m:me,parent:ye,root:Ee,type:Te}=E,Pe=Di(x);if(Kt(E,!1),pe&&_n(pe),!Pe&&(te=he&&he.onVnodeBeforeMount)&&bt(te,ye,x),Kt(E,!0),ne&&fe){const Se=()=>{E.subTree=Tr(E),fe(ne,E.subTree,E,S,null)};Pe&&Te.__asyncHydrate?Te.__asyncHydrate(ne,E,Se):Se()}else{Ee.ce&&Ee.ce._def.shadowRoot!==!1&&Ee.ce._injectChildStyle(Te);const Se=E.subTree=Tr(E);p(null,Se,M,L,E,S,O),x.el=Se.el}if(me&&st(me,S),!Pe&&(te=he&&he.onVnodeMounted)){const Se=x;st(()=>bt(te,ye,Se),S)}(x.shapeFlag&256||ye&&Di(ye.vnode)&&ye.vnode.shapeFlag&256)&&E.a&&st(E.a,S),E.isMounted=!0,x=M=L=null}};E.scope.on();const Y=E.effect=new sl(G);E.scope.off();const D=E.update=Y.run.bind(Y),$=E.job=Y.runIfDirty.bind(Y);$.i=E,$.id=E.uid,Y.scheduler=()=>Fs($),Kt(E,!0),D()},ie=(E,x,M)=>{x.component=E;const L=E.vnode.props;E.vnode=x,E.next=null,of(E,x.props,L,M),uf(E,x.children,M),It(),go(E),Mt()},ae=(E,x,M,L,S,O,j,G,Y=!1)=>{const D=E&&E.children,$=E?E.shapeFlag:0,te=x.children,{patchFlag:ne,shapeFlag:he}=x;if(ne>0){if(ne&128){W(D,te,M,L,S,O,j,G,Y);return}else if(ne&256){A(D,te,M,L,S,O,j,G,Y);return}}he&8?($&16&&Z(D,S,O),te!==D&&u(M,te)):$&16?he&16?W(D,te,M,L,S,O,j,G,Y):Z(D,S,O,!0):($&8&&u(M,""),he&16&&z(te,M,L,S,O,j,G,Y))},A=(E,x,M,L,S,O,j,G,Y)=>{E=E||fi,x=x||fi;const D=E.length,$=x.length,te=Math.min(D,$);let ne;for(ne=0;ne<te;ne++){const he=x[ne]=Y?zt(x[ne]):Ct(x[ne]);p(E[ne],he,M,null,S,O,j,G,Y)}D>$?Z(E,S,O,!0,!1,te):z(x,M,L,S,O,j,G,Y,te)},W=(E,x,M,L,S,O,j,G,Y)=>{let D=0;const $=x.length;let te=E.length-1,ne=$-1;for(;D<=te&&D<=ne;){const he=E[D],pe=x[D]=Y?zt(x[D]):Ct(x[D]);if(ti(he,pe))p(he,pe,M,null,S,O,j,G,Y);else break;D++}for(;D<=te&&D<=ne;){const he=E[te],pe=x[ne]=Y?zt(x[ne]):Ct(x[ne]);if(ti(he,pe))p(he,pe,M,null,S,O,j,G,Y);else break;te--,ne--}if(D>te){if(D<=ne){const he=ne+1,pe=he<$?x[he].el:L;for(;D<=ne;)p(null,x[D]=Y?zt(x[D]):Ct(x[D]),M,pe,S,O,j,G,Y),D++}}else if(D>ne)for(;D<=te;)I(E[D],S,O,!0),D++;else{const he=D,pe=D,me=new Map;for(D=pe;D<=ne;D++){const De=x[D]=Y?zt(x[D]):Ct(x[D]);De.key!=null&&me.set(De.key,D)}let ye,Ee=0;const Te=ne-pe+1;let Pe=!1,Se=0;const nt=new Array(Te);for(D=0;D<Te;D++)nt[D]=0;for(D=he;D<=te;D++){const De=E[D];if(Ee>=Te){I(De,S,O,!0);continue}let rt;if(De.key!=null)rt=me.get(De.key);else for(ye=pe;ye<=ne;ye++)if(nt[ye-pe]===0&&ti(De,x[ye])){rt=ye;break}rt===void 0?I(De,S,O,!0):(nt[rt-pe]=D+1,rt>=Se?Se=rt:Pe=!0,p(De,x[rt],M,null,S,O,j,G,Y),Ee++)}const Dt=Pe?gf(nt):fi;for(ye=Dt.length-1,D=Te-1;D>=0;D--){const De=pe+D,rt=x[De],un=De+1<$?x[De+1].el:L;nt[D]===0?p(null,rt,M,un,S,O,j,G,Y):Pe&&(ye<0||D!==Dt[ye]?R(rt,M,un,2):ye--)}}},R=(E,x,M,L,S=null)=>{const{el:O,type:j,transition:G,children:Y,shapeFlag:D}=E;if(D&6){R(E.component.subTree,x,M,L);return}if(D&128){E.suspense.move(x,M,L);return}if(D&64){j.move(E,x,M,ee);return}if(j===Le){d(O,x,M);for(let te=0;te<Y.length;te++)R(Y[te],x,M,L);d(E.anchor,x,M);return}if(j===Cn){b(E,x,M);return}if(L!==2&&D&1&&G)if(L===0)G.beforeEnter(O),d(O,x,M),st(()=>G.enter(O),S);else{const{leave:te,delayLeave:ne,afterLeave:he}=G,pe=()=>{E.ctx.isUnmounted?f(O):d(O,x,M)},me=()=>{te(O,()=>{pe(),he&&he()})};ne?ne(O,pe,me):me()}else d(O,x,M)},I=(E,x,M,L=!1,S=!1)=>{const{type:O,props:j,ref:G,children:Y,dynamicChildren:D,shapeFlag:$,patchFlag:te,dirs:ne,cacheIndex:he}=E;if(te===-2&&(S=!1),G!=null&&(It(),Ri(G,null,M,E,!0),Mt()),he!=null&&(x.renderCache[he]=void 0),$&256){x.ctx.deactivate(E);return}const pe=$&1&&ne,me=!Di(E);let ye;if(me&&(ye=j&&j.onVnodeBeforeUnmount)&&bt(ye,x,E),$&6)P(E.component,M,L);else{if($&128){E.suspense.unmount(M,L);return}pe&&qt(E,null,x,"beforeUnmount"),$&64?E.type.remove(E,x,M,ee,L):D&&!D.hasOnce&&(O!==Le||te>0&&te&64)?Z(D,x,M,!1,!0):(O===Le&&te&384||!S&&$&16)&&Z(Y,x,M),L&&Q(E)}(me&&(ye=j&&j.onVnodeUnmounted)||pe)&&st(()=>{ye&&bt(ye,x,E),pe&&qt(E,null,x,"unmounted")},M)},Q=E=>{const{type:x,el:M,anchor:L,transition:S}=E;if(x===Le){U(M,L);return}if(x===Cn){_(E);return}const O=()=>{f(M),S&&!S.persisted&&S.afterLeave&&S.afterLeave()};if(E.shapeFlag&1&&S&&!S.persisted){const{leave:j,delayLeave:G}=S,Y=()=>j(M,O);G?G(E.el,O,Y):Y()}else O()},U=(E,x)=>{let M;for(;E!==x;)M=o(E),f(E),E=M;f(x)},P=(E,x,M)=>{const{bum:L,scope:S,job:O,subTree:j,um:G,m:Y,a:D,parent:$,slots:{__:te}}=E;wo(Y),wo(D),L&&_n(L),$&&_e(te)&&te.forEach(ne=>{$.renderCache[ne]=void 0}),S.stop(),O&&(O.flags|=8,I(j,E,x,M)),G&&st(G,x),st(()=>{E.isUnmounted=!0},x),x&&x.pendingBranch&&!x.isUnmounted&&E.asyncDep&&!E.asyncResolved&&E.suspenseId===x.pendingId&&(x.deps--,x.deps===0&&x.resolve())},Z=(E,x,M,L=!1,S=!1,O=0)=>{for(let j=O;j<E.length;j++)I(E[j],x,M,L,S)},H=E=>{if(E.shapeFlag&6)return H(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const x=o(E.anchor||E.el),M=x&&x[Mh];return M?o(M):x};let q=!1;const V=(E,x,M)=>{E==null?x._vnode&&I(x._vnode,null,null,!0):p(x._vnode||null,E,x,null,null,null,M),x._vnode=E,q||(q=!0,go(),Ol(),q=!1)},ee={p,um:I,m:R,r:Q,mt:T,mc:z,pc:ae,pbc:X,n:H,o:t};let se,fe;return e&&([se,fe]=e(ee)),{render:V,hydrate:se,createApp:rf(V,se)}}function Sr({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function Kt({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function pf(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Jl(t,e,s=!1){const d=t.children,f=e.children;if(_e(d)&&_e(f))for(let m=0;m<d.length;m++){const y=d[m];let h=f[m];h.shapeFlag&1&&!h.dynamicChildren&&((h.patchFlag<=0||h.patchFlag===32)&&(h=f[m]=zt(f[m]),h.el=y.el),!s&&h.patchFlag!==-2&&Jl(y,h)),h.type===nr&&(h.el=y.el),h.type===Qe&&!h.el&&(h.el=y.el)}}function gf(t){const e=t.slice(),s=[0];let d,f,m,y,h;const i=t.length;for(d=0;d<i;d++){const a=t[d];if(a!==0){if(f=s[s.length-1],t[f]<a){e[d]=f,s.push(d);continue}for(m=0,y=s.length-1;m<y;)h=m+y>>1,t[s[h]]<a?m=h+1:y=h;a<t[s[m]]&&(m>0&&(e[d]=s[m-1]),s[m]=d)}}for(m=s.length,y=s[m-1];m-- >0;)s[m]=y,y=e[y];return s}function Ql(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Ql(e)}function wo(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const mf=Symbol.for("v-scx"),vf=()=>Pt(mf);function qe(t,e,s){return $l(t,e,s)}function $l(t,e,s=Me){const{immediate:d,deep:f,flush:m,once:y}=s,h=Ne({},s),i=e&&d||!e&&m!=="post";let a;if(qi){if(m==="sync"){const n=vf();a=n.__watcherHandles||(n.__watcherHandles=[])}else if(!i){const n=()=>{};return n.stop=dt,n.resume=dt,n.pause=dt,n}}const u=We;h.call=(n,c,p)=>mt(n,u,c,p);let r=!1;m==="post"?h.scheduler=n=>{st(n,u&&u.suspense)}:m!=="sync"&&(r=!0,h.scheduler=(n,c)=>{c?n():Fs(n)}),h.augmentJob=n=>{e&&(n.flags|=4),r&&(n.flags|=2,u&&(n.id=u.uid,n.i=u))};const o=Ah(t,e,h);return qi&&(a?a.push(o):i&&o()),o}function yf(t,e,s){const d=this.proxy,f=je(t)?t.includes(".")?ec(d,t):()=>d[t]:t.bind(d,d);let m;xe(e)?m=e:(m=e.handler,s=e);const y=rn(this),h=$l(f,m.bind(d),s);return y(),h}function ec(t,e){const s=e.split(".");return()=>{let d=t;for(let f=0;f<s.length&&d;f++)d=d[s[f]];return d}}const bf=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${ht(e)}Modifiers`]||t[`${Yt(e)}Modifiers`];function _f(t,e,...s){if(t.isUnmounted)return;const d=t.vnode.props||Me;let f=s;const m=e.startsWith("update:"),y=m&&bf(d,e.slice(7));y&&(y.trim&&(f=s.map(u=>je(u)?u.trim():u)),y.number&&(f=s.map(Gr)));let h,i=d[h=mr(e)]||d[h=mr(ht(e))];!i&&m&&(i=d[h=mr(Yt(e))]),i&&mt(i,t,6,f);const a=d[h+"Once"];if(a){if(!t.emitted)t.emitted={};else if(t.emitted[h])return;t.emitted[h]=!0,mt(a,t,6,f)}}function tc(t,e,s=!1){const d=e.emitsCache,f=d.get(t);if(f!==void 0)return f;const m=t.emits;let y={},h=!1;if(!xe(t)){const i=a=>{const u=tc(a,e,!0);u&&(h=!0,Ne(y,u))};!s&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}return!m&&!h?(Fe(t)&&d.set(t,null),null):(_e(m)?m.forEach(i=>y[i]=null):Ne(y,m),Fe(t)&&d.set(t,y),y)}function ir(t,e){return!t||!qn(e)?!1:(e=e.slice(2).replace(/Once$/,""),ke(t,e[0].toLowerCase()+e.slice(1))||ke(t,Yt(e))||ke(t,e))}function Tr(t){const{type:e,vnode:s,proxy:d,withProxy:f,propsOptions:[m],slots:y,attrs:h,emit:i,render:a,renderCache:u,props:r,data:o,setupState:n,ctx:c,inheritAttrs:p}=t,l=Fn(t);let g,v;try{if(s.shapeFlag&4){const _=f||d,C=_;g=Ct(a.call(C,_,u,r,n,o,c)),v=h}else{const _=e;g=Ct(_.length>1?_(r,{attrs:h,slots:y,emit:i}):_(r,null)),v=e.props?h:xf(h)}}catch(_){Li.length=0,$n(_,t,1),g=Be(Qe)}let b=g;if(v&&p!==!1){const _=Object.keys(v),{shapeFlag:C}=b;_.length&&C&7&&(m&&_.some(Ss)&&(v=Cf(v,m)),b=Vt(b,v,!1,!0))}return s.dirs&&(b=Vt(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(s.dirs):s.dirs),s.transition&&Yi(b,s.transition),g=b,Fn(l),g}const xf=t=>{let e;for(const s in t)(s==="class"||s==="style"||qn(s))&&((e||(e={}))[s]=t[s]);return e},Cf=(t,e)=>{const s={};for(const d in t)(!Ss(d)||!(d.slice(9)in e))&&(s[d]=t[d]);return s};function wf(t,e,s){const{props:d,children:f,component:m}=t,{props:y,children:h,patchFlag:i}=e,a=m.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&i>=0){if(i&1024)return!0;if(i&16)return d?So(d,y,a):!!y;if(i&8){const u=e.dynamicProps;for(let r=0;r<u.length;r++){const o=u[r];if(y[o]!==d[o]&&!ir(a,o))return!0}}}else return(f||h)&&(!h||!h.$stable)?!0:d===y?!1:d?y?So(d,y,a):!0:!!y;return!1}function So(t,e,s){const d=Object.keys(e);if(d.length!==Object.keys(t).length)return!0;for(let f=0;f<d.length;f++){const m=d[f];if(e[m]!==t[m]&&!ir(s,m))return!0}return!1}function Sf({vnode:t,parent:e},s){for(;e;){const d=e.subTree;if(d.suspense&&d.suspense.activeBranch===t&&(d.el=t.el),d===t)(t=e.vnode).el=s,e=e.parent;else break}}const ic=t=>t.__isSuspense;function Tf(t,e){e&&e.pendingBranch?_e(t)?e.effects.push(...t):e.effects.push(t):Ih(t)}const Le=Symbol.for("v-fgt"),nr=Symbol.for("v-txt"),Qe=Symbol.for("v-cmt"),Cn=Symbol.for("v-stc"),Li=[];let ot=null;function le(t=!1){Li.push(ot=t?null:[])}function Of(){Li.pop(),ot=Li[Li.length-1]||null}let Gi=1;function To(t,e=!1){Gi+=t,t<0&&ot&&e&&(ot.hasOnce=!0)}function nc(t){return t.dynamicChildren=Gi>0?ot||fi:null,Of(),Gi>0&&ot&&ot.push(t),t}function ce(t,e,s,d,f,m){return nc(B(t,e,s,d,f,m,!0))}function kf(t,e,s,d,f){return nc(Be(t,e,s,d,f,!0))}function Bn(t){return t?t.__v_isVNode===!0:!1}function ti(t,e){return t.type===e.type&&t.key===e.key}const rc=({key:t})=>t??null,wn=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?je(t)||Ge(t)||xe(t)?{i:et,r:t,k:e,f:!!s}:t:null);function B(t,e=null,s=null,d=0,f=null,m=t===Le?0:1,y=!1,h=!1){const i={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&rc(e),ref:e&&wn(e),scopeId:Al,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:m,patchFlag:d,dynamicProps:f,dynamicChildren:null,appContext:null,ctx:et};return h?(Hs(i,s),m&128&&t.normalize(i)):s&&(i.shapeFlag|=je(s)?8:16),Gi>0&&!y&&ot&&(i.patchFlag>0||m&6)&&i.patchFlag!==32&&ot.push(i),i}const Be=Af;function Af(t,e=null,s=null,d=0,f=null,m=!1){if((!t||t===Gh)&&(t=Qe),Bn(t)){const h=Vt(t,e,!0);return s&&Hs(h,s),Gi>0&&!m&&ot&&(h.shapeFlag&6?ot[ot.indexOf(t)]=h:ot.push(h)),h.patchFlag=-2,h}if(jf(t)&&(t=t.__vccOpts),e){e=Ef(e);let{class:h,style:i}=e;h&&!je(h)&&(e.class=Ie(h)),Fe(i)&&(Ds(i)&&!_e(i)&&(i=Ne({},i)),e.style=ks(i))}const y=je(t)?1:ic(t)?128:El(t)?64:Fe(t)?4:xe(t)?2:0;return B(t,e,s,d,f,y,m,!0)}function Ef(t){return t?Ds(t)||Xl(t)?Ne({},t):t:null}function Vt(t,e,s=!1,d=!1){const{props:f,ref:m,patchFlag:y,children:h,transition:i}=t,a=e?Pf(f||{},e):f,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&rc(a),ref:e&&e.ref?s&&m?_e(m)?m.concat(wn(e)):[m,wn(e)]:wn(e):m,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:h,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Le?y===-1?16:y|16:y,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:i,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Vt(t.ssContent),ssFallback:t.ssFallback&&Vt(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return i&&d&&Yi(u,i.clone(u)),u}function Ze(t=" ",e=0){return Be(nr,null,t,e)}function ai(t,e){const s=Be(Cn,null,t);return s.staticCount=e,s}function ge(t="",e=!1){return e?(le(),kf(Qe,null,t)):Be(Qe,null,t)}function Ct(t){return t==null||typeof t=="boolean"?Be(Qe):_e(t)?Be(Le,null,t.slice()):Bn(t)?zt(t):Be(nr,null,String(t))}function zt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Vt(t)}function Hs(t,e){let s=0;const{shapeFlag:d}=t;if(e==null)e=null;else if(_e(e))s=16;else if(typeof e=="object")if(d&65){const f=e.default;f&&(f._c&&(f._d=!1),Hs(t,f()),f._c&&(f._d=!0));return}else{s=32;const f=e._;!f&&!Xl(e)?e._ctx=et:f===3&&et&&(et.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else xe(e)?(e={default:e,_ctx:et},s=32):(e=String(e),d&64?(s=16,e=[Ze(e)]):s=8);t.children=e,t.shapeFlag|=s}function Pf(...t){const e={};for(let s=0;s<t.length;s++){const d=t[s];for(const f in d)if(f==="class")e.class!==d.class&&(e.class=Ie([e.class,d.class]));else if(f==="style")e.style=ks([e.style,d.style]);else if(qn(f)){const m=e[f],y=d[f];y&&m!==y&&!(_e(m)&&m.includes(y))&&(e[f]=m?[].concat(m,y):y)}else f!==""&&(e[f]=d[f])}return e}function bt(t,e,s,d=null){mt(t,e,7,[s,d])}const If=Hl();let Mf=0;function Rf(t,e,s){const d=t.type,f=(e?e.appContext:t.appContext)||If,m={uid:Mf++,vnode:t,type:d,parent:e,appContext:f,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new th(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(f.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Gl(d,f),emitsOptions:tc(d,f),emit:null,emitted:null,propsDefaults:Me,inheritAttrs:d.inheritAttrs,ctx:Me,data:Me,props:Me,attrs:Me,slots:Me,refs:Me,setupState:Me,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return m.ctx={_:m},m.root=e?e.root:m,m.emit=_f.bind(null,m),t.ce&&t.ce(m),m}let We=null;const rr=()=>We||et;let jn,ns;{const t=tn(),e=(s,d)=>{let f;return(f=t[s])||(f=t[s]=[]),f.push(d),m=>{f.length>1?f.forEach(y=>y(m)):f[0](m)}};jn=e("__VUE_INSTANCE_SETTERS__",s=>We=s),ns=e("__VUE_SSR_SETTERS__",s=>qi=s)}const rn=t=>{const e=We;return jn(t),t.scope.on(),()=>{t.scope.off(),jn(e)}},Oo=()=>{We&&We.scope.off(),jn(null)};function sc(t){return t.vnode.shapeFlag&4}let qi=!1;function Df(t,e=!1,s=!1){e&&ns(e);const{props:d,children:f}=t.vnode,m=sc(t);sf(t,d,m,e),cf(t,f,s||e);const y=m?Ff(t,e):void 0;return e&&ns(!1),y}function Ff(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,qh);const{setup:d}=s;if(d){It();const f=t.setupContext=d.length>1?ac(t):null,m=rn(t),y=nn(d,t,0,[t.props,f]),h=Qa(y);if(Mt(),m(),(h||t.sp)&&!Di(t)&&Fl(t),h){if(y.then(Oo,Oo),e)return y.then(i=>{ko(t,i,e)}).catch(i=>{$n(i,t,0)});t.asyncDep=y}else ko(t,y,e)}else oc(t,e)}function ko(t,e,s){xe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Fe(e)&&(t.setupState=Cl(e)),oc(t,s)}let Ao;function oc(t,e,s){const d=t.type;if(!t.render){if(!e&&Ao&&!d.render){const f=d.template||zs(t).template;if(f){const{isCustomElement:m,compilerOptions:y}=t.appContext.config,{delimiters:h,compilerOptions:i}=d,a=Ne(Ne({isCustomElement:m,delimiters:h},y),i);d.render=Ao(f,a)}}t.render=d.render||dt}{const f=rn(t);It();try{Jh(t)}finally{Mt(),f()}}}const Lf={get(t,e){return Xe(t,"get",""),t[e]}};function ac(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,Lf),slots:t.slots,emit:t.emit,expose:e}}function sr(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Cl(xh(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in Fi)return Fi[s](t)},has(e,s){return s in e||s in Fi}})):t.proxy}function Bf(t,e=!0){return xe(t)?t.displayName||t.name:t.name||e&&t.__name}function jf(t){return xe(t)&&"__vccOpts"in t}const ze=(t,e)=>Oh(t,e,qi);function Ki(t,e,s){const d=arguments.length;return d===2?Fe(e)&&!_e(e)?Bn(e)?Be(t,null,[e]):Be(t,e):Be(t,null,e):(d>3?s=Array.prototype.slice.call(arguments,2):d===3&&Bn(s)&&(s=[s]),Be(t,e,s))}const zf="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let rs;const Eo=typeof window<"u"&&window.trustedTypes;if(Eo)try{rs=Eo.createPolicy("vue",{createHTML:t=>t})}catch{}const lc=rs?t=>rs.createHTML(t):t=>t,Nf="http://www.w3.org/2000/svg",Uf="http://www.w3.org/1998/Math/MathML",Ot=typeof document<"u"?document:null,Po=Ot&&Ot.createElement("template"),Hf={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,d)=>{const f=e==="svg"?Ot.createElementNS(Nf,t):e==="mathml"?Ot.createElementNS(Uf,t):s?Ot.createElement(t,{is:s}):Ot.createElement(t);return t==="select"&&d&&d.multiple!=null&&f.setAttribute("multiple",d.multiple),f},createText:t=>Ot.createTextNode(t),createComment:t=>Ot.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ot.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,d,f,m){const y=s?s.previousSibling:e.lastChild;if(f&&(f===m||f.nextSibling))for(;e.insertBefore(f.cloneNode(!0),s),!(f===m||!(f=f.nextSibling)););else{Po.innerHTML=lc(d==="svg"?`<svg>${t}</svg>`:d==="mathml"?`<math>${t}</math>`:t);const h=Po.content;if(d==="svg"||d==="mathml"){const i=h.firstChild;for(;i.firstChild;)h.appendChild(i.firstChild);h.removeChild(i)}e.insertBefore(h,s)}return[y?y.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},Ft="transition",Si="animation",Zi=Symbol("_vtc"),cc={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Wf=Ne({},Pl,cc),Vf=t=>(t.displayName="Transition",t.props=Wf,t),Ti=Vf((t,{slots:e})=>Ki(Fh,Xf(t),e)),Zt=(t,e=[])=>{_e(t)?t.forEach(s=>s(...e)):t&&t(...e)},Io=t=>t?_e(t)?t.some(e=>e.length>1):t.length>1:!1;function Xf(t){const e={};for(const F in t)F in cc||(e[F]=t[F]);if(t.css===!1)return e;const{name:s="v",type:d,duration:f,enterFromClass:m=`${s}-enter-from`,enterActiveClass:y=`${s}-enter-active`,enterToClass:h=`${s}-enter-to`,appearFromClass:i=m,appearActiveClass:a=y,appearToClass:u=h,leaveFromClass:r=`${s}-leave-from`,leaveActiveClass:o=`${s}-leave-active`,leaveToClass:n=`${s}-leave-to`}=t,c=Yf(f),p=c&&c[0],l=c&&c[1],{onBeforeEnter:g,onEnter:v,onEnterCancelled:b,onLeave:_,onLeaveCancelled:C,onBeforeAppear:w=g,onAppear:k=v,onAppearCancelled:z=b}=e,N=(F,K,T,J)=>{F._enterCancelled=J,Jt(F,K?u:h),Jt(F,K?a:y),T&&T()},X=(F,K)=>{F._isLeaving=!1,Jt(F,r),Jt(F,n),Jt(F,o),K&&K()},re=F=>(K,T)=>{const J=F?k:v,ue=()=>N(K,F,T);Zt(J,[K,ue]),Mo(()=>{Jt(K,F?i:m),St(K,F?u:h),Io(J)||Ro(K,d,p,ue)})};return Ne(e,{onBeforeEnter(F){Zt(g,[F]),St(F,m),St(F,y)},onBeforeAppear(F){Zt(w,[F]),St(F,i),St(F,a)},onEnter:re(!1),onAppear:re(!0),onLeave(F,K){F._isLeaving=!0;const T=()=>X(F,K);St(F,r),F._enterCancelled?(St(F,o),Lo()):(Lo(),St(F,o)),Mo(()=>{F._isLeaving&&(Jt(F,r),St(F,n),Io(_)||Ro(F,d,l,T))}),Zt(_,[F,T])},onEnterCancelled(F){N(F,!1,void 0,!0),Zt(b,[F])},onAppearCancelled(F){N(F,!0,void 0,!0),Zt(z,[F])},onLeaveCancelled(F){X(F),Zt(C,[F])}})}function Yf(t){if(t==null)return null;if(Fe(t))return[Or(t.enter),Or(t.leave)];{const e=Or(t);return[e,e]}}function Or(t){return Yu(t)}function St(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.add(s)),(t[Zi]||(t[Zi]=new Set)).add(e)}function Jt(t,e){e.split(/\s+/).forEach(d=>d&&t.classList.remove(d));const s=t[Zi];s&&(s.delete(e),s.size||(t[Zi]=void 0))}function Mo(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Gf=0;function Ro(t,e,s,d){const f=t._endId=++Gf,m=()=>{f===t._endId&&d()};if(s!=null)return setTimeout(m,s);const{type:y,timeout:h,propCount:i}=qf(t,e);if(!y)return d();const a=y+"end";let u=0;const r=()=>{t.removeEventListener(a,o),m()},o=n=>{n.target===t&&++u>=i&&r()};setTimeout(()=>{u<i&&r()},h+1),t.addEventListener(a,o)}function qf(t,e){const s=window.getComputedStyle(t),d=c=>(s[c]||"").split(", "),f=d(`${Ft}Delay`),m=d(`${Ft}Duration`),y=Do(f,m),h=d(`${Si}Delay`),i=d(`${Si}Duration`),a=Do(h,i);let u=null,r=0,o=0;e===Ft?y>0&&(u=Ft,r=y,o=m.length):e===Si?a>0&&(u=Si,r=a,o=i.length):(r=Math.max(y,a),u=r>0?y>a?Ft:Si:null,o=u?u===Ft?m.length:i.length:0);const n=u===Ft&&/\b(transform|all)(,|$)/.test(d(`${Ft}Property`).toString());return{type:u,timeout:r,propCount:o,hasTransform:n}}function Do(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((s,d)=>Fo(s)+Fo(t[d])))}function Fo(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Lo(){return document.body.offsetHeight}function Kf(t,e,s){const d=t[Zi];d&&(e=(e?[e,...d]:[...d]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const zn=Symbol("_vod"),uc=Symbol("_vsh"),Zf={beforeMount(t,{value:e},{transition:s}){t[zn]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):Oi(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:d}){!e!=!s&&(d?e?(d.beforeEnter(t),Oi(t,!0),d.enter(t)):d.leave(t,()=>{Oi(t,!1)}):Oi(t,e))},beforeUnmount(t,{value:e}){Oi(t,e)}};function Oi(t,e){t.style.display=e?t[zn]:"none",t[uc]=!e}const Jf=Symbol(""),Qf=/(^|;)\s*display\s*:/;function $f(t,e,s){const d=t.style,f=je(s);let m=!1;if(s&&!f){if(e)if(je(e))for(const y of e.split(";")){const h=y.slice(0,y.indexOf(":")).trim();s[h]==null&&Sn(d,h,"")}else for(const y in e)s[y]==null&&Sn(d,y,"");for(const y in s)y==="display"&&(m=!0),Sn(d,y,s[y])}else if(f){if(e!==s){const y=d[Jf];y&&(s+=";"+y),d.cssText=s,m=Qf.test(s)}}else e&&t.removeAttribute("style");zn in t&&(t[zn]=m?d.display:"",t[uc]&&(d.display="none"))}const Bo=/\s*!important$/;function Sn(t,e,s){if(_e(s))s.forEach(d=>Sn(t,e,d));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const d=ed(t,e);Bo.test(s)?t.setProperty(Yt(d),s.replace(Bo,""),"important"):t[d]=s}}const jo=["Webkit","Moz","ms"],kr={};function ed(t,e){const s=kr[e];if(s)return s;let d=ht(e);if(d!=="filter"&&d in t)return kr[e]=d;d=Jn(d);for(let f=0;f<jo.length;f++){const m=jo[f]+d;if(m in t)return kr[e]=m}return e}const zo="http://www.w3.org/1999/xlink";function No(t,e,s,d,f,m=eh(e)){d&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(zo,e.slice(6,e.length)):t.setAttributeNS(zo,e,s):s==null||m&&!tl(s)?t.removeAttribute(e):t.setAttribute(e,m?"":Xt(s)?String(s):s)}function Uo(t,e,s,d,f){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?lc(s):s);return}const m=t.tagName;if(e==="value"&&m!=="PROGRESS"&&!m.includes("-")){const h=m==="OPTION"?t.getAttribute("value")||"":t.value,i=s==null?t.type==="checkbox"?"on":"":String(s);(h!==i||!("_value"in t))&&(t.value=i),s==null&&t.removeAttribute(e),t._value=s;return}let y=!1;if(s===""||s==null){const h=typeof t[e];h==="boolean"?s=tl(s):s==null&&h==="string"?(s="",y=!0):h==="number"&&(s=0,y=!0)}try{t[e]=s}catch{}y&&t.removeAttribute(f||e)}function ui(t,e,s,d){t.addEventListener(e,s,d)}function td(t,e,s,d){t.removeEventListener(e,s,d)}const Ho=Symbol("_vei");function id(t,e,s,d,f=null){const m=t[Ho]||(t[Ho]={}),y=m[e];if(d&&y)y.value=d;else{const[h,i]=nd(e);if(d){const a=m[e]=od(d,f);ui(t,h,a,i)}else y&&(td(t,h,y,i),m[e]=void 0)}}const Wo=/(?:Once|Passive|Capture)$/;function nd(t){let e;if(Wo.test(t)){e={};let d;for(;d=t.match(Wo);)t=t.slice(0,t.length-d[0].length),e[d[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Yt(t.slice(2)),e]}let Ar=0;const rd=Promise.resolve(),sd=()=>Ar||(rd.then(()=>Ar=0),Ar=Date.now());function od(t,e){const s=d=>{if(!d._vts)d._vts=Date.now();else if(d._vts<=s.attached)return;mt(ad(d,s.value),e,5,[d])};return s.value=t,s.attached=sd(),s}function ad(t,e){if(_e(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(d=>f=>!f._stopped&&d&&d(f))}else return e}const Vo=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,ld=(t,e,s,d,f,m)=>{const y=f==="svg";e==="class"?Kf(t,d,y):e==="style"?$f(t,s,d):qn(e)?Ss(e)||id(t,e,s,d,m):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):cd(t,e,d,y))?(Uo(t,e,d),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&No(t,e,d,y,m,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!je(d))?Uo(t,ht(e),d,m,e):(e==="true-value"?t._trueValue=d:e==="false-value"&&(t._falseValue=d),No(t,e,d,y))};function cd(t,e,s,d){if(d)return!!(e==="innerHTML"||e==="textContent"||e in t&&Vo(e)&&xe(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const f=t.tagName;if(f==="IMG"||f==="VIDEO"||f==="CANVAS"||f==="SOURCE")return!1}return Vo(e)&&je(s)?!1:e in t}const Xo=t=>{const e=t.props["onUpdate:modelValue"]||!1;return _e(e)?s=>_n(e,s):e};function ud(t){t.target.composing=!0}function Yo(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Er=Symbol("_assign"),mn={created(t,{modifiers:{lazy:e,trim:s,number:d}},f){t[Er]=Xo(f);const m=d||f.props&&f.props.type==="number";ui(t,e?"change":"input",y=>{if(y.target.composing)return;let h=t.value;s&&(h=h.trim()),m&&(h=Gr(h)),t[Er](h)}),s&&ui(t,"change",()=>{t.value=t.value.trim()}),e||(ui(t,"compositionstart",ud),ui(t,"compositionend",Yo),ui(t,"change",Yo))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:d,trim:f,number:m}},y){if(t[Er]=Xo(y),t.composing)return;const h=(m||t.type==="number")&&!/^0\d/.test(t.value)?Gr(t.value):t.value,i=e??"";h!==i&&(document.activeElement===t&&t.type!=="range"&&(d&&e===s||f&&t.value.trim()===i)||(t.value=i))}},hd={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Go=(t,e)=>{const s=t._withKeys||(t._withKeys={}),d=e.join(".");return s[d]||(s[d]=f=>{if(!("key"in f))return;const m=Yt(f.key);if(e.some(y=>y===m||hd[y]===m))return t(f)})},fd=Ne({patchProp:ld},Hf);let qo;function dd(){return qo||(qo=ff(fd))}const pd=(...t)=>{const e=dd().createApp(...t),{mount:s}=e;return e.mount=d=>{const f=md(d);if(!f)return;const m=e._component;!xe(m)&&!m.render&&!m.template&&(m.template=f.innerHTML),f.nodeType===1&&(f.textContent="");const y=s(f,!1,gd(f));return f instanceof Element&&(f.removeAttribute("v-cloak"),f.setAttribute("data-v-app","")),y},e};function gd(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function md(t){return je(t)?document.querySelector(t):t}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const hi=typeof window<"u";function vd(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Ae=Object.assign;function Pr(t,e){const s={};for(const d in e){const f=e[d];s[d]=vt(f)?f.map(t):t(f)}return s}const Bi=()=>{},vt=Array.isArray,yd=/\/$/,bd=t=>t.replace(yd,"");function Ir(t,e,s="/"){let d,f={},m="",y="";const h=e.indexOf("#");let i=e.indexOf("?");return h<i&&h>=0&&(i=-1),i>-1&&(d=e.slice(0,i),m=e.slice(i+1,h>-1?h:e.length),f=t(m)),h>-1&&(d=d||e.slice(0,h),y=e.slice(h,e.length)),d=wd(d??e,s),{fullPath:d+(m&&"?")+m+y,path:d,query:f,hash:y}}function _d(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function Ko(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function xd(t,e,s){const d=e.matched.length-1,f=s.matched.length-1;return d>-1&&d===f&&yi(e.matched[d],s.matched[f])&&hc(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function yi(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function hc(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!Cd(t[s],e[s]))return!1;return!0}function Cd(t,e){return vt(t)?Zo(t,e):vt(e)?Zo(e,t):t===e}function Zo(t,e){return vt(e)?t.length===e.length&&t.every((s,d)=>s===e[d]):t.length===1&&t[0]===e}function wd(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),d=t.split("/"),f=d[d.length-1];(f===".."||f===".")&&d.push("");let m=s.length-1,y,h;for(y=0;y<d.length;y++)if(h=d[y],h!==".")if(h==="..")m>1&&m--;else break;return s.slice(0,m).join("/")+"/"+d.slice(y-(y===d.length?1:0)).join("/")}var Ji;(function(t){t.pop="pop",t.push="push"})(Ji||(Ji={}));var ji;(function(t){t.back="back",t.forward="forward",t.unknown=""})(ji||(ji={}));function Sd(t){if(!t)if(hi){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),bd(t)}const Td=/^[^#]+#/;function Od(t,e){return t.replace(Td,"#")+e}function kd(t,e){const s=document.documentElement.getBoundingClientRect(),d=t.getBoundingClientRect();return{behavior:e.behavior,left:d.left-s.left-(e.left||0),top:d.top-s.top-(e.top||0)}}const or=()=>({left:window.pageXOffset,top:window.pageYOffset});function Ad(t){let e;if("el"in t){const s=t.el,d=typeof s=="string"&&s.startsWith("#"),f=typeof s=="string"?d?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!f)return;e=kd(f,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function Jo(t,e){return(history.state?history.state.position-e:-1)+t}const ss=new Map;function Ed(t,e){ss.set(t,e)}function Pd(t){const e=ss.get(t);return ss.delete(t),e}let Id=()=>location.protocol+"//"+location.host;function fc(t,e){const{pathname:s,search:d,hash:f}=e,m=t.indexOf("#");if(m>-1){let h=f.includes(t.slice(m))?t.slice(m).length:1,i=f.slice(h);return i[0]!=="/"&&(i="/"+i),Ko(i,"")}return Ko(s,t)+d+f}function Md(t,e,s,d){let f=[],m=[],y=null;const h=({state:o})=>{const n=fc(t,location),c=s.value,p=e.value;let l=0;if(o){if(s.value=n,e.value=o,y&&y===c){y=null;return}l=p?o.position-p.position:0}else d(n);f.forEach(g=>{g(s.value,c,{delta:l,type:Ji.pop,direction:l?l>0?ji.forward:ji.back:ji.unknown})})};function i(){y=s.value}function a(o){f.push(o);const n=()=>{const c=f.indexOf(o);c>-1&&f.splice(c,1)};return m.push(n),n}function u(){const{history:o}=window;o.state&&o.replaceState(Ae({},o.state,{scroll:or()}),"")}function r(){for(const o of m)o();m=[],window.removeEventListener("popstate",h),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",h),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:i,listen:a,destroy:r}}function Qo(t,e,s,d=!1,f=!1){return{back:t,current:e,forward:s,replaced:d,position:window.history.length,scroll:f?or():null}}function Rd(t){const{history:e,location:s}=window,d={value:fc(t,s)},f={value:e.state};f.value||m(d.value,{back:null,current:d.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function m(i,a,u){const r=t.indexOf("#"),o=r>-1?(s.host&&document.querySelector("base")?t:t.slice(r))+i:Id()+t+i;try{e[u?"replaceState":"pushState"](a,"",o),f.value=a}catch(n){console.error(n),s[u?"replace":"assign"](o)}}function y(i,a){const u=Ae({},e.state,Qo(f.value.back,i,f.value.forward,!0),a,{position:f.value.position});m(i,u,!0),d.value=i}function h(i,a){const u=Ae({},f.value,e.state,{forward:i,scroll:or()});m(u.current,u,!0);const r=Ae({},Qo(d.value,i,null),{position:u.position+1},a);m(i,r,!1),d.value=i}return{location:d,state:f,push:h,replace:y}}function Dd(t){t=Sd(t);const e=Rd(t),s=Md(t,e.state,e.location,e.replace);function d(m,y=!0){y||s.pauseListeners(),history.go(m)}const f=Ae({location:"",base:t,go:d,createHref:Od.bind(null,t)},e,s);return Object.defineProperty(f,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(f,"state",{enumerable:!0,get:()=>e.state.value}),f}function Fd(t){return typeof t=="string"||t&&typeof t=="object"}function dc(t){return typeof t=="string"||typeof t=="symbol"}const Lt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},pc=Symbol("");var $o;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})($o||($o={}));function bi(t,e){return Ae(new Error,{type:t,[pc]:!0},e)}function Tt(t,e){return t instanceof Error&&pc in t&&(e==null||!!(t.type&e))}const ea="[^/]+?",Ld={sensitive:!1,strict:!1,start:!0,end:!0},Bd=/[.+*?^${}()[\]/\\]/g;function jd(t,e){const s=Ae({},Ld,e),d=[];let f=s.start?"^":"";const m=[];for(const a of t){const u=a.length?[]:[90];s.strict&&!a.length&&(f+="/");for(let r=0;r<a.length;r++){const o=a[r];let n=40+(s.sensitive?.25:0);if(o.type===0)r||(f+="/"),f+=o.value.replace(Bd,"\\$&"),n+=40;else if(o.type===1){const{value:c,repeatable:p,optional:l,regexp:g}=o;m.push({name:c,repeatable:p,optional:l});const v=g||ea;if(v!==ea){n+=10;try{new RegExp(`(${v})`)}catch(_){throw new Error(`Invalid custom RegExp for param "${c}" (${v}): `+_.message)}}let b=p?`((?:${v})(?:/(?:${v}))*)`:`(${v})`;r||(b=l&&a.length<2?`(?:/${b})`:"/"+b),l&&(b+="?"),f+=b,n+=20,l&&(n+=-8),p&&(n+=-20),v===".*"&&(n+=-50)}u.push(n)}d.push(u)}if(s.strict&&s.end){const a=d.length-1;d[a][d[a].length-1]+=.7000000000000001}s.strict||(f+="/?"),s.end?f+="$":s.strict&&(f+="(?:/|$)");const y=new RegExp(f,s.sensitive?"":"i");function h(a){const u=a.match(y),r={};if(!u)return null;for(let o=1;o<u.length;o++){const n=u[o]||"",c=m[o-1];r[c.name]=n&&c.repeatable?n.split("/"):n}return r}function i(a){let u="",r=!1;for(const o of t){(!r||!u.endsWith("/"))&&(u+="/"),r=!1;for(const n of o)if(n.type===0)u+=n.value;else if(n.type===1){const{value:c,repeatable:p,optional:l}=n,g=c in a?a[c]:"";if(vt(g)&&!p)throw new Error(`Provided param "${c}" is an array but it is not repeatable (* or + modifiers)`);const v=vt(g)?g.join("/"):g;if(!v)if(l)o.length<2&&(u.endsWith("/")?u=u.slice(0,-1):r=!0);else throw new Error(`Missing required param "${c}"`);u+=v}}return u||"/"}return{re:y,score:d,keys:m,parse:h,stringify:i}}function zd(t,e){let s=0;for(;s<t.length&&s<e.length;){const d=e[s]-t[s];if(d)return d;s++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function Nd(t,e){let s=0;const d=t.score,f=e.score;for(;s<d.length&&s<f.length;){const m=zd(d[s],f[s]);if(m)return m;s++}if(Math.abs(f.length-d.length)===1){if(ta(d))return 1;if(ta(f))return-1}return f.length-d.length}function ta(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Ud={type:0,value:""},Hd=/[a-zA-Z0-9_]/;function Wd(t){if(!t)return[[]];if(t==="/")return[[Ud]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(n){throw new Error(`ERR (${s})/"${a}": ${n}`)}let s=0,d=s;const f=[];let m;function y(){m&&f.push(m),m=[]}let h=0,i,a="",u="";function r(){a&&(s===0?m.push({type:0,value:a}):s===1||s===2||s===3?(m.length>1&&(i==="*"||i==="+")&&e(`A repeatable param (${a}) must be alone in its segment. eg: '/:ids+.`),m.push({type:1,value:a,regexp:u,repeatable:i==="*"||i==="+",optional:i==="*"||i==="?"})):e("Invalid state to consume buffer"),a="")}function o(){a+=i}for(;h<t.length;){if(i=t[h++],i==="\\"&&s!==2){d=s,s=4;continue}switch(s){case 0:i==="/"?(a&&r(),y()):i===":"?(r(),s=1):o();break;case 4:o(),s=d;break;case 1:i==="("?s=2:Hd.test(i)?o():(r(),s=0,i!=="*"&&i!=="?"&&i!=="+"&&h--);break;case 2:i===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+i:s=3:u+=i;break;case 3:r(),s=0,i!=="*"&&i!=="?"&&i!=="+"&&h--,u="";break;default:e("Unknown state");break}}return s===2&&e(`Unfinished custom RegExp for param "${a}"`),r(),y(),f}function Vd(t,e,s){const d=jd(Wd(t.path),s),f=Ae(d,{record:t,parent:e,children:[],alias:[]});return e&&!f.record.aliasOf==!e.record.aliasOf&&e.children.push(f),f}function Xd(t,e){const s=[],d=new Map;e=ra({strict:!1,end:!0,sensitive:!1},e);function f(u){return d.get(u)}function m(u,r,o){const n=!o,c=Yd(u);c.aliasOf=o&&o.record;const p=ra(e,u),l=[c];if("alias"in u){const b=typeof u.alias=="string"?[u.alias]:u.alias;for(const _ of b)l.push(Ae({},c,{components:o?o.record.components:c.components,path:_,aliasOf:o?o.record:c}))}let g,v;for(const b of l){const{path:_}=b;if(r&&_[0]!=="/"){const C=r.record.path,w=C[C.length-1]==="/"?"":"/";b.path=r.record.path+(_&&w+_)}if(g=Vd(b,r,p),o?o.alias.push(g):(v=v||g,v!==g&&v.alias.push(g),n&&u.name&&!na(g)&&y(u.name)),c.children){const C=c.children;for(let w=0;w<C.length;w++)m(C[w],g,o&&o.children[w])}o=o||g,(g.record.components&&Object.keys(g.record.components).length||g.record.name||g.record.redirect)&&i(g)}return v?()=>{y(v)}:Bi}function y(u){if(dc(u)){const r=d.get(u);r&&(d.delete(u),s.splice(s.indexOf(r),1),r.children.forEach(y),r.alias.forEach(y))}else{const r=s.indexOf(u);r>-1&&(s.splice(r,1),u.record.name&&d.delete(u.record.name),u.children.forEach(y),u.alias.forEach(y))}}function h(){return s}function i(u){let r=0;for(;r<s.length&&Nd(u,s[r])>=0&&(u.record.path!==s[r].record.path||!gc(u,s[r]));)r++;s.splice(r,0,u),u.record.name&&!na(u)&&d.set(u.record.name,u)}function a(u,r){let o,n={},c,p;if("name"in u&&u.name){if(o=d.get(u.name),!o)throw bi(1,{location:u});p=o.record.name,n=Ae(ia(r.params,o.keys.filter(v=>!v.optional).map(v=>v.name)),u.params&&ia(u.params,o.keys.map(v=>v.name))),c=o.stringify(n)}else if("path"in u)c=u.path,o=s.find(v=>v.re.test(c)),o&&(n=o.parse(c),p=o.record.name);else{if(o=r.name?d.get(r.name):s.find(v=>v.re.test(r.path)),!o)throw bi(1,{location:u,currentLocation:r});p=o.record.name,n=Ae({},r.params,u.params),c=o.stringify(n)}const l=[];let g=o;for(;g;)l.unshift(g.record),g=g.parent;return{name:p,path:c,params:n,matched:l,meta:qd(l)}}return t.forEach(u=>m(u)),{addRoute:m,resolve:a,removeRoute:y,getRoutes:h,getRecordMatcher:f}}function ia(t,e){const s={};for(const d of e)d in t&&(s[d]=t[d]);return s}function Yd(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:Gd(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function Gd(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const d in t.components)e[d]=typeof s=="object"?s[d]:s;return e}function na(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function qd(t){return t.reduce((e,s)=>Ae(e,s.meta),{})}function ra(t,e){const s={};for(const d in t)s[d]=d in e?e[d]:t[d];return s}function gc(t,e){return e.children.some(s=>s===t||gc(t,s))}const mc=/#/g,Kd=/&/g,Zd=/\//g,Jd=/=/g,Qd=/\?/g,vc=/\+/g,$d=/%5B/g,ep=/%5D/g,yc=/%5E/g,tp=/%60/g,bc=/%7B/g,ip=/%7C/g,_c=/%7D/g,np=/%20/g;function Ws(t){return encodeURI(""+t).replace(ip,"|").replace($d,"[").replace(ep,"]")}function rp(t){return Ws(t).replace(bc,"{").replace(_c,"}").replace(yc,"^")}function os(t){return Ws(t).replace(vc,"%2B").replace(np,"+").replace(mc,"%23").replace(Kd,"%26").replace(tp,"`").replace(bc,"{").replace(_c,"}").replace(yc,"^")}function sp(t){return os(t).replace(Jd,"%3D")}function op(t){return Ws(t).replace(mc,"%23").replace(Qd,"%3F")}function ap(t){return t==null?"":op(t).replace(Zd,"%2F")}function Nn(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function lp(t){const e={};if(t===""||t==="?")return e;const d=(t[0]==="?"?t.slice(1):t).split("&");for(let f=0;f<d.length;++f){const m=d[f].replace(vc," "),y=m.indexOf("="),h=Nn(y<0?m:m.slice(0,y)),i=y<0?null:Nn(m.slice(y+1));if(h in e){let a=e[h];vt(a)||(a=e[h]=[a]),a.push(i)}else e[h]=i}return e}function sa(t){let e="";for(let s in t){const d=t[s];if(s=sp(s),d==null){d!==void 0&&(e+=(e.length?"&":"")+s);continue}(vt(d)?d.map(m=>m&&os(m)):[d&&os(d)]).forEach(m=>{m!==void 0&&(e+=(e.length?"&":"")+s,m!=null&&(e+="="+m))})}return e}function cp(t){const e={};for(const s in t){const d=t[s];d!==void 0&&(e[s]=vt(d)?d.map(f=>f==null?null:""+f):d==null?d:""+d)}return e}const up=Symbol(""),oa=Symbol(""),Vs=Symbol(""),xc=Symbol(""),as=Symbol("");function ki(){let t=[];function e(d){return t.push(d),()=>{const f=t.indexOf(d);f>-1&&t.splice(f,1)}}function s(){t=[]}return{add:e,list:()=>t.slice(),reset:s}}function Nt(t,e,s,d,f){const m=d&&(d.enterCallbacks[f]=d.enterCallbacks[f]||[]);return()=>new Promise((y,h)=>{const i=r=>{r===!1?h(bi(4,{from:s,to:e})):r instanceof Error?h(r):Fd(r)?h(bi(2,{from:e,to:r})):(m&&d.enterCallbacks[f]===m&&typeof r=="function"&&m.push(r),y())},a=t.call(d&&d.instances[f],e,s,i);let u=Promise.resolve(a);t.length<3&&(u=u.then(i)),u.catch(r=>h(r))})}function Mr(t,e,s,d){const f=[];for(const m of t)for(const y in m.components){let h=m.components[y];if(!(e!=="beforeRouteEnter"&&!m.instances[y]))if(hp(h)){const a=(h.__vccOpts||h)[e];a&&f.push(Nt(a,s,d,m,y))}else{let i=h();f.push(()=>i.then(a=>{if(!a)return Promise.reject(new Error(`Couldn't resolve component "${y}" at "${m.path}"`));const u=vd(a)?a.default:a;m.components[y]=u;const o=(u.__vccOpts||u)[e];return o&&Nt(o,s,d,m,y)()}))}}return f}function hp(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function aa(t){const e=Pt(Vs),s=Pt(xc),d=ze(()=>e.resolve(it(t.to))),f=ze(()=>{const{matched:i}=d.value,{length:a}=i,u=i[a-1],r=s.matched;if(!u||!r.length)return-1;const o=r.findIndex(yi.bind(null,u));if(o>-1)return o;const n=la(i[a-2]);return a>1&&la(u)===n&&r[r.length-1].path!==n?r.findIndex(yi.bind(null,i[a-2])):o}),m=ze(()=>f.value>-1&&gp(s.params,d.value.params)),y=ze(()=>f.value>-1&&f.value===s.matched.length-1&&hc(s.params,d.value.params));function h(i={}){return pp(i)?e[it(t.replace)?"replace":"push"](it(t.to)).catch(Bi):Promise.resolve()}return{route:d,href:ze(()=>d.value.href),isActive:m,isExactActive:y,navigate:h}}const fp=Ls({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:aa,setup(t,{slots:e}){const s=Gt(aa(t)),{options:d}=Pt(Vs),f=ze(()=>({[ca(t.activeClass,d.linkActiveClass,"router-link-active")]:s.isActive,[ca(t.exactActiveClass,d.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const m=e.default&&e.default(s);return t.custom?m:Ki("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:f.value},m)}}}),dp=fp;function pp(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function gp(t,e){for(const s in e){const d=e[s],f=t[s];if(typeof d=="string"){if(d!==f)return!1}else if(!vt(f)||f.length!==d.length||d.some((m,y)=>m!==f[y]))return!1}return!0}function la(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const ca=(t,e,s)=>t??e??s,mp=Ls({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const d=Pt(as),f=ze(()=>t.route||d.value),m=Pt(oa,0),y=ze(()=>{let a=it(m);const{matched:u}=f.value;let r;for(;(r=u[a])&&!r.components;)a++;return a}),h=ze(()=>f.value.matched[y.value]);xn(oa,ze(()=>y.value+1)),xn(up,h),xn(as,f);const i=tt();return qe(()=>[i.value,h.value,t.name],([a,u,r],[o,n,c])=>{u&&(u.instances[r]=a,n&&n!==u&&a&&a===o&&(u.leaveGuards.size||(u.leaveGuards=n.leaveGuards),u.updateGuards.size||(u.updateGuards=n.updateGuards))),a&&u&&(!n||!yi(u,n)||!o)&&(u.enterCallbacks[r]||[]).forEach(p=>p(a))},{flush:"post"}),()=>{const a=f.value,u=t.name,r=h.value,o=r&&r.components[u];if(!o)return ua(s.default,{Component:o,route:a});const n=r.props[u],c=n?n===!0?a.params:typeof n=="function"?n(a):n:null,l=Ki(o,Ae({},c,e,{onVnodeUnmounted:g=>{g.component.isUnmounted&&(r.instances[u]=null)},ref:i}));return ua(s.default,{Component:l,route:a})||l}}});function ua(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const Cc=mp;function vp(t){const e=Xd(t.routes,t),s=t.parseQuery||lp,d=t.stringifyQuery||sa,f=t.history,m=ki(),y=ki(),h=ki(),i=Ch(Lt);let a=Lt;hi&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Pr.bind(null,H=>""+H),r=Pr.bind(null,ap),o=Pr.bind(null,Nn);function n(H,q){let V,ee;return dc(H)?(V=e.getRecordMatcher(H),ee=q):ee=H,e.addRoute(ee,V)}function c(H){const q=e.getRecordMatcher(H);q&&e.removeRoute(q)}function p(){return e.getRoutes().map(H=>H.record)}function l(H){return!!e.getRecordMatcher(H)}function g(H,q){if(q=Ae({},q||i.value),typeof H=="string"){const x=Ir(s,H,q.path),M=e.resolve({path:x.path},q),L=f.createHref(x.fullPath);return Ae(x,M,{params:o(M.params),hash:Nn(x.hash),redirectedFrom:void 0,href:L})}let V;if("path"in H)V=Ae({},H,{path:Ir(s,H.path,q.path).path});else{const x=Ae({},H.params);for(const M in x)x[M]==null&&delete x[M];V=Ae({},H,{params:r(x)}),q.params=r(q.params)}const ee=e.resolve(V,q),se=H.hash||"";ee.params=u(o(ee.params));const fe=_d(d,Ae({},H,{hash:rp(se),path:ee.path})),E=f.createHref(fe);return Ae({fullPath:fe,hash:se,query:d===sa?cp(H.query):H.query||{}},ee,{redirectedFrom:void 0,href:E})}function v(H){return typeof H=="string"?Ir(s,H,i.value.path):Ae({},H)}function b(H,q){if(a!==H)return bi(8,{from:q,to:H})}function _(H){return k(H)}function C(H){return _(Ae(v(H),{replace:!0}))}function w(H){const q=H.matched[H.matched.length-1];if(q&&q.redirect){const{redirect:V}=q;let ee=typeof V=="function"?V(H):V;return typeof ee=="string"&&(ee=ee.includes("?")||ee.includes("#")?ee=v(ee):{path:ee},ee.params={}),Ae({query:H.query,hash:H.hash,params:"path"in ee?{}:H.params},ee)}}function k(H,q){const V=a=g(H),ee=i.value,se=H.state,fe=H.force,E=H.replace===!0,x=w(V);if(x)return k(Ae(v(x),{state:typeof x=="object"?Ae({},se,x.state):se,force:fe,replace:E}),q||V);const M=V;M.redirectedFrom=q;let L;return!fe&&xd(d,ee,V)&&(L=bi(16,{to:M,from:ee}),R(ee,ee,!0,!1)),(L?Promise.resolve(L):X(M,ee)).catch(S=>Tt(S)?Tt(S,2)?S:W(S):ae(S,M,ee)).then(S=>{if(S){if(Tt(S,2))return k(Ae({replace:E},v(S.to),{state:typeof S.to=="object"?Ae({},se,S.to.state):se,force:fe}),q||M)}else S=F(M,ee,!0,E,se);return re(M,ee,S),S})}function z(H,q){const V=b(H,q);return V?Promise.reject(V):Promise.resolve()}function N(H){const q=U.values().next().value;return q&&typeof q.runWithContext=="function"?q.runWithContext(H):H()}function X(H,q){let V;const[ee,se,fe]=yp(H,q);V=Mr(ee.reverse(),"beforeRouteLeave",H,q);for(const x of ee)x.leaveGuards.forEach(M=>{V.push(Nt(M,H,q))});const E=z.bind(null,H,q);return V.push(E),Z(V).then(()=>{V=[];for(const x of m.list())V.push(Nt(x,H,q));return V.push(E),Z(V)}).then(()=>{V=Mr(se,"beforeRouteUpdate",H,q);for(const x of se)x.updateGuards.forEach(M=>{V.push(Nt(M,H,q))});return V.push(E),Z(V)}).then(()=>{V=[];for(const x of fe)if(x.beforeEnter)if(vt(x.beforeEnter))for(const M of x.beforeEnter)V.push(Nt(M,H,q));else V.push(Nt(x.beforeEnter,H,q));return V.push(E),Z(V)}).then(()=>(H.matched.forEach(x=>x.enterCallbacks={}),V=Mr(fe,"beforeRouteEnter",H,q),V.push(E),Z(V))).then(()=>{V=[];for(const x of y.list())V.push(Nt(x,H,q));return V.push(E),Z(V)}).catch(x=>Tt(x,8)?x:Promise.reject(x))}function re(H,q,V){h.list().forEach(ee=>N(()=>ee(H,q,V)))}function F(H,q,V,ee,se){const fe=b(H,q);if(fe)return fe;const E=q===Lt,x=hi?history.state:{};V&&(ee||E?f.replace(H.fullPath,Ae({scroll:E&&x&&x.scroll},se)):f.push(H.fullPath,se)),i.value=H,R(H,q,V,E),W()}let K;function T(){K||(K=f.listen((H,q,V)=>{if(!P.listening)return;const ee=g(H),se=w(ee);if(se){k(Ae(se,{replace:!0}),ee).catch(Bi);return}a=ee;const fe=i.value;hi&&Ed(Jo(fe.fullPath,V.delta),or()),X(ee,fe).catch(E=>Tt(E,12)?E:Tt(E,2)?(k(E.to,ee).then(x=>{Tt(x,20)&&!V.delta&&V.type===Ji.pop&&f.go(-1,!1)}).catch(Bi),Promise.reject()):(V.delta&&f.go(-V.delta,!1),ae(E,ee,fe))).then(E=>{E=E||F(ee,fe,!1),E&&(V.delta&&!Tt(E,8)?f.go(-V.delta,!1):V.type===Ji.pop&&Tt(E,20)&&f.go(-1,!1)),re(ee,fe,E)}).catch(Bi)}))}let J=ki(),ue=ki(),ie;function ae(H,q,V){W(H);const ee=ue.list();return ee.length?ee.forEach(se=>se(H,q,V)):console.error(H),Promise.reject(H)}function A(){return ie&&i.value!==Lt?Promise.resolve():new Promise((H,q)=>{J.add([H,q])})}function W(H){return ie||(ie=!H,T(),J.list().forEach(([q,V])=>H?V(H):q()),J.reset()),H}function R(H,q,V,ee){const{scrollBehavior:se}=t;if(!hi||!se)return Promise.resolve();const fe=!V&&Pd(Jo(H.fullPath,0))||(ee||!V)&&history.state&&history.state.scroll||null;return Sl().then(()=>se(H,q,fe)).then(E=>E&&Ad(E)).catch(E=>ae(E,H,q))}const I=H=>f.go(H);let Q;const U=new Set,P={currentRoute:i,listening:!0,addRoute:n,removeRoute:c,hasRoute:l,getRoutes:p,resolve:g,options:t,push:_,replace:C,go:I,back:()=>I(-1),forward:()=>I(1),beforeEach:m.add,beforeResolve:y.add,afterEach:h.add,onError:ue.add,isReady:A,install(H){const q=this;H.component("RouterLink",dp),H.component("RouterView",Cc),H.config.globalProperties.$router=q,Object.defineProperty(H.config.globalProperties,"$route",{enumerable:!0,get:()=>it(i)}),hi&&!Q&&i.value===Lt&&(Q=!0,_(f.location).catch(se=>{}));const V={};for(const se in Lt)Object.defineProperty(V,se,{get:()=>i.value[se],enumerable:!0});H.provide(Vs,q),H.provide(xc,bl(V)),H.provide(as,i);const ee=H.unmount;U.add(H),H.unmount=function(){U.delete(H),U.size<1&&(a=Lt,K&&K(),K=null,i.value=Lt,Q=!1,ie=!1),ee()}}};function Z(H){return H.reduce((q,V)=>q.then(()=>N(V)),Promise.resolve())}return P}function yp(t,e){const s=[],d=[],f=[],m=Math.max(e.matched.length,t.matched.length);for(let y=0;y<m;y++){const h=e.matched[y];h&&(t.matched.find(a=>yi(a,h))?d.push(h):s.push(h));const i=t.matched[y];i&&(e.matched.find(a=>yi(a,i))||f.push(i))}return[s,d,f]}const bp={__name:"App",setup(t){return(e,s)=>(le(),ce(Le,null,[s[0]||(s[0]=B("header",null,null,-1)),Be(it(Cc))],64))}};function wc(t,e){return function(){return t.apply(e,arguments)}}const{toString:_p}=Object.prototype,{getPrototypeOf:Xs}=Object,ar=(t=>e=>{const s=_p.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),yt=t=>(t=t.toLowerCase(),e=>ar(e)===t),lr=t=>e=>typeof e===t,{isArray:_i}=Array,Qi=lr("undefined");function xp(t){return t!==null&&!Qi(t)&&t.constructor!==null&&!Qi(t.constructor)&&at(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Sc=yt("ArrayBuffer");function Cp(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Sc(t.buffer),e}const wp=lr("string"),at=lr("function"),Tc=lr("number"),cr=t=>t!==null&&typeof t=="object",Sp=t=>t===!0||t===!1,Tn=t=>{if(ar(t)!=="object")return!1;const e=Xs(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Tp=yt("Date"),Op=yt("File"),kp=yt("Blob"),Ap=yt("FileList"),Ep=t=>cr(t)&&at(t.pipe),Pp=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||at(t.append)&&((e=ar(t))==="formdata"||e==="object"&&at(t.toString)&&t.toString()==="[object FormData]"))},Ip=yt("URLSearchParams"),[Mp,Rp,Dp,Fp]=["ReadableStream","Request","Response","Headers"].map(yt),Lp=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function sn(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let d,f;if(typeof t!="object"&&(t=[t]),_i(t))for(d=0,f=t.length;d<f;d++)e.call(null,t[d],d,t);else{const m=s?Object.getOwnPropertyNames(t):Object.keys(t),y=m.length;let h;for(d=0;d<y;d++)h=m[d],e.call(null,t[h],h,t)}}function Oc(t,e){e=e.toLowerCase();const s=Object.keys(t);let d=s.length,f;for(;d-- >0;)if(f=s[d],e===f.toLowerCase())return f;return null}const ii=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),kc=t=>!Qi(t)&&t!==ii;function ls(){const{caseless:t}=kc(this)&&this||{},e={},s=(d,f)=>{const m=t&&Oc(e,f)||f;Tn(e[m])&&Tn(d)?e[m]=ls(e[m],d):Tn(d)?e[m]=ls({},d):_i(d)?e[m]=d.slice():e[m]=d};for(let d=0,f=arguments.length;d<f;d++)arguments[d]&&sn(arguments[d],s);return e}const Bp=(t,e,s,{allOwnKeys:d}={})=>(sn(e,(f,m)=>{s&&at(f)?t[m]=wc(f,s):t[m]=f},{allOwnKeys:d}),t),jp=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),zp=(t,e,s,d)=>{t.prototype=Object.create(e.prototype,d),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},Np=(t,e,s,d)=>{let f,m,y;const h={};if(e=e||{},t==null)return e;do{for(f=Object.getOwnPropertyNames(t),m=f.length;m-- >0;)y=f[m],(!d||d(y,t,e))&&!h[y]&&(e[y]=t[y],h[y]=!0);t=s!==!1&&Xs(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},Up=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const d=t.indexOf(e,s);return d!==-1&&d===s},Hp=t=>{if(!t)return null;if(_i(t))return t;let e=t.length;if(!Tc(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},Wp=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Xs(Uint8Array)),Vp=(t,e)=>{const d=(t&&t[Symbol.iterator]).call(t);let f;for(;(f=d.next())&&!f.done;){const m=f.value;e.call(t,m[0],m[1])}},Xp=(t,e)=>{let s;const d=[];for(;(s=t.exec(e))!==null;)d.push(s);return d},Yp=yt("HTMLFormElement"),Gp=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,d,f){return d.toUpperCase()+f}),ha=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),qp=yt("RegExp"),Ac=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),d={};sn(s,(f,m)=>{let y;(y=e(f,m,t))!==!1&&(d[m]=y||f)}),Object.defineProperties(t,d)},Kp=t=>{Ac(t,(e,s)=>{if(at(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const d=t[s];if(at(d)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},Zp=(t,e)=>{const s={},d=f=>{f.forEach(m=>{s[m]=!0})};return _i(t)?d(t):d(String(t).split(e)),s},Jp=()=>{},Qp=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,Rr="abcdefghijklmnopqrstuvwxyz",fa="0123456789",Ec={DIGIT:fa,ALPHA:Rr,ALPHA_DIGIT:Rr+Rr.toUpperCase()+fa},$p=(t=16,e=Ec.ALPHA_DIGIT)=>{let s="";const{length:d}=e;for(;t--;)s+=e[Math.random()*d|0];return s};function eg(t){return!!(t&&at(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const tg=t=>{const e=new Array(10),s=(d,f)=>{if(cr(d)){if(e.indexOf(d)>=0)return;if(!("toJSON"in d)){e[f]=d;const m=_i(d)?[]:{};return sn(d,(y,h)=>{const i=s(y,f+1);!Qi(i)&&(m[h]=i)}),e[f]=void 0,m}}return d};return s(t,0)},ig=yt("AsyncFunction"),ng=t=>t&&(cr(t)||at(t))&&at(t.then)&&at(t.catch),Pc=((t,e)=>t?setImmediate:e?((s,d)=>(ii.addEventListener("message",({source:f,data:m})=>{f===ii&&m===s&&d.length&&d.shift()()},!1),f=>{d.push(f),ii.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",at(ii.postMessage)),rg=typeof queueMicrotask<"u"?queueMicrotask.bind(ii):typeof process<"u"&&process.nextTick||Pc,oe={isArray:_i,isArrayBuffer:Sc,isBuffer:xp,isFormData:Pp,isArrayBufferView:Cp,isString:wp,isNumber:Tc,isBoolean:Sp,isObject:cr,isPlainObject:Tn,isReadableStream:Mp,isRequest:Rp,isResponse:Dp,isHeaders:Fp,isUndefined:Qi,isDate:Tp,isFile:Op,isBlob:kp,isRegExp:qp,isFunction:at,isStream:Ep,isURLSearchParams:Ip,isTypedArray:Wp,isFileList:Ap,forEach:sn,merge:ls,extend:Bp,trim:Lp,stripBOM:jp,inherits:zp,toFlatObject:Np,kindOf:ar,kindOfTest:yt,endsWith:Up,toArray:Hp,forEachEntry:Vp,matchAll:Xp,isHTMLForm:Yp,hasOwnProperty:ha,hasOwnProp:ha,reduceDescriptors:Ac,freezeMethods:Kp,toObjectSet:Zp,toCamelCase:Gp,noop:Jp,toFiniteNumber:Qp,findKey:Oc,global:ii,isContextDefined:kc,ALPHABET:Ec,generateString:$p,isSpecCompliantForm:eg,toJSONObject:tg,isAsyncFn:ig,isThenable:ng,setImmediate:Pc,asap:rg};function Ce(t,e,s,d,f){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),d&&(this.request=d),f&&(this.response=f,this.status=f.status?f.status:null)}oe.inherits(Ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:oe.toJSONObject(this.config),code:this.code,status:this.status}}});const Ic=Ce.prototype,Mc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Mc[t]={value:t}});Object.defineProperties(Ce,Mc);Object.defineProperty(Ic,"isAxiosError",{value:!0});Ce.from=(t,e,s,d,f,m)=>{const y=Object.create(Ic);return oe.toFlatObject(t,y,function(i){return i!==Error.prototype},h=>h!=="isAxiosError"),Ce.call(y,t.message,e,s,d,f),y.cause=t,y.name=t.name,m&&Object.assign(y,m),y};const sg=null;function cs(t){return oe.isPlainObject(t)||oe.isArray(t)}function Rc(t){return oe.endsWith(t,"[]")?t.slice(0,-2):t}function da(t,e,s){return t?t.concat(e).map(function(f,m){return f=Rc(f),!s&&m?"["+f+"]":f}).join(s?".":""):e}function og(t){return oe.isArray(t)&&!t.some(cs)}const ag=oe.toFlatObject(oe,{},null,function(e){return/^is[A-Z]/.test(e)});function ur(t,e,s){if(!oe.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=oe.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,l){return!oe.isUndefined(l[p])});const d=s.metaTokens,f=s.visitor||u,m=s.dots,y=s.indexes,i=(s.Blob||typeof Blob<"u"&&Blob)&&oe.isSpecCompliantForm(e);if(!oe.isFunction(f))throw new TypeError("visitor must be a function");function a(c){if(c===null)return"";if(oe.isDate(c))return c.toISOString();if(!i&&oe.isBlob(c))throw new Ce("Blob is not supported. Use a Buffer instead.");return oe.isArrayBuffer(c)||oe.isTypedArray(c)?i&&typeof Blob=="function"?new Blob([c]):Buffer.from(c):c}function u(c,p,l){let g=c;if(c&&!l&&typeof c=="object"){if(oe.endsWith(p,"{}"))p=d?p:p.slice(0,-2),c=JSON.stringify(c);else if(oe.isArray(c)&&og(c)||(oe.isFileList(c)||oe.endsWith(p,"[]"))&&(g=oe.toArray(c)))return p=Rc(p),g.forEach(function(b,_){!(oe.isUndefined(b)||b===null)&&e.append(y===!0?da([p],_,m):y===null?p:p+"[]",a(b))}),!1}return cs(c)?!0:(e.append(da(l,p,m),a(c)),!1)}const r=[],o=Object.assign(ag,{defaultVisitor:u,convertValue:a,isVisitable:cs});function n(c,p){if(!oe.isUndefined(c)){if(r.indexOf(c)!==-1)throw Error("Circular reference detected in "+p.join("."));r.push(c),oe.forEach(c,function(g,v){(!(oe.isUndefined(g)||g===null)&&f.call(e,g,oe.isString(v)?v.trim():v,p,o))===!0&&n(g,p?p.concat(v):[v])}),r.pop()}}if(!oe.isObject(t))throw new TypeError("data must be an object");return n(t),e}function pa(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(d){return e[d]})}function Ys(t,e){this._pairs=[],t&&ur(t,this,e)}const Dc=Ys.prototype;Dc.append=function(e,s){this._pairs.push([e,s])};Dc.toString=function(e){const s=e?function(d){return e.call(this,d,pa)}:pa;return this._pairs.map(function(f){return s(f[0])+"="+s(f[1])},"").join("&")};function lg(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Fc(t,e,s){if(!e)return t;const d=s&&s.encode||lg;oe.isFunction(s)&&(s={serialize:s});const f=s&&s.serialize;let m;if(f?m=f(e,s):m=oe.isURLSearchParams(e)?e.toString():new Ys(e,s).toString(d),m){const y=t.indexOf("#");y!==-1&&(t=t.slice(0,y)),t+=(t.indexOf("?")===-1?"?":"&")+m}return t}class cg{constructor(){this.handlers=[]}use(e,s,d){return this.handlers.push({fulfilled:e,rejected:s,synchronous:d?d.synchronous:!1,runWhen:d?d.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){oe.forEach(this.handlers,function(d){d!==null&&e(d)})}}const ga=cg,Lc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ug=typeof URLSearchParams<"u"?URLSearchParams:Ys,hg=typeof FormData<"u"?FormData:null,fg=typeof Blob<"u"?Blob:null,dg={isBrowser:!0,classes:{URLSearchParams:ug,FormData:hg,Blob:fg},protocols:["http","https","file","blob","url","data"]},Gs=typeof window<"u"&&typeof document<"u",us=typeof navigator=="object"&&navigator||void 0,pg=Gs&&(!us||["ReactNative","NativeScript","NS"].indexOf(us.product)<0),gg=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),mg=Gs&&window.location.href||"http://localhost",vg=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Gs,hasStandardBrowserEnv:pg,hasStandardBrowserWebWorkerEnv:gg,navigator:us,origin:mg},Symbol.toStringTag,{value:"Module"})),Ye={...vg,...dg};function yg(t,e){return ur(t,new Ye.classes.URLSearchParams,Object.assign({visitor:function(s,d,f,m){return Ye.isNode&&oe.isBuffer(s)?(this.append(d,s.toString("base64")),!1):m.defaultVisitor.apply(this,arguments)}},e))}function bg(t){return oe.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function _g(t){const e={},s=Object.keys(t);let d;const f=s.length;let m;for(d=0;d<f;d++)m=s[d],e[m]=t[m];return e}function Bc(t){function e(s,d,f,m){let y=s[m++];if(y==="__proto__")return!0;const h=Number.isFinite(+y),i=m>=s.length;return y=!y&&oe.isArray(f)?f.length:y,i?(oe.hasOwnProp(f,y)?f[y]=[f[y],d]:f[y]=d,!h):((!f[y]||!oe.isObject(f[y]))&&(f[y]=[]),e(s,d,f[y],m)&&oe.isArray(f[y])&&(f[y]=_g(f[y])),!h)}if(oe.isFormData(t)&&oe.isFunction(t.entries)){const s={};return oe.forEachEntry(t,(d,f)=>{e(bg(d),f,s,0)}),s}return null}function xg(t,e,s){if(oe.isString(t))try{return(e||JSON.parse)(t),oe.trim(t)}catch(d){if(d.name!=="SyntaxError")throw d}return(s||JSON.stringify)(t)}const qs={transitional:Lc,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const d=s.getContentType()||"",f=d.indexOf("application/json")>-1,m=oe.isObject(e);if(m&&oe.isHTMLForm(e)&&(e=new FormData(e)),oe.isFormData(e))return f?JSON.stringify(Bc(e)):e;if(oe.isArrayBuffer(e)||oe.isBuffer(e)||oe.isStream(e)||oe.isFile(e)||oe.isBlob(e)||oe.isReadableStream(e))return e;if(oe.isArrayBufferView(e))return e.buffer;if(oe.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let h;if(m){if(d.indexOf("application/x-www-form-urlencoded")>-1)return yg(e,this.formSerializer).toString();if((h=oe.isFileList(e))||d.indexOf("multipart/form-data")>-1){const i=this.env&&this.env.FormData;return ur(h?{"files[]":e}:e,i&&new i,this.formSerializer)}}return m||f?(s.setContentType("application/json",!1),xg(e)):e}],transformResponse:[function(e){const s=this.transitional||qs.transitional,d=s&&s.forcedJSONParsing,f=this.responseType==="json";if(oe.isResponse(e)||oe.isReadableStream(e))return e;if(e&&oe.isString(e)&&(d&&!this.responseType||f)){const y=!(s&&s.silentJSONParsing)&&f;try{return JSON.parse(e)}catch(h){if(y)throw h.name==="SyntaxError"?Ce.from(h,Ce.ERR_BAD_RESPONSE,this,null,this.response):h}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ye.classes.FormData,Blob:Ye.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};oe.forEach(["delete","get","head","post","put","patch"],t=>{qs.headers[t]={}});const Ks=qs,Cg=oe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),wg=t=>{const e={};let s,d,f;return t&&t.split(`
`).forEach(function(y){f=y.indexOf(":"),s=y.substring(0,f).trim().toLowerCase(),d=y.substring(f+1).trim(),!(!s||e[s]&&Cg[s])&&(s==="set-cookie"?e[s]?e[s].push(d):e[s]=[d]:e[s]=e[s]?e[s]+", "+d:d)}),e},ma=Symbol("internals");function Ai(t){return t&&String(t).trim().toLowerCase()}function On(t){return t===!1||t==null?t:oe.isArray(t)?t.map(On):String(t)}function Sg(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let d;for(;d=s.exec(t);)e[d[1]]=d[2];return e}const Tg=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Dr(t,e,s,d,f){if(oe.isFunction(d))return d.call(this,e,s);if(f&&(e=s),!!oe.isString(e)){if(oe.isString(d))return e.indexOf(d)!==-1;if(oe.isRegExp(d))return d.test(e)}}function Og(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,d)=>s.toUpperCase()+d)}function kg(t,e){const s=oe.toCamelCase(" "+e);["get","set","has"].forEach(d=>{Object.defineProperty(t,d+s,{value:function(f,m,y){return this[d].call(this,e,f,m,y)},configurable:!0})})}class hr{constructor(e){e&&this.set(e)}set(e,s,d){const f=this;function m(h,i,a){const u=Ai(i);if(!u)throw new Error("header name must be a non-empty string");const r=oe.findKey(f,u);(!r||f[r]===void 0||a===!0||a===void 0&&f[r]!==!1)&&(f[r||i]=On(h))}const y=(h,i)=>oe.forEach(h,(a,u)=>m(a,u,i));if(oe.isPlainObject(e)||e instanceof this.constructor)y(e,s);else if(oe.isString(e)&&(e=e.trim())&&!Tg(e))y(wg(e),s);else if(oe.isHeaders(e))for(const[h,i]of e.entries())m(i,h,d);else e!=null&&m(s,e,d);return this}get(e,s){if(e=Ai(e),e){const d=oe.findKey(this,e);if(d){const f=this[d];if(!s)return f;if(s===!0)return Sg(f);if(oe.isFunction(s))return s.call(this,f,d);if(oe.isRegExp(s))return s.exec(f);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=Ai(e),e){const d=oe.findKey(this,e);return!!(d&&this[d]!==void 0&&(!s||Dr(this,this[d],d,s)))}return!1}delete(e,s){const d=this;let f=!1;function m(y){if(y=Ai(y),y){const h=oe.findKey(d,y);h&&(!s||Dr(d,d[h],h,s))&&(delete d[h],f=!0)}}return oe.isArray(e)?e.forEach(m):m(e),f}clear(e){const s=Object.keys(this);let d=s.length,f=!1;for(;d--;){const m=s[d];(!e||Dr(this,this[m],m,e,!0))&&(delete this[m],f=!0)}return f}normalize(e){const s=this,d={};return oe.forEach(this,(f,m)=>{const y=oe.findKey(d,m);if(y){s[y]=On(f),delete s[m];return}const h=e?Og(m):String(m).trim();h!==m&&delete s[m],s[h]=On(f),d[h]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return oe.forEach(this,(d,f)=>{d!=null&&d!==!1&&(s[f]=e&&oe.isArray(d)?d.join(", "):d)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const d=new this(e);return s.forEach(f=>d.set(f)),d}static accessor(e){const d=(this[ma]=this[ma]={accessors:{}}).accessors,f=this.prototype;function m(y){const h=Ai(y);d[h]||(kg(f,y),d[h]=!0)}return oe.isArray(e)?e.forEach(m):m(e),this}}hr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);oe.reduceDescriptors(hr.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(d){this[s]=d}}});oe.freezeMethods(hr);const gt=hr;function Fr(t,e){const s=this||Ks,d=e||s,f=gt.from(d.headers);let m=d.data;return oe.forEach(t,function(h){m=h.call(s,m,f.normalize(),e?e.status:void 0)}),f.normalize(),m}function jc(t){return!!(t&&t.__CANCEL__)}function xi(t,e,s){Ce.call(this,t??"canceled",Ce.ERR_CANCELED,e,s),this.name="CanceledError"}oe.inherits(xi,Ce,{__CANCEL__:!0});function zc(t,e,s){const d=s.config.validateStatus;!s.status||!d||d(s.status)?t(s):e(new Ce("Request failed with status code "+s.status,[Ce.ERR_BAD_REQUEST,Ce.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function Ag(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Eg(t,e){t=t||10;const s=new Array(t),d=new Array(t);let f=0,m=0,y;return e=e!==void 0?e:1e3,function(i){const a=Date.now(),u=d[m];y||(y=a),s[f]=i,d[f]=a;let r=m,o=0;for(;r!==f;)o+=s[r++],r=r%t;if(f=(f+1)%t,f===m&&(m=(m+1)%t),a-y<e)return;const n=u&&a-u;return n?Math.round(o*1e3/n):void 0}}function Pg(t,e){let s=0,d=1e3/e,f,m;const y=(a,u=Date.now())=>{s=u,f=null,m&&(clearTimeout(m),m=null),t.apply(null,a)};return[(...a)=>{const u=Date.now(),r=u-s;r>=d?y(a,u):(f=a,m||(m=setTimeout(()=>{m=null,y(f)},d-r)))},()=>f&&y(f)]}const Un=(t,e,s=3)=>{let d=0;const f=Eg(50,250);return Pg(m=>{const y=m.loaded,h=m.lengthComputable?m.total:void 0,i=y-d,a=f(i),u=y<=h;d=y;const r={loaded:y,total:h,progress:h?y/h:void 0,bytes:i,rate:a||void 0,estimated:a&&h&&u?(h-y)/a:void 0,event:m,lengthComputable:h!=null,[e?"download":"upload"]:!0};t(r)},s)},va=(t,e)=>{const s=t!=null;return[d=>e[0]({lengthComputable:s,total:t,loaded:d}),e[1]]},ya=t=>(...e)=>oe.asap(()=>t(...e)),Ig=Ye.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,Ye.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(Ye.origin),Ye.navigator&&/(msie|trident)/i.test(Ye.navigator.userAgent)):()=>!0,Mg=Ye.hasStandardBrowserEnv?{write(t,e,s,d,f,m){const y=[t+"="+encodeURIComponent(e)];oe.isNumber(s)&&y.push("expires="+new Date(s).toGMTString()),oe.isString(d)&&y.push("path="+d),oe.isString(f)&&y.push("domain="+f),m===!0&&y.push("secure"),document.cookie=y.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Rg(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Dg(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Nc(t,e){return t&&!Rg(e)?Dg(t,e):e}const ba=t=>t instanceof gt?{...t}:t;function si(t,e){e=e||{};const s={};function d(a,u,r,o){return oe.isPlainObject(a)&&oe.isPlainObject(u)?oe.merge.call({caseless:o},a,u):oe.isPlainObject(u)?oe.merge({},u):oe.isArray(u)?u.slice():u}function f(a,u,r,o){if(oe.isUndefined(u)){if(!oe.isUndefined(a))return d(void 0,a,r,o)}else return d(a,u,r,o)}function m(a,u){if(!oe.isUndefined(u))return d(void 0,u)}function y(a,u){if(oe.isUndefined(u)){if(!oe.isUndefined(a))return d(void 0,a)}else return d(void 0,u)}function h(a,u,r){if(r in e)return d(a,u);if(r in t)return d(void 0,a)}const i={url:m,method:m,data:m,baseURL:y,transformRequest:y,transformResponse:y,paramsSerializer:y,timeout:y,timeoutMessage:y,withCredentials:y,withXSRFToken:y,adapter:y,responseType:y,xsrfCookieName:y,xsrfHeaderName:y,onUploadProgress:y,onDownloadProgress:y,decompress:y,maxContentLength:y,maxBodyLength:y,beforeRedirect:y,transport:y,httpAgent:y,httpsAgent:y,cancelToken:y,socketPath:y,responseEncoding:y,validateStatus:h,headers:(a,u,r)=>f(ba(a),ba(u),r,!0)};return oe.forEach(Object.keys(Object.assign({},t,e)),function(u){const r=i[u]||f,o=r(t[u],e[u],u);oe.isUndefined(o)&&r!==h||(s[u]=o)}),s}const Uc=t=>{const e=si({},t);let{data:s,withXSRFToken:d,xsrfHeaderName:f,xsrfCookieName:m,headers:y,auth:h}=e;e.headers=y=gt.from(y),e.url=Fc(Nc(e.baseURL,e.url),t.params,t.paramsSerializer),h&&y.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):"")));let i;if(oe.isFormData(s)){if(Ye.hasStandardBrowserEnv||Ye.hasStandardBrowserWebWorkerEnv)y.setContentType(void 0);else if((i=y.getContentType())!==!1){const[a,...u]=i?i.split(";").map(r=>r.trim()).filter(Boolean):[];y.setContentType([a||"multipart/form-data",...u].join("; "))}}if(Ye.hasStandardBrowserEnv&&(d&&oe.isFunction(d)&&(d=d(e)),d||d!==!1&&Ig(e.url))){const a=f&&m&&Mg.read(m);a&&y.set(f,a)}return e},Fg=typeof XMLHttpRequest<"u",Lg=Fg&&function(t){return new Promise(function(s,d){const f=Uc(t);let m=f.data;const y=gt.from(f.headers).normalize();let{responseType:h,onUploadProgress:i,onDownloadProgress:a}=f,u,r,o,n,c;function p(){n&&n(),c&&c(),f.cancelToken&&f.cancelToken.unsubscribe(u),f.signal&&f.signal.removeEventListener("abort",u)}let l=new XMLHttpRequest;l.open(f.method.toUpperCase(),f.url,!0),l.timeout=f.timeout;function g(){if(!l)return;const b=gt.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),C={data:!h||h==="text"||h==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:b,config:t,request:l};zc(function(k){s(k),p()},function(k){d(k),p()},C),l=null}"onloadend"in l?l.onloadend=g:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(g)},l.onabort=function(){l&&(d(new Ce("Request aborted",Ce.ECONNABORTED,t,l)),l=null)},l.onerror=function(){d(new Ce("Network Error",Ce.ERR_NETWORK,t,l)),l=null},l.ontimeout=function(){let _=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded";const C=f.transitional||Lc;f.timeoutErrorMessage&&(_=f.timeoutErrorMessage),d(new Ce(_,C.clarifyTimeoutError?Ce.ETIMEDOUT:Ce.ECONNABORTED,t,l)),l=null},m===void 0&&y.setContentType(null),"setRequestHeader"in l&&oe.forEach(y.toJSON(),function(_,C){l.setRequestHeader(C,_)}),oe.isUndefined(f.withCredentials)||(l.withCredentials=!!f.withCredentials),h&&h!=="json"&&(l.responseType=f.responseType),a&&([o,c]=Un(a,!0),l.addEventListener("progress",o)),i&&l.upload&&([r,n]=Un(i),l.upload.addEventListener("progress",r),l.upload.addEventListener("loadend",n)),(f.cancelToken||f.signal)&&(u=b=>{l&&(d(!b||b.type?new xi(null,t,l):b),l.abort(),l=null)},f.cancelToken&&f.cancelToken.subscribe(u),f.signal&&(f.signal.aborted?u():f.signal.addEventListener("abort",u)));const v=Ag(f.url);if(v&&Ye.protocols.indexOf(v)===-1){d(new Ce("Unsupported protocol "+v+":",Ce.ERR_BAD_REQUEST,t));return}l.send(m||null)})},Bg=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let d=new AbortController,f;const m=function(a){if(!f){f=!0,h();const u=a instanceof Error?a:this.reason;d.abort(u instanceof Ce?u:new xi(u instanceof Error?u.message:u))}};let y=e&&setTimeout(()=>{y=null,m(new Ce(`timeout ${e} of ms exceeded`,Ce.ETIMEDOUT))},e);const h=()=>{t&&(y&&clearTimeout(y),y=null,t.forEach(a=>{a.unsubscribe?a.unsubscribe(m):a.removeEventListener("abort",m)}),t=null)};t.forEach(a=>a.addEventListener("abort",m));const{signal:i}=d;return i.unsubscribe=()=>oe.asap(h),i}},jg=Bg,zg=function*(t,e){let s=t.byteLength;if(!e||s<e){yield t;return}let d=0,f;for(;d<s;)f=d+e,yield t.slice(d,f),d=f},Ng=async function*(t,e){for await(const s of Ug(t))yield*zg(s,e)},Ug=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:d}=await e.read();if(s)break;yield d}}finally{await e.cancel()}},_a=(t,e,s,d)=>{const f=Ng(t,e);let m=0,y,h=i=>{y||(y=!0,d&&d(i))};return new ReadableStream({async pull(i){try{const{done:a,value:u}=await f.next();if(a){h(),i.close();return}let r=u.byteLength;if(s){let o=m+=r;s(o)}i.enqueue(new Uint8Array(u))}catch(a){throw h(a),a}},cancel(i){return h(i),f.return()}},{highWaterMark:2})},fr=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Hc=fr&&typeof ReadableStream=="function",Hg=fr&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Wc=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Wg=Hc&&Wc(()=>{let t=!1;const e=new Request(Ye.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),xa=64*1024,hs=Hc&&Wc(()=>oe.isReadableStream(new Response("").body)),Hn={stream:hs&&(t=>t.body)};fr&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Hn[e]&&(Hn[e]=oe.isFunction(t[e])?s=>s[e]():(s,d)=>{throw new Ce(`Response type '${e}' is not supported`,Ce.ERR_NOT_SUPPORT,d)})})})(new Response);const Vg=async t=>{if(t==null)return 0;if(oe.isBlob(t))return t.size;if(oe.isSpecCompliantForm(t))return(await new Request(Ye.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(oe.isArrayBufferView(t)||oe.isArrayBuffer(t))return t.byteLength;if(oe.isURLSearchParams(t)&&(t=t+""),oe.isString(t))return(await Hg(t)).byteLength},Xg=async(t,e)=>{const s=oe.toFiniteNumber(t.getContentLength());return s??Vg(e)},Yg=fr&&(async t=>{let{url:e,method:s,data:d,signal:f,cancelToken:m,timeout:y,onDownloadProgress:h,onUploadProgress:i,responseType:a,headers:u,withCredentials:r="same-origin",fetchOptions:o}=Uc(t);a=a?(a+"").toLowerCase():"text";let n=jg([f,m&&m.toAbortSignal()],y),c;const p=n&&n.unsubscribe&&(()=>{n.unsubscribe()});let l;try{if(i&&Wg&&s!=="get"&&s!=="head"&&(l=await Xg(u,d))!==0){let C=new Request(e,{method:"POST",body:d,duplex:"half"}),w;if(oe.isFormData(d)&&(w=C.headers.get("content-type"))&&u.setContentType(w),C.body){const[k,z]=va(l,Un(ya(i)));d=_a(C.body,xa,k,z)}}oe.isString(r)||(r=r?"include":"omit");const g="credentials"in Request.prototype;c=new Request(e,{...o,signal:n,method:s.toUpperCase(),headers:u.normalize().toJSON(),body:d,duplex:"half",credentials:g?r:void 0});let v=await fetch(c);const b=hs&&(a==="stream"||a==="response");if(hs&&(h||b&&p)){const C={};["status","statusText","headers"].forEach(N=>{C[N]=v[N]});const w=oe.toFiniteNumber(v.headers.get("content-length")),[k,z]=h&&va(w,Un(ya(h),!0))||[];v=new Response(_a(v.body,xa,k,()=>{z&&z(),p&&p()}),C)}a=a||"text";let _=await Hn[oe.findKey(Hn,a)||"text"](v,t);return!b&&p&&p(),await new Promise((C,w)=>{zc(C,w,{data:_,headers:gt.from(v.headers),status:v.status,statusText:v.statusText,config:t,request:c})})}catch(g){throw p&&p(),g&&g.name==="TypeError"&&/fetch/i.test(g.message)?Object.assign(new Ce("Network Error",Ce.ERR_NETWORK,t,c),{cause:g.cause||g}):Ce.from(g,g&&g.code,t,c)}}),fs={http:sg,xhr:Lg,fetch:Yg};oe.forEach(fs,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Ca=t=>`- ${t}`,Gg=t=>oe.isFunction(t)||t===null||t===!1,Vc={getAdapter:t=>{t=oe.isArray(t)?t:[t];const{length:e}=t;let s,d;const f={};for(let m=0;m<e;m++){s=t[m];let y;if(d=s,!Gg(s)&&(d=fs[(y=String(s)).toLowerCase()],d===void 0))throw new Ce(`Unknown adapter '${y}'`);if(d)break;f[y||"#"+m]=d}if(!d){const m=Object.entries(f).map(([h,i])=>`adapter ${h} `+(i===!1?"is not supported by the environment":"is not available in the build"));let y=e?m.length>1?`since :
`+m.map(Ca).join(`
`):" "+Ca(m[0]):"as no adapter specified";throw new Ce("There is no suitable adapter to dispatch the request "+y,"ERR_NOT_SUPPORT")}return d},adapters:fs};function Lr(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new xi(null,t)}function wa(t){return Lr(t),t.headers=gt.from(t.headers),t.data=Fr.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Vc.getAdapter(t.adapter||Ks.adapter)(t).then(function(d){return Lr(t),d.data=Fr.call(t,t.transformResponse,d),d.headers=gt.from(d.headers),d},function(d){return jc(d)||(Lr(t),d&&d.response&&(d.response.data=Fr.call(t,t.transformResponse,d.response),d.response.headers=gt.from(d.response.headers))),Promise.reject(d)})}const Xc="1.7.9",dr={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{dr[t]=function(d){return typeof d===t||"a"+(e<1?"n ":" ")+t}});const Sa={};dr.transitional=function(e,s,d){function f(m,y){return"[Axios v"+Xc+"] Transitional option '"+m+"'"+y+(d?". "+d:"")}return(m,y,h)=>{if(e===!1)throw new Ce(f(y," has been removed"+(s?" in "+s:"")),Ce.ERR_DEPRECATED);return s&&!Sa[y]&&(Sa[y]=!0,console.warn(f(y," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(m,y,h):!0}};dr.spelling=function(e){return(s,d)=>(console.warn(`${d} is likely a misspelling of ${e}`),!0)};function qg(t,e,s){if(typeof t!="object")throw new Ce("options must be an object",Ce.ERR_BAD_OPTION_VALUE);const d=Object.keys(t);let f=d.length;for(;f-- >0;){const m=d[f],y=e[m];if(y){const h=t[m],i=h===void 0||y(h,m,t);if(i!==!0)throw new Ce("option "+m+" must be "+i,Ce.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Ce("Unknown option "+m,Ce.ERR_BAD_OPTION)}}const kn={assertOptions:qg,validators:dr},_t=kn.validators;class Wn{constructor(e){this.defaults=e,this.interceptors={request:new ga,response:new ga}}async request(e,s){try{return await this._request(e,s)}catch(d){if(d instanceof Error){let f={};Error.captureStackTrace?Error.captureStackTrace(f):f=new Error;const m=f.stack?f.stack.replace(/^.+\n/,""):"";try{d.stack?m&&!String(d.stack).endsWith(m.replace(/^.+\n.+\n/,""))&&(d.stack+=`
`+m):d.stack=m}catch{}}throw d}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=si(this.defaults,s);const{transitional:d,paramsSerializer:f,headers:m}=s;d!==void 0&&kn.assertOptions(d,{silentJSONParsing:_t.transitional(_t.boolean),forcedJSONParsing:_t.transitional(_t.boolean),clarifyTimeoutError:_t.transitional(_t.boolean)},!1),f!=null&&(oe.isFunction(f)?s.paramsSerializer={serialize:f}:kn.assertOptions(f,{encode:_t.function,serialize:_t.function},!0)),kn.assertOptions(s,{baseUrl:_t.spelling("baseURL"),withXsrfToken:_t.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let y=m&&oe.merge(m.common,m[s.method]);m&&oe.forEach(["delete","get","head","post","put","patch","common"],c=>{delete m[c]}),s.headers=gt.concat(y,m);const h=[];let i=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(s)===!1||(i=i&&p.synchronous,h.unshift(p.fulfilled,p.rejected))});const a=[];this.interceptors.response.forEach(function(p){a.push(p.fulfilled,p.rejected)});let u,r=0,o;if(!i){const c=[wa.bind(this),void 0];for(c.unshift.apply(c,h),c.push.apply(c,a),o=c.length,u=Promise.resolve(s);r<o;)u=u.then(c[r++],c[r++]);return u}o=h.length;let n=s;for(r=0;r<o;){const c=h[r++],p=h[r++];try{n=c(n)}catch(l){p.call(this,l);break}}try{u=wa.call(this,n)}catch(c){return Promise.reject(c)}for(r=0,o=a.length;r<o;)u=u.then(a[r++],a[r++]);return u}getUri(e){e=si(this.defaults,e);const s=Nc(e.baseURL,e.url);return Fc(s,e.params,e.paramsSerializer)}}oe.forEach(["delete","get","head","options"],function(e){Wn.prototype[e]=function(s,d){return this.request(si(d||{},{method:e,url:s,data:(d||{}).data}))}});oe.forEach(["post","put","patch"],function(e){function s(d){return function(m,y,h){return this.request(si(h||{},{method:e,headers:d?{"Content-Type":"multipart/form-data"}:{},url:m,data:y}))}}Wn.prototype[e]=s(),Wn.prototype[e+"Form"]=s(!0)});const An=Wn;class Zs{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(m){s=m});const d=this;this.promise.then(f=>{if(!d._listeners)return;let m=d._listeners.length;for(;m-- >0;)d._listeners[m](f);d._listeners=null}),this.promise.then=f=>{let m;const y=new Promise(h=>{d.subscribe(h),m=h}).then(f);return y.cancel=function(){d.unsubscribe(m)},y},e(function(m,y,h){d.reason||(d.reason=new xi(m,y,h),s(d.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=d=>{e.abort(d)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new Zs(function(f){e=f}),cancel:e}}}const Kg=Zs;function Zg(t){return function(s){return t.apply(null,s)}}function Jg(t){return oe.isObject(t)&&t.isAxiosError===!0}const ds={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ds).forEach(([t,e])=>{ds[e]=t});const Qg=ds;function Yc(t){const e=new An(t),s=wc(An.prototype.request,e);return oe.extend(s,An.prototype,e,{allOwnKeys:!0}),oe.extend(s,e,null,{allOwnKeys:!0}),s.create=function(f){return Yc(si(t,f))},s}const Ue=Yc(Ks);Ue.Axios=An;Ue.CanceledError=xi;Ue.CancelToken=Kg;Ue.isCancel=jc;Ue.VERSION=Xc;Ue.toFormData=ur;Ue.AxiosError=Ce;Ue.Cancel=Ue.CanceledError;Ue.all=function(e){return Promise.all(e)};Ue.spread=Zg;Ue.isAxiosError=Jg;Ue.mergeConfig=si;Ue.AxiosHeaders=gt;Ue.formToJSON=t=>Bc(oe.isHTMLForm(t)?new FormData(t):t);Ue.getAdapter=Vc.getAdapter;Ue.HttpStatusCode=Qg;Ue.default=Ue;const Ta=Ue;var Et=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $g(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function em(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function d(){return this instanceof d?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(d){var f=Object.getOwnPropertyDescriptor(t,d);Object.defineProperty(s,d,f.get?f:{enumerable:!0,get:function(){return t[d]}})}),s}var ve={};const tm={},im=Object.freeze(Object.defineProperty({__proto__:null,default:tm},Symbol.toStringTag,{value:"Module"})),Br=em(im);(function(t){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.4.2"};if(t.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var s=Br,d=new s.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=d.document,e.jsdomImplForWrapper=Br.implForWrapper,e.nodeCanvas=Br.Canvas,e.window=d,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),function(){function h(n,c){if(this.__eventListeners[n]){var p=this.__eventListeners[n];c?p[p.indexOf(c)]=!1:e.util.array.fill(p,!1)}}function i(n,c){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var p in n)this.on(p,n[p]);else this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(c);return this}function a(n,c){var p=(function(){c.apply(this,arguments),this.off(n,p)}).bind(this);this.on(n,p)}function u(n,c){if(arguments.length===1)for(var p in n)a.call(this,p,n[p]);else a.call(this,n,c);return this}function r(n,c){if(!this.__eventListeners)return this;if(arguments.length===0)for(n in this.__eventListeners)h.call(this,n);else if(arguments.length===1&&typeof arguments[0]=="object")for(var p in n)h.call(this,p,n[p]);else h.call(this,n,c);return this}function o(n,c){if(!this.__eventListeners)return this;var p=this.__eventListeners[n];if(!p)return this;for(var l=0,g=p.length;l<g;l++)p[l]&&p[l].call(this,c||{});return this.__eventListeners[n]=p.filter(function(v){return v!==!1}),this}e.Observable={fire:o,on:i,once:u,off:r}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var h=0,i=arguments.length;h<i;h++)this._onObjectAdded(arguments[h]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(h,i,a){var u=this._objects;return a?u[i]=h:u.splice(i,0,h),this._onObjectAdded&&this._onObjectAdded(h),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var h=this._objects,i,a=!1,u=0,r=arguments.length;u<r;u++)i=h.indexOf(arguments[u]),i!==-1&&(a=!0,h.splice(i,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[u]));return this.renderOnAddRemove&&a&&this.requestRenderAll(),this},forEachObject:function(h,i){for(var a=this.getObjects(),u=0,r=a.length;u<r;u++)h.call(i,a[u],u,a);return this},getObjects:function(h){return typeof h>"u"?this._objects.concat():this._objects.filter(function(i){return i.type===h})},item:function(h){return this._objects[h]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(h,i){return this._objects.indexOf(h)>-1?!0:i?this._objects.some(function(a){return typeof a.contains=="function"&&a.contains(h,!0)}):!1},complexity:function(){return this._objects.reduce(function(h,i){return h+=i.complexity?i.complexity():0,h},0)}},e.CommonMethods={_setOptions:function(h){for(var i in h)this.set(i,h[i])},_initGradient:function(h,i){h&&h.colorStops&&!(h instanceof e.Gradient)&&this.set(i,new e.Gradient(h))},_initPattern:function(h,i,a){h&&h.source&&!(h instanceof e.Pattern)?this.set(i,new e.Pattern(h,a)):a&&a()},_setObject:function(h){for(var i in h)this._set(i,h[i])},set:function(h,i){return typeof h=="object"?this._setObject(h):this._set(h,i),this},_set:function(h,i){this[h]=i},toggle:function(h){var i=this.get(h);return typeof i=="boolean"&&this.set(h,!i),this},get:function(h){return this[h]}},function(h){var i=Math.sqrt,a=Math.atan2,u=Math.pow,r=Math.PI/180,o=Math.PI/2;e.util={cos:function(n){if(n===0)return 1;n<0&&(n=-n);var c=n/o;switch(c){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},sin:function(n){if(n===0)return 0;var c=n/o,p=1;switch(n<0&&(p=-1),c){case 1:return p;case 2:return 0;case 3:return-p}return Math.sin(n)},removeFromArray:function(n,c){var p=n.indexOf(c);return p!==-1&&n.splice(p,1),n},getRandomInt:function(n,c){return Math.floor(Math.random()*(c-n+1))+n},degreesToRadians:function(n){return n*r},radiansToDegrees:function(n){return n/r},rotatePoint:function(n,c,p){var l=new e.Point(n.x-c.x,n.y-c.y),g=e.util.rotateVector(l,p);return new e.Point(g.x,g.y).addEquals(c)},rotateVector:function(n,c){var p=e.util.sin(c),l=e.util.cos(c),g=n.x*l-n.y*p,v=n.x*p+n.y*l;return{x:g,y:v}},createVector:function(n,c){return new e.Point(c.x-n.x,c.y-n.y)},calcAngleBetweenVectors:function(n,c){return Math.acos((n.x*c.x+n.y*c.y)/(Math.hypot(n.x,n.y)*Math.hypot(c.x,c.y)))},getHatVector:function(n){return new e.Point(n.x,n.y).multiply(1/Math.hypot(n.x,n.y))},getBisector:function(n,c,p){var l=e.util.createVector(n,c),g=e.util.createVector(n,p),v=e.util.calcAngleBetweenVectors(l,g),b=e.util.calcAngleBetweenVectors(e.util.rotateVector(l,v),g),_=v*(b===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(l,_)),angle:v}},projectStrokeOnPoints:function(n,c,p){var l=[],g=c.strokeWidth/2,v=c.strokeUniform?new e.Point(1/c.scaleX,1/c.scaleY):new e.Point(1,1),b=function(_){var C=g/Math.hypot(_.x,_.y);return new e.Point(_.x*C*v.x,_.y*C*v.y)};return n.length<=1||n.forEach(function(_,C){var w=new e.Point(_.x,_.y),k,z;C===0?(z=n[C+1],k=p?b(e.util.createVector(z,w)).addEquals(w):n[n.length-1]):C===n.length-1?(k=n[C-1],z=p?b(e.util.createVector(k,w)).addEquals(w):n[0]):(k=n[C-1],z=n[C+1]);var N=e.util.getBisector(w,k,z),X=N.vector,re=N.angle,F,K;if(c.strokeLineJoin==="miter"&&(F=-g/Math.sin(re/2),K=new e.Point(X.x*F*v.x,X.y*F*v.y),Math.hypot(K.x,K.y)/g<=c.strokeMiterLimit)){l.push(w.add(K)),l.push(w.subtract(K));return}F=-g*Math.SQRT2,K=new e.Point(X.x*F*v.x,X.y*F*v.y),l.push(w.add(K)),l.push(w.subtract(K))}),l},transformPoint:function(n,c,p){return p?new e.Point(c[0]*n.x+c[2]*n.y,c[1]*n.x+c[3]*n.y):new e.Point(c[0]*n.x+c[2]*n.y+c[4],c[1]*n.x+c[3]*n.y+c[5])},makeBoundingBoxFromPoints:function(n,c){if(c)for(var p=0;p<n.length;p++)n[p]=e.util.transformPoint(n[p],c);var l=[n[0].x,n[1].x,n[2].x,n[3].x],g=e.util.array.min(l),v=e.util.array.max(l),b=v-g,_=[n[0].y,n[1].y,n[2].y,n[3].y],C=e.util.array.min(_),w=e.util.array.max(_),k=w-C;return{left:g,top:C,width:b,height:k}},invertTransform:function(n){var c=1/(n[0]*n[3]-n[1]*n[2]),p=[c*n[3],-c*n[1],-c*n[2],c*n[0]],l=e.util.transformPoint({x:n[4],y:n[5]},p,!0);return p[4]=-l.x,p[5]=-l.y,p},toFixed:function(n,c){return parseFloat(Number(n).toFixed(c))},parseUnit:function(n,c){var p=/\D{0,2}$/.exec(n),l=parseFloat(n);switch(c||(c=e.Text.DEFAULT_SVG_FONT_SIZE),p[0]){case"mm":return l*e.DPI/25.4;case"cm":return l*e.DPI/2.54;case"in":return l*e.DPI;case"pt":return l*e.DPI/72;case"pc":return l*e.DPI/72*12;case"em":return l*c;default:return l}},falseFunction:function(){return!1},getKlass:function(n,c){return n=e.util.string.camelize(n.charAt(0).toUpperCase()+n.slice(1)),e.util.resolveNamespace(c)[n]},getSvgAttributes:function(n){var c=["instantiated_by_use","style","id","class"];switch(n){case"linearGradient":c=c.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":c=c.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":c=c.concat(["offset","stop-color","stop-opacity"]);break}return c},resolveNamespace:function(n){if(!n)return e;var c=n.split("."),p=c.length,l,g=h||e.window;for(l=0;l<p;++l)g=g[c[l]];return g},loadImage:function(n,c,p,l){if(!n){c&&c.call(p,n);return}var g=e.util.createImage(),v=function(){c&&c.call(p,g,!1),g=g.onload=g.onerror=null};g.onload=v,g.onerror=function(){e.log("Error loading "+g.src),c&&c.call(p,null,!0),g=g.onload=g.onerror=null},n.indexOf("data")!==0&&l!==void 0&&l!==null&&(g.crossOrigin=l),n.substring(0,14)==="data:image/svg"&&(g.onload=null,e.util.loadImageInDom(g,v)),g.src=n},loadImageInDom:function(n,c){var p=e.document.createElement("div");p.style.width=p.style.height="1px",p.style.left=p.style.top="-100%",p.style.position="absolute",p.appendChild(n),e.document.querySelector("body").appendChild(p),n.onload=function(){c(),p.parentNode.removeChild(p),p=null}},enlivenObjects:function(n,c,p,l){n=n||[];var g=[],v=0,b=n.length;function _(){++v===b&&c&&c(g.filter(function(C){return C}))}if(!b){c&&c(g);return}n.forEach(function(C,w){if(!C||!C.type){_();return}var k=e.util.getKlass(C.type,p);k.fromObject(C,function(z,N){N||(g[w]=z),l&&l(C,z,N),_()})})},enlivenObjectEnlivables:function(n,c,p){var l=e.Object.ENLIVEN_PROPS.filter(function(g){return!!n[g]});e.util.enlivenObjects(l.map(function(g){return n[g]}),function(g){var v={};l.forEach(function(b,_){v[b]=g[_],c&&(c[b]=g[_])}),p&&p(v)})},enlivenPatterns:function(n,c){n=n||[];function p(){++g===v&&c&&c(l)}var l=[],g=0,v=n.length;if(!v){c&&c(l);return}n.forEach(function(b,_){b&&b.source?new e.Pattern(b,function(C){l[_]=C,p()}):(l[_]=b,p())})},groupSVGElements:function(n,c,p){var l;return n&&n.length===1?(typeof p<"u"&&(n[0].sourcePath=p),n[0]):(c&&(c.width&&c.height?c.centerPoint={x:c.width/2,y:c.height/2}:(delete c.width,delete c.height)),l=new e.Group(n,c),typeof p<"u"&&(l.sourcePath=p),l)},populateWithProperties:function(n,c,p){if(p&&Array.isArray(p))for(var l=0,g=p.length;l<g;l++)p[l]in n&&(c[p[l]]=n[p[l]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(n){var c=e.util.createCanvasElement();return c.width=n.width,c.height=n.height,c.getContext("2d").drawImage(n,0,0),c},toDataURL:function(n,c,p){return n.toDataURL("image/"+c,p)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(n,c,p){return[n[0]*c[0]+n[2]*c[1],n[1]*c[0]+n[3]*c[1],n[0]*c[2]+n[2]*c[3],n[1]*c[2]+n[3]*c[3],p?0:n[0]*c[4]+n[2]*c[5]+n[4],p?0:n[1]*c[4]+n[3]*c[5]+n[5]]},qrDecompose:function(n){var c=a(n[1],n[0]),p=u(n[0],2)+u(n[1],2),l=i(p),g=(n[0]*n[3]-n[2]*n[1])/l,v=a(n[0]*n[2]+n[1]*n[3],p);return{angle:c/r,scaleX:l,scaleY:g,skewX:v/r,skewY:0,translateX:n[4],translateY:n[5]}},calcRotateMatrix:function(n){if(!n.angle)return e.iMatrix.concat();var c=e.util.degreesToRadians(n.angle),p=e.util.cos(c),l=e.util.sin(c);return[p,l,-l,p,0,0]},calcDimensionsMatrix:function(n){var c=typeof n.scaleX>"u"?1:n.scaleX,p=typeof n.scaleY>"u"?1:n.scaleY,l=[n.flipX?-c:c,0,0,n.flipY?-p:p,0,0],g=e.util.multiplyTransformMatrices,v=e.util.degreesToRadians;return n.skewX&&(l=g(l,[1,0,Math.tan(v(n.skewX)),1],!0)),n.skewY&&(l=g(l,[1,Math.tan(v(n.skewY)),0,1],!0)),l},composeMatrix:function(n){var c=[1,0,0,1,n.translateX||0,n.translateY||0],p=e.util.multiplyTransformMatrices;return n.angle&&(c=p(c,e.util.calcRotateMatrix(n))),(n.scaleX!==1||n.scaleY!==1||n.skewX||n.skewY||n.flipX||n.flipY)&&(c=p(c,e.util.calcDimensionsMatrix(n))),c},resetObjectTransform:function(n){n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},saveObjectTransform:function(n){return{scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}},isTransparent:function(n,c,p,l){l>0&&(c>l?c-=l:c=0,p>l?p-=l:p=0);var g=!0,v,b,_=n.getImageData(c,p,l*2||1,l*2||1),C=_.data.length;for(v=3;v<C&&(b=_.data[v],g=b<=0,g!==!1);v+=4);return _=null,g},parsePreserveAspectRatioAttribute:function(n){var c="meet",p="Mid",l="Mid",g=n.split(" "),v;return g&&g.length&&(c=g.pop(),c!=="meet"&&c!=="slice"?(v=c,c="meet"):g.length&&(v=g.pop())),p=v!=="none"?v.slice(1,4):"none",l=v!=="none"?v.slice(5,8):"none",{meetOrSlice:c,alignX:p,alignY:l}},clearFabricFontCache:function(n){n=(n||"").toLowerCase(),n?e.charWidthsCache[n]&&delete e.charWidthsCache[n]:e.charWidthsCache={}},limitDimsByArea:function(n,c){var p=Math.sqrt(c*n),l=Math.floor(c/p);return{x:Math.floor(p),y:l}},capValue:function(n,c,p){return Math.max(n,Math.min(c,p))},findScaleToFit:function(n,c){return Math.min(c.width/n.width,c.height/n.height)},findScaleToCover:function(n,c){return Math.max(c.width/n.width,c.height/n.height)},matrixToSVG:function(n){return"matrix("+n.map(function(c){return e.util.toFixed(c,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(n,c){var p=e.util.invertTransform(c),l=e.util.multiplyTransformMatrices(p,n.calcOwnMatrix());e.util.applyTransformToObject(n,l)},addTransformToObject:function(n,c){e.util.applyTransformToObject(n,e.util.multiplyTransformMatrices(c,n.calcOwnMatrix()))},applyTransformToObject:function(n,c){var p=e.util.qrDecompose(c),l=new e.Point(p.translateX,p.translateY);n.flipX=!1,n.flipY=!1,n.set("scaleX",p.scaleX),n.set("scaleY",p.scaleY),n.skewX=p.skewX,n.skewY=p.skewY,n.angle=p.angle,n.setPositionByOrigin(l,"center","center")},sizeAfterTransform:function(n,c,p){var l=n/2,g=c/2,v=[{x:-l,y:-g},{x:l,y:-g},{x:-l,y:g},{x:l,y:g}],b=e.util.calcDimensionsMatrix(p),_=e.util.makeBoundingBoxFromPoints(v,b);return{x:_.width,y:_.height}},mergeClipPaths:function(n,c){var p=n,l=c;p.inverted&&!l.inverted&&(p=c,l=n),e.util.applyTransformToObject(l,e.util.multiplyTransformMatrices(e.util.invertTransform(p.calcTransformMatrix()),l.calcTransformMatrix()));var g=p.inverted&&l.inverted;return g&&(p.inverted=l.inverted=!1),new e.Group([p],{clipPath:l,inverted:g})},hasStyleChanged:function(n,c,p){return p=p||!1,n.fill!==c.fill||n.stroke!==c.stroke||n.strokeWidth!==c.strokeWidth||n.fontSize!==c.fontSize||n.fontFamily!==c.fontFamily||n.fontWeight!==c.fontWeight||n.fontStyle!==c.fontStyle||n.textBackgroundColor!==c.textBackgroundColor||n.deltaY!==c.deltaY||p&&(n.overline!==c.overline||n.underline!==c.underline||n.linethrough!==c.linethrough)},stylesToArray:function(p,c){for(var p=e.util.object.clone(p,!0),l=c.split(`
`),g=-1,v={},b=[],_=0;_<l.length;_++){if(!p[_]){g+=l[_].length;continue}for(var C=0;C<l[_].length;C++){g++;var w=p[_][C];if(w&&Object.keys(w).length>0){var k=e.util.hasStyleChanged(v,w,!0);k?b.push({start:g,end:g+1,style:w}):b[b.length-1].end++}v=w||{}}}return b},stylesFromArray:function(n,c){if(!Array.isArray(n))return n;for(var p=c.split(`
`),l=-1,g=0,v={},b=0;b<p.length;b++)for(var _=0;_<p[b].length;_++)l++,n[g]&&n[g].start<=l&&l<n[g].end&&(v[b]=v[b]||{},v[b][_]=Object.assign({},n[g].style),l===n[g].end-1&&g++);return v}}}(t),function(){var h=Array.prototype.join,i={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},a={m:"l",M:"L"};function u(A,W,R,I,Q,U,P,Z,H,q,V){var ee=e.util.cos(A),se=e.util.sin(A),fe=e.util.cos(W),E=e.util.sin(W),x=R*Q*fe-I*U*E+P,M=I*Q*fe+R*U*E+Z,L=q+H*(-R*Q*se-I*U*ee),S=V+H*(-I*Q*se+R*U*ee),O=x+H*(R*Q*E+I*U*fe),j=M+H*(I*Q*E-R*U*fe);return["C",L,S,O,j,x,M]}function r(A,W,R,I,Q,U,P){var Z=Math.PI,H=P*Z/180,q=e.util.sin(H),V=e.util.cos(H),ee=0,se=0;R=Math.abs(R),I=Math.abs(I);var fe=-V*A*.5-q*W*.5,E=-V*W*.5+q*A*.5,x=R*R,M=I*I,L=E*E,S=fe*fe,O=x*M-x*L-M*S,j=0;if(O<0){var G=Math.sqrt(1-O/(x*M));R*=G,I*=G}else j=(Q===U?-1:1)*Math.sqrt(O/(x*L+M*S));var Y=j*R*E/I,D=-j*I*fe/R,$=V*Y-q*D+A*.5,te=q*Y+V*D+W*.5,ne=o(1,0,(fe-Y)/R,(E-D)/I),he=o((fe-Y)/R,(E-D)/I,(-fe-Y)/R,(-E-D)/I);U===0&&he>0?he-=2*Z:U===1&&he<0&&(he+=2*Z);for(var pe=Math.ceil(Math.abs(he/Z*2)),me=[],ye=he/pe,Ee=8/3*Math.sin(ye/4)*Math.sin(ye/4)/Math.sin(ye/2),Te=ne+ye,Pe=0;Pe<pe;Pe++)me[Pe]=u(ne,Te,V,q,R,I,$,te,Ee,ee,se),ee=me[Pe][5],se=me[Pe][6],ne=Te,Te+=ye;return me}function o(A,W,R,I){var Q=Math.atan2(W,A),U=Math.atan2(I,R);return U>=Q?U-Q:2*Math.PI-(Q-U)}function n(A,W,R,I,Q,U,P,Z){var H;if(e.cachesBoundsOfCurve&&(H=h.call(arguments),e.boundsOfCurveCache[H]))return e.boundsOfCurveCache[H];var q=Math.sqrt,V=Math.min,ee=Math.max,se=Math.abs,fe=[],E=[[],[]],x,M,L,S,O,j,G,Y;M=6*A-12*R+6*Q,x=-3*A+9*R-9*Q+3*P,L=3*R-3*A;for(var D=0;D<2;++D){if(D>0&&(M=6*W-12*I+6*U,x=-3*W+9*I-9*U+3*Z,L=3*I-3*W),se(x)<1e-12){if(se(M)<1e-12)continue;S=-L/M,0<S&&S<1&&fe.push(S);continue}G=M*M-4*L*x,!(G<0)&&(Y=q(G),O=(-M+Y)/(2*x),0<O&&O<1&&fe.push(O),j=(-M-Y)/(2*x),0<j&&j<1&&fe.push(j))}for(var $,te,ne=fe.length,he=ne,pe;ne--;)S=fe[ne],pe=1-S,$=pe*pe*pe*A+3*pe*pe*S*R+3*pe*S*S*Q+S*S*S*P,E[0][ne]=$,te=pe*pe*pe*W+3*pe*pe*S*I+3*pe*S*S*U+S*S*S*Z,E[1][ne]=te;E[0][he]=A,E[1][he]=W,E[0][he+1]=P,E[1][he+1]=Z;var me=[{x:V.apply(null,E[0]),y:V.apply(null,E[1])},{x:ee.apply(null,E[0]),y:ee.apply(null,E[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[H]=me),me}function c(A,W,R){for(var I=R[1],Q=R[2],U=R[3],P=R[4],Z=R[5],H=R[6],q=R[7],V=r(H-A,q-W,I,Q,P,Z,U),ee=0,se=V.length;ee<se;ee++)V[ee][1]+=A,V[ee][2]+=W,V[ee][3]+=A,V[ee][4]+=W,V[ee][5]+=A,V[ee][6]+=W;return V}function p(A){var W=0,R=0,I=A.length,Q=0,U=0,P,Z,H,q=[],V,ee,se;for(Z=0;Z<I;++Z){switch(H=!1,P=A[Z].slice(0),P[0]){case"l":P[0]="L",P[1]+=W,P[2]+=R;case"L":W=P[1],R=P[2];break;case"h":P[1]+=W;case"H":P[0]="L",P[2]=R,W=P[1];break;case"v":P[1]+=R;case"V":P[0]="L",R=P[1],P[1]=W,P[2]=R;break;case"m":P[0]="M",P[1]+=W,P[2]+=R;case"M":W=P[1],R=P[2],Q=P[1],U=P[2];break;case"c":P[0]="C",P[1]+=W,P[2]+=R,P[3]+=W,P[4]+=R,P[5]+=W,P[6]+=R;case"C":ee=P[3],se=P[4],W=P[5],R=P[6];break;case"s":P[0]="S",P[1]+=W,P[2]+=R,P[3]+=W,P[4]+=R;case"S":V==="C"?(ee=2*W-ee,se=2*R-se):(ee=W,se=R),W=P[3],R=P[4],P[0]="C",P[5]=P[3],P[6]=P[4],P[3]=P[1],P[4]=P[2],P[1]=ee,P[2]=se,ee=P[3],se=P[4];break;case"q":P[0]="Q",P[1]+=W,P[2]+=R,P[3]+=W,P[4]+=R;case"Q":ee=P[1],se=P[2],W=P[3],R=P[4];break;case"t":P[0]="T",P[1]+=W,P[2]+=R;case"T":V==="Q"?(ee=2*W-ee,se=2*R-se):(ee=W,se=R),P[0]="Q",W=P[1],R=P[2],P[1]=ee,P[2]=se,P[3]=W,P[4]=R;break;case"a":P[0]="A",P[6]+=W,P[7]+=R;case"A":H=!0,q=q.concat(c(W,R,P)),W=P[6],R=P[7];break;case"z":case"Z":W=Q,R=U;break}H||q.push(P),V=P[0]}return q}function l(A,W,R,I){return Math.sqrt((R-A)*(R-A)+(I-W)*(I-W))}function g(A){return A*A*A}function v(A){return 3*A*A*(1-A)}function b(A){return 3*A*(1-A)*(1-A)}function _(A){return(1-A)*(1-A)*(1-A)}function C(A,W,R,I,Q,U,P,Z){return function(H){var q=g(H),V=v(H),ee=b(H),se=_(H);return{x:P*q+Q*V+R*ee+A*se,y:Z*q+U*V+I*ee+W*se}}}function w(A,W,R,I,Q,U,P,Z){return function(H){var q=1-H,V=3*q*q*(R-A)+6*q*H*(Q-R)+3*H*H*(P-Q),ee=3*q*q*(I-W)+6*q*H*(U-I)+3*H*H*(Z-U);return Math.atan2(ee,V)}}function k(A){return A*A}function z(A){return 2*A*(1-A)}function N(A){return(1-A)*(1-A)}function X(A,W,R,I,Q,U){return function(P){var Z=k(P),H=z(P),q=N(P);return{x:Q*Z+R*H+A*q,y:U*Z+I*H+W*q}}}function re(A,W,R,I,Q,U){return function(P){var Z=1-P,H=2*Z*(R-A)+2*P*(Q-R),q=2*Z*(I-W)+2*P*(U-I);return Math.atan2(q,H)}}function F(A,W,R){var I={x:W,y:R},Q,U=0,P;for(P=1;P<=100;P+=1)Q=A(P/100),U+=l(I.x,I.y,Q.x,Q.y),I=Q;return U}function K(A,W){for(var R=0,I=0,Q=A.iterator,U={x:A.x,y:A.y},P,Z,H=.01,q=A.angleFinder,V;I<W&&H>1e-4;)P=Q(R),V=R,Z=l(U.x,U.y,P.x,P.y),Z+I>W?(R-=H,H/=2):(U=P,R+=H,I+=Z);return P.angle=q(V),P}function T(A){for(var W=0,R=A.length,I,Q=0,U=0,P=0,Z=0,H=[],q,V,ee,se=0;se<R;se++){switch(I=A[se],V={x:Q,y:U,command:I[0]},I[0]){case"M":V.length=0,P=Q=I[1],Z=U=I[2];break;case"L":V.length=l(Q,U,I[1],I[2]),Q=I[1],U=I[2];break;case"C":q=C(Q,U,I[1],I[2],I[3],I[4],I[5],I[6]),ee=w(Q,U,I[1],I[2],I[3],I[4],I[5],I[6]),V.iterator=q,V.angleFinder=ee,V.length=F(q,Q,U),Q=I[5],U=I[6];break;case"Q":q=X(Q,U,I[1],I[2],I[3],I[4]),ee=re(Q,U,I[1],I[2],I[3],I[4]),V.iterator=q,V.angleFinder=ee,V.length=F(q,Q,U),Q=I[3],U=I[4];break;case"Z":case"z":V.destX=P,V.destY=Z,V.length=l(Q,U,P,Z),Q=P,U=Z;break}W+=V.length,H.push(V)}return H.push({length:W,x:Q,y:U}),H}function J(A,W,R){R||(R=T(A));for(var I=0;W-R[I].length>0&&I<R.length-2;)W-=R[I].length,I++;var Q=R[I],U=W/Q.length,P=Q.command,Z=A[I],H;switch(P){case"M":return{x:Q.x,y:Q.y,angle:0};case"Z":case"z":return H=new e.Point(Q.x,Q.y).lerp(new e.Point(Q.destX,Q.destY),U),H.angle=Math.atan2(Q.destY-Q.y,Q.destX-Q.x),H;case"L":return H=new e.Point(Q.x,Q.y).lerp(new e.Point(Z[1],Z[2]),U),H.angle=Math.atan2(Z[2]-Q.y,Z[1]-Q.x),H;case"C":return K(Q,W);case"Q":return K(Q,W)}}function ue(A){var W=[],R=[],I,Q,U=e.rePathCommand,P="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",Z="("+P+")"+e.commaWsp,H="([01])"+e.commaWsp+"?",q=Z+"?"+Z+"?"+Z+H+H+Z+"?("+P+")",V=new RegExp(q,"g"),ee,se,fe;if(!A||!A.match)return W;fe=A.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var E=0,x,M=fe.length;E<M;E++){I=fe[E],se=I.slice(1).trim(),R.length=0;var L=I.charAt(0);if(x=[L],L.toLowerCase()==="a")for(var S;S=V.exec(se);)for(var O=1;O<S.length;O++)R.push(S[O]);else for(;ee=U.exec(se);)R.push(ee[0]);for(var O=0,j=R.length;O<j;O++)Q=parseFloat(R[O]),isNaN(Q)||x.push(Q);var G=i[L.toLowerCase()],Y=a[L]||L;if(x.length-1>G)for(var D=1,$=x.length;D<$;D+=G)W.push([L].concat(x.slice(D,D+G))),L=Y;else W.push(x)}return W}function ie(A,W){var R=[],I,Q=new e.Point(A[0].x,A[0].y),U=new e.Point(A[1].x,A[1].y),P=A.length,Z=1,H=0,q=P>2;for(W=W||0,q&&(Z=A[2].x<U.x?-1:A[2].x===U.x?0:1,H=A[2].y<U.y?-1:A[2].y===U.y?0:1),R.push(["M",Q.x-Z*W,Q.y-H*W]),I=1;I<P;I++){if(!Q.eq(U)){var V=Q.midPointFrom(U);R.push(["Q",Q.x,Q.y,V.x,V.y])}Q=A[I],I+1<A.length&&(U=A[I+1])}return q&&(Z=Q.x>A[I-2].x?1:Q.x===A[I-2].x?0:-1,H=Q.y>A[I-2].y?1:Q.y===A[I-2].y?0:-1),R.push(["L",Q.x+Z*W,Q.y+H*W]),R}function ae(A,W,R){return R&&(W=e.util.multiplyTransformMatrices(W,[1,0,0,1,-R.x,-R.y])),A.map(function(I){for(var Q=I.slice(0),U={},P=1;P<I.length-1;P+=2)U.x=I[P],U.y=I[P+1],U=e.util.transformPoint(U,W),Q[P]=U.x,Q[P+1]=U.y;return Q})}e.util.joinPath=function(A){return A.map(function(W){return W.join(" ")}).join(" ")},e.util.parsePath=ue,e.util.makePathSimpler=p,e.util.getSmoothPathFromPoints=ie,e.util.getPathSegmentsInfo=T,e.util.getBoundsOfCurve=n,e.util.getPointOnPath=J,e.util.transformPath=ae}(),function(){var h=Array.prototype.slice;function i(n,c){for(var p=h.call(arguments,2),l=[],g=0,v=n.length;g<v;g++)l[g]=p.length?n[g][c].apply(n[g],p):n[g][c].call(n[g]);return l}function a(n,c){return o(n,c,function(p,l){return p>=l})}function u(n,c){return o(n,c,function(p,l){return p<l})}function r(n,c){for(var p=n.length;p--;)n[p]=c;return n}function o(n,c,p){if(!(!n||n.length===0)){var l=n.length-1,g=c?n[l][c]:n[l];if(c)for(;l--;)p(n[l][c],g)&&(g=n[l][c]);else for(;l--;)p(n[l],g)&&(g=n[l]);return g}}e.util.array={fill:r,invoke:i,min:u,max:a}}(),function(){function h(a,u,r){if(r)if(!e.isLikelyNode&&u instanceof Element)a=u;else if(u instanceof Array){a=[];for(var o=0,n=u.length;o<n;o++)a[o]=h({},u[o],r)}else if(u&&typeof u=="object")for(var c in u)c==="canvas"||c==="group"?a[c]=null:u.hasOwnProperty(c)&&(a[c]=h({},u[c],r));else a=u;else for(var c in u)a[c]=u[c];return a}function i(a,u){return h({},a,u)}e.util.object={extend:h,clone:i},e.util.object.extend(e.util,e.Observable)}(),function(){function h(o){return o.replace(/-+(.)?/g,function(n,c){return c?c.toUpperCase():""})}function i(o,n){return o.charAt(0).toUpperCase()+(n?o.slice(1):o.slice(1).toLowerCase())}function a(o){return o.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(o){var n=0,c,p=[];for(n=0,c;n<o.length;n++)(c=r(o,n))!==!1&&p.push(c);return p}function r(o,n){var c=o.charCodeAt(n);if(isNaN(c))return"";if(c<55296||c>57343)return o.charAt(n);if(55296<=c&&c<=56319){if(o.length<=n+1)throw"High surrogate without following low surrogate";var p=o.charCodeAt(n+1);if(56320>p||p>57343)throw"High surrogate without following low surrogate";return o.charAt(n)+o.charAt(n+1)}if(n===0)throw"Low surrogate without preceding high surrogate";var l=o.charCodeAt(n-1);if(55296>l||l>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:h,capitalize:i,escapeXml:a,graphemeSplit:u}}(),function(){var h=Array.prototype.slice,i=function(){},a=function(){for(var c in{toString:1})if(c==="toString")return!1;return!0}(),u=function(c,p,l){for(var g in p)g in c.prototype&&typeof c.prototype[g]=="function"&&(p[g]+"").indexOf("callSuper")>-1?c.prototype[g]=function(v){return function(){var b=this.constructor.superclass;this.constructor.superclass=l;var _=p[v].apply(this,arguments);if(this.constructor.superclass=b,v!=="initialize")return _}}(g):c.prototype[g]=p[g],a&&(p.toString!==Object.prototype.toString&&(c.prototype.toString=p.toString),p.valueOf!==Object.prototype.valueOf&&(c.prototype.valueOf=p.valueOf))};function r(){}function o(c){for(var p=null,l=this;l.constructor.superclass;){var g=l.constructor.superclass.prototype[c];if(l[c]!==g){p=g;break}l=l.constructor.superclass.prototype}return p?arguments.length>1?p.apply(this,h.call(arguments,1)):p.call(this):console.log("tried to callSuper "+c+", method not found in prototype chain",this)}function n(){var c=null,p=h.call(arguments,0);typeof p[0]=="function"&&(c=p.shift());function l(){this.initialize.apply(this,arguments)}l.superclass=c,l.subclasses=[],c&&(r.prototype=c.prototype,l.prototype=new r,c.subclasses.push(l));for(var g=0,v=p.length;g<v;g++)u(l,p[g],c);return l.prototype.initialize||(l.prototype.initialize=i),l.prototype.constructor=l,l.prototype.callSuper=o,l}e.util.createClass=n}(),function(){var h=!!e.document.createElement("div").attachEvent,i=["touchstart","touchmove","touchend"];e.util.addListener=function(u,r,o,n){u&&u.addEventListener(r,o,h?!1:n)},e.util.removeListener=function(u,r,o,n){u&&u.removeEventListener(r,o,h?!1:n)};function a(u){var r=u.changedTouches;return r&&r[0]?r[0]:u}e.util.getPointer=function(u){var r=u.target,o=e.util.getScrollLeftTop(r),n=a(u);return{x:n.clientX+o.left,y:n.clientY+o.top}},e.util.isTouchEvent=function(u){return i.indexOf(u.type)>-1||u.pointerType==="touch"}}(),function(){function h(n,c){var p=n.style;if(!p)return n;if(typeof c=="string")return n.style.cssText+=";"+c,c.indexOf("opacity")>-1?o(n,c.match(/opacity:\s*(\d?\.?\d*)/)[1]):n;for(var l in c)if(l==="opacity")o(n,c[l]);else{var g=l==="float"||l==="cssFloat"?typeof p.styleFloat>"u"?"cssFloat":"styleFloat":l;p.setProperty(g,c[l])}return n}var i=e.document.createElement("div"),a=typeof i.style.opacity=="string",u=typeof i.style.filter=="string",r=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,o=function(n){return n};a?o=function(n,c){return n.style.opacity=c,n}:u&&(o=function(n,c){var p=n.style;return n.currentStyle&&!n.currentStyle.hasLayout&&(p.zoom=1),r.test(p.filter)?(c=c>=.9999?"":"alpha(opacity="+c*100+")",p.filter=p.filter.replace(r,c)):p.filter+=" alpha(opacity="+c*100+")",n}),e.util.setStyle=h}(),function(){var h=Array.prototype.slice;function i(_){return typeof _=="string"?e.document.getElementById(_):_}var a,u=function(_){return h.call(_,0)};try{a=u(e.document.childNodes)instanceof Array}catch{}a||(u=function(_){for(var C=new Array(_.length),w=_.length;w--;)C[w]=_[w];return C});function r(_,C){var w=e.document.createElement(_);for(var k in C)k==="class"?w.className=C[k]:k==="for"?w.htmlFor=C[k]:w.setAttribute(k,C[k]);return w}function o(_,C){_&&(" "+_.className+" ").indexOf(" "+C+" ")===-1&&(_.className+=(_.className?" ":"")+C)}function n(_,C,w){return typeof C=="string"&&(C=r(C,w)),_.parentNode&&_.parentNode.replaceChild(C,_),C.appendChild(_),C}function c(_){for(var C=0,w=0,k=e.document.documentElement,z=e.document.body||{scrollLeft:0,scrollTop:0};_&&(_.parentNode||_.host)&&(_=_.parentNode||_.host,_===e.document?(C=z.scrollLeft||k.scrollLeft||0,w=z.scrollTop||k.scrollTop||0):(C+=_.scrollLeft||0,w+=_.scrollTop||0),!(_.nodeType===1&&_.style.position==="fixed")););return{left:C,top:w}}function p(_){var C,w=_&&_.ownerDocument,k={left:0,top:0},z={left:0,top:0},N,X={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!w)return z;for(var re in X)z[X[re]]+=parseInt(l(_,re),10)||0;return C=w.documentElement,typeof _.getBoundingClientRect<"u"&&(k=_.getBoundingClientRect()),N=c(_),{left:k.left+N.left-(C.clientLeft||0)+z.left,top:k.top+N.top-(C.clientTop||0)+z.top}}var l;e.document.defaultView&&e.document.defaultView.getComputedStyle?l=function(_,C){var w=e.document.defaultView.getComputedStyle(_,null);return w?w[C]:void 0}:l=function(_,C){var w=_.style[C];return!w&&_.currentStyle&&(w=_.currentStyle[C]),w},function(){var _=e.document.documentElement.style,C="userSelect"in _?"userSelect":"MozUserSelect"in _?"MozUserSelect":"WebkitUserSelect"in _?"WebkitUserSelect":"KhtmlUserSelect"in _?"KhtmlUserSelect":"";function w(z){return typeof z.onselectstart<"u"&&(z.onselectstart=e.util.falseFunction),C?z.style[C]="none":typeof z.unselectable=="string"&&(z.unselectable="on"),z}function k(z){return typeof z.onselectstart<"u"&&(z.onselectstart=null),C?z.style[C]="":typeof z.unselectable=="string"&&(z.unselectable=""),z}e.util.makeElementUnselectable=w,e.util.makeElementSelectable=k}();function g(_){var C=e.jsdomImplForWrapper(_);return C._canvas||C._image}function v(_){if(e.isLikelyNode){var C=e.jsdomImplForWrapper(_);C&&(C._image=null,C._canvas=null,C._currentSrc=null,C._attributes=null,C._classList=null)}}function b(_,C){_.imageSmoothingEnabled=_.imageSmoothingEnabled||_.webkitImageSmoothingEnabled||_.mozImageSmoothingEnabled||_.msImageSmoothingEnabled||_.oImageSmoothingEnabled,_.imageSmoothingEnabled=C}e.util.setImageSmoothing=b,e.util.getById=i,e.util.toArray=u,e.util.addClass=o,e.util.makeElement=r,e.util.wrapElement=n,e.util.getScrollLeftTop=c,e.util.getElementOffset=p,e.util.getNodeCanvas=g,e.util.cleanUpJsdomNode=v}(),function(){function h(u,r){return u+(/\?/.test(u)?"&":"?")+r}function i(){}function a(u,r){r||(r={});var o=r.method?r.method.toUpperCase():"GET",n=r.onComplete||function(){},c=new e.window.XMLHttpRequest,p=r.body||r.parameters;return c.onreadystatechange=function(){c.readyState===4&&(n(c),c.onreadystatechange=i)},o==="GET"&&(p=null,typeof r.parameters=="string"&&(u=h(u,r.parameters))),c.open(o,u,!0),(o==="POST"||o==="PUT")&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(p),c}e.util.request=a}(),e.log=console.log,e.warn=console.warn,function(){var h=e.util.object.extend,i=e.util.object.clone,a=[];e.util.object.extend(a,{cancelAll:function(){var g=this.splice(0);return g.forEach(function(v){v.cancel()}),g},cancelByCanvas:function(g){if(!g)return[];var v=this.filter(function(b){return typeof b.target=="object"&&b.target.canvas===g});return v.forEach(function(b){b.cancel()}),v},cancelByTarget:function(g){var v=this.findAnimationsByTarget(g);return v.forEach(function(b){b.cancel()}),v},findAnimationIndex:function(g){return this.indexOf(this.findAnimation(g))},findAnimation:function(g){return this.find(function(v){return v.cancel===g})},findAnimationsByTarget:function(g){return g?this.filter(function(v){return v.target===g}):[]}});function u(){return!1}function r(g,v,b,_){return-b*Math.cos(g/_*(Math.PI/2))+b+v}function o(g){g||(g={});var v=!1,b,_=function(){var C=e.runningAnimations.indexOf(b);return C>-1&&e.runningAnimations.splice(C,1)[0]};return b=h(i(g),{cancel:function(){return v=!0,_()},currentValue:"startValue"in g?g.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(b),p(function(C){var w=C||+new Date,k=g.duration||500,z=w+k,N,X=g.onChange||u,re=g.abort||u,F=g.onComplete||u,K=g.easing||r,T="startValue"in g?g.startValue.length>0:!1,J="startValue"in g?g.startValue:0,ue="endValue"in g?g.endValue:100,ie=g.byValue||(T?J.map(function(ae,A){return ue[A]-J[A]}):ue-J);g.onStart&&g.onStart(),function ae(A){N=A||+new Date;var W=N>z?k:N-w,R=W/k,I=T?J.map(function(U,P){return K(W,J[P],ie[P],k)}):K(W,J,ie,k),Q=Math.abs(T?(I[0]-J[0])/ie[0]:(I-J)/ie);if(b.currentValue=T?I.slice():I,b.completionRate=Q,b.durationRate=R,!v){if(re(I,Q,R)){_();return}if(N>z){b.currentValue=T?ue.slice():ue,b.completionRate=1,b.durationRate=1,X(T?ue.slice():ue,1,1),F(ue,1,1),_();return}else X(I,Q,R),p(ae)}}(w)}),b.cancel}var n=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(g){return e.window.setTimeout(g,1e3/60)},c=e.window.cancelAnimationFrame||e.window.clearTimeout;function p(){return n.apply(e.window,arguments)}function l(){return c.apply(e.window,arguments)}e.util.animate=o,e.util.requestAnimFrame=p,e.util.cancelAnimFrame=l,e.runningAnimations=a}(),function(){function h(a,u,r){var o="rgba("+parseInt(a[0]+r*(u[0]-a[0]),10)+","+parseInt(a[1]+r*(u[1]-a[1]),10)+","+parseInt(a[2]+r*(u[2]-a[2]),10);return o+=","+(a&&u?parseFloat(a[3]+r*(u[3]-a[3])):1),o+=")",o}function i(a,u,r,o){var n=new e.Color(a).getSource(),c=new e.Color(u).getSource(),p=o.onComplete,l=o.onChange;return o=o||{},e.util.animate(e.util.object.extend(o,{duration:r||500,startValue:n,endValue:c,byValue:c,easing:function(g,v,b,_){var C=o.colorEasing?o.colorEasing(g,_):1-Math.cos(g/_*(Math.PI/2));return h(v,b,C)},onComplete:function(g,v,b){if(p)return p(h(c,c,0),v,b)},onChange:function(g,v,b){if(l){if(Array.isArray(g))return l(h(g,g,0),v,b);l(g,v,b)}}}))}e.util.animateColor=i}(),function(){function h(A,W,R,I){return A<Math.abs(W)?(A=W,I=R/4):W===0&&A===0?I=R/(2*Math.PI)*Math.asin(1):I=R/(2*Math.PI)*Math.asin(W/A),{a:A,c:W,p:R,s:I}}function i(A,W,R){return A.a*Math.pow(2,10*(W-=1))*Math.sin((W*R-A.s)*(2*Math.PI)/A.p)}function a(A,W,R,I){return R*((A=A/I-1)*A*A+1)+W}function u(A,W,R,I){return A/=I/2,A<1?R/2*A*A*A+W:R/2*((A-=2)*A*A+2)+W}function r(A,W,R,I){return R*(A/=I)*A*A*A+W}function o(A,W,R,I){return-R*((A=A/I-1)*A*A*A-1)+W}function n(A,W,R,I){return A/=I/2,A<1?R/2*A*A*A*A+W:-R/2*((A-=2)*A*A*A-2)+W}function c(A,W,R,I){return R*(A/=I)*A*A*A*A+W}function p(A,W,R,I){return R*((A=A/I-1)*A*A*A*A+1)+W}function l(A,W,R,I){return A/=I/2,A<1?R/2*A*A*A*A*A+W:R/2*((A-=2)*A*A*A*A+2)+W}function g(A,W,R,I){return-R*Math.cos(A/I*(Math.PI/2))+R+W}function v(A,W,R,I){return R*Math.sin(A/I*(Math.PI/2))+W}function b(A,W,R,I){return-R/2*(Math.cos(Math.PI*A/I)-1)+W}function _(A,W,R,I){return A===0?W:R*Math.pow(2,10*(A/I-1))+W}function C(A,W,R,I){return A===I?W+R:R*(-Math.pow(2,-10*A/I)+1)+W}function w(A,W,R,I){return A===0?W:A===I?W+R:(A/=I/2,A<1?R/2*Math.pow(2,10*(A-1))+W:R/2*(-Math.pow(2,-10*--A)+2)+W)}function k(A,W,R,I){return-R*(Math.sqrt(1-(A/=I)*A)-1)+W}function z(A,W,R,I){return R*Math.sqrt(1-(A=A/I-1)*A)+W}function N(A,W,R,I){return A/=I/2,A<1?-R/2*(Math.sqrt(1-A*A)-1)+W:R/2*(Math.sqrt(1-(A-=2)*A)+1)+W}function X(A,W,R,I){var Q=1.70158,U=0,P=R;if(A===0)return W;if(A/=I,A===1)return W+R;U||(U=I*.3);var Z=h(P,R,U,Q);return-i(Z,A,I)+W}function re(A,W,R,I){var Q=1.70158,U=0,P=R;if(A===0)return W;if(A/=I,A===1)return W+R;U||(U=I*.3);var Z=h(P,R,U,Q);return Z.a*Math.pow(2,-10*A)*Math.sin((A*I-Z.s)*(2*Math.PI)/Z.p)+Z.c+W}function F(A,W,R,I){var Q=1.70158,U=0,P=R;if(A===0)return W;if(A/=I/2,A===2)return W+R;U||(U=I*(.3*1.5));var Z=h(P,R,U,Q);return A<1?-.5*i(Z,A,I)+W:Z.a*Math.pow(2,-10*(A-=1))*Math.sin((A*I-Z.s)*(2*Math.PI)/Z.p)*.5+Z.c+W}function K(A,W,R,I,Q){return Q===void 0&&(Q=1.70158),R*(A/=I)*A*((Q+1)*A-Q)+W}function T(A,W,R,I,Q){return Q===void 0&&(Q=1.70158),R*((A=A/I-1)*A*((Q+1)*A+Q)+1)+W}function J(A,W,R,I,Q){return Q===void 0&&(Q=1.70158),A/=I/2,A<1?R/2*(A*A*(((Q*=1.525)+1)*A-Q))+W:R/2*((A-=2)*A*(((Q*=1.525)+1)*A+Q)+2)+W}function ue(A,W,R,I){return R-ie(I-A,0,R,I)+W}function ie(A,W,R,I){return(A/=I)<1/2.75?R*(7.5625*A*A)+W:A<2/2.75?R*(7.5625*(A-=1.5/2.75)*A+.75)+W:A<2.5/2.75?R*(7.5625*(A-=2.25/2.75)*A+.9375)+W:R*(7.5625*(A-=2.625/2.75)*A+.984375)+W}function ae(A,W,R,I){return A<I/2?ue(A*2,0,R,I)*.5+W:ie(A*2-I,0,R,I)*.5+R*.5+W}e.util.ease={easeInQuad:function(A,W,R,I){return R*(A/=I)*A+W},easeOutQuad:function(A,W,R,I){return-R*(A/=I)*(A-2)+W},easeInOutQuad:function(A,W,R,I){return A/=I/2,A<1?R/2*A*A+W:-R/2*(--A*(A-2)-1)+W},easeInCubic:function(A,W,R,I){return R*(A/=I)*A*A+W},easeOutCubic:a,easeInOutCubic:u,easeInQuart:r,easeOutQuart:o,easeInOutQuart:n,easeInQuint:c,easeOutQuint:p,easeInOutQuint:l,easeInSine:g,easeOutSine:v,easeInOutSine:b,easeInExpo:_,easeOutExpo:C,easeInOutExpo:w,easeInCirc:k,easeOutCirc:z,easeInOutCirc:N,easeInElastic:X,easeOutElastic:re,easeInOutElastic:F,easeInBack:K,easeOutBack:T,easeInOutBack:J,easeInBounce:ue,easeOutBounce:ie,easeInOutBounce:ae}}(),function(h){var i=h.fabric||(h.fabric={}),a=i.util.object.extend,u=i.util.object.clone,r=i.util.toFixed,o=i.util.parseUnit,n=i.util.multiplyTransformMatrices,c=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],p=["symbol","image","marker","pattern","view","svg"],l=["pattern","defs","symbol","metadata","clipPath","mask","desc"],g=["symbol","g","a","svg","clipPath","defs"],v={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},b={stroke:"strokeOpacity",fill:"fillOpacity"},_="font-size",C="clip-path";i.svgValidTagNamesRegEx=z(c),i.svgViewBoxElementsRegEx=z(p),i.svgInvalidAncestorsRegEx=z(l),i.svgValidParentsRegEx=z(g),i.cssRules={},i.gradientDefs={},i.clipPaths={};function w(U){return U in v?v[U]:U}function k(U,P,Z,H){var q=Array.isArray(P),V;if((U==="fill"||U==="stroke")&&P==="none")P="";else{if(U==="strokeUniform")return P==="non-scaling-stroke";if(U==="strokeDashArray")P==="none"?P=null:P=P.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(U==="transformMatrix")Z&&Z.transformMatrix?P=n(Z.transformMatrix,i.parseTransformAttribute(P)):P=i.parseTransformAttribute(P);else if(U==="visible")P=P!=="none"&&P!=="hidden",Z&&Z.visible===!1&&(P=!1);else if(U==="opacity")P=parseFloat(P),Z&&typeof Z.opacity<"u"&&(P*=Z.opacity);else if(U==="textAnchor")P=P==="start"?"left":P==="end"?"right":"center";else if(U==="charSpacing")V=o(P,H)/H*1e3;else if(U==="paintFirst"){var ee=P.indexOf("fill"),se=P.indexOf("stroke"),P="fill";(ee>-1&&se>-1&&se<ee||ee===-1&&se>-1)&&(P="stroke")}else{if(U==="href"||U==="xlink:href"||U==="font")return P;if(U==="imageSmoothing")return P==="optimizeQuality";V=q?P.map(o):o(P,H)}}return!q&&isNaN(V)?P:V}function z(U){return new RegExp("^("+U.join("|")+")\\b","i")}function N(U){for(var P in b)if(!(typeof U[b[P]]>"u"||U[P]==="")){if(typeof U[P]>"u"){if(!i.Object.prototype[P])continue;U[P]=i.Object.prototype[P]}if(U[P].indexOf("url(")!==0){var Z=new i.Color(U[P]);U[P]=Z.setAlpha(r(Z.getAlpha()*U[b[P]],2)).toRgba()}}return U}function X(U,P){var Z,H=[],q,V,ee;for(V=0,ee=P.length;V<ee;V++)Z=P[V],q=U.getElementsByTagName(Z),H=H.concat(Array.prototype.slice.call(q));return H}i.parseTransformAttribute=function(){function U(D,$){var te=i.util.cos($[0]),ne=i.util.sin($[0]),he=0,pe=0;$.length===3&&(he=$[1],pe=$[2]),D[0]=te,D[1]=ne,D[2]=-ne,D[3]=te,D[4]=he-(te*he-ne*pe),D[5]=pe-(ne*he+te*pe)}function P(D,$){var te=$[0],ne=$.length===2?$[1]:$[0];D[0]=te,D[3]=ne}function Z(D,$,te){D[te]=Math.tan(i.util.degreesToRadians($[0]))}function H(D,$){D[4]=$[0],$.length===2&&(D[5]=$[1])}var q=i.iMatrix,V=i.reNum,ee=i.commaWsp,se="(?:(skewX)\\s*\\(\\s*("+V+")\\s*\\))",fe="(?:(skewY)\\s*\\(\\s*("+V+")\\s*\\))",E="(?:(rotate)\\s*\\(\\s*("+V+")(?:"+ee+"("+V+")"+ee+"("+V+"))?\\s*\\))",x="(?:(scale)\\s*\\(\\s*("+V+")(?:"+ee+"("+V+"))?\\s*\\))",M="(?:(translate)\\s*\\(\\s*("+V+")(?:"+ee+"("+V+"))?\\s*\\))",L="(?:(matrix)\\s*\\(\\s*("+V+")"+ee+"("+V+")"+ee+"("+V+")"+ee+"("+V+")"+ee+"("+V+")"+ee+"("+V+")\\s*\\))",S="(?:"+L+"|"+M+"|"+x+"|"+E+"|"+se+"|"+fe+")",O="(?:"+S+"(?:"+ee+"*"+S+")*)",j="^\\s*(?:"+O+"?)\\s*$",G=new RegExp(j),Y=new RegExp(S,"g");return function(D){var $=q.concat(),te=[];if(!D||D&&!G.test(D))return $;D.replace(Y,function(he){var pe=new RegExp(S).exec(he).filter(function(Ee){return!!Ee}),me=pe[1],ye=pe.slice(2).map(parseFloat);switch(me){case"translate":H($,ye);break;case"rotate":ye[0]=i.util.degreesToRadians(ye[0]),U($,ye);break;case"scale":P($,ye);break;case"skewX":Z($,ye,2);break;case"skewY":Z($,ye,1);break;case"matrix":$=ye;break}te.push($.concat()),$=q.concat()});for(var ne=te[0];te.length>1;)te.shift(),ne=i.util.multiplyTransformMatrices(ne,te[0]);return ne}}();function re(U,P){var Z,H;U.replace(/;\s*$/,"").split(";").forEach(function(q){var V=q.split(":");Z=V[0].trim().toLowerCase(),H=V[1].trim(),P[Z]=H})}function F(U,P){var Z,H;for(var q in U)typeof U[q]>"u"||(Z=q.toLowerCase(),H=U[q],P[Z]=H)}function K(U,P){var Z={};for(var H in i.cssRules[P])if(T(U,H.split(" ")))for(var q in i.cssRules[P][H])Z[q]=i.cssRules[P][H][q];return Z}function T(U,P){var Z,H=!0;return Z=ue(U,P.pop()),Z&&P.length&&(H=J(U,P)),Z&&H&&P.length===0}function J(U,P){for(var Z,H=!0;U.parentNode&&U.parentNode.nodeType===1&&P.length;)H&&(Z=P.pop()),U=U.parentNode,H=ue(U,Z);return P.length===0}function ue(U,P){var Z=U.nodeName,H=U.getAttribute("class"),q=U.getAttribute("id"),V,ee;if(V=new RegExp("^"+Z,"i"),P=P.replace(V,""),q&&P.length&&(V=new RegExp("#"+q+"(?![a-zA-Z\\-]+)","i"),P=P.replace(V,"")),H&&P.length)for(H=H.split(" "),ee=H.length;ee--;)V=new RegExp("\\."+H[ee]+"(?![a-zA-Z\\-]+)","i"),P=P.replace(V,"");return P.length===0}function ie(U,P){var Z;if(U.getElementById&&(Z=U.getElementById(P)),Z)return Z;var H,q,V,ee=U.getElementsByTagName("*");for(q=0,V=ee.length;q<V;q++)if(H=ee[q],P===H.getAttribute("id"))return H}function ae(U){for(var P=X(U,["use","svg:use"]),Z=0;P.length&&Z<P.length;){var H=P[Z],q=H.getAttribute("xlink:href")||H.getAttribute("href");if(q===null)return;var V=q.slice(1),ee=H.getAttribute("x")||0,se=H.getAttribute("y")||0,fe=ie(U,V).cloneNode(!0),E=(fe.getAttribute("transform")||"")+" translate("+ee+", "+se+")",x,M=P.length,L,S,O,j,G=i.svgNS;if(W(fe),/^svg$/i.test(fe.nodeName)){var Y=fe.ownerDocument.createElementNS(G,"g");for(S=0,O=fe.attributes,j=O.length;S<j;S++)L=O.item(S),Y.setAttributeNS(G,L.nodeName,L.nodeValue);for(;fe.firstChild;)Y.appendChild(fe.firstChild);fe=Y}for(S=0,O=H.attributes,j=O.length;S<j;S++)L=O.item(S),!(L.nodeName==="x"||L.nodeName==="y"||L.nodeName==="xlink:href"||L.nodeName==="href")&&(L.nodeName==="transform"?E=L.nodeValue+" "+E:fe.setAttribute(L.nodeName,L.nodeValue));fe.setAttribute("transform",E),fe.setAttribute("instantiated_by_use","1"),fe.removeAttribute("id"),x=H.parentNode,x.replaceChild(fe,H),P.length===M&&Z++}}var A=new RegExp("^\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*$");function W(U){if(!i.svgViewBoxElementsRegEx.test(U.nodeName))return{};var P=U.getAttribute("viewBox"),Z=1,H=1,q=0,V=0,ee,se,fe,E,x=U.getAttribute("width"),M=U.getAttribute("height"),L=U.getAttribute("x")||0,S=U.getAttribute("y")||0,O=U.getAttribute("preserveAspectRatio")||"",j=!P||!(P=P.match(A)),G=!x||!M||x==="100%"||M==="100%",Y=j&&G,D={},$="",te=0,ne=0;if(D.width=0,D.height=0,D.toBeParsed=Y,j&&(L||S)&&U.parentNode&&U.parentNode.nodeName!=="#document"&&($=" translate("+o(L)+" "+o(S)+") ",fe=(U.getAttribute("transform")||"")+$,U.setAttribute("transform",fe),U.removeAttribute("x"),U.removeAttribute("y")),Y)return D;if(j)return D.width=o(x),D.height=o(M),D;if(q=-parseFloat(P[1]),V=-parseFloat(P[2]),ee=parseFloat(P[3]),se=parseFloat(P[4]),D.minX=q,D.minY=V,D.viewBoxWidth=ee,D.viewBoxHeight=se,G?(D.width=ee,D.height=se):(D.width=o(x),D.height=o(M),Z=D.width/ee,H=D.height/se),O=i.util.parsePreserveAspectRatioAttribute(O),O.alignX!=="none"&&(O.meetOrSlice==="meet"&&(H=Z=Z>H?H:Z),O.meetOrSlice==="slice"&&(H=Z=Z>H?Z:H),te=D.width-ee*Z,ne=D.height-se*Z,O.alignX==="Mid"&&(te/=2),O.alignY==="Mid"&&(ne/=2),O.alignX==="Min"&&(te=0),O.alignY==="Min"&&(ne=0)),Z===1&&H===1&&q===0&&V===0&&L===0&&S===0)return D;if((L||S)&&U.parentNode.nodeName!=="#document"&&($=" translate("+o(L)+" "+o(S)+") "),fe=$+" matrix("+Z+" 0 0 "+H+" "+(q*Z+te)+" "+(V*H+ne)+") ",U.nodeName==="svg"){for(E=U.ownerDocument.createElementNS(i.svgNS,"g");U.firstChild;)E.appendChild(U.firstChild);U.appendChild(E)}else E=U,E.removeAttribute("x"),E.removeAttribute("y"),fe=E.getAttribute("transform")+fe;return E.setAttribute("transform",fe),D}function R(U,P){for(;U&&(U=U.parentNode);)if(U.nodeName&&P.test(U.nodeName.replace("svg:",""))&&!U.getAttribute("instantiated_by_use"))return!0;return!1}i.parseSVGDocument=function(U,P,Z,H){if(U){ae(U);var q=i.Object.__uid++,V,ee,se=W(U),fe=i.util.toArray(U.getElementsByTagName("*"));if(se.crossOrigin=H&&H.crossOrigin,se.svgUid=q,fe.length===0&&i.isLikelyNode){fe=U.selectNodes('//*[name(.)!="svg"]');var E=[];for(V=0,ee=fe.length;V<ee;V++)E[V]=fe[V];fe=E}var x=fe.filter(function(L){return W(L),i.svgValidTagNamesRegEx.test(L.nodeName.replace("svg:",""))&&!R(L,i.svgInvalidAncestorsRegEx)});if(!x||x&&!x.length){P&&P([],{});return}var M={};fe.filter(function(L){return L.nodeName.replace("svg:","")==="clipPath"}).forEach(function(L){var S=L.getAttribute("id");M[S]=i.util.toArray(L.getElementsByTagName("*")).filter(function(O){return i.svgValidTagNamesRegEx.test(O.nodeName.replace("svg:",""))})}),i.gradientDefs[q]=i.getGradientDefs(U),i.cssRules[q]=i.getCSSRules(U),i.clipPaths[q]=M,i.parseElements(x,function(L,S){P&&(P(L,se,S,fe),delete i.gradientDefs[q],delete i.cssRules[q],delete i.clipPaths[q])},u(se),Z,H)}};function I(U,P){var Z=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],H="xlink:href",q=P.getAttribute(H).slice(1),V=ie(U,q);if(V&&V.getAttribute(H)&&I(U,V),Z.forEach(function(se){V&&!P.hasAttribute(se)&&V.hasAttribute(se)&&P.setAttribute(se,V.getAttribute(se))}),!P.children.length)for(var ee=V.cloneNode(!0);ee.firstChild;)P.appendChild(ee.firstChild);P.removeAttribute(H)}var Q=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+i.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+i.reNum+"))?\\s+(.*)");a(i,{parseFontDeclaration:function(U,P){var Z=U.match(Q);if(Z){var H=Z[1],q=Z[3],V=Z[4],ee=Z[5],se=Z[6];H&&(P.fontStyle=H),q&&(P.fontWeight=isNaN(parseFloat(q))?q:parseFloat(q)),V&&(P.fontSize=o(V)),se&&(P.fontFamily=se),ee&&(P.lineHeight=ee==="normal"?1:ee)}},getGradientDefs:function(U){var P=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],Z=X(U,P),H,q=0,V={};for(q=Z.length;q--;)H=Z[q],H.getAttribute("xlink:href")&&I(U,H),V[H.getAttribute("id")]=H;return V},parseAttributes:function(U,P,Z){if(U){var H,q={},V,ee;typeof Z>"u"&&(Z=U.getAttribute("svgUid")),U.parentNode&&i.svgValidParentsRegEx.test(U.parentNode.nodeName)&&(q=i.parseAttributes(U.parentNode,P,Z));var se=P.reduce(function(O,j){return H=U.getAttribute(j),H&&(O[j]=H),O},{}),fe=a(K(U,Z),i.parseStyleAttribute(U));se=a(se,fe),fe[C]&&U.setAttribute(C,fe[C]),V=ee=q.fontSize||i.Text.DEFAULT_SVG_FONT_SIZE,se[_]&&(se[_]=V=o(se[_],ee));var E,x,M={};for(var L in se)E=w(L),x=k(E,se[L],q,V),M[E]=x;M&&M.font&&i.parseFontDeclaration(M.font,M);var S=a(q,M);return i.svgValidParentsRegEx.test(U.nodeName)?S:N(S)}},parseElements:function(U,P,Z,H,q){new i.ElementsParser(U,P,Z,H,q).parse()},parseStyleAttribute:function(U){var P={},Z=U.getAttribute("style");return Z&&(typeof Z=="string"?re(Z,P):F(Z,P)),P},parsePointsAttribute:function(U){if(!U)return null;U=U.replace(/,/g," ").trim(),U=U.split(/\s+/);var P=[],Z,H;for(Z=0,H=U.length;Z<H;Z+=2)P.push({x:parseFloat(U[Z]),y:parseFloat(U[Z+1])});return P},getCSSRules:function(U){var P=U.getElementsByTagName("style"),Z,H,q={},V;for(Z=0,H=P.length;Z<H;Z++){var ee=P[Z].textContent;ee=ee.replace(/\/\*[\s\S]*?\*\//g,""),ee.trim()!==""&&(V=ee.split("}"),V=V.filter(function(se){return se.trim()}),V.forEach(function(se){var fe=se.split("{"),E={},x=fe[1].trim(),M=x.split(";").filter(function(j){return j.trim()});for(Z=0,H=M.length;Z<H;Z++){var L=M[Z].split(":"),S=L[0].trim(),O=L[1].trim();E[S]=O}se=fe[0].trim(),se.split(",").forEach(function(j){j=j.replace(/^svg/i,"").trim(),j!==""&&(q[j]?i.util.object.extend(q[j],E):q[j]=i.util.object.clone(E))})}))}return q},loadSVGFromURL:function(U,P,Z,H){U=U.replace(/^\n\s*/,"").trim(),new i.util.request(U,{method:"get",onComplete:q});function q(V){var ee=V.responseXML;if(!ee||!ee.documentElement)return P&&P(null),!1;i.parseSVGDocument(ee.documentElement,function(se,fe,E,x){P&&P(se,fe,E,x)},Z,H)}},loadSVGFromString:function(U,P,Z,H){var q=new i.window.DOMParser,V=q.parseFromString(U.trim(),"text/xml");i.parseSVGDocument(V.documentElement,function(ee,se,fe,E){P(ee,se,fe,E)},Z,H)}})}(t),e.ElementsParser=function(h,i,a,u,r,o){this.elements=h,this.callback=i,this.options=a,this.reviver=u,this.svgUid=a&&a.svgUid||0,this.parsingOptions=r,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=o},function(h){h.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},h.createObjects=function(){var i=this;this.elements.forEach(function(a,u){a.setAttribute("svgUid",i.svgUid),i.createObject(a,u)})},h.findTag=function(i){return e[e.util.string.capitalize(i.tagName.replace("svg:",""))]},h.createObject=function(i,a){var u=this.findTag(i);if(u&&u.fromElement)try{u.fromElement(i,this.createCallback(a,i),this.options)}catch(r){e.log(r)}else this.checkIfDone()},h.createCallback=function(i,a){var u=this;return function(r){var o;u.resolveGradient(r,a,"fill"),u.resolveGradient(r,a,"stroke"),r instanceof e.Image&&r._originalElement&&(o=r.parsePreserveAspectRatioAttribute(a)),r._removeTransformMatrix(o),u.resolveClipPath(r,a),u.reviver&&u.reviver(a,r),u.instances[i]=r,u.checkIfDone()}},h.extractPropertyDefinition=function(i,a,u){var r=i[a],o=this.regexUrl;if(o.test(r)){o.lastIndex=0;var n=o.exec(r)[1];return o.lastIndex=0,e[u][this.svgUid][n]}},h.resolveGradient=function(i,a,u){var r=this.extractPropertyDefinition(i,u,"gradientDefs");if(r){var o=a.getAttribute(u+"-opacity"),n=e.Gradient.fromElement(r,i,o,this.options);i.set(u,n)}},h.createClipPathCallback=function(i,a){return function(u){u._removeTransformMatrix(),u.fillRule=u.clipRule,a.push(u)}},h.resolveClipPath=function(i,a){var u=this.extractPropertyDefinition(i,"clipPath","clipPaths"),r,o,n,c,p,l;if(u){c=[],n=e.util.invertTransform(i.calcTransformMatrix());for(var g=u[0].parentNode,v=a;v.parentNode&&v.getAttribute("clip-path")!==i.clipPath;)v=v.parentNode;v.parentNode.appendChild(g);for(var b=0;b<u.length;b++)r=u[b],o=this.findTag(r),o.fromElement(r,this.createClipPathCallback(i,c),this.options);c.length===1?u=c[0]:u=new e.Group(c),p=e.util.multiplyTransformMatrices(n,u.calcTransformMatrix()),u.clipPath&&this.resolveClipPath(u,v);var l=e.util.qrDecompose(p);u.flipX=!1,u.flipY=!1,u.set("scaleX",l.scaleX),u.set("scaleY",l.scaleY),u.angle=l.angle,u.skewX=l.skewX,u.skewY=0,u.setPositionByOrigin({x:l.translateX,y:l.translateY},"center","center"),i.clipPath=u}else delete i.clipPath},h.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(i){return i!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(h){var i=h.fabric||(h.fabric={});if(i.Point){i.warn("fabric.Point is already defined");return}i.Point=a;function a(u,r){this.x=u,this.y=r}a.prototype={type:"point",constructor:a,add:function(u){return new a(this.x+u.x,this.y+u.y)},addEquals:function(u){return this.x+=u.x,this.y+=u.y,this},scalarAdd:function(u){return new a(this.x+u,this.y+u)},scalarAddEquals:function(u){return this.x+=u,this.y+=u,this},subtract:function(u){return new a(this.x-u.x,this.y-u.y)},subtractEquals:function(u){return this.x-=u.x,this.y-=u.y,this},scalarSubtract:function(u){return new a(this.x-u,this.y-u)},scalarSubtractEquals:function(u){return this.x-=u,this.y-=u,this},multiply:function(u){return new a(this.x*u,this.y*u)},multiplyEquals:function(u){return this.x*=u,this.y*=u,this},divide:function(u){return new a(this.x/u,this.y/u)},divideEquals:function(u){return this.x/=u,this.y/=u,this},eq:function(u){return this.x===u.x&&this.y===u.y},lt:function(u){return this.x<u.x&&this.y<u.y},lte:function(u){return this.x<=u.x&&this.y<=u.y},gt:function(u){return this.x>u.x&&this.y>u.y},gte:function(u){return this.x>=u.x&&this.y>=u.y},lerp:function(u,r){return typeof r>"u"&&(r=.5),r=Math.max(Math.min(1,r),0),new a(this.x+(u.x-this.x)*r,this.y+(u.y-this.y)*r)},distanceFrom:function(u){var r=this.x-u.x,o=this.y-u.y;return Math.sqrt(r*r+o*o)},midPointFrom:function(u){return this.lerp(u)},min:function(u){return new a(Math.min(this.x,u.x),Math.min(this.y,u.y))},max:function(u){return new a(Math.max(this.x,u.x),Math.max(this.y,u.y))},toString:function(){return this.x+","+this.y},setXY:function(u,r){return this.x=u,this.y=r,this},setX:function(u){return this.x=u,this},setY:function(u){return this.y=u,this},setFromPoint:function(u){return this.x=u.x,this.y=u.y,this},swap:function(u){var r=this.x,o=this.y;this.x=u.x,this.y=u.y,u.x=r,u.y=o},clone:function(){return new a(this.x,this.y)}}}(t),function(h){var i=h.fabric||(h.fabric={});if(i.Intersection){i.warn("fabric.Intersection is already defined");return}function a(u){this.status=u,this.points=[]}i.Intersection=a,i.Intersection.prototype={constructor:a,appendPoint:function(u){return this.points.push(u),this},appendPoints:function(u){return this.points=this.points.concat(u),this}},i.Intersection.intersectLineLine=function(u,r,o,n){var c,p=(n.x-o.x)*(u.y-o.y)-(n.y-o.y)*(u.x-o.x),l=(r.x-u.x)*(u.y-o.y)-(r.y-u.y)*(u.x-o.x),g=(n.y-o.y)*(r.x-u.x)-(n.x-o.x)*(r.y-u.y);if(g!==0){var v=p/g,b=l/g;0<=v&&v<=1&&0<=b&&b<=1?(c=new a("Intersection"),c.appendPoint(new i.Point(u.x+v*(r.x-u.x),u.y+v*(r.y-u.y)))):c=new a}else p===0||l===0?c=new a("Coincident"):c=new a("Parallel");return c},i.Intersection.intersectLinePolygon=function(u,r,o){var n=new a,c=o.length,p,l,g,v;for(v=0;v<c;v++)p=o[v],l=o[(v+1)%c],g=a.intersectLineLine(u,r,p,l),n.appendPoints(g.points);return n.points.length>0&&(n.status="Intersection"),n},i.Intersection.intersectPolygonPolygon=function(u,r){var o=new a,n=u.length,c;for(c=0;c<n;c++){var p=u[c],l=u[(c+1)%n],g=a.intersectLinePolygon(p,l,r);o.appendPoints(g.points)}return o.points.length>0&&(o.status="Intersection"),o},i.Intersection.intersectPolygonRectangle=function(u,r,o){var n=r.min(o),c=r.max(o),p=new i.Point(c.x,n.y),l=new i.Point(n.x,c.y),g=a.intersectLinePolygon(n,p,u),v=a.intersectLinePolygon(p,c,u),b=a.intersectLinePolygon(c,l,u),_=a.intersectLinePolygon(l,n,u),C=new a;return C.appendPoints(g.points),C.appendPoints(v.points),C.appendPoints(b.points),C.appendPoints(_.points),C.points.length>0&&(C.status="Intersection"),C}}(t),function(h){var i=h.fabric||(h.fabric={});if(i.Color){i.warn("fabric.Color is already defined.");return}function a(r){r?this._tryParsingColor(r):this.setSource([0,0,0,1])}i.Color=a,i.Color.prototype={_tryParsingColor:function(r){var o;r in a.colorNameMap&&(r=a.colorNameMap[r]),r==="transparent"&&(o=[255,255,255,0]),o||(o=a.sourceFromHex(r)),o||(o=a.sourceFromRgb(r)),o||(o=a.sourceFromHsl(r)),o||(o=[0,0,0,1]),o&&this.setSource(o)},_rgbToHsl:function(r,o,n){r/=255,o/=255,n/=255;var c,p,l,g=i.util.array.max([r,o,n]),v=i.util.array.min([r,o,n]);if(l=(g+v)/2,g===v)c=p=0;else{var b=g-v;switch(p=l>.5?b/(2-g-v):b/(g+v),g){case r:c=(o-n)/b+(o<n?6:0);break;case o:c=(n-r)/b+2;break;case n:c=(r-o)/b+4;break}c/=6}return[Math.round(c*360),Math.round(p*100),Math.round(l*100)]},getSource:function(){return this._source},setSource:function(r){this._source=r},toRgb:function(){var r=this.getSource();return"rgb("+r[0]+","+r[1]+","+r[2]+")"},toRgba:function(){var r=this.getSource();return"rgba("+r[0]+","+r[1]+","+r[2]+","+r[3]+")"},toHsl:function(){var r=this.getSource(),o=this._rgbToHsl(r[0],r[1],r[2]);return"hsl("+o[0]+","+o[1]+"%,"+o[2]+"%)"},toHsla:function(){var r=this.getSource(),o=this._rgbToHsl(r[0],r[1],r[2]);return"hsla("+o[0]+","+o[1]+"%,"+o[2]+"%,"+r[3]+")"},toHex:function(){var r=this.getSource(),o,n,c;return o=r[0].toString(16),o=o.length===1?"0"+o:o,n=r[1].toString(16),n=n.length===1?"0"+n:n,c=r[2].toString(16),c=c.length===1?"0"+c:c,o.toUpperCase()+n.toUpperCase()+c.toUpperCase()},toHexa:function(){var r=this.getSource(),o;return o=Math.round(r[3]*255),o=o.toString(16),o=o.length===1?"0"+o:o,this.toHex()+o.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(r){var o=this.getSource();return o[3]=r,this.setSource(o),this},toGrayscale:function(){var r=this.getSource(),o=parseInt((r[0]*.3+r[1]*.59+r[2]*.11).toFixed(0),10),n=r[3];return this.setSource([o,o,o,n]),this},toBlackWhite:function(r){var o=this.getSource(),n=(o[0]*.3+o[1]*.59+o[2]*.11).toFixed(0),c=o[3];return r=r||127,n=Number(n)<Number(r)?0:255,this.setSource([n,n,n,c]),this},overlayWith:function(r){r instanceof a||(r=new a(r));var o=[],n=this.getAlpha(),c=.5,p=this.getSource(),l=r.getSource(),g;for(g=0;g<3;g++)o.push(Math.round(p[g]*(1-c)+l[g]*c));return o[3]=n,this.setSource(o),this}},i.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,i.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,i.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,i.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function u(r,o,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?r+(o-r)*6*n:n<1/2?o:n<2/3?r+(o-r)*(2/3-n)*6:r}i.Color.fromRgb=function(r){return a.fromSource(a.sourceFromRgb(r))},i.Color.sourceFromRgb=function(r){var o=r.match(a.reRGBa);if(o){var n=parseInt(o[1],10)/(/%$/.test(o[1])?100:1)*(/%$/.test(o[1])?255:1),c=parseInt(o[2],10)/(/%$/.test(o[2])?100:1)*(/%$/.test(o[2])?255:1),p=parseInt(o[3],10)/(/%$/.test(o[3])?100:1)*(/%$/.test(o[3])?255:1);return[parseInt(n,10),parseInt(c,10),parseInt(p,10),o[4]?parseFloat(o[4]):1]}},i.Color.fromRgba=a.fromRgb,i.Color.fromHsl=function(r){return a.fromSource(a.sourceFromHsl(r))},i.Color.sourceFromHsl=function(r){var o=r.match(a.reHSLa);if(o){var n=(parseFloat(o[1])%360+360)%360/360,c=parseFloat(o[2])/(/%$/.test(o[2])?100:1),p=parseFloat(o[3])/(/%$/.test(o[3])?100:1),l,g,v;if(c===0)l=g=v=p;else{var b=p<=.5?p*(c+1):p+c-p*c,_=p*2-b;l=u(_,b,n+1/3),g=u(_,b,n),v=u(_,b,n-1/3)}return[Math.round(l*255),Math.round(g*255),Math.round(v*255),o[4]?parseFloat(o[4]):1]}},i.Color.fromHsla=a.fromHsl,i.Color.fromHex=function(r){return a.fromSource(a.sourceFromHex(r))},i.Color.sourceFromHex=function(r){if(r.match(a.reHex)){var o=r.slice(r.indexOf("#")+1),n=o.length===3||o.length===4,c=o.length===8||o.length===4,p=n?o.charAt(0)+o.charAt(0):o.substring(0,2),l=n?o.charAt(1)+o.charAt(1):o.substring(2,4),g=n?o.charAt(2)+o.charAt(2):o.substring(4,6),v=c?n?o.charAt(3)+o.charAt(3):o.substring(6,8):"FF";return[parseInt(p,16),parseInt(l,16),parseInt(g,16),parseFloat((parseInt(v,16)/255).toFixed(2))]}},i.Color.fromSource=function(r){var o=new a;return o.setSource(r),o}}(t),function(h){var i=h.fabric||(h.fabric={}),a=["e","se","s","sw","w","nw","n","ne","e"],u=["ns","nesw","ew","nwse"],r={},o="left",n="top",c="right",p="bottom",l="center",g={top:p,bottom:n,left:c,right:o,center:l},v=i.util.radiansToDegrees,b=Math.sign||function(E){return(E>0)-(E<0)||+E};function _(E,x){var M=E.angle+v(Math.atan2(x.y,x.x))+360;return Math.round(M%360/45)}function C(E,x){var M=x.transform.target,L=M.canvas,S=i.util.object.clone(x);S.target=M,L&&L.fire("object:"+E,S),M.fire(E,x)}function w(E,x){var M=x.canvas,L=M.uniScaleKey,S=E[L];return M.uniformScaling&&!S||!M.uniformScaling&&S}function k(E){return E.originX===l&&E.originY===l}function z(E,x,M){var L=E.lockScalingX,S=E.lockScalingY;return!!(L&&S||!x&&(L||S)&&M||L&&x==="x"||S&&x==="y")}function N(E,x,M){var L="not-allowed",S=w(E,M),O="";if(x.x!==0&&x.y===0?O="x":x.x===0&&x.y!==0&&(O="y"),z(M,O,S))return L;var j=_(M,x);return a[j]+"-resize"}function X(E,x,M){var L="not-allowed";if(x.x!==0&&M.lockSkewingY||x.y!==0&&M.lockSkewingX)return L;var S=_(M,x)%4;return u[S]+"-resize"}function re(E,x,M){return E[M.canvas.altActionKey]?r.skewCursorStyleHandler(E,x,M):r.scaleCursorStyleHandler(E,x,M)}function F(E,x,M){var L=E[M.canvas.altActionKey];if(x.x===0)return L?"skewX":"scaleY";if(x.y===0)return L?"skewY":"scaleX"}function K(E,x,M){return M.lockRotation?"not-allowed":x.cursorStyle}function T(E,x,M,L){return{e:E,transform:x,pointer:{x:M,y:L}}}function J(E){return function(x,M,L,S){var O=M.target,j=O.getCenterPoint(),G=O.translateToOriginPoint(j,M.originX,M.originY),Y=E(x,M,L,S);return O.setPositionByOrigin(G,M.originX,M.originY),Y}}function ue(E,x){return function(M,L,S,O){var j=x(M,L,S,O);return j&&C(E,T(M,L,S,O)),j}}function ie(E,x,M,L,S){var O=E.target,j=O.controls[E.corner],G=O.canvas.getZoom(),Y=O.padding/G,D=O.toLocalPoint(new i.Point(L,S),x,M);return D.x>=Y&&(D.x-=Y),D.x<=-Y&&(D.x+=Y),D.y>=Y&&(D.y-=Y),D.y<=Y&&(D.y+=Y),D.x-=j.offsetX,D.y-=j.offsetY,D}function ae(E){return E.flipX!==E.flipY}function A(E,x,M,L,S){if(E[x]!==0){var O=E._getTransformedDimensions()[L],j=S/O*E[M];E.set(M,j)}}function W(E,x,M,L){var S=x.target,O=S._getTransformedDimensions(0,S.skewY),j=ie(x,x.originX,x.originY,M,L),G=Math.abs(j.x*2)-O.x,Y=S.skewX,D;G<2?D=0:(D=v(Math.atan2(G/S.scaleX,O.y/S.scaleY)),x.originX===o&&x.originY===p&&(D=-D),x.originX===c&&x.originY===n&&(D=-D),ae(S)&&(D=-D));var $=Y!==D;if($){var te=S._getTransformedDimensions().y;S.set("skewX",D),A(S,"skewY","scaleY","y",te)}return $}function R(E,x,M,L){var S=x.target,O=S._getTransformedDimensions(S.skewX,0),j=ie(x,x.originX,x.originY,M,L),G=Math.abs(j.y*2)-O.y,Y=S.skewY,D;G<2?D=0:(D=v(Math.atan2(G/S.scaleY,O.x/S.scaleX)),x.originX===o&&x.originY===p&&(D=-D),x.originX===c&&x.originY===n&&(D=-D),ae(S)&&(D=-D));var $=Y!==D;if($){var te=S._getTransformedDimensions().x;S.set("skewY",D),A(S,"skewX","scaleX","x",te)}return $}function I(E,x,M,L){var S=x.target,O=S.skewX,j,G=x.originY;if(S.lockSkewingX)return!1;if(O===0){var Y=ie(x,l,l,M,L);Y.x>0?j=o:j=c}else O>0&&(j=G===n?o:c),O<0&&(j=G===n?c:o),ae(S)&&(j=j===o?c:o);x.originX=j;var D=ue("skewing",J(W));return D(E,x,M,L)}function Q(E,x,M,L){var S=x.target,O=S.skewY,j,G=x.originX;if(S.lockSkewingY)return!1;if(O===0){var Y=ie(x,l,l,M,L);Y.y>0?j=n:j=p}else O>0&&(j=G===o?n:p),O<0&&(j=G===o?p:n),ae(S)&&(j=j===n?p:n);x.originY=j;var D=ue("skewing",J(R));return D(E,x,M,L)}function U(E,x,M,L){var S=x,O=S.target,j=O.translateToOriginPoint(O.getCenterPoint(),S.originX,S.originY);if(O.lockRotation)return!1;var G=Math.atan2(S.ey-j.y,S.ex-j.x),Y=Math.atan2(L-j.y,M-j.x),D=v(Y-G+S.theta),$=!0;if(O.snapAngle>0){var te=O.snapAngle,ne=O.snapThreshold||te,he=Math.ceil(D/te)*te,pe=Math.floor(D/te)*te;Math.abs(D-pe)<ne?D=pe:Math.abs(D-he)<ne&&(D=he)}return D<0&&(D=360+D),D%=360,$=O.angle!==D,O.angle=D,$}function P(E,x,M,L,S){S=S||{};var O=x.target,j=O.lockScalingX,G=O.lockScalingY,Y=S.by,D,$,te,ne,he=w(E,O),pe=z(O,Y,he),me,ye,Ee=x.gestureScale;if(pe)return!1;if(Ee)$=x.scaleX*Ee,te=x.scaleY*Ee;else{if(D=ie(x,x.originX,x.originY,M,L),me=Y!=="y"?b(D.x):1,ye=Y!=="x"?b(D.y):1,x.signX||(x.signX=me),x.signY||(x.signY=ye),O.lockScalingFlip&&(x.signX!==me||x.signY!==ye))return!1;if(ne=O._getTransformedDimensions(),he&&!Y){var Te=Math.abs(D.x)+Math.abs(D.y),Pe=x.original,Se=Math.abs(ne.x*Pe.scaleX/O.scaleX)+Math.abs(ne.y*Pe.scaleY/O.scaleY),nt=Te/Se;$=Pe.scaleX*nt,te=Pe.scaleY*nt}else $=Math.abs(D.x*O.scaleX/ne.x),te=Math.abs(D.y*O.scaleY/ne.y);k(x)&&($*=2,te*=2),x.signX!==me&&Y!=="y"&&(x.originX=g[x.originX],$*=-1,x.signX=me),x.signY!==ye&&Y!=="x"&&(x.originY=g[x.originY],te*=-1,x.signY=ye)}var Dt=O.scaleX,De=O.scaleY;return Y?(Y==="x"&&O.set("scaleX",$),Y==="y"&&O.set("scaleY",te)):(!j&&O.set("scaleX",$),!G&&O.set("scaleY",te)),Dt!==O.scaleX||De!==O.scaleY}function Z(E,x,M,L){return P(E,x,M,L)}function H(E,x,M,L){return P(E,x,M,L,{by:"x"})}function q(E,x,M,L){return P(E,x,M,L,{by:"y"})}function V(E,x,M,L){return E[x.target.canvas.altActionKey]?r.skewHandlerX(E,x,M,L):r.scalingY(E,x,M,L)}function ee(E,x,M,L){return E[x.target.canvas.altActionKey]?r.skewHandlerY(E,x,M,L):r.scalingX(E,x,M,L)}function se(E,x,M,L){var S=x.target,O=ie(x,x.originX,x.originY,M,L),j=S.strokeWidth/(S.strokeUniform?S.scaleX:1),G=k(x)?2:1,Y=S.width,D=Math.abs(O.x*G/S.scaleX)-j;return S.set("width",Math.max(D,0)),Y!==D}function fe(E,x,M,L){var S=x.target,O=M-x.offsetX,j=L-x.offsetY,G=!S.get("lockMovementX")&&S.left!==O,Y=!S.get("lockMovementY")&&S.top!==j;return G&&S.set("left",O),Y&&S.set("top",j),(G||Y)&&C("moving",T(E,x,M,L)),G||Y}r.scaleCursorStyleHandler=N,r.skewCursorStyleHandler=X,r.scaleSkewCursorStyleHandler=re,r.rotationWithSnapping=ue("rotating",J(U)),r.scalingEqually=ue("scaling",J(Z)),r.scalingX=ue("scaling",J(H)),r.scalingY=ue("scaling",J(q)),r.scalingYOrSkewingX=V,r.scalingXOrSkewingY=ee,r.changeWidth=ue("resizing",J(se)),r.skewHandlerX=I,r.skewHandlerY=Q,r.dragHandler=fe,r.scaleOrSkewActionName=F,r.rotationStyleHandler=K,r.fireEvent=C,r.wrapWithFixedAnchor=J,r.wrapWithFireEvent=ue,r.getLocalPoint=ie,i.controlsUtils=r}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.util.degreesToRadians,u=i.controlsUtils;function r(n,c,p,l,g){l=l||{};var v=this.sizeX||l.cornerSize||g.cornerSize,b=this.sizeY||l.cornerSize||g.cornerSize,_=typeof l.transparentCorners<"u"?l.transparentCorners:g.transparentCorners,C=_?"stroke":"fill",w=!_&&(l.cornerStrokeColor||g.cornerStrokeColor),k=c,z=p,N;n.save(),n.fillStyle=l.cornerColor||g.cornerColor,n.strokeStyle=l.cornerStrokeColor||g.cornerStrokeColor,v>b?(N=v,n.scale(1,b/v),z=p*v/b):b>v?(N=b,n.scale(v/b,1),k=c*b/v):N=v,n.lineWidth=1,n.beginPath(),n.arc(k,z,N/2,0,2*Math.PI,!1),n[C](),w&&n.stroke(),n.restore()}function o(n,c,p,l,g){l=l||{};var v=this.sizeX||l.cornerSize||g.cornerSize,b=this.sizeY||l.cornerSize||g.cornerSize,_=typeof l.transparentCorners<"u"?l.transparentCorners:g.transparentCorners,C=_?"stroke":"fill",w=!_&&(l.cornerStrokeColor||g.cornerStrokeColor),k=v/2,z=b/2;n.save(),n.fillStyle=l.cornerColor||g.cornerColor,n.strokeStyle=l.cornerStrokeColor||g.cornerStrokeColor,n.lineWidth=1,n.translate(c,p),n.rotate(a(g.angle)),n[C+"Rect"](-k,-z,v,b),w&&n.strokeRect(-k,-z,v,b),n.restore()}u.renderCircleControl=r,u.renderSquareControl=o}(t),function(h){var i=h.fabric||(h.fabric={});function a(u){for(var r in u)this[r]=u[r]}i.Control=a,i.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(u,r){return r.cursorStyle},getActionName:function(u,r){return r.actionName},getVisibility:function(u,r){var o=u._controlsVisibility;return o&&typeof o[r]<"u"?o[r]:this.visible},setVisibility:function(u){this.visible=u},positionHandler:function(u,r){var o=i.util.transformPoint({x:this.x*u.x+this.offsetX,y:this.y*u.y+this.offsetY},r);return o},calcCornerCoords:function(u,r,o,n,c){var p,l,g,v,b=c?this.touchSizeX:this.sizeX,_=c?this.touchSizeY:this.sizeY;if(b&&_&&b!==_){var C=Math.atan2(_,b),w=Math.sqrt(b*b+_*_)/2,k=C-i.util.degreesToRadians(u),z=Math.PI/2-C-i.util.degreesToRadians(u);p=w*i.util.cos(k),l=w*i.util.sin(k),g=w*i.util.cos(z),v=w*i.util.sin(z)}else{var N=b&&_?b:r;w=N*.7071067812;var k=i.util.degreesToRadians(45-u);p=g=w*i.util.cos(k),l=v=w*i.util.sin(k)}return{tl:{x:o-v,y:n-g},tr:{x:o+p,y:n-l},bl:{x:o-p,y:n+l},br:{x:o+v,y:n+g}}},render:function(u,r,o,n,c){switch(n=n||{},n.cornerStyle||c.cornerStyle){case"circle":i.controlsUtils.renderCircleControl.call(this,u,r,o,n,c);break;default:i.controlsUtils.renderSquareControl.call(this,u,r,o,n,c)}}}}(t),function(){function h(o,n){var c=o.getAttribute("style"),p=o.getAttribute("offset")||0,l,g,v,b;if(p=parseFloat(p)/(/%$/.test(p)?100:1),p=p<0?0:p>1?1:p,c){var _=c.split(/\s*;\s*/);for(_[_.length-1]===""&&_.pop(),b=_.length;b--;){var C=_[b].split(/\s*:\s*/),w=C[0].trim(),k=C[1].trim();w==="stop-color"?l=k:w==="stop-opacity"&&(v=k)}}return l||(l=o.getAttribute("stop-color")||"rgb(0,0,0)"),v||(v=o.getAttribute("stop-opacity")),l=new e.Color(l),g=l.getAlpha(),v=isNaN(parseFloat(v))?1:parseFloat(v),v*=g*n,{offset:p,color:l.toRgb(),opacity:v}}function i(o){return{x1:o.getAttribute("x1")||0,y1:o.getAttribute("y1")||0,x2:o.getAttribute("x2")||"100%",y2:o.getAttribute("y2")||0}}function a(o){return{x1:o.getAttribute("fx")||o.getAttribute("cx")||"50%",y1:o.getAttribute("fy")||o.getAttribute("cy")||"50%",r1:0,x2:o.getAttribute("cx")||"50%",y2:o.getAttribute("cy")||"50%",r2:o.getAttribute("r")||"50%"}}var u=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(o){o||(o={}),o.coords||(o.coords={});var n,c=this;Object.keys(o).forEach(function(p){c[p]=o[p]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,n={x1:o.coords.x1||0,y1:o.coords.y1||0,x2:o.coords.x2||0,y2:o.coords.y2||0},this.type==="radial"&&(n.r1=o.coords.r1||0,n.r2=o.coords.r2||0),this.coords=n,this.colorStops=o.colorStops.slice()},addColorStop:function(o){for(var n in o){var c=new e.Color(o[n]);this.colorStops.push({offset:parseFloat(n),color:c.toRgb(),opacity:c.getAlpha()})}return this},toObject:function(o){var n={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,n,o),n},toSVG:function(o,g){var c=u(this.coords,!0),p,l,g=g||{},v,b,_=u(this.colorStops,!0),C=c.r1>c.r2,w=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),k=-this.offsetX,z=-this.offsetY,N=!!g.additionalTransform,X=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(_.sort(function(J,ue){return J.offset-ue.offset}),X==="objectBoundingBox"?(k/=o.width,z/=o.height):(k+=o.width/2,z+=o.height/2),o.type==="path"&&this.gradientUnits!=="percentage"&&(k-=o.pathOffset.x,z-=o.pathOffset.y),w[4]-=k,w[5]-=z,b='id="SVGID_'+this.id+'" gradientUnits="'+X+'"',b+=' gradientTransform="'+(N?g.additionalTransform+" ":"")+e.util.matrixToSVG(w)+'" ',this.type==="linear"?v=["<linearGradient ",b,' x1="',c.x1,'" y1="',c.y1,'" x2="',c.x2,'" y2="',c.y2,`">
`]:this.type==="radial"&&(v=["<radialGradient ",b,' cx="',C?c.x1:c.x2,'" cy="',C?c.y1:c.y2,'" r="',C?c.r1:c.r2,'" fx="',C?c.x2:c.x1,'" fy="',C?c.y2:c.y1,`">
`]),this.type==="radial"){if(C)for(_=_.concat(),_.reverse(),p=0,l=_.length;p<l;p++)_[p].offset=1-_[p].offset;var re=Math.min(c.r1,c.r2);if(re>0){var F=Math.max(c.r1,c.r2),K=re/F;for(p=0,l=_.length;p<l;p++)_[p].offset+=K*(1-_[p].offset)}}for(p=0,l=_.length;p<l;p++){var T=_[p];v.push("<stop ",'offset="',T.offset*100+"%",'" style="stop-color:',T.color,typeof T.opacity<"u"?";stop-opacity: "+T.opacity:";",`"/>
`)}return v.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),v.join("")},toLive:function(o){var n,c=e.util.object.clone(this.coords),p,l;if(this.type){for(this.type==="linear"?n=o.createLinearGradient(c.x1,c.y1,c.x2,c.y2):this.type==="radial"&&(n=o.createRadialGradient(c.x1,c.y1,c.r1,c.x2,c.y2,c.r2)),p=0,l=this.colorStops.length;p<l;p++){var g=this.colorStops[p].color,v=this.colorStops[p].opacity,b=this.colorStops[p].offset;typeof v<"u"&&(g=new e.Color(g).setAlpha(v).toRgba()),n.addColorStop(b,g)}return n}}}),e.util.object.extend(e.Gradient,{fromElement:function(o,n,c,p){var l=parseFloat(c)/(/%$/.test(c)?100:1);l=l<0?0:l>1?1:l,isNaN(l)&&(l=1);var g=o.getElementsByTagName("stop"),v,b=o.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",_=o.getAttribute("gradientTransform")||"",C=[],w,k,z=0,N=0,X;for(o.nodeName==="linearGradient"||o.nodeName==="LINEARGRADIENT"?(v="linear",w=i(o)):(v="radial",w=a(o)),k=g.length;k--;)C.push(h(g[k],l));X=e.parseTransformAttribute(_),r(n,w,p,b),b==="pixels"&&(z=-n.left,N=-n.top);var re=new e.Gradient({id:o.getAttribute("id"),type:v,coords:w,colorStops:C,gradientUnits:b,gradientTransform:X,offsetX:z,offsetY:N});return re}});function r(o,n,c,p){var l,g;Object.keys(n).forEach(function(v){l=n[v],l==="Infinity"?g=1:l==="-Infinity"?g=0:(g=parseFloat(n[v],10),typeof l=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(l)&&(g*=.01,p==="pixels"&&((v==="x1"||v==="x2"||v==="r2")&&(g*=c.viewBoxWidth||c.width),(v==="y1"||v==="y2")&&(g*=c.viewBoxHeight||c.height)))),n[v]=g})}}(),function(){var h=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(i,a){if(i||(i={}),this.id=e.Object.__uid++,this.setOptions(i),!i.source||i.source&&typeof i.source!="string"){a&&a(this);return}else{var u=this;this.source=e.util.createImage(),e.util.loadImage(i.source,function(r,o){u.source=r,a&&a(u,o)},null,this.crossOrigin)}},toObject:function(i){var a=e.Object.NUM_FRACTION_DIGITS,u,r;return typeof this.source.src=="string"?u=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(u=this.source.toDataURL()),r={type:"pattern",source:u,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:h(this.offsetX,a),offsetY:h(this.offsetY,a),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,r,i),r},toSVG:function(i){var a=typeof this.source=="function"?this.source():this.source,u=a.width/i.width,r=a.height/i.height,o=this.offsetX/i.width,n=this.offsetY/i.height,c="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(r=1,n&&(r+=Math.abs(n))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(u=1,o&&(u+=Math.abs(o))),a.src?c=a.src:a.toDataURL&&(c=a.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+o+'" y="'+n+'" width="'+u+'" height="'+r+`">
<image x="0" y="0" width="`+a.width+'" height="'+a.height+'" xlink:href="'+c+`"></image>
</pattern>
`},setOptions:function(i){for(var a in i)this[a]=i[a]},toLive:function(i){var a=this.source;return!a||typeof a.src<"u"&&(!a.complete||a.naturalWidth===0||a.naturalHeight===0)?"":i.createPattern(a,this.repeat)}})}(),function(h){var i=h.fabric||(h.fabric={}),a=i.util.toFixed;if(i.Shadow){i.warn("fabric.Shadow is already defined.");return}i.Shadow=i.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(u){typeof u=="string"&&(u=this._parseShadow(u));for(var r in u)this[r]=u[r];this.id=i.Object.__uid++},_parseShadow:function(u){var r=u.trim(),o=i.Shadow.reOffsetsAndBlur.exec(r)||[],n=r.replace(i.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:n.trim(),offsetX:parseFloat(o[1],10)||0,offsetY:parseFloat(o[2],10)||0,blur:parseFloat(o[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(u){var r=40,o=40,n=i.Object.NUM_FRACTION_DIGITS,c=i.util.rotateVector({x:this.offsetX,y:this.offsetY},i.util.degreesToRadians(-u.angle)),p=20,l=new i.Color(this.color);return u.width&&u.height&&(r=a((Math.abs(c.x)+this.blur)/u.width,n)*100+p,o=a((Math.abs(c.y)+this.blur)/u.height,n)*100+p),u.flipX&&(c.x*=-1),u.flipY&&(c.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+o+'%" height="'+(100+2*o)+'%" x="-'+r+'%" width="'+(100+2*r)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+a(this.blur?this.blur/2:0,n)+`"></feGaussianBlur>
	<feOffset dx="`+a(c.x,n)+'" dy="'+a(c.y,n)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+l.toRgb()+'" flood-opacity="'+l.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var u={},r=i.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(o){this[o]!==r[o]&&(u[o]=this[o])},this),u}}),i.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(t),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var h=e.util.object.extend,i=e.util.getElementOffset,a=e.util.removeFromArray,u=e.util.toFixed,r=e.util.transformPoint,o=e.util.invertTransform,n=e.util.getNodeCanvas,c=e.util.createCanvasElement,p=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(l,g){g||(g={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(l,g)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(l,g){var v=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(l),this._initOptions(g),this.interactive||this._initRetinaScaling(),g.overlayImage&&this.setOverlayImage(g.overlayImage,v),g.backgroundImage&&this.setBackgroundImage(g.backgroundImage,v),g.backgroundColor&&this.setBackgroundColor(g.backgroundColor,v),g.overlayColor&&this.setOverlayColor(g.overlayColor,v),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var l=e.devicePixelRatio;this.__initRetinaScaling(l,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(l,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(l,g,v){g.setAttribute("width",this.width*l),g.setAttribute("height",this.height*l),v.scale(l,l)},calcOffset:function(){return this._offset=i(this.lowerCanvasEl),this},setOverlayImage:function(l,g,v){return this.__setBgOverlayImage("overlayImage",l,g,v)},setBackgroundImage:function(l,g,v){return this.__setBgOverlayImage("backgroundImage",l,g,v)},setOverlayColor:function(l,g){return this.__setBgOverlayColor("overlayColor",l,g)},setBackgroundColor:function(l,g){return this.__setBgOverlayColor("backgroundColor",l,g)},__setBgOverlayImage:function(l,g,v,b){return typeof g=="string"?e.util.loadImage(g,function(_,C){if(_){var w=new e.Image(_,b);this[l]=w,w.canvas=this}v&&v(_,C)},this,b&&b.crossOrigin):(b&&g.setOptions(b),this[l]=g,g&&(g.canvas=this),v&&v(g,!1)),this},__setBgOverlayColor:function(l,g,v){return this[l]=g,this._initGradient(g,l),this._initPattern(g,l,v),this},_createCanvasElement:function(){var l=c();if(!l||(l.style||(l.style={}),typeof l.getContext>"u"))throw p;return l},_initOptions:function(l){var g=this.lowerCanvasEl;this._setOptions(l),this.width=this.width||parseInt(g.width,10)||0,this.height=this.height||parseInt(g.height,10)||0,this.lowerCanvasEl.style&&(g.width=this.width,g.height=this.height,g.style.width=this.width+"px",g.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(l){l&&l.getContext?this.lowerCanvasEl=l:this.lowerCanvasEl=e.util.getById(l)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(l,g){return this.setDimensions({width:l},g)},setHeight:function(l,g){return this.setDimensions({height:l},g)},setDimensions:function(l,g){var v;g=g||{};for(var b in l)v=l[b],g.cssOnly||(this._setBackstoreDimension(b,l[b]),v+="px",this.hasLostContext=!0),g.backstoreOnly||this._setCssDimension(b,v);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),g.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(l,g){return this.lowerCanvasEl[l]=g,this.upperCanvasEl&&(this.upperCanvasEl[l]=g),this.cacheCanvasEl&&(this.cacheCanvasEl[l]=g),this[l]=g,this},_setCssDimension:function(l,g){return this.lowerCanvasEl.style[l]=g,this.upperCanvasEl&&(this.upperCanvasEl.style[l]=g),this.wrapperEl&&(this.wrapperEl.style[l]=g),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(l){var g=this._activeObject,v=this.backgroundImage,b=this.overlayImage,_,C,w;for(this.viewportTransform=l,C=0,w=this._objects.length;C<w;C++)_=this._objects[C],_.group||_.setCoords(!0);return g&&g.setCoords(),v&&v.setCoords(!0),b&&b.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(l,g){var v=l,b=this.viewportTransform.slice(0);l=r(l,o(this.viewportTransform)),b[0]=g,b[3]=g;var _=r(l,b);return b[4]+=v.x-_.x,b[5]+=v.y-_.y,this.setViewportTransform(b)},setZoom:function(l){return this.zoomToPoint(new e.Point(0,0),l),this},absolutePan:function(l){var g=this.viewportTransform.slice(0);return g[4]=-l.x,g[5]=-l.y,this.setViewportTransform(g)},relativePan:function(l){return this.absolutePan(new e.Point(-l.x-this.viewportTransform[4],-l.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(l){this.stateful&&l.setupState(),l._set("canvas",this),l.setCoords(),this.fire("object:added",{target:l}),l.fire("added")},_onObjectRemoved:function(l){this.fire("object:removed",{target:l}),l.fire("removed"),delete l.canvas},clearContext:function(l){return l.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var l=this.contextContainer;return this.renderCanvas(l,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var l={},g=this.width,v=this.height,b=o(this.viewportTransform);return l.tl=r({x:0,y:0},b),l.br=r({x:g,y:v},b),l.tr=new e.Point(l.br.x,l.tl.y),l.bl=new e.Point(l.tl.x,l.br.y),this.vptCoords=l,l},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(l,g){var v=this.viewportTransform,b=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(l),e.util.setImageSmoothing(l,this.imageSmoothingEnabled),this.fire("before:render",{ctx:l}),this._renderBackground(l),l.save(),l.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._renderObjects(l,g),l.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(l),b&&(b.canvas=this,b.shouldCache(),b._transformDone=!0,b.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(l)),this._renderOverlay(l),this.controlsAboveOverlay&&this.interactive&&this.drawControls(l),this.fire("after:render",{ctx:l})},drawClipPathOnCanvas:function(l){var g=this.viewportTransform,v=this.clipPath;l.save(),l.transform(g[0],g[1],g[2],g[3],g[4],g[5]),l.globalCompositeOperation="destination-in",v.transform(l),l.scale(1/v.zoomX,1/v.zoomY),l.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),l.restore()},_renderObjects:function(l,g){var v,b;for(v=0,b=g.length;v<b;++v)g[v]&&g[v].render(l)},_renderBackgroundOrOverlay:function(l,g){var v=this[g+"Color"],b=this[g+"Image"],_=this.viewportTransform,C=this[g+"Vpt"];if(!(!v&&!b)){if(v){l.save(),l.beginPath(),l.moveTo(0,0),l.lineTo(this.width,0),l.lineTo(this.width,this.height),l.lineTo(0,this.height),l.closePath(),l.fillStyle=v.toLive?v.toLive(l,this):v,C&&l.transform(_[0],_[1],_[2],_[3],_[4],_[5]),l.transform(1,0,0,1,v.offsetX||0,v.offsetY||0);var w=v.gradientTransform||v.patternTransform;w&&l.transform(w[0],w[1],w[2],w[3],w[4],w[5]),l.fill(),l.restore()}if(b){l.save();var k=this.skipOffscreen;this.skipOffscreen=C,C&&l.transform(_[0],_[1],_[2],_[3],_[4],_[5]),b.render(l),this.skipOffscreen=k,l.restore()}}},_renderBackground:function(l){this._renderBackgroundOrOverlay(l,"background")},_renderOverlay:function(l){this._renderBackgroundOrOverlay(l,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(l){return this._centerObject(l,new e.Point(this.getCenterPoint().x,l.getCenterPoint().y))},centerObjectV:function(l){return this._centerObject(l,new e.Point(l.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(l){var g=this.getCenterPoint();return this._centerObject(l,g)},viewportCenterObject:function(l){var g=this.getVpCenter();return this._centerObject(l,g)},viewportCenterObjectH:function(l){var g=this.getVpCenter();return this._centerObject(l,new e.Point(g.x,l.getCenterPoint().y)),this},viewportCenterObjectV:function(l){var g=this.getVpCenter();return this._centerObject(l,new e.Point(l.getCenterPoint().x,g.y))},getVpCenter:function(){var l=this.getCenterPoint(),g=o(this.viewportTransform);return r(l,g)},_centerObject:function(l,g){return l.setPositionByOrigin(g,"center","center"),l.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(l){return this.toDatalessObject(l)},toObject:function(l){return this._toObjectMethod("toObject",l)},toDatalessObject:function(l){return this._toObjectMethod("toDatalessObject",l)},_toObjectMethod:function(l,g){var v=this.clipPath,b={version:e.version,objects:this._toObjects(l,g)};return v&&!v.excludeFromExport&&(b.clipPath=this._toObject(this.clipPath,l,g)),h(b,this.__serializeBgOverlay(l,g)),e.util.populateWithProperties(this,b,g),b},_toObjects:function(l,g){return this._objects.filter(function(v){return!v.excludeFromExport}).map(function(v){return this._toObject(v,l,g)},this)},_toObject:function(l,g,v){var b;this.includeDefaultValues||(b=l.includeDefaultValues,l.includeDefaultValues=!1);var _=l[g](v);return this.includeDefaultValues||(l.includeDefaultValues=b),_},__serializeBgOverlay:function(l,g){var v={},b=this.backgroundImage,_=this.overlayImage,C=this.backgroundColor,w=this.overlayColor;return C&&C.toObject?C.excludeFromExport||(v.background=C.toObject(g)):C&&(v.background=C),w&&w.toObject?w.excludeFromExport||(v.overlay=w.toObject(g)):w&&(v.overlay=w),b&&!b.excludeFromExport&&(v.backgroundImage=this._toObject(b,l,g)),_&&!_.excludeFromExport&&(v.overlayImage=this._toObject(_,l,g)),v},svgViewportTransformation:!0,toSVG:function(l,g){l||(l={}),l.reviver=g;var v=[];return this._setSVGPreamble(v,l),this._setSVGHeader(v,l),this.clipPath&&v.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(v,"background"),this._setSVGBgOverlayImage(v,"backgroundImage",g),this._setSVGObjects(v,g),this.clipPath&&v.push(`</g>
`),this._setSVGBgOverlayColor(v,"overlay"),this._setSVGBgOverlayImage(v,"overlayImage",g),v.push("</svg>"),v.join("")},_setSVGPreamble:function(l,g){g.suppressPreamble||l.push('<?xml version="1.0" encoding="',g.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(l,g){var v=g.width||this.width,b=g.height||this.height,_,C='viewBox="0 0 '+this.width+" "+this.height+'" ',w=e.Object.NUM_FRACTION_DIGITS;g.viewBox?C='viewBox="'+g.viewBox.x+" "+g.viewBox.y+" "+g.viewBox.width+" "+g.viewBox.height+'" ':this.svgViewportTransformation&&(_=this.viewportTransform,C='viewBox="'+u(-_[4]/_[0],w)+" "+u(-_[5]/_[3],w)+" "+u(this.width/_[0],w)+" "+u(this.height/_[3],w)+'" '),l.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',v,'" ','height="',b,'" ',C,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(g),`</defs>
`)},createSVGClipPathMarkup:function(l){var g=this.clipPath;return g?(g.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+g.clipPathId+`" >
`+this.clipPath.toClipPathSVG(l.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var l=this,g=["background","overlay"].map(function(v){var b=l[v+"Color"];if(b&&b.toLive){var _=l[v+"Vpt"],C=l.viewportTransform,w={width:l.width/(_?C[0]:1),height:l.height/(_?C[3]:1)};return b.toSVG(w,{additionalTransform:_?e.util.matrixToSVG(C):""})}});return g.join("")},createSVGFontFacesMarkup:function(){var l="",g={},v,b,_,C,w,k,z,N,X,re=e.fontPaths,F=[];for(this._objects.forEach(function T(J){F.push(J),J._objects&&J._objects.forEach(T)}),N=0,X=F.length;N<X;N++)if(v=F[N],b=v.fontFamily,!(v.type.indexOf("text")===-1||g[b]||!re[b])&&(g[b]=!0,!!v.styles)){_=v.styles;for(w in _){C=_[w];for(z in C)k=C[z],b=k.fontFamily,!g[b]&&re[b]&&(g[b]=!0)}}for(var K in g)l+=[`		@font-face {
`,"			font-family: '",K,`';
`,"			src: url('",re[K],`');
`,`		}
`].join("");return l&&(l=['	<style type="text/css">',`<![CDATA[
`,l,"]]>",`</style>
`].join("")),l},_setSVGObjects:function(l,g){var v,b,_,C=this._objects;for(b=0,_=C.length;b<_;b++)v=C[b],!v.excludeFromExport&&this._setSVGObject(l,v,g)},_setSVGObject:function(l,g,v){l.push(g.toSVG(v))},_setSVGBgOverlayImage:function(l,g,v){this[g]&&!this[g].excludeFromExport&&this[g].toSVG&&l.push(this[g].toSVG(v))},_setSVGBgOverlayColor:function(l,g){var v=this[g+"Color"],b=this.viewportTransform,_=this.width,C=this.height;if(v)if(v.toLive){var w=v.repeat,k=e.util.invertTransform(b),z=this[g+"Vpt"],N=z?e.util.matrixToSVG(k):"";l.push('<rect transform="'+N+" translate(",_/2,",",C/2,')"',' x="',v.offsetX-_/2,'" y="',v.offsetY-C/2,'" ','width="',w==="repeat-y"||w==="no-repeat"?v.source.width:_,'" height="',w==="repeat-x"||w==="no-repeat"?v.source.height:C,'" fill="url(#SVGID_'+v.id+')"',`></rect>
`)}else l.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',v,'"',`></rect>
`)},sendToBack:function(l){if(!l)return this;var g=this._activeObject,v,b,_;if(l===g&&l.type==="activeSelection")for(_=g._objects,v=_.length;v--;)b=_[v],a(this._objects,b),this._objects.unshift(b);else a(this._objects,l),this._objects.unshift(l);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(l){if(!l)return this;var g=this._activeObject,v,b,_;if(l===g&&l.type==="activeSelection")for(_=g._objects,v=0;v<_.length;v++)b=_[v],a(this._objects,b),this._objects.push(b);else a(this._objects,l),this._objects.push(l);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(l,g){if(!l)return this;var v=this._activeObject,b,_,C,w,k,z=0;if(l===v&&l.type==="activeSelection")for(k=v._objects,b=0;b<k.length;b++)_=k[b],C=this._objects.indexOf(_),C>0+z&&(w=C-1,a(this._objects,_),this._objects.splice(w,0,_)),z++;else C=this._objects.indexOf(l),C!==0&&(w=this._findNewLowerIndex(l,C,g),a(this._objects,l),this._objects.splice(w,0,l));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(l,g,v){var b,_;if(v)for(b=g,_=g-1;_>=0;--_){var C=l.intersectsWithObject(this._objects[_])||l.isContainedWithinObject(this._objects[_])||this._objects[_].isContainedWithinObject(l);if(C){b=_;break}}else b=g-1;return b},bringForward:function(l,g){if(!l)return this;var v=this._activeObject,b,_,C,w,k,z=0;if(l===v&&l.type==="activeSelection")for(k=v._objects,b=k.length;b--;)_=k[b],C=this._objects.indexOf(_),C<this._objects.length-1-z&&(w=C+1,a(this._objects,_),this._objects.splice(w,0,_)),z++;else C=this._objects.indexOf(l),C!==this._objects.length-1&&(w=this._findNewUpperIndex(l,C,g),a(this._objects,l),this._objects.splice(w,0,l));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(l,g,v){var b,_,C;if(v)for(b=g,_=g+1,C=this._objects.length;_<C;++_){var w=l.intersectsWithObject(this._objects[_])||l.isContainedWithinObject(this._objects[_])||this._objects[_].isContainedWithinObject(l);if(w){b=_;break}}else b=g+1;return b},moveTo:function(l,g){return a(this._objects,l),this._objects.splice(g,0,l),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(l){l.dispose&&l.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),e.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),h(e.StaticCanvas.prototype,e.Observable),h(e.StaticCanvas.prototype,e.Collection),h(e.StaticCanvas.prototype,e.DataURLExporter),h(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(l){var g=c();if(!g||!g.getContext)return null;var v=g.getContext("2d");if(!v)return null;switch(l){case"setLineDash":return typeof v.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var l=n(this.lowerCanvasEl);return l&&l.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(l){var g=n(this.lowerCanvasEl);return g&&g.createJPEGStream(l)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(h){h.strokeStyle=this.color,h.lineWidth=this.width,h.lineCap=this.strokeLineCap,h.miterLimit=this.strokeMiterLimit,h.lineJoin=this.strokeLineJoin,h.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(h){var i=this.canvas.viewportTransform;h.save(),h.transform(i[0],i[1],i[2],i[3],i[4],i[5])},_setShadow:function(){if(this.shadow){var h=this.canvas,i=this.shadow,a=h.contextTop,u=h.getZoom();h&&h._isRetinaScaling()&&(u*=e.devicePixelRatio),a.shadowColor=i.color,a.shadowBlur=i.blur*u,a.shadowOffsetX=i.offsetX*u,a.shadowOffsetY=i.offsetY*u}},needsFullRender:function(){var h=new e.Color(this.color);return h.getAlpha()<1||!!this.shadow},_resetShadow:function(){var h=this.canvas.contextTop;h.shadowColor="",h.shadowBlur=h.shadowOffsetX=h.shadowOffsetY=0},_isOutSideCanvas:function(h){return h.x<0||h.x>this.canvas.getWidth()||h.y<0||h.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(h){this.canvas=h,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(h,i,a){var u=i.midPointFrom(a);return h.quadraticCurveTo(i.x,i.y,u.x,u.y),u},onMouseDown:function(h,i){this.canvas._isMainEvent(i.e)&&(this.drawStraightLine=i.e[this.straightLineKey],this._prepareForDrawing(h),this._captureDrawingPath(h),this._render())},onMouseMove:function(h,i){if(this.canvas._isMainEvent(i.e)&&(this.drawStraightLine=i.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h))&&this._captureDrawingPath(h)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var a=this._points,u=a.length,r=this.canvas.contextTop;this._saveAndTransform(r),this.oldEnd&&(r.beginPath(),r.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(r,a[u-2],a[u-1],!0),r.stroke(),r.restore()}},onMouseUp:function(h){return this.canvas._isMainEvent(h.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(h){var i=new e.Point(h.x,h.y);this._reset(),this._addPoint(i),this.canvas.contextTop.moveTo(i.x,i.y)},_addPoint:function(h){return this._points.length>1&&h.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(h),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(h){var i=new e.Point(h.x,h.y);return this._addPoint(i)},_render:function(h){var i,a,u=this._points[0],r=this._points[1];if(h=h||this.canvas.contextTop,this._saveAndTransform(h),h.beginPath(),this._points.length===2&&u.x===r.x&&u.y===r.y){var o=this.width/1e3;u=new e.Point(u.x,u.y),r=new e.Point(r.x,r.y),u.x-=o,r.x+=o}for(h.moveTo(u.x,u.y),i=1,a=this._points.length;i<a;i++)this._drawSegment(h,u,r),u=this._points[i],r=this._points[i+1];h.lineTo(u.x,u.y),h.stroke(),h.restore()},convertPointsToSVGPath:function(h){var i=this.width/1e3;return e.util.getSmoothPathFromPoints(h,i)},_isEmptySVGPath:function(h){var i=e.util.joinPath(h);return i==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(h){var i=new e.Path(h,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,i.shadow=new e.Shadow(this.shadow)),i},decimatePoints:function(h,i){if(h.length<=2)return h;var a=this.canvas.getZoom(),u=Math.pow(i/a,2),r,o=h.length-1,n=h[0],c=[n],p;for(r=1;r<o-1;r++)p=Math.pow(n.x-h[r].x,2)+Math.pow(n.y-h[r].y,2),p>=u&&(n=h[r],c.push(n));return c.push(h[o]),c},_finalizeAndAddPath:function(){var h=this.canvas.contextTop;h.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var i=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(i)){this.canvas.requestRenderAll();return}var a=this.createPath(i);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:a}),this.canvas.add(a),this.canvas.requestRenderAll(),a.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:a})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(h){this.canvas=h,this.points=[]},drawDot:function(h){var i=this.addPoint(h),a=this.canvas.contextTop;this._saveAndTransform(a),this.dot(a,i),a.restore()},dot:function(h,i){h.fillStyle=i.fill,h.beginPath(),h.arc(i.x,i.y,i.radius,0,Math.PI*2,!1),h.closePath(),h.fill()},onMouseDown:function(h){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(h)},_render:function(){var h=this.canvas.contextTop,i,a,u=this.points;for(this._saveAndTransform(h),i=0,a=u.length;i<a;i++)this.dot(h,u[i]);h.restore()},onMouseMove:function(h){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(h),this._render()):this.drawDot(h))},onMouseUp:function(){var h=this.canvas.renderOnAddRemove,i,a;this.canvas.renderOnAddRemove=!1;var u=[];for(i=0,a=this.points.length;i<a;i++){var r=this.points[i],o=new e.Circle({radius:r.radius,left:r.x,top:r.y,originX:"center",originY:"center",fill:r.fill});this.shadow&&(o.shadow=new e.Shadow(this.shadow)),u.push(o)}var n=new e.Group(u);n.canvas=this.canvas,this.canvas.fire("before:path:created",{path:n}),this.canvas.add(n),this.canvas.fire("path:created",{path:n}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=h,this.canvas.requestRenderAll()},addPoint:function(h){var i=new e.Point(h.x,h.y),a=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,u=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return i.radius=a,i.fill=u,this.points.push(i),i}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(h){this.canvas=h,this.sprayChunks=[]},onMouseDown:function(h){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(h),this.render(this.sprayChunkPoints)},onMouseMove:function(h){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h)||(this.addSprayChunk(h),this.render(this.sprayChunkPoints))},onMouseUp:function(){var h=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var i=[],a=0,u=this.sprayChunks.length;a<u;a++)for(var r=this.sprayChunks[a],o=0,n=r.length;o<n;o++){var c=new e.Rect({width:r[o].width,height:r[o].width,left:r[o].x+1,top:r[o].y+1,originX:"center",originY:"center",fill:this.color});i.push(c)}this.optimizeOverlapping&&(i=this._getOptimizedRects(i));var p=new e.Group(i);this.shadow&&p.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:p}),this.canvas.add(p),this.canvas.fire("path:created",{path:p}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=h,this.canvas.requestRenderAll()},_getOptimizedRects:function(h){var i={},a,u,r;for(u=0,r=h.length;u<r;u++)a=h[u].left+""+h[u].top,i[a]||(i[a]=h[u]);var o=[];for(a in i)o.push(i[a]);return o},render:function(h){var i=this.canvas.contextTop,a,u;for(i.fillStyle=this.color,this._saveAndTransform(i),a=0,u=h.length;a<u;a++){var r=h[a];typeof r.opacity<"u"&&(i.globalAlpha=r.opacity),i.fillRect(r.x,r.y,r.width,r.width)}i.restore()},_render:function(){var h=this.canvas.contextTop,i,a;for(h.fillStyle=this.color,this._saveAndTransform(h),i=0,a=this.sprayChunks.length;i<a;i++)this.render(this.sprayChunks[i]);h.restore()},addSprayChunk:function(h){this.sprayChunkPoints=[];var i,a,u,r=this.width/2,o;for(o=0;o<this.density;o++){i=e.util.getRandomInt(h.x-r,h.x+r),a=e.util.getRandomInt(h.y-r,h.y+r),this.dotWidthVariance?u=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):u=this.dotWidth;var n=new e.Point(i,a);n.width=u,this.randomOpacity&&(n.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(n)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var h=20,i=5,a=e.util.createCanvasElement(),u=a.getContext("2d");return a.width=a.height=h+i,u.fillStyle=this.color,u.beginPath(),u.arc(h/2,h/2,h/2,0,Math.PI*2,!1),u.closePath(),u.fill(),a},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(h){return h.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(h){this.callSuper("_setBrushStyles",h),h.strokeStyle=this.getPattern(h)},createPath:function(h){var i=this.callSuper("createPath",h),a=i._getLeftTopCoords().scalarAdd(i.strokeWidth/2);return i.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-a.x,offsetY:-a.y}),i}}),function(){var h=e.util.getPointer,i=e.util.degreesToRadians,a=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(r,o){o||(o={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(r,o),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var r=this.getActiveObjects(),o,n,c;if(r.length>0&&!this.preserveObjectStacking){n=[],c=[];for(var p=0,l=this._objects.length;p<l;p++)o=this._objects[p],r.indexOf(o)===-1?n.push(o):c.push(o);r.length>1&&(this._activeObject._objects=c),n.push.apply(n,c)}else n=this._objects;return n},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var r=this.contextContainer;return this.renderCanvas(r,this._chooseObjectsToRender()),this},renderTopLayer:function(r){r.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(r),this.contextTopDirty=!0),r.restore()},renderTop:function(){var r=this.contextTop;return this.clearContext(r),this.renderTopLayer(r),this.fire("after:render"),this},_normalizePointer:function(r,o){var n=r.calcTransformMatrix(),c=e.util.invertTransform(n),p=this.restorePointerVpt(o);return e.util.transformPoint(p,c)},isTargetTransparent:function(r,o,n){if(r.shouldCache()&&r._cacheCanvas&&r!==this._activeObject){var c=this._normalizePointer(r,{x:o,y:n}),p=Math.max(r.cacheTranslationX+c.x*r.zoomX,0),l=Math.max(r.cacheTranslationY+c.y*r.zoomY,0),_=e.util.isTransparent(r._cacheContext,Math.round(p),Math.round(l),this.targetFindTolerance);return _}var g=this.contextCache,v=r.selectionBackgroundColor,b=this.viewportTransform;r.selectionBackgroundColor="",this.clearContext(g),g.save(),g.transform(b[0],b[1],b[2],b[3],b[4],b[5]),r.render(g),g.restore(),r.selectionBackgroundColor=v;var _=e.util.isTransparent(g,o,n,this.targetFindTolerance);return _},_isSelectionKeyPressed:function(r){var o=!1;return Array.isArray(this.selectionKey)?o=!!this.selectionKey.find(function(n){return r[n]===!0}):o=r[this.selectionKey],o},_shouldClearSelection:function(r,o){var n=this.getActiveObjects(),c=this._activeObject;return!o||o&&c&&n.length>1&&n.indexOf(o)===-1&&c!==o&&!this._isSelectionKeyPressed(r)||o&&!o.evented||o&&!o.selectable&&c&&c!==o},_shouldCenterTransform:function(r,o,n){if(r){var c;return o==="scale"||o==="scaleX"||o==="scaleY"||o==="resizing"?c=this.centeredScaling||r.centeredScaling:o==="rotate"&&(c=this.centeredRotation||r.centeredRotation),c?!n:n}},_getOriginFromCorner:function(r,o){var n={x:r.originX,y:r.originY};return o==="ml"||o==="tl"||o==="bl"?n.x="right":(o==="mr"||o==="tr"||o==="br")&&(n.x="left"),o==="tl"||o==="mt"||o==="tr"?n.y="bottom":(o==="bl"||o==="mb"||o==="br")&&(n.y="top"),n},_getActionFromCorner:function(r,o,n,c){if(!o||!r)return"drag";var p=c.controls[o];return p.getActionName(n,p,c)},_setupCurrentTransform:function(r,o,n){if(o){var c=this.getPointer(r),p=o.__corner,l=o.controls[p],g=n&&p?l.getActionHandler(r,o,l):e.controlsUtils.dragHandler,v=this._getActionFromCorner(n,p,r,o),b=this._getOriginFromCorner(o,p),_=r[this.centeredKey],C={target:o,action:v,actionHandler:g,corner:p,scaleX:o.scaleX,scaleY:o.scaleY,skewX:o.skewX,skewY:o.skewY,offsetX:c.x-o.left,offsetY:c.y-o.top,originX:b.x,originY:b.y,ex:c.x,ey:c.y,lastX:c.x,lastY:c.y,theta:i(o.angle),width:o.width*o.scaleX,shiftKey:r.shiftKey,altKey:_,original:e.util.saveObjectTransform(o)};this._shouldCenterTransform(o,v,_)&&(C.originX="center",C.originY="center"),C.original.originX=b.x,C.original.originY=b.y,this._currentTransform=C,this._beforeTransform(r)}},setCursor:function(r){this.upperCanvasEl.style.cursor=r},_drawSelection:function(r){var o=this._groupSelector,n=new e.Point(o.ex,o.ey),c=e.util.transformPoint(n,this.viewportTransform),p=new e.Point(o.ex+o.left,o.ey+o.top),l=e.util.transformPoint(p,this.viewportTransform),g=Math.min(c.x,l.x),v=Math.min(c.y,l.y),b=Math.max(c.x,l.x),_=Math.max(c.y,l.y),C=this.selectionLineWidth/2;this.selectionColor&&(r.fillStyle=this.selectionColor,r.fillRect(g,v,b-g,_-v)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(r.lineWidth=this.selectionLineWidth,r.strokeStyle=this.selectionBorderColor,g+=C,v+=C,b-=C,_-=C,e.Object.prototype._setLineDash.call(this,r,this.selectionDashArray),r.strokeRect(g,v,b-g,_-v))},findTarget:function(r,o){if(!this.skipTargetFind){var n=!0,c=this.getPointer(r,n),p=this._activeObject,l=this.getActiveObjects(),g,v,b=a(r),_=l.length>1&&!o||l.length===1;if(this.targets=[],_&&p._findTargetCorner(c,b)||l.length>1&&!o&&p===this._searchPossibleTargets([p],c))return p;if(l.length===1&&p===this._searchPossibleTargets([p],c))if(this.preserveObjectStacking)g=p,v=this.targets,this.targets=[];else return p;var C=this._searchPossibleTargets(this._objects,c);return r[this.altSelectionKey]&&C&&g&&C!==g&&(C=g,this.targets=v),C}},_checkTarget:function(r,o,n){if(o&&o.visible&&o.evented&&o.containsPoint(r))if((this.perPixelTargetFind||o.perPixelTargetFind)&&!o.isEditing){var c=this.isTargetTransparent(o,n.x,n.y);if(!c)return!0}else return!0},_searchPossibleTargets:function(r,o){for(var n,c=r.length,p;c--;){var l=r[c],g=l.group?this._normalizePointer(l.group,o):o;if(this._checkTarget(g,l,o)){n=r[c],n.subTargetCheck&&n instanceof e.Group&&(p=this._searchPossibleTargets(n._objects,o),p&&this.targets.push(p));break}}return n},restorePointerVpt:function(r){return e.util.transformPoint(r,e.util.invertTransform(this.viewportTransform))},getPointer:function(r,o){if(this._absolutePointer&&!o)return this._absolutePointer;if(this._pointer&&o)return this._pointer;var n=h(r),c=this.upperCanvasEl,p=c.getBoundingClientRect(),l=p.width||0,g=p.height||0,v;(!l||!g)&&("top"in p&&"bottom"in p&&(g=Math.abs(p.top-p.bottom)),"right"in p&&"left"in p&&(l=Math.abs(p.right-p.left))),this.calcOffset(),n.x=n.x-this._offset.left,n.y=n.y-this._offset.top,o||(n=this.restorePointerVpt(n));var b=this.getRetinaScaling();return b!==1&&(n.x/=b,n.y/=b),l===0||g===0?v={width:1,height:1}:v={width:c.width/l,height:c.height/g},{x:n.x*v.width,y:n.y*v.height}},_createUpperCanvas:function(){var r=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),o=this.lowerCanvasEl,n=this.upperCanvasEl;n?n.className="":(n=this._createCanvasElement(),this.upperCanvasEl=n),e.util.addClass(n,"upper-canvas "+r),this.wrapperEl.appendChild(n),this._copyCanvasStyle(o,n),this._applyCanvasStyle(n),this.contextTop=n.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(r){var o=this.width||r.width,n=this.height||r.height;e.util.setStyle(r,{position:"absolute",width:o+"px",height:n+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),r.width=o,r.height=n,e.util.makeElementUnselectable(r)},_copyCanvasStyle:function(r,o){o.style.cssText=r.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var r=this._activeObject;return r?r.type==="activeSelection"&&r._objects?r._objects.slice(0):[r]:[]},_onObjectRemoved:function(r){r===this._activeObject&&(this.fire("before:selection:cleared",{target:r}),this._discardActiveObject(),this.fire("selection:cleared",{target:r}),r.fire("deselected")),r===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",r)},_fireSelectionEvents:function(r,o){var n=!1,c=this.getActiveObjects(),p=[],l=[];r.forEach(function(g){c.indexOf(g)===-1&&(n=!0,g.fire("deselected",{e:o,target:g}),l.push(g))}),c.forEach(function(g){r.indexOf(g)===-1&&(n=!0,g.fire("selected",{e:o,target:g}),p.push(g))}),r.length>0&&c.length>0?n&&this.fire("selection:updated",{e:o,selected:p,deselected:l}):c.length>0?this.fire("selection:created",{e:o,selected:p}):r.length>0&&this.fire("selection:cleared",{e:o,deselected:l})},setActiveObject:function(r,o){var n=this.getActiveObjects();return this._setActiveObject(r,o),this._fireSelectionEvents(n,o),this},_setActiveObject:function(r,o){return this._activeObject===r||!this._discardActiveObject(o,r)||r.onSelect({e:o})?!1:(this._activeObject=r,!0)},_discardActiveObject:function(r,o){var n=this._activeObject;if(n){if(n.onDeselect({e:r,object:o}))return!1;this._activeObject=null}return!0},discardActiveObject:function(r){var o=this.getActiveObjects(),n=this.getActiveObject();return o.length&&this.fire("before:selection:cleared",{target:n,e:r}),this._discardActiveObject(r),this._fireSelectionEvents(o,r),this},dispose:function(){var r=this.wrapperEl;return this.removeListeners(),r.removeChild(this.upperCanvasEl),r.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(o){e.util.cleanUpJsdomNode(this[o]),this[o]=void 0}).bind(this)),r.parentNode&&r.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(r){var o=this._activeObject;o&&o._renderControls(r)},_toObject:function(r,o,n){var c=this._realizeGroupTransformOnObject(r),p=this.callSuper("_toObject",r,o,n);return this._unwindGroupTransformOnObject(r,c),p},_realizeGroupTransformOnObject:function(r){if(r.group&&r.group.type==="activeSelection"&&this._activeObject===r.group){var o=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],n={};return o.forEach(function(c){n[c]=r[c]}),e.util.addTransformToObject(r,this._activeObject.calcOwnMatrix()),n}else return null},_unwindGroupTransformOnObject:function(r,o){o&&r.set(o)},_setSVGObject:function(r,o,n){var c=this._realizeGroupTransformOnObject(o);this.callSuper("_setSVGObject",r,o,n),this._unwindGroupTransformOnObject(o,c)},setViewportTransform:function(r){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,r)}});for(var u in e.StaticCanvas)u!=="prototype"&&(e.Canvas[u]=e.StaticCanvas[u])}(),function(){var h=e.util.addListener,i=e.util.removeListener,a=3,u=2,r=1,o={passive:!1};function n(c,p){return c.button&&c.button===p-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(h,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(c,p){var l=this.upperCanvasEl,g=this._getEventPrefix();c(e.window,"resize",this._onResize),c(l,g+"down",this._onMouseDown),c(l,g+"move",this._onMouseMove,o),c(l,g+"out",this._onMouseOut),c(l,g+"enter",this._onMouseEnter),c(l,"wheel",this._onMouseWheel),c(l,"contextmenu",this._onContextMenu),c(l,"dblclick",this._onDoubleClick),c(l,"dragover",this._onDragOver),c(l,"dragenter",this._onDragEnter),c(l,"dragleave",this._onDragLeave),c(l,"drop",this._onDrop),this.enablePointerEvents||c(l,"touchstart",this._onTouchStart,o),typeof eventjs<"u"&&p in eventjs&&(eventjs[p](l,"gesture",this._onGesture),eventjs[p](l,"drag",this._onDrag),eventjs[p](l,"orientation",this._onOrientationChange),eventjs[p](l,"shake",this._onShake),eventjs[p](l,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(i,"remove");var c=this._getEventPrefix();i(e.document,c+"up",this._onMouseUp),i(e.document,"touchend",this._onTouchEnd,o),i(e.document,c+"move",this._onMouseMove,o),i(e.document,"touchmove",this._onMouseMove,o)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(c,p){this.__onTransformGesture&&this.__onTransformGesture(c,p)},_onDrag:function(c,p){this.__onDrag&&this.__onDrag(c,p)},_onMouseWheel:function(c){this.__onMouseWheel(c)},_onMouseOut:function(c){var p=this._hoveredTarget;this.fire("mouse:out",{target:p,e:c}),this._hoveredTarget=null,p&&p.fire("mouseout",{e:c});var l=this;this._hoveredTargets.forEach(function(g){l.fire("mouse:out",{target:g,e:c}),g&&g.fire("mouseout",{e:c})}),this._hoveredTargets=[]},_onMouseEnter:function(c){!this._currentTransform&&!this.findTarget(c)&&(this.fire("mouse:over",{target:null,e:c}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(c,p){this.__onOrientationChange&&this.__onOrientationChange(c,p)},_onShake:function(c,p){this.__onShake&&this.__onShake(c,p)},_onLongPress:function(c,p){this.__onLongPress&&this.__onLongPress(c,p)},_onDragOver:function(c){c.preventDefault();var p=this._simpleEventHandler("dragover",c);this._fireEnterLeaveEvents(p,c)},_onDrop:function(c){return this._simpleEventHandler("drop:before",c),this._simpleEventHandler("drop",c)},_onContextMenu:function(c){return this.stopContextMenu&&(c.stopPropagation(),c.preventDefault()),!1},_onDoubleClick:function(c){this._cacheTransformEventData(c),this._handleEvent(c,"dblclick"),this._resetTransformEventData(c)},getPointerId:function(c){var p=c.changedTouches;return p?p[0]&&p[0].identifier:this.enablePointerEvents?c.pointerId:-1},_isMainEvent:function(c){return c.isPrimary===!0?!0:c.isPrimary===!1?!1:c.type==="touchend"&&c.touches.length===0?!0:c.changedTouches?c.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(c){c.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(c)),this.__onMouseDown(c),this._resetTransformEventData();var p=this.upperCanvasEl,l=this._getEventPrefix();h(e.document,"touchend",this._onTouchEnd,o),h(e.document,"touchmove",this._onMouseMove,o),i(p,l+"down",this._onMouseDown)},_onMouseDown:function(c){this.__onMouseDown(c),this._resetTransformEventData();var p=this.upperCanvasEl,l=this._getEventPrefix();i(p,l+"move",this._onMouseMove,o),h(e.document,l+"up",this._onMouseUp),h(e.document,l+"move",this._onMouseMove,o)},_onTouchEnd:function(c){if(!(c.touches.length>0)){this.__onMouseUp(c),this._resetTransformEventData(),this.mainTouchId=null;var p=this._getEventPrefix();i(e.document,"touchend",this._onTouchEnd,o),i(e.document,"touchmove",this._onMouseMove,o);var l=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){h(l.upperCanvasEl,p+"down",l._onMouseDown),l._willAddMouseDown=0},400)}},_onMouseUp:function(c){this.__onMouseUp(c),this._resetTransformEventData();var p=this.upperCanvasEl,l=this._getEventPrefix();this._isMainEvent(c)&&(i(e.document,l+"up",this._onMouseUp),i(e.document,l+"move",this._onMouseMove,o),h(p,l+"move",this._onMouseMove,o))},_onMouseMove:function(c){!this.allowTouchScrolling&&c.preventDefault&&c.preventDefault(),this.__onMouseMove(c)},_onResize:function(){this.calcOffset()},_shouldRender:function(c){var p=this._activeObject;return!!p!=!!c||p&&c&&p!==c?!0:(p&&p.isEditing,!1)},__onMouseUp:function(c){var p,l=this._currentTransform,g=this._groupSelector,v=!1,b=!g||g.left===0&&g.top===0;if(this._cacheTransformEventData(c),p=this._target,this._handleEvent(c,"up:before"),n(c,a)){this.fireRightClick&&this._handleEvent(c,"up",a,b);return}if(n(c,u)){this.fireMiddleClick&&this._handleEvent(c,"up",u,b),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(c);return}if(this._isMainEvent(c)){if(l&&(this._finalizeCurrentTransform(c),v=l.actionPerformed),!b){var _=p===this._activeObject;this._maybeGroupObjects(c),v||(v=this._shouldRender(p)||!_&&p===this._activeObject)}var C,w;if(p){if(C=p._findTargetCorner(this.getPointer(c,!0),e.util.isTouchEvent(c)),p.selectable&&p!==this._activeObject&&p.activeOn==="up")this.setActiveObject(p,c),v=!0;else{var k=p.controls[C],z=k&&k.getMouseUpHandler(c,p,k);z&&(w=this.getPointer(c),z(c,l,w.x,w.y))}p.isMoving=!1}if(l&&(l.target!==p||l.corner!==C)){var N=l.target&&l.target.controls[l.corner],X=N&&N.getMouseUpHandler(c,p,k);w=w||this.getPointer(c),X&&X(c,l,w.x,w.y)}this._setCursorFromEvent(c,p),this._handleEvent(c,"up",r,b),this._groupSelector=null,this._currentTransform=null,p&&(p.__corner=0),v?this.requestRenderAll():b||this.renderTop()}},_simpleEventHandler:function(c,p){var l=this.findTarget(p),g=this.targets,v={e:p,target:l,subTargets:g};if(this.fire(c,v),l&&l.fire(c,v),!g)return l;for(var b=0;b<g.length;b++)g[b].fire(c,v);return l},_handleEvent:function(c,p,l,g){var v=this._target,b=this.targets||[],_={e:c,target:v,subTargets:b,button:l||r,isClick:g||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};p==="up"&&(_.currentTarget=this.findTarget(c),_.currentSubTargets=this.targets),this.fire("mouse:"+p,_),v&&v.fire("mouse"+p,_);for(var C=0;C<b.length;C++)b[C].fire("mouse"+p,_)},_finalizeCurrentTransform:function(c){var p=this._currentTransform,l=p.target,g={e:c,target:l,transform:p,action:p.action};l._scaling&&(l._scaling=!1),l.setCoords(),(p.actionPerformed||this.stateful&&l.hasStateChanged())&&this._fire("modified",g)},_onMouseDownInDrawingMode:function(c){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(c).requestRenderAll();var p=this.getPointer(c);this.freeDrawingBrush.onMouseDown(p,{e:c,pointer:p}),this._handleEvent(c,"down")},_onMouseMoveInDrawingMode:function(c){if(this._isCurrentlyDrawing){var p=this.getPointer(c);this.freeDrawingBrush.onMouseMove(p,{e:c,pointer:p})}this.setCursor(this.freeDrawingCursor),this._handleEvent(c,"move")},_onMouseUpInDrawingMode:function(c){var p=this.getPointer(c);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:c,pointer:p}),this._handleEvent(c,"up")},__onMouseDown:function(c){this._cacheTransformEventData(c),this._handleEvent(c,"down:before");var p=this._target;if(n(c,a)){this.fireRightClick&&this._handleEvent(c,"down",a);return}if(n(c,u)){this.fireMiddleClick&&this._handleEvent(c,"down",u);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(c);return}if(this._isMainEvent(c)&&!this._currentTransform){var l=this._pointer;this._previousPointer=l;var g=this._shouldRender(p),v=this._shouldGroup(c,p);if(this._shouldClearSelection(c,p)?this.discardActiveObject(c):v&&(this._handleGrouping(c,p),p=this._activeObject),this.selection&&(!p||!p.selectable&&!p.isEditing&&p!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),p){var b=p===this._activeObject;p.selectable&&p.activeOn==="down"&&this.setActiveObject(p,c);var _=p._findTargetCorner(this.getPointer(c,!0),e.util.isTouchEvent(c));if(p.__corner=_,p===this._activeObject&&(_||!v)){this._setupCurrentTransform(c,p,b);var C=p.controls[_],l=this.getPointer(c),w=C&&C.getMouseDownHandler(c,p,C);w&&w(c,this._currentTransform,l.x,l.y)}}this._handleEvent(c,"down"),(g||v)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(c){this._resetTransformEventData(),this._pointer=this.getPointer(c,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(c)||null},_beforeTransform:function(c){var p=this._currentTransform;this.stateful&&p.target.saveState(),this.fire("before:transform",{e:c,transform:p})},__onMouseMove:function(c){this._handleEvent(c,"move:before"),this._cacheTransformEventData(c);var p,l;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(c);return}if(this._isMainEvent(c)){var g=this._groupSelector;g?(l=this._absolutePointer,g.left=l.x-g.ex,g.top=l.y-g.ey,this.renderTop()):this._currentTransform?this._transformObject(c):(p=this.findTarget(c)||null,this._setCursorFromEvent(c,p),this._fireOverOutEvents(p,c)),this._handleEvent(c,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(c,p){var l=this._hoveredTarget,g=this._hoveredTargets,v=this.targets,b=Math.max(g.length,v.length);this.fireSyntheticInOutEvents(c,p,{oldTarget:l,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var _=0;_<b;_++)this.fireSyntheticInOutEvents(v[_],p,{oldTarget:g[_],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=c,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(c,p){var l=this._draggedoverTarget,g=this._hoveredTargets,v=this.targets,b=Math.max(g.length,v.length);this.fireSyntheticInOutEvents(c,p,{oldTarget:l,evtOut:"dragleave",evtIn:"dragenter"});for(var _=0;_<b;_++)this.fireSyntheticInOutEvents(v[_],p,{oldTarget:g[_],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=c},fireSyntheticInOutEvents:function(c,p,l){var g,v,b=l.oldTarget,_,C,w=b!==c,k=l.canvasEvtIn,z=l.canvasEvtOut;w&&(g={e:p,target:c,previousTarget:b},v={e:p,target:b,nextTarget:c}),C=c&&w,_=b&&w,_&&(z&&this.fire(z,v),b.fire(l.evtOut,v)),C&&(k&&this.fire(k,g),c.fire(l.evtIn,g))},__onMouseWheel:function(c){this._cacheTransformEventData(c),this._handleEvent(c,"wheel"),this._resetTransformEventData()},_transformObject:function(c){var p=this.getPointer(c),l=this._currentTransform;l.reset=!1,l.shiftKey=c.shiftKey,l.altKey=c[this.centeredKey],this._performTransformAction(c,l,p),l.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(c,p,l){var g=l.x,v=l.y,b=p.action,_=!1,C=p.actionHandler;C&&(_=C(c,p,g,v)),b==="drag"&&_&&(p.target.isMoving=!0,this.setCursor(p.target.moveCursor||this.moveCursor)),p.actionPerformed=p.actionPerformed||_},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(c,p){if(!p)return this.setCursor(this.defaultCursor),!1;var l=p.hoverCursor||this.hoverCursor,g=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,v=(!g||!g.contains(p))&&p._findTargetCorner(this.getPointer(c,!0));v?this.setCursor(this.getCornerCursor(v,p,c)):(p.subTargetCheck&&this.targets.concat().reverse().map(function(b){l=b.hoverCursor||l}),this.setCursor(l))},getCornerCursor:function(c,p,l){var g=p.controls[c];return g.cursorStyleHandler(l,g,p)}})}(),function(){var h=Math.min,i=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(a,u){var r=this._activeObject;return r&&this._isSelectionKeyPressed(a)&&u&&u.selectable&&this.selection&&(r!==u||r.type==="activeSelection")&&!u.onSelect({e:a})},_handleGrouping:function(a,u){var r=this._activeObject;r.__corner||u===r&&(u=this.findTarget(a,!0),!u||!u.selectable)||(r&&r.type==="activeSelection"?this._updateActiveSelection(u,a):this._createActiveSelection(u,a))},_updateActiveSelection:function(a,u){var r=this._activeObject,o=r._objects.slice(0);r.contains(a)?(r.removeWithUpdate(a),this._hoveredTarget=a,this._hoveredTargets=this.targets.concat(),r.size()===1&&this._setActiveObject(r.item(0),u)):(r.addWithUpdate(a),this._hoveredTarget=r,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(o,u)},_createActiveSelection:function(a,u){var r=this.getActiveObjects(),o=this._createGroup(a);this._hoveredTarget=o,this._setActiveObject(o,u),this._fireSelectionEvents(r,u)},_createGroup:function(a){var u=this._objects,r=u.indexOf(this._activeObject)<u.indexOf(a),o=r?[this._activeObject,a]:[a,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(o,{canvas:this})},_groupSelectedObjects:function(a){var u=this._collectObjects(a),r;u.length===1?this.setActiveObject(u[0],a):u.length>1&&(r=new e.ActiveSelection(u.reverse(),{canvas:this}),this.setActiveObject(r,a))},_collectObjects:function(a){for(var u=[],r,o=this._groupSelector.ex,n=this._groupSelector.ey,c=o+this._groupSelector.left,p=n+this._groupSelector.top,l=new e.Point(h(o,c),h(n,p)),g=new e.Point(i(o,c),i(n,p)),v=!this.selectionFullyContained,b=o===c&&n===p,_=this._objects.length;_--&&(r=this._objects[_],!(!(!r||!r.selectable||!r.visible)&&(v&&r.intersectsWithRect(l,g,!0)||r.isContainedWithinRect(l,g,!0)||v&&r.containsPoint(l,null,!0)||v&&r.containsPoint(g,null,!0))&&(u.push(r),b))););return u.length>1&&(u=u.filter(function(C){return!C.onSelect({e:a})})),u},_maybeGroupObjects:function(a){this.selection&&this._groupSelector&&this._groupSelectedObjects(a),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(h){h||(h={});var i=h.format||"png",a=h.quality||1,u=(h.multiplier||1)*(h.enableRetinaScaling?this.getRetinaScaling():1),r=this.toCanvasElement(u,h);return e.util.toDataURL(r,i,a)},toCanvasElement:function(h,i){h=h||1,i=i||{};var a=(i.width||this.width)*h,u=(i.height||this.height)*h,r=this.getZoom(),o=this.width,n=this.height,c=r*h,p=this.viewportTransform,l=(p[4]-(i.left||0))*h,g=(p[5]-(i.top||0))*h,v=this.interactive,b=[c,0,0,c,l,g],_=this.enableRetinaScaling,C=e.util.createCanvasElement(),w=this.contextTop;return C.width=a,C.height=u,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=b,this.width=a,this.height=u,this.calcViewportBoundaries(),this.renderCanvas(C.getContext("2d"),this._objects),this.viewportTransform=p,this.width=o,this.height=n,this.calcViewportBoundaries(),this.interactive=v,this.enableRetinaScaling=_,this.contextTop=w,C}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(h,i,a){if(h){var u=typeof h=="string"?JSON.parse(h):e.util.object.clone(h),r=this,o=u.clipPath,n=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete u.clipPath,this._enlivenObjects(u.objects,function(c){r.clear(),r._setBgOverlay(u,function(){o?r._enlivenObjects([o],function(p){r.clipPath=p[0],r.__setupCanvas.call(r,u,c,n,i)}):r.__setupCanvas.call(r,u,c,n,i)})},a),this}},__setupCanvas:function(h,i,a,u){var r=this;i.forEach(function(o,n){r.insertAt(o,n)}),this.renderOnAddRemove=a,delete h.objects,delete h.backgroundImage,delete h.overlayImage,delete h.background,delete h.overlay,this._setOptions(h),this.renderAll(),u&&u()},_setBgOverlay:function(h,i){var a={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!h.backgroundImage&&!h.overlayImage&&!h.background&&!h.overlay){i&&i();return}var u=function(){a.backgroundImage&&a.overlayImage&&a.backgroundColor&&a.overlayColor&&i&&i()};this.__setBgOverlay("backgroundImage",h.backgroundImage,a,u),this.__setBgOverlay("overlayImage",h.overlayImage,a,u),this.__setBgOverlay("backgroundColor",h.background,a,u),this.__setBgOverlay("overlayColor",h.overlay,a,u)},__setBgOverlay:function(h,i,a,u){var r=this;if(!i){a[h]=!0,u&&u();return}h==="backgroundImage"||h==="overlayImage"?e.util.enlivenObjects([i],function(o){r[h]=o[0],a[h]=!0,u&&u()}):this["set"+e.util.string.capitalize(h,!0)](i,function(){a[h]=!0,u&&u()})},_enlivenObjects:function(h,i,a){if(!h||h.length===0){i&&i([]);return}e.util.enlivenObjects(h,function(u){i&&i(u)},null,a)},_toDataURL:function(h,i){this.clone(function(a){i(a.toDataURL(h))})},_toDataURLWithMultiplier:function(h,i,a){this.clone(function(u){a(u.toDataURLWithMultiplier(h,i))})},clone:function(h,i){var a=JSON.stringify(this.toJSON(i));this.cloneWithoutData(function(u){u.loadFromJSON(a,function(){h&&h(u)})})},cloneWithoutData:function(h){var i=e.util.createCanvasElement();i.width=this.width,i.height=this.height;var a=new e.Canvas(i);this.backgroundImage?(a.setBackgroundImage(this.backgroundImage.src,function(){a.renderAll(),h&&h(a)}),a.backgroundImageOpacity=this.backgroundImageOpacity,a.backgroundImageStretch=this.backgroundImageStretch):h&&h(a)}}),function(h){var i=h.fabric||(h.fabric={}),a=i.util.object.extend,u=i.util.object.clone,r=i.util.toFixed,o=i.util.string.capitalize,n=i.util.degreesToRadians,c=!i.isLikelyNode,p=2;i.Object||(i.Object=i.util.createClass(i.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:c,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(l){l&&this.setOptions(l)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=i.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(l){var g=i.perfLimitSizeTotal,v=l.width,b=l.height,_=i.maxCacheSideLimit,C=i.minCacheSideLimit;if(v<=_&&b<=_&&v*b<=g)return v<C&&(l.width=C),b<C&&(l.height=C),l;var w=v/b,k=i.util.limitDimsByArea(w,g),z=i.util.capValue,N=z(C,k.x,_),X=z(C,k.y,_);return v>N&&(l.zoomX/=v/N,l.width=N,l.capped=!0),b>X&&(l.zoomY/=b/X,l.height=X,l.capped=!0),l},_getCacheCanvasDimensions:function(){var l=this.getTotalObjectScaling(),g=this._getTransformedDimensions(0,0),v=g.x*l.scaleX/this.scaleX,b=g.y*l.scaleY/this.scaleY;return{width:v+p,height:b+p,zoomX:l.scaleX,zoomY:l.scaleY,x:v,y:b}},_updateCacheCanvas:function(){var l=this.canvas;if(this.noScaleCache&&l&&l._currentTransform){var g=l._currentTransform.target,v=l._currentTransform.action;if(this===g&&v.slice&&v.slice(0,5)==="scale")return!1}var b=this._cacheCanvas,_=this._limitCacheSize(this._getCacheCanvasDimensions()),C=i.minCacheSideLimit,w=_.width,k=_.height,z,N,X=_.zoomX,re=_.zoomY,F=w!==this.cacheWidth||k!==this.cacheHeight,K=this.zoomX!==X||this.zoomY!==re,T=F||K,J=0,ue=0,ie=!1;if(F){var ae=this._cacheCanvas.width,A=this._cacheCanvas.height,W=w>ae||k>A,R=(w<ae*.9||k<A*.9)&&ae>C&&A>C;ie=W||R,W&&!_.capped&&(w>C||k>C)&&(J=w*.1,ue=k*.1)}return this instanceof i.Text&&this.path&&(T=!0,ie=!0,J+=this.getHeightOfLine(0)*this.zoomX,ue+=this.getHeightOfLine(0)*this.zoomY),T?(ie?(b.width=Math.ceil(w+J),b.height=Math.ceil(k+ue)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,b.width,b.height)),z=_.x/2,N=_.y/2,this.cacheTranslationX=Math.round(b.width/2-z)+z,this.cacheTranslationY=Math.round(b.height/2-N)+N,this.cacheWidth=w,this.cacheHeight=k,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(X,re),this.zoomX=X,this.zoomY=re,!0):!1},setOptions:function(l){this._setOptions(l),this._initGradient(l.fill,"fill"),this._initGradient(l.stroke,"stroke"),this._initPattern(l.fill,"fill"),this._initPattern(l.stroke,"stroke")},transform:function(l){var g=this.group&&!this.group._transformDone||this.group&&this.canvas&&l===this.canvas.contextTop,v=this.calcTransformMatrix(!g);l.transform(v[0],v[1],v[2],v[3],v[4],v[5])},toObject:function(l){var g=i.Object.NUM_FRACTION_DIGITS,v={type:this.type,version:i.version,originX:this.originX,originY:this.originY,left:r(this.left,g),top:r(this.top,g),width:r(this.width,g),height:r(this.height,g),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:r(this.strokeWidth,g),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:r(this.strokeMiterLimit,g),scaleX:r(this.scaleX,g),scaleY:r(this.scaleY,g),angle:r(this.angle,g),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,g),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:r(this.skewX,g),skewY:r(this.skewY,g)};return this.clipPath&&!this.clipPath.excludeFromExport&&(v.clipPath=this.clipPath.toObject(l),v.clipPath.inverted=this.clipPath.inverted,v.clipPath.absolutePositioned=this.clipPath.absolutePositioned),i.util.populateWithProperties(this,v,l),this.includeDefaultValues||(v=this._removeDefaultValues(v)),v},toDatalessObject:function(l){return this.toObject(l)},_removeDefaultValues:function(l){var g=i.util.getKlass(l.type).prototype,v=g.stateProperties;return v.forEach(function(b){b==="left"||b==="top"||(l[b]===g[b]&&delete l[b],Array.isArray(l[b])&&Array.isArray(g[b])&&l[b].length===0&&g[b].length===0&&delete l[b])}),l},toString:function(){return"#<fabric."+o(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var l=i.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(l.scaleX),scaleY:Math.abs(l.scaleY)}},getTotalObjectScaling:function(){var l=this.getObjectScaling(),g=l.scaleX,v=l.scaleY;if(this.canvas){var b=this.canvas.getZoom(),_=this.canvas.getRetinaScaling();g*=b*_,v*=b*_}return{scaleX:g,scaleY:v}},getObjectOpacity:function(){var l=this.opacity;return this.group&&(l*=this.group.getObjectOpacity()),l},_set:function(l,g){var v=l==="scaleX"||l==="scaleY",b=this[l]!==g,_=!1;return v&&(g=this._constrainScale(g)),l==="scaleX"&&g<0?(this.flipX=!this.flipX,g*=-1):l==="scaleY"&&g<0?(this.flipY=!this.flipY,g*=-1):l==="shadow"&&g&&!(g instanceof i.Shadow)?g=new i.Shadow(g):l==="dirty"&&this.group&&this.group.set("dirty",g),this[l]=g,b&&(_=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(l)>-1?(this.dirty=!0,_&&this.group.set("dirty",!0)):_&&this.stateProperties.indexOf(l)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:i.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(l){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(l.save(),this._setupCompositeOperation(l),this.drawSelectionBackground(l),this.transform(l),this._setOpacity(l),this._setShadow(l,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(l)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(l),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),l.restore())},renderCache:function(l){l=l||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,l.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(l,g){if(l.save(),g.inverted?l.globalCompositeOperation="destination-out":l.globalCompositeOperation="destination-in",g.absolutePositioned){var v=i.util.invertTransform(this.calcTransformMatrix());l.transform(v[0],v[1],v[2],v[3],v[4],v[5])}g.transform(l),l.scale(1/g.zoomX,1/g.zoomY),l.drawImage(g._cacheCanvas,-g.cacheTranslationX,-g.cacheTranslationY),l.restore()},drawObject:function(l,g){var v=this.fill,b=this.stroke;g?(this.fill="black",this.stroke="",this._setClippingProperties(l)):this._renderBackground(l),this._render(l),this._drawClipPath(l,this.clipPath),this.fill=v,this.stroke=b},_drawClipPath:function(l,g){g&&(g.canvas=this.canvas,g.shouldCache(),g._transformDone=!0,g.renderCache({forClipping:!0}),this.drawClipPathOnCache(l,g))},drawCacheOnCanvas:function(l){l.scale(1/this.zoomX,1/this.zoomY),l.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(l){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!l&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!l){var g=this.cacheWidth/this.zoomX,v=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-g/2,-v/2,g,v)}return!0}return!1},_renderBackground:function(l){if(this.backgroundColor){var g=this._getNonTransformedDimensions();l.fillStyle=this.backgroundColor,l.fillRect(-g.x/2,-g.y/2,g.x,g.y),this._removeShadow(l)}},_setOpacity:function(l){this.group&&!this.group._transformDone?l.globalAlpha=this.getObjectOpacity():l.globalAlpha*=this.opacity},_setStrokeStyles:function(l,g){var v=g.stroke;v&&(l.lineWidth=g.strokeWidth,l.lineCap=g.strokeLineCap,l.lineDashOffset=g.strokeDashOffset,l.lineJoin=g.strokeLineJoin,l.miterLimit=g.strokeMiterLimit,v.toLive?v.gradientUnits==="percentage"||v.gradientTransform||v.patternTransform?this._applyPatternForTransformedGradient(l,v):(l.strokeStyle=v.toLive(l,this),this._applyPatternGradientTransform(l,v)):l.strokeStyle=g.stroke)},_setFillStyles:function(l,g){var v=g.fill;v&&(v.toLive?(l.fillStyle=v.toLive(l,this),this._applyPatternGradientTransform(l,g.fill)):l.fillStyle=v)},_setClippingProperties:function(l){l.globalAlpha=1,l.strokeStyle="transparent",l.fillStyle="#000000"},_setLineDash:function(l,g){!g||g.length===0||(1&g.length&&g.push.apply(g,g),l.setLineDash(g))},_renderControls:function(l,g){var v=this.getViewportTransform(),b=this.calcTransformMatrix(),_,C,w;g=g||{},C=typeof g.hasBorders<"u"?g.hasBorders:this.hasBorders,w=typeof g.hasControls<"u"?g.hasControls:this.hasControls,b=i.util.multiplyTransformMatrices(v,b),_=i.util.qrDecompose(b),l.save(),l.translate(_.translateX,_.translateY),l.lineWidth=1*this.borderScaleFactor,this.group||(l.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(_.angle-=180),l.rotate(n(this.group?_.angle:this.angle)),g.forActiveSelection||this.group?C&&this.drawBordersInGroup(l,_,g):C&&this.drawBorders(l,g),w&&this.drawControls(l,g),l.restore()},_setShadow:function(l){if(this.shadow){var g=this.shadow,v=this.canvas,b,_=v&&v.viewportTransform[0]||1,C=v&&v.viewportTransform[3]||1;g.nonScaling?b={scaleX:1,scaleY:1}:b=this.getObjectScaling(),v&&v._isRetinaScaling()&&(_*=i.devicePixelRatio,C*=i.devicePixelRatio),l.shadowColor=g.color,l.shadowBlur=g.blur*i.browserShadowBlurConstant*(_+C)*(b.scaleX+b.scaleY)/4,l.shadowOffsetX=g.offsetX*_*b.scaleX,l.shadowOffsetY=g.offsetY*C*b.scaleY}},_removeShadow:function(l){this.shadow&&(l.shadowColor="",l.shadowBlur=l.shadowOffsetX=l.shadowOffsetY=0)},_applyPatternGradientTransform:function(l,g){if(!g||!g.toLive)return{offsetX:0,offsetY:0};var v=g.gradientTransform||g.patternTransform,b=-this.width/2+g.offsetX||0,_=-this.height/2+g.offsetY||0;return g.gradientUnits==="percentage"?l.transform(this.width,0,0,this.height,b,_):l.transform(1,0,0,1,b,_),v&&l.transform(v[0],v[1],v[2],v[3],v[4],v[5]),{offsetX:b,offsetY:_}},_renderPaintInOrder:function(l){this.paintFirst==="stroke"?(this._renderStroke(l),this._renderFill(l)):(this._renderFill(l),this._renderStroke(l))},_render:function(){},_renderFill:function(l){this.fill&&(l.save(),this._setFillStyles(l,this),this.fillRule==="evenodd"?l.fill("evenodd"):l.fill(),l.restore())},_renderStroke:function(l){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(l),l.save(),this.strokeUniform&&this.group){var g=this.getObjectScaling();l.scale(1/g.scaleX,1/g.scaleY)}else this.strokeUniform&&l.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(l,this.strokeDashArray),this._setStrokeStyles(l,this),l.stroke(),l.restore()}},_applyPatternForTransformedGradient:function(l,g){var v=this._limitCacheSize(this._getCacheCanvasDimensions()),b=i.util.createCanvasElement(),_,C=this.canvas.getRetinaScaling(),w=v.x/this.scaleX/C,k=v.y/this.scaleY/C;b.width=Math.ceil(w),b.height=Math.ceil(k),_=b.getContext("2d"),_.beginPath(),_.moveTo(0,0),_.lineTo(w,0),_.lineTo(w,k),_.lineTo(0,k),_.closePath(),_.translate(w/2,k/2),_.scale(v.zoomX/this.scaleX/C,v.zoomY/this.scaleY/C),this._applyPatternGradientTransform(_,g),_.fillStyle=g.toLive(l),_.fill(),l.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),l.scale(C*this.scaleX/v.zoomX,C*this.scaleY/v.zoomY),l.strokeStyle=_.createPattern(b,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var l=i.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",l.scaleX),this.set("scaleY",l.scaleY),this.angle=l.angle,this.skewX=l.skewX,this.skewY=0}},_removeTransformMatrix:function(l){var g=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),g=i.util.transformPoint(g,this.transformMatrix)),this.transformMatrix=null,l&&(this.scaleX*=l.scaleX,this.scaleY*=l.scaleY,this.cropX=l.cropX,this.cropY=l.cropY,g.x+=l.offsetLeft,g.y+=l.offsetTop,this.width=l.width,this.height=l.height),this.setPositionByOrigin(g,"center","center")},clone:function(l,g){var v=this.toObject(g);this.constructor.fromObject?this.constructor.fromObject(v,l):i.Object._fromObject("Object",v,l)},cloneAsImage:function(l,g){var v=this.toCanvasElement(g);return l&&l(new i.Image(v)),this},toCanvasElement:function(l){l||(l={});var g=i.util,v=g.saveObjectTransform(this),b=this.group,_=this.shadow,C=Math.abs,w=(l.multiplier||1)*(l.enableRetinaScaling?i.devicePixelRatio:1);delete this.group,l.withoutTransform&&g.resetObjectTransform(this),l.withoutShadow&&(this.shadow=null);var k=i.util.createCanvasElement(),z=this.getBoundingRect(!0,!0),N=this.shadow,X,re={x:0,y:0},F,K,T;N&&(F=N.blur,N.nonScaling?X={scaleX:1,scaleY:1}:X=this.getObjectScaling(),re.x=2*Math.round(C(N.offsetX)+F)*C(X.scaleX),re.y=2*Math.round(C(N.offsetY)+F)*C(X.scaleY)),K=z.width+re.x,T=z.height+re.y,k.width=Math.ceil(K),k.height=Math.ceil(T);var J=new i.StaticCanvas(k,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});l.format==="jpeg"&&(J.backgroundColor="#fff"),this.setPositionByOrigin(new i.Point(J.width/2,J.height/2),"center","center");var ue=this.canvas;J.add(this);var ie=J.toCanvasElement(w||1,l);return this.shadow=_,this.set("canvas",ue),b&&(this.group=b),this.set(v).setCoords(),J._objects=[],J.dispose(),J=null,ie},toDataURL:function(l){return l||(l={}),i.util.toDataURL(this.toCanvasElement(l),l.format||"png",l.quality||1)},isType:function(l){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===l},complexity:function(){return 1},toJSON:function(l){return this.toObject(l)},rotate:function(l){var g=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return g&&this._setOriginToCenter(),this.set("angle",l),g&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(l,g){g=g||this.canvas.getPointer(l);var v=new i.Point(g.x,g.y),b=this._getLeftTopCoords();return this.angle&&(v=i.util.rotatePoint(v,b,n(-this.angle))),{x:v.x-b.x,y:v.y-b.y}},_setupCompositeOperation:function(l){this.globalCompositeOperation&&(l.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){i.runningAnimations&&i.runningAnimations.cancelByTarget(this)}}),i.util.createAccessors&&i.util.createAccessors(i.Object),a(i.Object.prototype,i.Observable),i.Object.NUM_FRACTION_DIGITS=2,i.Object.ENLIVEN_PROPS=["clipPath"],i.Object._fromObject=function(l,g,v,b){var _=i[l];g=u(g,!0),i.util.enlivenPatterns([g.fill,g.stroke],function(C){typeof C[0]<"u"&&(g.fill=C[0]),typeof C[1]<"u"&&(g.stroke=C[1]),i.util.enlivenObjectEnlivables(g,g,function(){var w=b?new _(g[b],g):new _(g);v&&v(w)})})},i.Object.__uid=0)}(t),function(){var h=e.util.degreesToRadians,i={left:-.5,center:0,right:.5},a={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(u,r,o,n,c){var p=u.x,l=u.y,g,v,b;return typeof r=="string"?r=i[r]:r-=.5,typeof n=="string"?n=i[n]:n-=.5,g=n-r,typeof o=="string"?o=a[o]:o-=.5,typeof c=="string"?c=a[c]:c-=.5,v=c-o,(g||v)&&(b=this._getTransformedDimensions(),p=u.x+g*b.x,l=u.y+v*b.y),new e.Point(p,l)},translateToCenterPoint:function(u,r,o){var n=this.translateToGivenOrigin(u,r,o,"center","center");return this.angle?e.util.rotatePoint(n,u,h(this.angle)):n},translateToOriginPoint:function(u,r,o){var n=this.translateToGivenOrigin(u,"center","center",r,o);return this.angle?e.util.rotatePoint(n,u,h(this.angle)):n},getCenterPoint:function(){var u=new e.Point(this.left,this.top);return this.translateToCenterPoint(u,this.originX,this.originY)},getPointByOrigin:function(u,r){var o=this.getCenterPoint();return this.translateToOriginPoint(o,u,r)},toLocalPoint:function(u,r,o){var n=this.getCenterPoint(),c,p;return typeof r<"u"&&typeof o<"u"?c=this.translateToGivenOrigin(n,"center","center",r,o):c=new e.Point(this.left,this.top),p=new e.Point(u.x,u.y),this.angle&&(p=e.util.rotatePoint(p,n,-h(this.angle))),p.subtractEquals(c)},setPositionByOrigin:function(u,r,o){var n=this.translateToCenterPoint(u,r,o),c=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",c.x),this.set("top",c.y)},adjustPosition:function(u){var r=h(this.angle),o=this.getScaledWidth(),n=e.util.cos(r)*o,c=e.util.sin(r)*o,p,l;typeof this.originX=="string"?p=i[this.originX]:p=this.originX-.5,typeof u=="string"?l=i[u]:l=u-.5,this.left+=n*(l-p),this.top+=c*(l-p),this.setCoords(),this.originX=u},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var u=this.getCenterPoint();this.originX="center",this.originY="center",this.left=u.x,this.top=u.y},_resetOrigin:function(){var u=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=u.x,this.top=u.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function h(o){return[new e.Point(o.tl.x,o.tl.y),new e.Point(o.tr.x,o.tr.y),new e.Point(o.br.x,o.br.y),new e.Point(o.bl.x,o.bl.y)]}var i=e.util,a=i.degreesToRadians,u=i.multiplyTransformMatrices,r=i.transformPoint;i.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(o,n){return n?o?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),o?this.aCoords:this.lineCoords)},getCoords:function(o,n){return h(this._getCoords(o,n))},intersectsWithRect:function(o,n,c,p){var l=this.getCoords(c,p),g=e.Intersection.intersectPolygonRectangle(l,o,n);return g.status==="Intersection"},intersectsWithObject:function(o,n,c){var p=e.Intersection.intersectPolygonPolygon(this.getCoords(n,c),o.getCoords(n,c));return p.status==="Intersection"||o.isContainedWithinObject(this,n,c)||this.isContainedWithinObject(o,n,c)},isContainedWithinObject:function(o,n,c){for(var p=this.getCoords(n,c),l=n?o.aCoords:o.lineCoords,g=0,v=o._getImageLines(l);g<4;g++)if(!o.containsPoint(p[g],v))return!1;return!0},isContainedWithinRect:function(o,n,c,p){var l=this.getBoundingRect(c,p);return l.left>=o.x&&l.left+l.width<=n.x&&l.top>=o.y&&l.top+l.height<=n.y},containsPoint:function(o,g,c,p){var l=this._getCoords(c,p),g=g||this._getImageLines(l),v=this._findCrossPoints(o,g);return v!==0&&v%2===1},isOnScreen:function(o){if(!this.canvas)return!1;var n=this.canvas.vptCoords.tl,c=this.canvas.vptCoords.br,p=this.getCoords(!0,o);return p.some(function(l){return l.x<=c.x&&l.x>=n.x&&l.y<=c.y&&l.y>=n.y})||this.intersectsWithRect(n,c,!0,o)?!0:this._containsCenterOfCanvas(n,c,o)},_containsCenterOfCanvas:function(o,n,c){var p={x:(o.x+n.x)/2,y:(o.y+n.y)/2};return!!this.containsPoint(p,null,!0,c)},isPartiallyOnScreen:function(o){if(!this.canvas)return!1;var n=this.canvas.vptCoords.tl,c=this.canvas.vptCoords.br;if(this.intersectsWithRect(n,c,!0,o))return!0;var p=this.getCoords(!0,o).every(function(l){return(l.x>=c.x||l.x<=n.x)&&(l.y>=c.y||l.y<=n.y)});return p&&this._containsCenterOfCanvas(n,c,o)},_getImageLines:function(o){var n={topline:{o:o.tl,d:o.tr},rightline:{o:o.tr,d:o.br},bottomline:{o:o.br,d:o.bl},leftline:{o:o.bl,d:o.tl}};return n},_findCrossPoints:function(o,n){var c,p,l,g,v,b=0,_;for(var C in n)if(_=n[C],!(_.o.y<o.y&&_.d.y<o.y)&&!(_.o.y>=o.y&&_.d.y>=o.y)&&(_.o.x===_.d.x&&_.o.x>=o.x?v=_.o.x:(c=0,p=(_.d.y-_.o.y)/(_.d.x-_.o.x),l=o.y-c*o.x,g=_.o.y-p*_.o.x,v=-(l-g)/(c-p)),v>=o.x&&(b+=1),b===2))break;return b},getBoundingRect:function(o,n){var c=this.getCoords(o,n);return i.makeBoundingBoxFromPoints(c)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(o){return Math.abs(o)<this.minScaleLimit?o<0?-this.minScaleLimit:this.minScaleLimit:o===0?1e-4:o},scale:function(o){return this._set("scaleX",o),this._set("scaleY",o),this.setCoords()},scaleToWidth:function(o,n){var c=this.getBoundingRect(n).width/this.getScaledWidth();return this.scale(o/this.width/c)},scaleToHeight:function(o,n){var c=this.getBoundingRect(n).height/this.getScaledHeight();return this.scale(o/this.height/c)},calcLineCoords:function(){var o=this.getViewportTransform(),n=this.padding,c=a(this.angle),p=i.cos(c),l=i.sin(c),g=p*n,v=l*n,b=g+v,_=g-v,C=this.calcACoords(),w={tl:r(C.tl,o),tr:r(C.tr,o),bl:r(C.bl,o),br:r(C.br,o)};return n&&(w.tl.x-=_,w.tl.y-=b,w.tr.x+=b,w.tr.y-=_,w.bl.x-=b,w.bl.y+=_,w.br.x+=_,w.br.y+=b),w},calcOCoords:function(){var o=this._calcRotateMatrix(),n=this._calcTranslateMatrix(),c=this.getViewportTransform(),p=u(c,n),l=u(p,o),l=u(l,[1/c[0],0,0,1/c[3],0,0]),g=this._calculateCurrentDimensions(),v={};return this.forEachControl(function(b,_,C){v[_]=b.positionHandler(g,l,C)}),v},calcACoords:function(){var o=this._calcRotateMatrix(),n=this._calcTranslateMatrix(),c=u(n,o),p=this._getTransformedDimensions(),l=p.x/2,g=p.y/2;return{tl:r({x:-l,y:-g},c),tr:r({x:l,y:-g},c),bl:r({x:-l,y:g},c),br:r({x:l,y:g},c)}},setCoords:function(o){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),o?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return i.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var o=this.getCenterPoint();return[1,0,0,1,o.x,o.y]},transformMatrixKey:function(o){var n="_",c="";return!o&&this.group&&(c=this.group.transformMatrixKey(o)+n),c+this.top+n+this.left+n+this.scaleX+n+this.scaleY+n+this.skewX+n+this.skewY+n+this.angle+n+this.originX+n+this.originY+n+this.width+n+this.height+n+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(o){var n=this.calcOwnMatrix();if(o||!this.group)return n;var c=this.transformMatrixKey(o),p=this.matrixCache||(this.matrixCache={});return p.key===c?p.value:(this.group&&(n=u(this.group.calcTransformMatrix(!1),n)),p.key=c,p.value=n,n)},calcOwnMatrix:function(){var o=this.transformMatrixKey(!0),n=this.ownMatrixCache||(this.ownMatrixCache={});if(n.key===o)return n.value;var c=this._calcTranslateMatrix(),p={angle:this.angle,translateX:c[4],translateY:c[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return n.key=o,n.value=i.composeMatrix(p),n.value},_getNonTransformedDimensions:function(){var o=this.strokeWidth,n=this.width+o,c=this.height+o;return{x:n,y:c}},_getTransformedDimensions:function(o,n){typeof o>"u"&&(o=this.skewX),typeof n>"u"&&(n=this.skewY);var c,p,l,g=o===0&&n===0;if(this.strokeUniform?(p=this.width,l=this.height):(c=this._getNonTransformedDimensions(),p=c.x,l=c.y),g)return this._finalizeDimensions(p*this.scaleX,l*this.scaleY);var v=i.sizeAfterTransform(p,l,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:o,skewY:n});return this._finalizeDimensions(v.x,v.y)},_finalizeDimensions:function(o,n){return this.strokeUniform?{x:o+this.strokeWidth,y:n+this.strokeWidth}:{x:o,y:n}},_calculateCurrentDimensions:function(){var o=this.getViewportTransform(),n=this._getTransformedDimensions(),c=r(n,o,!0);return c.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(h){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,h):this.canvas&&this.canvas.sendBackwards(this,h),this},bringForward:function(h){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,h):this.canvas&&this.canvas.bringForward(this,h),this},moveTo:function(h){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,h):this.canvas&&this.canvas.moveTo(this,h),this}}),function(){function h(a,u){if(u){if(u.toLive)return a+": url(#SVGID_"+u.id+"); ";var r=new e.Color(u),o=a+": "+r.toRgb()+"; ",n=r.getAlpha();return n!==1&&(o+=a+"-opacity: "+n.toString()+"; "),o}else return a+": none; "}var i=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(a){var u=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",o=this.strokeDashArray?this.strokeDashArray.join(" "):"none",n=this.strokeDashOffset?this.strokeDashOffset:"0",c=this.strokeLineCap?this.strokeLineCap:"butt",p=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",g=typeof this.opacity<"u"?this.opacity:"1",v=this.visible?"":" visibility: hidden;",b=a?"":this.getSvgFilter(),_=h("fill",this.fill),C=h("stroke",this.stroke);return[C,"stroke-width: ",r,"; ","stroke-dasharray: ",o,"; ","stroke-linecap: ",c,"; ","stroke-dashoffset: ",n,"; ","stroke-linejoin: ",p,"; ","stroke-miterlimit: ",l,"; ",_,"fill-rule: ",u,"; ","opacity: ",g,";",b,v].join("")},getSvgSpanStyles:function(a,u){var r="; ",n=a.fontFamily?"font-family: "+(a.fontFamily.indexOf("'")===-1&&a.fontFamily.indexOf('"')===-1?"'"+a.fontFamily+"'":a.fontFamily)+r:"",o=a.strokeWidth?"stroke-width: "+a.strokeWidth+r:"",n=n,c=a.fontSize?"font-size: "+a.fontSize+"px"+r:"",p=a.fontStyle?"font-style: "+a.fontStyle+r:"",l=a.fontWeight?"font-weight: "+a.fontWeight+r:"",g=a.fill?h("fill",a.fill):"",v=a.stroke?h("stroke",a.stroke):"",b=this.getSvgTextDecoration(a),_=a.deltaY?"baseline-shift: "+-a.deltaY+"; ":"";return b&&(b="text-decoration: "+b+r),[v,o,n,c,p,l,b,g,_,u?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(a){return["overline","underline","line-through"].filter(function(u){return a[u.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(a,u){var r=a?this.calcTransformMatrix():this.calcOwnMatrix(),o='transform="'+e.util.matrixToSVG(r);return o+(u||"")+'" '},_setSVGBg:function(a){if(this.backgroundColor){var u=e.Object.NUM_FRACTION_DIGITS;a.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',i(-this.width/2,u),'" y="',i(-this.height/2,u),'" width="',i(this.width,u),'" height="',i(this.height,u),`"></rect>
`)}},toSVG:function(a){return this._createBaseSVGMarkup(this._toSVG(a),{reviver:a})},toClipPathSVG:function(a){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(a),{reviver:a})},_createBaseClipPathSVGMarkup:function(a,u){u=u||{};var r=u.reviver,o=u.additionalTransform||"",n=[this.getSvgTransform(!0,o),this.getSvgCommons()].join(""),c=a.indexOf("COMMON_PARTS");return a[c]=n,r?r(a.join("")):a.join("")},_createBaseSVGMarkup:function(a,u){u=u||{};var r=u.noStyle,o=u.reviver,n=r?"":'style="'+this.getSvgStyles()+'" ',c=u.withShadow?'style="'+this.getSvgFilter()+'" ':"",p=this.clipPath,l=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",g=p&&p.absolutePositioned,v=this.stroke,b=this.fill,_=this.shadow,C,w=[],k,z=a.indexOf("COMMON_PARTS"),N=u.additionalTransform;return p&&(p.clipPathId="CLIPPATH_"+e.Object.__uid++,k='<clipPath id="'+p.clipPathId+`" >
`+p.toClipPathSVG(o)+`</clipPath>
`),g&&w.push("<g ",c,this.getSvgCommons(),` >
`),w.push("<g ",this.getSvgTransform(!1),g?"":c+this.getSvgCommons(),` >
`),C=[n,l,r?"":this.addPaintOrder()," ",N?'transform="'+N+'" ':""].join(""),a[z]=C,b&&b.toLive&&w.push(b.toSVG(this)),v&&v.toLive&&w.push(v.toSVG(this)),_&&w.push(_.toSVG(this)),p&&w.push(k),w.push(a.join("")),w.push(`</g>
`),g&&w.push(`</g>
`),o?o(w.join("")):w.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var h=e.util.object.extend,i="stateProperties";function a(r,o,n){var c={},p=!0;n.forEach(function(l){c[l]=r[l]}),h(r[o],c,p)}function u(r,o,n){if(r===o)return!0;if(Array.isArray(r)){if(!Array.isArray(o)||r.length!==o.length)return!1;for(var c=0,p=r.length;c<p;c++)if(!u(r[c],o[c]))return!1;return!0}else if(r&&typeof r=="object"){var l=Object.keys(r),g;if(!o||typeof o!="object"||!n&&l.length!==Object.keys(o).length)return!1;for(var c=0,p=l.length;c<p;c++)if(g=l[c],!(g==="canvas"||g==="group")&&!u(r[g],o[g]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(r){r=r||i;var o="_"+r;return Object.keys(this[o]).length<this[r].length?!0:!u(this[o],this,!0)},saveState:function(r){var o=r&&r.propertySet||i,n="_"+o;return this[n]?(a(this,n,this[o]),r&&r.stateProperties&&a(this,n,r.stateProperties),this):this.setupState(r)},setupState:function(r){r=r||{};var o=r.propertySet||i;return r.propertySet=o,this["_"+o]={},this.saveState(r),this}})}(),function(){var h=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(i,a){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var u=i.x,r=i.y,o,n,c=Object.keys(this.oCoords),p=c.length-1,l;for(this.__corner=0;p>=0;p--)if(l=c[p],!!this.isControlVisible(l)&&(n=this._getImageLines(a?this.oCoords[l].touchCorner:this.oCoords[l].corner),o=this._findCrossPoints({x:u,y:r},n),o!==0&&o%2===1))return this.__corner=l,l;return!1},forEachControl:function(i){for(var a in this.controls)i(this.controls[a],a,this)},_setCornerCoords:function(){var i=this.oCoords;for(var a in i){var u=this.controls[a];i[a].corner=u.calcCornerCoords(this.angle,this.cornerSize,i[a].x,i[a].y,!1),i[a].touchCorner=u.calcCornerCoords(this.angle,this.touchCornerSize,i[a].x,i[a].y,!0)}},drawSelectionBackground:function(i){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;i.save();var a=this.getCenterPoint(),u=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return i.translate(a.x,a.y),i.scale(1/r[0],1/r[3]),i.rotate(h(this.angle)),i.fillStyle=this.selectionBackgroundColor,i.fillRect(-u.x/2,-u.y/2,u.x,u.y),i.restore(),this},drawBorders:function(i,a){a=a||{};var u=this._calculateCurrentDimensions(),r=this.borderScaleFactor,o=u.x+r,n=u.y+r,c=typeof a.hasControls<"u"?a.hasControls:this.hasControls,p=!1;return i.save(),i.strokeStyle=a.borderColor||this.borderColor,this._setLineDash(i,a.borderDashArray||this.borderDashArray),i.strokeRect(-o/2,-n/2,o,n),c&&(i.beginPath(),this.forEachControl(function(l,g,v){l.withConnection&&l.getVisibility(v,g)&&(p=!0,i.moveTo(l.x*o,l.y*n),i.lineTo(l.x*o+l.offsetX,l.y*n+l.offsetY))}),p&&i.stroke()),i.restore(),this},drawBordersInGroup:function(i,a,u){u=u||{};var r=e.util.sizeAfterTransform(this.width,this.height,a),o=this.strokeWidth,n=this.strokeUniform,c=this.borderScaleFactor,p=r.x+o*(n?this.canvas.getZoom():a.scaleX)+c,l=r.y+o*(n?this.canvas.getZoom():a.scaleY)+c;return i.save(),this._setLineDash(i,u.borderDashArray||this.borderDashArray),i.strokeStyle=u.borderColor||this.borderColor,i.strokeRect(-p/2,-l/2,p,l),i.restore(),this},drawControls:function(i,a){a=a||{},i.save();var u=1,r,o;return this.canvas&&(u=this.canvas.getRetinaScaling()),i.setTransform(u,0,0,u,0,0),i.strokeStyle=i.fillStyle=a.cornerColor||this.cornerColor,this.transparentCorners||(i.strokeStyle=a.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(i,a.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(r=this.group.calcTransformMatrix()),this.forEachControl(function(n,c,p){o=p.oCoords[c],n.getVisibility(p,c)&&(r&&(o=e.util.transformPoint(o,r)),n.render(i,o.x,o.y,a,p))}),i.restore(),this},isControlVisible:function(i){return this.controls[i]&&this.controls[i].getVisibility(this,i)},setControlVisible:function(i,a){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[i]=a,this},setControlsVisibility:function(i){i||(i={});for(var a in i)this.setControlVisible(a,i[a]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(h,i){i=i||{};var a=function(){},u=i.onComplete||a,r=i.onChange||a,o=this;return e.util.animate({target:this,startValue:h.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(n){h.set("left",n),o.requestRenderAll(),r()},onComplete:function(){h.setCoords(),u()}})},fxCenterObjectV:function(h,i){i=i||{};var a=function(){},u=i.onComplete||a,r=i.onChange||a,o=this;return e.util.animate({target:this,startValue:h.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(n){h.set("top",n),o.requestRenderAll(),r()},onComplete:function(){h.setCoords(),u()}})},fxRemove:function(h,i){i=i||{};var a=function(){},u=i.onComplete||a,r=i.onChange||a,o=this;return e.util.animate({target:this,startValue:h.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(n){h.set("opacity",n),o.requestRenderAll(),r()},onComplete:function(){o.remove(h),u()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var h=[],i,a,u=[];for(i in arguments[0])h.push(i);for(var r=0,o=h.length;r<o;r++)i=h[r],a=r!==o-1,u.push(this._animate(i,arguments[0][i],arguments[1],a));return u}else return this._animate.apply(this,arguments)},_animate:function(h,i,a,u){var r=this,o;i=i.toString(),a?a=e.util.object.clone(a):a={},~h.indexOf(".")&&(o=h.split("."));var n=r.colorProperties.indexOf(h)>-1||o&&r.colorProperties.indexOf(o[1])>-1,c=o?this.get(o[0])[o[1]]:this.get(h);"from"in a||(a.from=c),n||(~i.indexOf("=")?i=c+parseFloat(i.replace("=","")):i=parseFloat(i));var p={target:this,startValue:a.from,endValue:i,byValue:a.by,easing:a.easing,duration:a.duration,abort:a.abort&&function(l,g,v){return a.abort.call(r,l,g,v)},onChange:function(l,g,v){o?r[o[0]][o[1]]=l:r.set(h,l),!u&&a.onChange&&a.onChange(l,g,v)},onComplete:function(l,g,v){u||(r.setCoords(),a.onComplete&&a.onComplete(l,g,v))}};return n?e.util.animateColor(p.startValue,p.endValue,p.duration,p):e.util.animate(p)}}),function(h){var i=h.fabric||(h.fabric={}),a=i.util.object.extend,u=i.util.object.clone,r={x1:1,x2:1,y1:1,y2:1};if(i.Line){i.warn("fabric.Line is already defined");return}i.Line=i.util.createClass(i.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:i.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(n,c){n||(n=[0,0,0,0]),this.callSuper("initialize",c),this.set("x1",n[0]),this.set("y1",n[1]),this.set("x2",n[2]),this.set("y2",n[3]),this._setWidthHeight(c)},_setWidthHeight:function(n){n||(n={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in n?n.left:this._getLeftToOriginX(),this.top="top"in n?n.top:this._getTopToOriginY()},_set:function(n,c){return this.callSuper("_set",n,c),typeof r[n]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:o({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:o({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(n){n.beginPath();var c=this.calcLinePoints();n.moveTo(c.x1,c.y1),n.lineTo(c.x2,c.y2),n.lineWidth=this.strokeWidth;var p=n.strokeStyle;n.strokeStyle=this.stroke||n.fillStyle,this.stroke&&this._renderStroke(n),n.strokeStyle=p},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(n){return a(this.callSuper("toObject",n),this.calcLinePoints())},_getNonTransformedDimensions:function(){var n=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(n.y-=this.strokeWidth),this.height===0&&(n.x-=this.strokeWidth)),n},calcLinePoints:function(){var n=this.x1<=this.x2?-1:1,c=this.y1<=this.y2?-1:1,p=n*this.width*.5,l=c*this.height*.5,g=n*this.width*-.5,v=c*this.height*-.5;return{x1:p,x2:g,y1:l,y2:v}},_toSVG:function(){var n=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',n.x1,'" y1="',n.y1,'" x2="',n.x2,'" y2="',n.y2,`" />
`]}}),i.Line.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),i.Line.fromElement=function(n,c,p){p=p||{};var l=i.parseAttributes(n,i.Line.ATTRIBUTE_NAMES),g=[l.x1||0,l.y1||0,l.x2||0,l.y2||0];c(new i.Line(g,a(l,p)))},i.Line.fromObject=function(n,c){function p(g){delete g.points,c&&c(g)}var l=u(n,!0);l.points=[n.x1,n.y1,n.x2,n.y2],i.Object._fromObject("Line",l,p,"points")};function o(n,c){var p=n.origin,l=n.axis1,g=n.axis2,v=n.dimension,b=c.nearest,_=c.center,C=c.farthest;return function(){switch(this.get(p)){case b:return Math.min(this.get(l),this.get(g));case _:return Math.min(this.get(l),this.get(g))+.5*this.get(v);case C:return Math.max(this.get(l),this.get(g))}}}}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.util.degreesToRadians;if(i.Circle){i.warn("fabric.Circle is already defined.");return}i.Circle=i.util.createClass(i.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:i.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(r,o){return this.callSuper("_set",r,o),r==="radius"&&this.setRadius(o),this},toObject:function(r){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(r))},_toSVG:function(){var r,o=0,n=0,c=(this.endAngle-this.startAngle)%360;if(c===0)r=["<circle ","COMMON_PARTS",'cx="'+o+'" cy="'+n+'" ','r="',this.radius,`" />
`];else{var p=a(this.startAngle),l=a(this.endAngle),g=this.radius,v=i.util.cos(p)*g,b=i.util.sin(p)*g,_=i.util.cos(l)*g,C=i.util.sin(l)*g,w=c>180?"1":"0";r=['<path d="M '+v+" "+b," A "+g+" "+g," 0 ",+w+" 1"," "+_+" "+C,'" ',"COMMON_PARTS",` />
`]}return r},_render:function(r){r.beginPath(),r.arc(0,0,this.radius,a(this.startAngle),a(this.endAngle),!1),this._renderPaintInOrder(r)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(r){return this.radius=r,this.set("width",r*2).set("height",r*2)}}),i.Circle.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),i.Circle.fromElement=function(r,o){var n=i.parseAttributes(r,i.Circle.ATTRIBUTE_NAMES);if(!u(n))throw new Error("value of `r` attribute is required and can not be negative");n.left=(n.left||0)-n.radius,n.top=(n.top||0)-n.radius,o(new i.Circle(n))};function u(r){return"radius"in r&&r.radius>=0}i.Circle.fromObject=function(r,o){i.Object._fromObject("Circle",r,o)}}(t),function(h){var i=h.fabric||(h.fabric={});if(i.Triangle){i.warn("fabric.Triangle is already defined");return}i.Triangle=i.util.createClass(i.Object,{type:"triangle",width:100,height:100,_render:function(a){var u=this.width/2,r=this.height/2;a.beginPath(),a.moveTo(-u,r),a.lineTo(0,-r),a.lineTo(u,r),a.closePath(),this._renderPaintInOrder(a)},_toSVG:function(){var a=this.width/2,u=this.height/2,r=[-a+" "+u,"0 "+-u,a+" "+u].join(",");return["<polygon ","COMMON_PARTS",'points="',r,'" />']}}),i.Triangle.fromObject=function(a,u){return i.Object._fromObject("Triangle",a,u)}}(t),function(h){var i=h.fabric||(h.fabric={}),a=Math.PI*2;if(i.Ellipse){i.warn("fabric.Ellipse is already defined.");return}i.Ellipse=i.util.createClass(i.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this.set("rx",u&&u.rx||0),this.set("ry",u&&u.ry||0)},_set:function(u,r){switch(this.callSuper("_set",u,r),u){case"rx":this.rx=r,this.set("width",r*2);break;case"ry":this.ry=r,this.set("height",r*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(u){u.beginPath(),u.save(),u.transform(1,0,0,this.ry/this.rx,0,0),u.arc(0,0,this.rx,0,a,!1),u.restore(),this._renderPaintInOrder(u)}}),i.Ellipse.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),i.Ellipse.fromElement=function(u,r){var o=i.parseAttributes(u,i.Ellipse.ATTRIBUTE_NAMES);o.left=(o.left||0)-o.rx,o.top=(o.top||0)-o.ry,r(new i.Ellipse(o))},i.Ellipse.fromObject=function(u,r){i.Object._fromObject("Ellipse",u,r)}}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.util.object.extend;if(i.Rect){i.warn("fabric.Rect is already defined");return}i.Rect=i.util.createClass(i.Object,{stateProperties:i.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(u){var r=this.rx?Math.min(this.rx,this.width/2):0,o=this.ry?Math.min(this.ry,this.height/2):0,n=this.width,c=this.height,p=-this.width/2,l=-this.height/2,g=r!==0||o!==0,v=1-.5522847498;u.beginPath(),u.moveTo(p+r,l),u.lineTo(p+n-r,l),g&&u.bezierCurveTo(p+n-v*r,l,p+n,l+v*o,p+n,l+o),u.lineTo(p+n,l+c-o),g&&u.bezierCurveTo(p+n,l+c-v*o,p+n-v*r,l+c,p+n-r,l+c),u.lineTo(p+r,l+c),g&&u.bezierCurveTo(p+v*r,l+c,p,l+c-v*o,p,l+c-o),u.lineTo(p,l+o),g&&u.bezierCurveTo(p,l+v*o,p+v*r,l,p+r,l),u.closePath(),this._renderPaintInOrder(u)},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){var u=-this.width/2,r=-this.height/2;return["<rect ","COMMON_PARTS",'x="',u,'" y="',r,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),i.Rect.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),i.Rect.fromElement=function(u,r,o){if(!u)return r(null);o=o||{};var n=i.parseAttributes(u,i.Rect.ATTRIBUTE_NAMES);n.left=n.left||0,n.top=n.top||0,n.height=n.height||0,n.width=n.width||0;var c=new i.Rect(a(o?i.util.object.clone(o):{},n));c.visible=c.visible&&c.width>0&&c.height>0,r(c)},i.Rect.fromObject=function(u,r){return i.Object._fromObject("Rect",u,r)}}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.util.object.extend,u=i.util.array.min,r=i.util.array.max,o=i.util.toFixed,n=i.util.projectStrokeOnPoints;if(i.Polyline){i.warn("fabric.Polyline is already defined");return}i.Polyline=i.util.createClass(i.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:i.Object.prototype.cacheProperties.concat("points"),initialize:function(c,p){p=p||{},this.points=c||[],this.callSuper("initialize",p),this._setPositionDimensions(p)},_projectStrokeOnPoints:function(){return n(this.points,this,!0)},_setPositionDimensions:function(c){var p=this._calcDimensions(c),l,g=this.exactBoundingBox?this.strokeWidth:0;this.width=p.width-g,this.height=p.height-g,c.fromSVG||(l=this.translateToGivenOrigin({x:p.left-this.strokeWidth/2+g/2,y:p.top-this.strokeWidth/2+g/2},"left","top",this.originX,this.originY)),typeof c.left>"u"&&(this.left=c.fromSVG?p.left:l.x),typeof c.top>"u"&&(this.top=c.fromSVG?p.top:l.y),this.pathOffset={x:p.left+this.width/2+g/2,y:p.top+this.height/2+g/2}},_calcDimensions:function(){var c=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,p=u(c,"x")||0,l=u(c,"y")||0,g=r(c,"x")||0,v=r(c,"y")||0,b=g-p,_=v-l;return{left:p,top:l,width:b,height:_}},toObject:function(c){return a(this.callSuper("toObject",c),{points:this.points.concat()})},_toSVG:function(){for(var c=[],p=this.pathOffset.x,l=this.pathOffset.y,g=i.Object.NUM_FRACTION_DIGITS,v=0,b=this.points.length;v<b;v++)c.push(o(this.points[v].x-p,g),",",o(this.points[v].y-l,g)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',c.join(""),`" />
`]},commonRender:function(c){var p,l=this.points.length,g=this.pathOffset.x,v=this.pathOffset.y;if(!l||isNaN(this.points[l-1].y))return!1;c.beginPath(),c.moveTo(this.points[0].x-g,this.points[0].y-v);for(var b=0;b<l;b++)p=this.points[b],c.lineTo(p.x-g,p.y-v);return!0},_render:function(c){this.commonRender(c)&&this._renderPaintInOrder(c)},complexity:function(){return this.get("points").length}}),i.Polyline.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polyline.fromElementGenerator=function(c){return function(p,l,g){if(!p)return l(null);g||(g={});var v=i.parsePointsAttribute(p.getAttribute("points")),b=i.parseAttributes(p,i[c].ATTRIBUTE_NAMES);b.fromSVG=!0,l(new i[c](v,a(b,g)))}},i.Polyline.fromElement=i.Polyline.fromElementGenerator("Polyline"),i.Polyline.fromObject=function(c,p){return i.Object._fromObject("Polyline",c,p,"points")}}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.util.projectStrokeOnPoints;if(i.Polygon){i.warn("fabric.Polygon is already defined");return}i.Polygon=i.util.createClass(i.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return a(this.points,this)},_render:function(u){this.commonRender(u)&&(u.closePath(),this._renderPaintInOrder(u))}}),i.Polygon.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polygon.fromElement=i.Polyline.fromElementGenerator("Polygon"),i.Polygon.fromObject=function(u,r){i.Object._fromObject("Polygon",u,r,"points")}}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.util.array.min,u=i.util.array.max,r=i.util.object.extend,o=i.util.object.clone,n=i.util.toFixed;if(i.Path){i.warn("fabric.Path is already defined");return}i.Path=i.util.createClass(i.Object,{type:"path",path:null,cacheProperties:i.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:i.Object.prototype.stateProperties.concat("path"),initialize:function(c,p){p=o(p||{}),delete p.path,this.callSuper("initialize",p),this._setPath(c||[],p)},_setPath:function(c,p){this.path=i.util.makePathSimpler(Array.isArray(c)?c:i.util.parsePath(c)),i.Polyline.prototype._setPositionDimensions.call(this,p||{})},_renderPathCommands:function(c){var p,l=0,g=0,v=0,b=0,_=0,C=0,w=-this.pathOffset.x,k=-this.pathOffset.y;c.beginPath();for(var z=0,N=this.path.length;z<N;++z)switch(p=this.path[z],p[0]){case"L":v=p[1],b=p[2],c.lineTo(v+w,b+k);break;case"M":v=p[1],b=p[2],l=v,g=b,c.moveTo(v+w,b+k);break;case"C":v=p[5],b=p[6],_=p[3],C=p[4],c.bezierCurveTo(p[1]+w,p[2]+k,_+w,C+k,v+w,b+k);break;case"Q":c.quadraticCurveTo(p[1]+w,p[2]+k,p[3]+w,p[4]+k),v=p[3],b=p[4],_=p[1],C=p[2];break;case"z":case"Z":v=l,b=g,c.closePath();break}},_render:function(c){this._renderPathCommands(c),this._renderPaintInOrder(c)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(c){return r(this.callSuper("toObject",c),{path:this.path.map(function(p){return p.slice()})})},toDatalessObject:function(c){var p=this.toObject(["sourcePath"].concat(c));return p.sourcePath&&delete p.path,p},_toSVG:function(){var c=i.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',c,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var c=i.Object.NUM_FRACTION_DIGITS;return" translate("+n(-this.pathOffset.x,c)+", "+n(-this.pathOffset.y,c)+")"},toClipPathSVG:function(c){var p=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:c,additionalTransform:p})},toSVG:function(c){var p=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,additionalTransform:p})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var c=[],p=[],l,g=0,v=0,b=0,_=0,C,w=0,k=this.path.length;w<k;++w){switch(l=this.path[w],l[0]){case"L":b=l[1],_=l[2],C=[];break;case"M":b=l[1],_=l[2],g=b,v=_,C=[];break;case"C":C=i.util.getBoundsOfCurve(b,_,l[1],l[2],l[3],l[4],l[5],l[6]),b=l[5],_=l[6];break;case"Q":C=i.util.getBoundsOfCurve(b,_,l[1],l[2],l[1],l[2],l[3],l[4]),b=l[3],_=l[4];break;case"z":case"Z":b=g,_=v;break}C.forEach(function(T){c.push(T.x),p.push(T.y)}),c.push(b),p.push(_)}var z=a(c)||0,N=a(p)||0,X=u(c)||0,re=u(p)||0,F=X-z,K=re-N;return{left:z,top:N,width:F,height:K}}}),i.Path.fromObject=function(c,p){if(typeof c.sourcePath=="string"){var l=c.sourcePath;i.loadSVGFromURL(l,function(g){var v=g[0];v.setOptions(c),c.clipPath?i.util.enlivenObjects([c.clipPath],function(b){v.clipPath=b[0],p&&p(v)}):p&&p(v)})}else i.Object._fromObject("Path",c,p,"path")},i.Path.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(["d"]),i.Path.fromElement=function(c,p,l){var g=i.parseAttributes(c,i.Path.ATTRIBUTE_NAMES);g.fromSVG=!0,p(new i.Path(g.d,r(g,l)))}}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.util.array.min,u=i.util.array.max;i.Group||(i.Group=i.util.createClass(i.Object,i.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(r,o,n){o=o||{},this._objects=[],n&&this.callSuper("initialize",o),this._objects=r||[];for(var c=this._objects.length;c--;)this._objects[c].group=this;if(n)this._updateObjectsACoords();else{var p=o&&o.centerPoint;o.originX!==void 0&&(this.originX=o.originX),o.originY!==void 0&&(this.originY=o.originY),p||this._calcBounds(),this._updateObjectsCoords(p),delete o.centerPoint,this.callSuper("initialize",o)}this.setCoords()},_updateObjectsACoords:function(){for(var r=!0,o=this._objects.length;o--;)this._objects[o].setCoords(r)},_updateObjectsCoords:function(o){for(var o=o||this.getCenterPoint(),n=this._objects.length;n--;)this._updateObjectCoords(this._objects[n],o)},_updateObjectCoords:function(r,o){var n=r.left,c=r.top,p=!0;r.set({left:n-o.x,top:c-o.y}),r.group=this,r.setCoords(p)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(r){var o=!!this.group;return this._restoreObjectsState(),i.util.resetObjectTransform(this),r&&(o&&i.util.removeTransformFromObject(r,this.group.calcTransformMatrix()),this._objects.push(r),r.group=this,r._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,o?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(r){return this._restoreObjectsState(),i.util.resetObjectTransform(this),this.remove(r),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(r){this.dirty=!0,r.group=this,r._set("canvas",this.canvas)},_onObjectRemoved:function(r){this.dirty=!0,delete r.group},_set:function(r,o){var n=this._objects.length;if(this.useSetOnGroup)for(;n--;)this._objects[n].setOnGroup(r,o);if(r==="canvas")for(;n--;)this._objects[n]._set(r,o);i.Object.prototype._set.call(this,r,o)},toObject:function(r){var o=this.includeDefaultValues,n=this._objects.filter(function(p){return!p.excludeFromExport}).map(function(p){var l=p.includeDefaultValues;p.includeDefaultValues=o;var g=p.toObject(r);return p.includeDefaultValues=l,g}),c=i.Object.prototype.toObject.call(this,r);return c.objects=n,c},toDatalessObject:function(r){var o,n=this.sourcePath;if(n)o=n;else{var c=this.includeDefaultValues;o=this._objects.map(function(l){var g=l.includeDefaultValues;l.includeDefaultValues=c;var v=l.toDatalessObject(r);return l.includeDefaultValues=g,v})}var p=i.Object.prototype.toDatalessObject.call(this,r);return p.objects=o,p},render:function(r){this._transformDone=!0,this.callSuper("render",r),this._transformDone=!1},shouldCache:function(){var r=i.Object.prototype.shouldCache.call(this);if(r){for(var o=0,n=this._objects.length;o<n;o++)if(this._objects[o].willDrawShadow())return this.ownCaching=!1,!1}return r},willDrawShadow:function(){if(i.Object.prototype.willDrawShadow.call(this))return!0;for(var r=0,o=this._objects.length;r<o;r++)if(this._objects[r].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(r){for(var o=0,n=this._objects.length;o<n;o++)this._objects[o].render(r);this._drawClipPath(r,this.clipPath)},isCacheDirty:function(r){if(this.callSuper("isCacheDirty",r))return!0;if(!this.statefullCache)return!1;for(var o=0,n=this._objects.length;o<n;o++)if(this._objects[o].isCacheDirty(!0)){if(this._cacheCanvas){var c=this.cacheWidth/this.zoomX,p=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-c/2,-p/2,c,p)}return!0}return!1},_restoreObjectsState:function(){var r=this.calcOwnMatrix();return this._objects.forEach(function(o){i.util.addTransformToObject(o,r),delete o.group,o.setCoords()}),this},destroy:function(){return this._objects.forEach(function(r){r.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(r){r.dispose&&r.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var r=this._objects,o=this.canvas;this._objects=[];var n=this.toObject();delete n.objects;var c=new i.ActiveSelection([]);return c.set(n),c.type="activeSelection",o.remove(this),r.forEach(function(p){p.group=c,p.dirty=!0,o.add(p)}),c.canvas=o,c._objects=r,o._activeObject=c,c.setCoords(),c}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var r=!0;return this.forEachObject(function(o){o.setCoords(r)}),this},_calcBounds:function(r){for(var o=[],n=[],c,p,l,g=["tr","br","bl","tl"],v=0,b=this._objects.length,_,C=g.length;v<b;++v){for(c=this._objects[v],l=c.calcACoords(),_=0;_<C;_++)p=g[_],o.push(l[p].x),n.push(l[p].y);c.aCoords=l}this._getBounds(o,n,r)},_getBounds:function(r,o,n){var c=new i.Point(a(r),a(o)),p=new i.Point(u(r),u(o)),l=c.y||0,g=c.x||0,v=p.x-c.x||0,b=p.y-c.y||0;this.width=v,this.height=b,n||this.setPositionByOrigin({x:g,y:l},"left","top")},_toSVG:function(r){for(var o=["<g ","COMMON_PARTS",` >
`],n=0,c=this._objects.length;n<c;n++)o.push("		",this._objects[n].toSVG(r));return o.push(`</g>
`),o},getSvgStyles:function(){var r=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",o=this.visible?"":" visibility: hidden;";return[r,this.getSvgFilter(),o].join("")},toClipPathSVG:function(r){for(var o=[],n=0,c=this._objects.length;n<c;n++)o.push("	",this._objects[n].toClipPathSVG(r));return this._createBaseClipPathSVGMarkup(o,{reviver:r})}}),i.Group.fromObject=function(r,o){var n=r.objects,c=i.util.object.clone(r,!0);if(delete c.objects,typeof n=="string"){i.loadSVGFromURL(n,function(p){var l=i.util.groupSVGElements(p,r,n),g=c.clipPath;delete c.clipPath,l.set(c),g?i.util.enlivenObjects([g],function(v){l.clipPath=v[0],o&&o(l)}):o&&o(l)});return}i.util.enlivenObjects(n,function(p){i.util.enlivenObjectEnlivables(r,c,function(){o&&o(new i.Group(p,c,!0))})})})}(t),function(h){var i=h.fabric||(h.fabric={});i.ActiveSelection||(i.ActiveSelection=i.util.createClass(i.Group,{type:"activeSelection",initialize:function(a,u){u=u||{},this._objects=a||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;u.originX&&(this.originX=u.originX),u.originY&&(this.originY=u.originY),this._calcBounds(),this._updateObjectsCoords(),i.Object.prototype.initialize.call(this,u),this.setCoords()},toGroup:function(){var a=this._objects.concat();this._objects=[];var u=i.Object.prototype.toObject.call(this),r=new i.Group([]);if(delete u.type,r.set(u),a.forEach(function(n){n.canvas.remove(n),n.group=r}),r._objects=a,!this.canvas)return r;var o=this.canvas;return o.add(r),o._activeObject=r,r.setCoords(),r},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(a,u,r){a.save(),a.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,r=r||{},typeof r.hasControls>"u"&&(r.hasControls=!1),r.forActiveSelection=!0;for(var o=0,n=this._objects.length;o<n;o++)this._objects[o]._renderControls(a,r);this.callSuper("_renderControls",a,u),a.restore()}}),i.ActiveSelection.fromObject=function(a,u){i.util.enlivenObjects(a.objects,function(r){delete a.objects,u&&u(new i.ActiveSelection(r,a,!0))})})}(t),function(h){var i=e.util.object.extend;if(h.fabric||(h.fabric={}),h.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(a,u){u||(u={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",u),this._initElement(a,u)},getElement:function(){return this._element||{}},setElement:function(a,u){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=a,this._originalElement=a,this._initConfig(u),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(a){var u=e.filterBackend;u&&u.evictCachesForKey&&u.evictCachesForKey(a)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(a){e.util.cleanUpJsdomNode(this[a]),this[a]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var a=this.getElement();return{width:a.naturalWidth||a.width,height:a.naturalHeight||a.height}},_stroke:function(a){if(!(!this.stroke||this.strokeWidth===0)){var u=this.width/2,r=this.height/2;a.beginPath(),a.moveTo(-u,-r),a.lineTo(u,-r),a.lineTo(u,r),a.lineTo(-u,r),a.lineTo(-u,-r),a.closePath()}},toObject:function(a){var u=[];this.filters.forEach(function(o){o&&u.push(o.toObject())});var r=i(this.callSuper("toObject",["cropX","cropY"].concat(a)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:u});return this.resizeFilter&&(r.resizeFilter=this.resizeFilter.toObject()),r},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var a=[],u=[],r,o=this._element,n=-this.width/2,c=-this.height/2,p="",l="";if(!o)return[];if(this.hasCrop()){var g=e.Object.__uid++;a.push('<clipPath id="imageCrop_'+g+`">
`,'	<rect x="'+n+'" y="'+c+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),p=' clip-path="url(#imageCrop_'+g+')" '}if(this.imageSmoothing||(l='" image-rendering="optimizeSpeed'),u.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',n-this.cropX,'" y="',c-this.cropY,'" width="',o.width||o.naturalWidth,'" height="',o.height||o.height,l,'"',p,`></image>
`),this.stroke||this.strokeDashArray){var v=this.fill;this.fill=null,r=["	<rect ",'x="',n,'" y="',c,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=v}return this.paintFirst!=="fill"?a=a.concat(r,u):a=a.concat(u,r),a},getSrc:function(a){var u=a?this._element:this._originalElement;return u?u.toDataURL?u.toDataURL():this.srcFromAttribute?u.getAttribute("src"):u.src:this.src||""},setSrc:function(a,u,r){return e.util.loadImage(a,function(o,n){this.setElement(o,r),this._setWidthHeight(),u&&u(this,n)},this,r&&r.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var a=this.resizeFilter,u=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),o=r.scaleX,n=r.scaleY,c=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!a||o>u&&n>u){this._element=c,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=o,this._lastScaleY=n;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var p=e.util.createCanvasElement(),l=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,g=c.width,v=c.height;p.width=g,p.height=v,this._element=p,this._lastScaleX=a.scaleX=o,this._lastScaleY=a.scaleY=n,e.filterBackend.applyFilters([a],c,g,v,this._element,l),this._filterScalingX=p.width/this._originalElement.width,this._filterScalingY=p.height/this._originalElement.height},applyFilters:function(a){if(a=a||this.filters||[],a=a.filter(function(c){return c&&!c.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),a.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var u=this._originalElement,r=u.naturalWidth||u.width,o=u.naturalHeight||u.height;if(this._element===this._originalElement){var n=e.util.createCanvasElement();n.width=r,n.height=o,this._element=n,this._filteredEl=n}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,o),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(a,this._originalElement,r,o,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(a){e.util.setImageSmoothing(a,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(a),this._renderPaintInOrder(a)},drawCacheOnCanvas:function(a){e.util.setImageSmoothing(a,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,a)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(a){var u=this._element;if(u){var r=this._filterScalingX,o=this._filterScalingY,n=this.width,c=this.height,p=Math.min,l=Math.max,g=l(this.cropX,0),v=l(this.cropY,0),b=u.naturalWidth||u.width,_=u.naturalHeight||u.height,C=g*r,w=v*o,k=p(n*r,b-C),z=p(c*o,_-w),N=-n/2,X=-c/2,re=p(n,b/r-g),F=p(c,_/o-v);u&&a.drawImage(u,C,w,k,z,N,X,re,F)}},_needsResize:function(){var a=this.getTotalObjectScaling();return a.scaleX!==this._lastScaleX||a.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(a,u){this.setElement(e.util.getById(a),u),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(a){a||(a={}),this.setOptions(a),this._setWidthHeight(a)},_initFilters:function(a,u){a&&a.length?e.util.enlivenObjects(a,function(r){u&&u(r)},"fabric.Image.filters"):u&&u()},_setWidthHeight:function(a){a||(a={});var u=this.getElement();this.width=a.width||u.naturalWidth||u.width||0,this.height=a.height||u.naturalHeight||u.height||0},parsePreserveAspectRatioAttribute:function(){var a=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),u=this._element.width,r=this._element.height,o=1,n=1,c=0,p=0,l=0,g=0,v,b=this.width,_=this.height,C={width:b,height:_};return a&&(a.alignX!=="none"||a.alignY!=="none")?(a.meetOrSlice==="meet"&&(o=n=e.util.findScaleToFit(this._element,C),v=(b-u*o)/2,a.alignX==="Min"&&(c=-v),a.alignX==="Max"&&(c=v),v=(_-r*n)/2,a.alignY==="Min"&&(p=-v),a.alignY==="Max"&&(p=v)),a.meetOrSlice==="slice"&&(o=n=e.util.findScaleToCover(this._element,C),v=u-b/o,a.alignX==="Mid"&&(l=v/2),a.alignX==="Max"&&(l=v),v=r-_/n,a.alignY==="Mid"&&(g=v/2),a.alignY==="Max"&&(g=v),u=b/o,r=_/n)):(o=b/u,n=_/r),{width:u,height:r,scaleX:o,scaleY:n,offsetLeft:c,offsetTop:p,cropX:l,cropY:g}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(a,u){var r=e.util.object.clone(a);e.util.loadImage(r.src,function(o,n){if(n){u&&u(null,!0);return}e.Image.prototype._initFilters.call(r,r.filters,function(c){r.filters=c||[],e.Image.prototype._initFilters.call(r,[r.resizeFilter],function(p){r.resizeFilter=p[0],e.util.enlivenObjectEnlivables(r,r,function(){var l=new e.Image(o,r);u(l,!1)})})})},null,r.crossOrigin)},e.Image.fromURL=function(a,u,r){e.util.loadImage(a,function(o,n){u&&u(new e.Image(o,r),n)},null,r&&r.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(a,u,r){var o=e.parseAttributes(a,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(o["xlink:href"],u,i(r?e.util.object.clone(r):{},o))}}(t),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var h=this.angle%360;return h>0?Math.round((h-1)/90)*90:Math.round(h/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(h){h=h||{};var i=function(){},a=h.onComplete||i,u=h.onChange||i,r=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(o){r.rotate(o),u()},onComplete:function(){r.setCoords(),a()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(h){return h.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(h){return h.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function h(a,u){var r="precision "+u+` float;
void main(){}`,o=a.createShader(a.FRAGMENT_SHADER);return a.shaderSource(o,r),a.compileShader(o),!!a.getShaderParameter(o,a.COMPILE_STATUS)}e.isWebglSupported=function(a){if(e.isLikelyNode)return!1;a=a||e.WebglFilterBackend.prototype.tileSize;var u=document.createElement("canvas"),r=u.getContext("webgl")||u.getContext("experimental-webgl"),o=!1;if(r){e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),o=e.maxTextureSize>=a;for(var n=["highp","mediump","lowp"],c=0;c<3;c++)if(h(r,n[c])){e.webGlPrecision=n[c];break}}return this.isSupported=o,o},e.WebglFilterBackend=i;function i(a){a&&a.tileSize&&(this.tileSize=a.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}i.prototype={tileSize:2048,resources:{},setupGLContext:function(a,u){this.dispose(),this.createWebGLCanvas(a,u),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(a,u)},chooseFastestCopyGLTo2DMethod:function(a,u){var r=typeof window.performance<"u",o;try{new ImageData(1,1),o=!0}catch{o=!1}var n=typeof ArrayBuffer<"u",c=typeof Uint8ClampedArray<"u";if(r&&o&&n&&c){var p=e.util.createCanvasElement(),l=new ArrayBuffer(a*u*4);if(e.forceGLPutImageData){this.imageBuffer=l,this.copyGLTo2D=y;return}var g={imageBuffer:l,destinationWidth:a,destinationHeight:u,targetCanvas:p},v,b,_;p.width=a,p.height=u,v=window.performance.now(),m.call(g,this.gl,g),b=window.performance.now()-v,v=window.performance.now(),y.call(g,this.gl,g),_=window.performance.now()-v,b>_?(this.imageBuffer=l,this.copyGLTo2D=y):this.copyGLTo2D=m}},createWebGLCanvas:function(a,u){var r=e.util.createCanvasElement();r.width=a,r.height=u;var o={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},n=r.getContext("webgl",o);n||(n=r.getContext("experimental-webgl",o)),n&&(n.clearColor(0,0,0,0),this.canvas=r,this.gl=n)},applyFilters:function(a,u,r,o,n,c){var p=this.gl,l;c&&(l=this.getCachedTexture(c,u));var g={originalWidth:u.width||u.originalWidth,originalHeight:u.height||u.originalHeight,sourceWidth:r,sourceHeight:o,destinationWidth:r,destinationHeight:o,context:p,sourceTexture:this.createTexture(p,r,o,!l&&u),targetTexture:this.createTexture(p,r,o),originalTexture:l||this.createTexture(p,r,o,!l&&u),passes:a.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:n},v=p.createFramebuffer();return p.bindFramebuffer(p.FRAMEBUFFER,v),a.forEach(function(b){b&&b.applyTo(g)}),f(g),this.copyGLTo2D(p,g),p.bindTexture(p.TEXTURE_2D,null),p.deleteTexture(g.sourceTexture),p.deleteTexture(g.targetTexture),p.deleteFramebuffer(v),n.getContext("2d").setTransform(1,0,0,1,0,0),g},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(a,u,r,o,n){var c=a.createTexture();return a.bindTexture(a.TEXTURE_2D,c),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,n||a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,n||a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),o?a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,o):a.texImage2D(a.TEXTURE_2D,0,a.RGBA,u,r,0,a.RGBA,a.UNSIGNED_BYTE,null),c},getCachedTexture:function(a,u){if(this.textureCache[a])return this.textureCache[a];var r=this.createTexture(this.gl,u.width,u.height,u);return this.textureCache[a]=r,r},evictCachesForKey:function(a){this.textureCache[a]&&(this.gl.deleteTexture(this.textureCache[a]),delete this.textureCache[a])},copyGLTo2D:m,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var a=this.gl,u={renderer:"",vendor:""};if(!a)return u;var r=a.getExtension("WEBGL_debug_renderer_info");if(r){var o=a.getParameter(r.UNMASKED_RENDERER_WEBGL),n=a.getParameter(r.UNMASKED_VENDOR_WEBGL);o&&(u.renderer=o.toLowerCase()),n&&(u.vendor=n.toLowerCase())}return this.gpuInfo=u,u}}}();function f(h){var i=h.targetCanvas,a=i.width,u=i.height,r=h.destinationWidth,o=h.destinationHeight;(a!==r||u!==o)&&(i.width=r,i.height=o)}function m(h,i){var a=h.canvas,u=i.targetCanvas,r=u.getContext("2d");r.translate(0,u.height),r.scale(1,-1);var o=a.height-u.height;r.drawImage(a,0,o,u.width,u.height,0,0,u.width,u.height)}function y(h,i){var a=i.targetCanvas,u=a.getContext("2d"),r=i.destinationWidth,o=i.destinationHeight,n=r*o*4,c=new Uint8Array(this.imageBuffer,0,n),p=new Uint8ClampedArray(this.imageBuffer,0,n);h.readPixels(0,0,r,o,h.RGBA,h.UNSIGNED_BYTE,c);var l=new ImageData(p,r,o);u.putImageData(l,0,0)}(function(){var h=function(){};e.Canvas2dFilterBackend=i;function i(){}i.prototype={evictCachesForKey:h,dispose:h,clearWebGLCaches:h,resources:{},applyFilters:function(a,u,r,o,n){var c=n.getContext("2d");c.drawImage(u,0,0,r,o);var p=c.getImageData(0,0,r,o),l=c.getImageData(0,0,r,o),g={sourceWidth:r,sourceHeight:o,imageData:p,originalEl:u,originalImageData:l,canvasEl:n,ctx:c,filterBackend:this};return a.forEach(function(v){v.applyTo(g)}),(g.imageData.width!==r||g.imageData.height!==o)&&(n.width=g.imageData.width,n.height=g.imageData.height),c.putImageData(g.imageData,0,0),g}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(h){h&&this.setOptions(h)},setOptions:function(h){for(var i in h)this[i]=h[i]},createProgram:function(h,i,a){i=i||this.fragmentSource,a=a||this.vertexSource,e.webGlPrecision!=="highp"&&(i=i.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var u=h.createShader(h.VERTEX_SHADER);if(h.shaderSource(u,a),h.compileShader(u),!h.getShaderParameter(u,h.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+h.getShaderInfoLog(u));var r=h.createShader(h.FRAGMENT_SHADER);if(h.shaderSource(r,i),h.compileShader(r),!h.getShaderParameter(r,h.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+h.getShaderInfoLog(r));var o=h.createProgram();if(h.attachShader(o,u),h.attachShader(o,r),h.linkProgram(o),!h.getProgramParameter(o,h.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+h.getProgramInfoLog(o));var n=this.getAttributeLocations(h,o),c=this.getUniformLocations(h,o)||{};return c.uStepW=h.getUniformLocation(o,"uStepW"),c.uStepH=h.getUniformLocation(o,"uStepH"),{program:o,attributeLocations:n,uniformLocations:c}},getAttributeLocations:function(h,i){return{aPosition:h.getAttribLocation(i,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(h,i,a){var u=i.aPosition,r=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,r),h.enableVertexAttribArray(u),h.vertexAttribPointer(u,2,h.FLOAT,!1,0,0),h.bufferData(h.ARRAY_BUFFER,a,h.STATIC_DRAW)},_setupFrameBuffer:function(h){var i=h.context,a,u;h.passes>1?(a=h.destinationWidth,u=h.destinationHeight,(h.sourceWidth!==a||h.sourceHeight!==u)&&(i.deleteTexture(h.targetTexture),h.targetTexture=h.filterBackend.createTexture(i,a,u)),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,h.targetTexture,0)):(i.bindFramebuffer(i.FRAMEBUFFER,null),i.finish())},_swapTextures:function(h){h.passes--,h.pass++;var i=h.targetTexture;h.targetTexture=h.sourceTexture,h.sourceTexture=i},isNeutralState:function(){var h=this.mainParameter,i=e.Image.filters[this.type].prototype;if(h)if(Array.isArray(i[h])){for(var a=i[h].length;a--;)if(this[h][a]!==i[h][a])return!1;return!0}else return i[h]===this[h];else return!1},applyTo:function(h){h.webgl?(this._setupFrameBuffer(h),this.applyToWebGL(h),this._swapTextures(h)):this.applyTo2d(h)},retrieveShader:function(h){return h.programCache.hasOwnProperty(this.type)||(h.programCache[this.type]=this.createProgram(h.context)),h.programCache[this.type]},applyToWebGL:function(h){var i=h.context,a=this.retrieveShader(h);h.pass===0&&h.originalTexture?i.bindTexture(i.TEXTURE_2D,h.originalTexture):i.bindTexture(i.TEXTURE_2D,h.sourceTexture),i.useProgram(a.program),this.sendAttributeData(i,a.attributeLocations,h.aPosition),i.uniform1f(a.uniformLocations.uStepW,1/h.sourceWidth),i.uniform1f(a.uniformLocations.uStepH,1/h.sourceHeight),this.sendUniformData(i,a.uniformLocations),i.viewport(0,0,h.destinationWidth,h.destinationHeight),i.drawArrays(i.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(h,i,a){h.activeTexture(a),h.bindTexture(h.TEXTURE_2D,i),h.activeTexture(h.TEXTURE0)},unbindAdditionalTexture:function(h,i){h.activeTexture(i),h.bindTexture(h.TEXTURE_2D,null),h.activeTexture(h.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(h){this[this.mainParameter]=h},sendUniformData:function(){},createHelpLayer:function(h){if(!h.helpLayer){var i=document.createElement("canvas");i.width=h.sourceWidth,i.height=h.sourceHeight,h.helpLayer=i}},toObject:function(){var h={type:this.type},i=this.mainParameter;return i&&(h[i]=this[i]),h},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(h,i){var a=new e.Image.filters[h.type](h);return i&&i(a),a},function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,u=i.util.createClass;a.ColorMatrix=u(a.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(r){this.callSuper("initialize",r),this.matrix=this.matrix.slice(0)},applyTo2d:function(r){var o=r.imageData,n=o.data,c=n.length,p=this.matrix,l,g,v,b,_,C=this.colorsOnly;for(_=0;_<c;_+=4)l=n[_],g=n[_+1],v=n[_+2],C?(n[_]=l*p[0]+g*p[1]+v*p[2]+p[4]*255,n[_+1]=l*p[5]+g*p[6]+v*p[7]+p[9]*255,n[_+2]=l*p[10]+g*p[11]+v*p[12]+p[14]*255):(b=n[_+3],n[_]=l*p[0]+g*p[1]+v*p[2]+b*p[3]+p[4]*255,n[_+1]=l*p[5]+g*p[6]+v*p[7]+b*p[8]+p[9]*255,n[_+2]=l*p[10]+g*p[11]+v*p[12]+b*p[13]+p[14]*255,n[_+3]=l*p[15]+g*p[16]+v*p[17]+b*p[18]+p[19]*255)},getUniformLocations:function(r,o){return{uColorMatrix:r.getUniformLocation(o,"uColorMatrix"),uConstants:r.getUniformLocation(o,"uConstants")}},sendUniformData:function(r,o){var n=this.matrix,c=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],p=[n[4],n[9],n[14],n[19]];r.uniformMatrix4fv(o.uColorMatrix,!1,c),r.uniform4fv(o.uConstants,p)}}),i.Image.filters.ColorMatrix.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,u=i.util.createClass;a.Brightness=u(a.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(r){if(this.brightness!==0){var o=r.imageData,n=o.data,c,p=n.length,l=Math.round(this.brightness*255);for(c=0;c<p;c+=4)n[c]=n[c]+l,n[c+1]=n[c+1]+l,n[c+2]=n[c+2]+l}},getUniformLocations:function(r,o){return{uBrightness:r.getUniformLocation(o,"uBrightness")}},sendUniformData:function(r,o){r.uniform1f(o.uBrightness,this.brightness)}}),i.Image.filters.Brightness.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.util.object.extend,u=i.Image.filters,r=i.util.createClass;u.Convolute=r(u.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(o){var n=Math.sqrt(this.matrix.length),c=this.type+"_"+n+"_"+(this.opaque?1:0),p=this.fragmentSource[c];return o.programCache.hasOwnProperty(c)||(o.programCache[c]=this.createProgram(o.context,p)),o.programCache[c]},applyTo2d:function(o){var n=o.imageData,c=n.data,p=this.matrix,l=Math.round(Math.sqrt(p.length)),g=Math.floor(l/2),v=n.width,b=n.height,_=o.ctx.createImageData(v,b),C=_.data,w=this.opaque?1:0,k,z,N,X,re,F,K,T,J,ue,ie,ae,A;for(ie=0;ie<b;ie++)for(ue=0;ue<v;ue++){for(re=(ie*v+ue)*4,k=0,z=0,N=0,X=0,A=0;A<l;A++)for(ae=0;ae<l;ae++)K=ie+A-g,F=ue+ae-g,!(K<0||K>=b||F<0||F>=v)&&(T=(K*v+F)*4,J=p[A*l+ae],k+=c[T]*J,z+=c[T+1]*J,N+=c[T+2]*J,w||(X+=c[T+3]*J));C[re]=k,C[re+1]=z,C[re+2]=N,w?C[re+3]=c[re+3]:C[re+3]=X}o.imageData=_},getUniformLocations:function(o,n){return{uMatrix:o.getUniformLocation(n,"uMatrix"),uOpaque:o.getUniformLocation(n,"uOpaque"),uHalfSize:o.getUniformLocation(n,"uHalfSize"),uSize:o.getUniformLocation(n,"uSize")}},sendUniformData:function(o,n){o.uniform1fv(n.uMatrix,this.matrix)},toObject:function(){return a(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),i.Image.filters.Convolute.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,u=i.util.createClass;a.Grayscale=u(a.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(r){var o=r.imageData,n=o.data,c,p=n.length,l,g=this.mode;for(c=0;c<p;c+=4)g==="average"?l=(n[c]+n[c+1]+n[c+2])/3:g==="lightness"?l=(Math.min(n[c],n[c+1],n[c+2])+Math.max(n[c],n[c+1],n[c+2]))/2:g==="luminosity"&&(l=.21*n[c]+.72*n[c+1]+.07*n[c+2]),n[c]=l,n[c+1]=l,n[c+2]=l},retrieveShader:function(r){var o=this.type+"_"+this.mode;if(!r.programCache.hasOwnProperty(o)){var n=this.fragmentSource[this.mode];r.programCache[o]=this.createProgram(r.context,n)}return r.programCache[o]},getUniformLocations:function(r,o){return{uMode:r.getUniformLocation(o,"uMode")}},sendUniformData:function(r,o){var n=1;r.uniform1i(o.uMode,n)},isNeutralState:function(){return!1}}),i.Image.filters.Grayscale.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,u=i.util.createClass;a.Invert=u(a.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(r){var o=r.imageData,n=o.data,c,p=n.length;for(c=0;c<p;c+=4)n[c]=255-n[c],n[c+1]=255-n[c+1],n[c+2]=255-n[c+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(r,o){return{uInvert:r.getUniformLocation(o,"uInvert")}},sendUniformData:function(r,o){r.uniform1i(o.uInvert,this.invert)}}),i.Image.filters.Invert.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.util.object.extend,u=i.Image.filters,r=i.util.createClass;u.Noise=r(u.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(o){if(this.noise!==0){var n=o.imageData,c=n.data,p,l=c.length,g=this.noise,v;for(p=0,l=c.length;p<l;p+=4)v=(.5-Math.random())*g,c[p]+=v,c[p+1]+=v,c[p+2]+=v}},getUniformLocations:function(o,n){return{uNoise:o.getUniformLocation(n,"uNoise"),uSeed:o.getUniformLocation(n,"uSeed")}},sendUniformData:function(o,n){o.uniform1f(n.uNoise,this.noise/255),o.uniform1f(n.uSeed,Math.random())},toObject:function(){return a(this.callSuper("toObject"),{noise:this.noise})}}),i.Image.filters.Noise.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,u=i.util.createClass;a.Pixelate=u(a.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(r){var o=r.imageData,n=o.data,c=o.height,p=o.width,l,g,v,b,_,C,w,k,z,N,X;for(g=0;g<c;g+=this.blocksize)for(v=0;v<p;v+=this.blocksize)for(l=g*4*p+v*4,b=n[l],_=n[l+1],C=n[l+2],w=n[l+3],N=Math.min(g+this.blocksize,c),X=Math.min(v+this.blocksize,p),k=g;k<N;k++)for(z=v;z<X;z++)l=k*4*p+z*4,n[l]=b,n[l+1]=_,n[l+2]=C,n[l+3]=w},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(r,o){return{uBlocksize:r.getUniformLocation(o,"uBlocksize"),uStepW:r.getUniformLocation(o,"uStepW"),uStepH:r.getUniformLocation(o,"uStepH")}},sendUniformData:function(r,o){r.uniform1f(o.uBlocksize,this.blocksize)}}),i.Image.filters.Pixelate.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.util.object.extend,u=i.Image.filters,r=i.util.createClass;u.RemoveColor=r(u.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(o){var n=o.imageData,c=n.data,p,l=this.distance*255,g,v,b,_=new i.Color(this.color).getSource(),C=[_[0]-l,_[1]-l,_[2]-l],w=[_[0]+l,_[1]+l,_[2]+l];for(p=0;p<c.length;p+=4)g=c[p],v=c[p+1],b=c[p+2],g>C[0]&&v>C[1]&&b>C[2]&&g<w[0]&&v<w[1]&&b<w[2]&&(c[p+3]=0)},getUniformLocations:function(o,n){return{uLow:o.getUniformLocation(n,"uLow"),uHigh:o.getUniformLocation(n,"uHigh")}},sendUniformData:function(o,n){var c=new i.Color(this.color).getSource(),p=parseFloat(this.distance),l=[0+c[0]/255-p,0+c[1]/255-p,0+c[2]/255-p,1],g=[c[0]/255+p,c[1]/255+p,c[2]/255+p,1];o.uniform4fv(n.uLow,l),o.uniform4fv(n.uHigh,g)},toObject:function(){return a(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),i.Image.filters.RemoveColor.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,u=i.util.createClass,r={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var o in r)a[o]=u(a.ColorMatrix,{type:o,matrix:r[o],mainParameter:!1,colorsOnly:!0}),i.Image.filters[o].fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric,a=i.Image.filters,u=i.util.createClass;a.BlendColor=u(a.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(r){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[r]+`}
}`},retrieveShader:function(r){var o=this.type+"_"+this.mode,n;return r.programCache.hasOwnProperty(o)||(n=this.buildSource(this.mode),r.programCache[o]=this.createProgram(r.context,n)),r.programCache[o]},applyTo2d:function(r){var o=r.imageData,n=o.data,c=n.length,p,l,g,v,b,_,C,w=1-this.alpha;C=new i.Color(this.color).getSource(),p=C[0]*this.alpha,l=C[1]*this.alpha,g=C[2]*this.alpha;for(var k=0;k<c;k+=4)switch(v=n[k],b=n[k+1],_=n[k+2],this.mode){case"multiply":n[k]=v*p/255,n[k+1]=b*l/255,n[k+2]=_*g/255;break;case"screen":n[k]=255-(255-v)*(255-p)/255,n[k+1]=255-(255-b)*(255-l)/255,n[k+2]=255-(255-_)*(255-g)/255;break;case"add":n[k]=v+p,n[k+1]=b+l,n[k+2]=_+g;break;case"diff":case"difference":n[k]=Math.abs(v-p),n[k+1]=Math.abs(b-l),n[k+2]=Math.abs(_-g);break;case"subtract":n[k]=v-p,n[k+1]=b-l,n[k+2]=_-g;break;case"darken":n[k]=Math.min(v,p),n[k+1]=Math.min(b,l),n[k+2]=Math.min(_,g);break;case"lighten":n[k]=Math.max(v,p),n[k+1]=Math.max(b,l),n[k+2]=Math.max(_,g);break;case"overlay":n[k]=p<128?2*v*p/255:255-2*(255-v)*(255-p)/255,n[k+1]=l<128?2*b*l/255:255-2*(255-b)*(255-l)/255,n[k+2]=g<128?2*_*g/255:255-2*(255-_)*(255-g)/255;break;case"exclusion":n[k]=p+v-2*p*v/255,n[k+1]=l+b-2*l*b/255,n[k+2]=g+_-2*g*_/255;break;case"tint":n[k]=p+v*w,n[k+1]=l+b*w,n[k+2]=g+_*w}},getUniformLocations:function(r,o){return{uColor:r.getUniformLocation(o,"uColor")}},sendUniformData:function(r,o){var n=new i.Color(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,r.uniform4fv(o.uColor,n)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendColor.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric,a=i.Image.filters,u=i.util.createClass;a.BlendImage=u(a.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(r){var o=this.type+"_"+this.mode,n=this.fragmentSource[this.mode];return r.programCache.hasOwnProperty(o)||(r.programCache[o]=this.createProgram(r.context,n)),r.programCache[o]},applyToWebGL:function(r){var o=r.context,n=this.createTexture(r.filterBackend,this.image);this.bindAdditionalTexture(o,n,o.TEXTURE1),this.callSuper("applyToWebGL",r),this.unbindAdditionalTexture(o,o.TEXTURE1)},createTexture:function(r,o){return r.getCachedTexture(o.cacheKey,o._element)},calculateMatrix:function(){var r=this.image,o=r._element.width,n=r._element.height;return[1/r.scaleX,0,0,0,1/r.scaleY,0,-r.left/o,-r.top/n,1]},applyTo2d:function(r){var o=r.imageData,n=r.filterBackend.resources,c=o.data,p=c.length,l=o.width,g=o.height,v,b,_,C,w,k,z,N,X,re,F=this.image,K;n.blendImage||(n.blendImage=i.util.createCanvasElement()),X=n.blendImage,re=X.getContext("2d"),X.width!==l||X.height!==g?(X.width=l,X.height=g):re.clearRect(0,0,l,g),re.setTransform(F.scaleX,0,0,F.scaleY,F.left,F.top),re.drawImage(F._element,0,0,l,g),K=re.getImageData(0,0,l,g).data;for(var T=0;T<p;T+=4)switch(w=c[T],k=c[T+1],z=c[T+2],N=c[T+3],v=K[T],b=K[T+1],_=K[T+2],C=K[T+3],this.mode){case"multiply":c[T]=w*v/255,c[T+1]=k*b/255,c[T+2]=z*_/255,c[T+3]=N*C/255;break;case"mask":c[T+3]=C;break}},getUniformLocations:function(r,o){return{uTransformMatrix:r.getUniformLocation(o,"uTransformMatrix"),uImage:r.getUniformLocation(o,"uImage")}},sendUniformData:function(r,o){var n=this.calculateMatrix();r.uniform1i(o.uImage,1),r.uniformMatrix3fv(o.uTransformMatrix,!1,n)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendImage.fromObject=function(r,o){i.Image.fromObject(r.image,function(n){var c=i.util.object.clone(r);c.image=n,o(new i.Image.filters.BlendImage(c))})}}(t),function(h){var i=h.fabric||(h.fabric={}),a=Math.pow,u=Math.floor,r=Math.sqrt,o=Math.abs,n=Math.round,c=Math.sin,p=Math.ceil,l=i.Image.filters,g=i.util.createClass;l.Resize=g(l.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(v,b){return{uDelta:v.getUniformLocation(b,"uDelta"),uTaps:v.getUniformLocation(b,"uTaps")}},sendUniformData:function(v,b){v.uniform2fv(b.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),v.uniform1fv(b.uTaps,this.taps)},retrieveShader:function(v){var b=this.getFilterWindow(),_=this.type+"_"+b;if(!v.programCache.hasOwnProperty(_)){var C=this.generateShader(b);v.programCache[_]=this.createProgram(v.context,C)}return v.programCache[_]},getFilterWindow:function(){var v=this.tempScale;return Math.ceil(this.lanczosLobes/v)},getTaps:function(){for(var v=this.lanczosCreate(this.lanczosLobes),b=this.tempScale,_=this.getFilterWindow(),C=new Array(_),w=1;w<=_;w++)C[w-1]=v(w*b);return C},generateShader:function(C){for(var b=new Array(C),_=this.fragmentSourceTOP,C,w=1;w<=C;w++)b[w-1]=w+".0 * uDelta";return _+="uniform float uTaps["+C+`];
`,_+=`void main() {
`,_+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,_+=`  float sum = 1.0;
`,b.forEach(function(k,z){_+="  color += texture2D(uTexture, vTexCoord + "+k+") * uTaps["+z+`];
`,_+="  color += texture2D(uTexture, vTexCoord - "+k+") * uTaps["+z+`];
`,_+="  sum += 2.0 * uTaps["+z+`];
`}),_+=`  gl_FragColor = color / sum;
`,_+="}",_},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(v){v.webgl?(v.passes++,this.width=v.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=v.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),v.destinationWidth=this.dW,this._setupFrameBuffer(v),this.applyToWebGL(v),this._swapTextures(v),v.sourceWidth=v.destinationWidth,this.height=v.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),v.destinationHeight=this.dH,this._setupFrameBuffer(v),this.applyToWebGL(v),this._swapTextures(v),v.sourceHeight=v.destinationHeight):this.applyTo2d(v)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(v){return function(b){if(b>=v||b<=-v)return 0;if(b<11920929e-14&&b>-11920929e-14)return 1;b*=Math.PI;var _=b/v;return c(b)/b*c(_)/_}},applyTo2d:function(v){var b=v.imageData,_=this.scaleX,C=this.scaleY;this.rcpScaleX=1/_,this.rcpScaleY=1/C;var w=b.width,k=b.height,z=n(w*_),N=n(k*C),X;this.resizeType==="sliceHack"?X=this.sliceByTwo(v,w,k,z,N):this.resizeType==="hermite"?X=this.hermiteFastResize(v,w,k,z,N):this.resizeType==="bilinear"?X=this.bilinearFiltering(v,w,k,z,N):this.resizeType==="lanczos"&&(X=this.lanczosResize(v,w,k,z,N)),v.imageData=X},sliceByTwo:function(v,b,_,C,w){var k=v.imageData,z=.5,N=!1,X=!1,re=b*z,F=_*z,K=i.filterBackend.resources,T,J,ue=0,ie=0,ae=b,A=0;for(K.sliceByTwo||(K.sliceByTwo=document.createElement("canvas")),T=K.sliceByTwo,(T.width<b*1.5||T.height<_)&&(T.width=b*1.5,T.height=_),J=T.getContext("2d"),J.clearRect(0,0,b*1.5,_),J.putImageData(k,0,0),C=u(C),w=u(w);!N||!X;)b=re,_=F,C<u(re*z)?re=u(re*z):(re=C,N=!0),w<u(F*z)?F=u(F*z):(F=w,X=!0),J.drawImage(T,ue,ie,b,_,ae,A,re,F),ue=ae,ie=A,A+=F;return J.getImageData(ue,ie,C,w)},lanczosResize:function(v,b,_,C,w){function k(R){var I,Q,U,P,Z,H,q,V,ee,se,fe;for(A.x=(R+.5)*F,W.x=u(A.x),I=0;I<w;I++){for(A.y=(I+.5)*K,W.y=u(A.y),Z=0,H=0,q=0,V=0,ee=0,Q=W.x-ue;Q<=W.x+ue;Q++)if(!(Q<0||Q>=b)){se=u(1e3*o(Q-A.x)),ae[se]||(ae[se]={});for(var E=W.y-ie;E<=W.y+ie;E++)E<0||E>=_||(fe=u(1e3*o(E-A.y)),ae[se][fe]||(ae[se][fe]=re(r(a(se*T,2)+a(fe*J,2))/1e3)),U=ae[se][fe],U>0&&(P=(E*b+Q)*4,Z+=U,H+=U*z[P],q+=U*z[P+1],V+=U*z[P+2],ee+=U*z[P+3]))}P=(I*C+R)*4,X[P]=H/Z,X[P+1]=q/Z,X[P+2]=V/Z,X[P+3]=ee/Z}return++R<C?k(R):N}var z=v.imageData.data,N=v.ctx.createImageData(C,w),X=N.data,re=this.lanczosCreate(this.lanczosLobes),F=this.rcpScaleX,K=this.rcpScaleY,T=2/this.rcpScaleX,J=2/this.rcpScaleY,ue=p(F*this.lanczosLobes/2),ie=p(K*this.lanczosLobes/2),ae={},A={},W={};return k(0)},bilinearFiltering:function(v,b,_,C,w){var k,z,N,X,re,F,K,T,J,ue,ie,ae,A=0,W,R=this.rcpScaleX,I=this.rcpScaleY,Q=4*(b-1),U=v.imageData,P=U.data,Z=v.ctx.createImageData(C,w),H=Z.data;for(K=0;K<w;K++)for(T=0;T<C;T++)for(re=u(R*T),F=u(I*K),J=R*T-re,ue=I*K-F,W=4*(F*b+re),ie=0;ie<4;ie++)k=P[W+ie],z=P[W+4+ie],N=P[W+Q+ie],X=P[W+Q+4+ie],ae=k*(1-J)*(1-ue)+z*J*(1-ue)+N*ue*(1-J)+X*J*ue,H[A++]=ae;return Z},hermiteFastResize:function(v,b,_,C,w){for(var k=this.rcpScaleX,z=this.rcpScaleY,N=p(k/2),X=p(z/2),re=v.imageData,F=re.data,K=v.ctx.createImageData(C,w),T=K.data,J=0;J<w;J++)for(var ue=0;ue<C;ue++){for(var ie=(ue+J*C)*4,ae=0,A=0,W=0,R=0,I=0,Q=0,U=0,P=(J+.5)*z,Z=u(J*z);Z<(J+1)*z;Z++)for(var H=o(P-(Z+.5))/X,q=(ue+.5)*k,V=H*H,ee=u(ue*k);ee<(ue+1)*k;ee++){var se=o(q-(ee+.5))/N,fe=r(V+se*se);fe>1&&fe<-1||(ae=2*fe*fe*fe-3*fe*fe+1,ae>0&&(se=4*(ee+Z*b),U+=ae*F[se+3],W+=ae,F[se+3]<255&&(ae=ae*F[se+3]/250),R+=ae*F[se],I+=ae*F[se+1],Q+=ae*F[se+2],A+=ae))}T[ie]=R/A,T[ie+1]=I/A,T[ie+2]=Q/A,T[ie+3]=U/W}return K},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),i.Image.filters.Resize.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,u=i.util.createClass;a.Contrast=u(a.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(r){if(this.contrast!==0){var o=r.imageData,n,p,c=o.data,p=c.length,l=Math.floor(this.contrast*255),g=259*(l+255)/(255*(259-l));for(n=0;n<p;n+=4)c[n]=g*(c[n]-128)+128,c[n+1]=g*(c[n+1]-128)+128,c[n+2]=g*(c[n+2]-128)+128}},getUniformLocations:function(r,o){return{uContrast:r.getUniformLocation(o,"uContrast")}},sendUniformData:function(r,o){r.uniform1f(o.uContrast,this.contrast)}}),i.Image.filters.Contrast.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,u=i.util.createClass;a.Saturation=u(a.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(r){if(this.saturation!==0){var o=r.imageData,n=o.data,c=n.length,p=-this.saturation,l,g;for(l=0;l<c;l+=4)g=Math.max(n[l],n[l+1],n[l+2]),n[l]+=g!==n[l]?(g-n[l])*p:0,n[l+1]+=g!==n[l+1]?(g-n[l+1])*p:0,n[l+2]+=g!==n[l+2]?(g-n[l+2])*p:0}},getUniformLocations:function(r,o){return{uSaturation:r.getUniformLocation(o,"uSaturation")}},sendUniformData:function(r,o){r.uniform1f(o.uSaturation,-this.saturation)}}),i.Image.filters.Saturation.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,u=i.util.createClass;a.Vibrance=u(a.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(r){if(this.vibrance!==0){var o=r.imageData,n=o.data,c=n.length,p=-this.vibrance,l,g,v,b;for(l=0;l<c;l+=4)g=Math.max(n[l],n[l+1],n[l+2]),v=(n[l]+n[l+1]+n[l+2])/3,b=Math.abs(g-v)*2/255*p,n[l]+=g!==n[l]?(g-n[l])*b:0,n[l+1]+=g!==n[l+1]?(g-n[l+1])*b:0,n[l+2]+=g!==n[l+2]?(g-n[l+2])*b:0}},getUniformLocations:function(r,o){return{uVibrance:r.getUniformLocation(o,"uVibrance")}},sendUniformData:function(r,o){r.uniform1f(o.uVibrance,-this.vibrance)}}),i.Image.filters.Vibrance.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,u=i.util.createClass;a.Blur=u(a.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(r){r.webgl?(this.aspectRatio=r.sourceWidth/r.sourceHeight,r.passes++,this._setupFrameBuffer(r),this.horizontal=!0,this.applyToWebGL(r),this._swapTextures(r),this._setupFrameBuffer(r),this.horizontal=!1,this.applyToWebGL(r),this._swapTextures(r)):this.applyTo2d(r)},applyTo2d:function(r){r.imageData=this.simpleBlur(r)},simpleBlur:function(r){var o=r.filterBackend.resources,n,c,p=r.imageData.width,l=r.imageData.height;o.blurLayer1||(o.blurLayer1=i.util.createCanvasElement(),o.blurLayer2=i.util.createCanvasElement()),n=o.blurLayer1,c=o.blurLayer2,(n.width!==p||n.height!==l)&&(c.width=n.width=p,c.height=n.height=l);var g=n.getContext("2d"),v=c.getContext("2d"),b=15,_,C,w,k,z=this.blur*.06*.5;for(g.putImageData(r.imageData,0,0),v.clearRect(0,0,p,l),k=-b;k<=b;k++)_=(Math.random()-.5)/4,C=k/b,w=z*C*p+_,v.globalAlpha=1-Math.abs(C),v.drawImage(n,w,_),g.drawImage(c,0,0),v.globalAlpha=1,v.clearRect(0,0,c.width,c.height);for(k=-b;k<=b;k++)_=(Math.random()-.5)/4,C=k/b,w=z*C*l+_,v.globalAlpha=1-Math.abs(C),v.drawImage(n,_,w),g.drawImage(c,0,0),v.globalAlpha=1,v.clearRect(0,0,c.width,c.height);r.ctx.drawImage(n,0,0);var N=r.ctx.getImageData(0,0,n.width,n.height);return g.globalAlpha=1,g.clearRect(0,0,n.width,n.height),N},getUniformLocations:function(r,o){return{delta:r.getUniformLocation(o,"uDelta")}},sendUniformData:function(r,o){var n=this.chooseRightDelta();r.uniform2fv(o.delta,n)},chooseRightDelta:function(){var r=1,o=[0,0],n;return this.horizontal?this.aspectRatio>1&&(r=1/this.aspectRatio):this.aspectRatio<1&&(r=this.aspectRatio),n=r*this.blur*.12,this.horizontal?o[0]=n:o[1]=n,o}}),a.Blur.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,u=i.util.createClass;a.Gamma=u(a.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(r){this.gamma=[1,1,1],a.BaseFilter.prototype.initialize.call(this,r)},applyTo2d:function(r){var o=r.imageData,n=o.data,c=this.gamma,p=n.length,l=1/c[0],g=1/c[1],v=1/c[2],b;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),b=0,p=256;b<p;b++)this.rVals[b]=Math.pow(b/255,l)*255,this.gVals[b]=Math.pow(b/255,g)*255,this.bVals[b]=Math.pow(b/255,v)*255;for(b=0,p=n.length;b<p;b+=4)n[b]=this.rVals[n[b]],n[b+1]=this.gVals[n[b+1]],n[b+2]=this.bVals[n[b+2]]},getUniformLocations:function(r,o){return{uGamma:r.getUniformLocation(o,"uGamma")}},sendUniformData:function(r,o){r.uniform3fv(o.uGamma,this.gamma)}}),i.Image.filters.Gamma.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,u=i.util.createClass;a.Composed=u(a.BaseFilter,{type:"Composed",subFilters:[],initialize:function(r){this.callSuper("initialize",r),this.subFilters=this.subFilters.slice(0)},applyTo:function(r){r.passes+=this.subFilters.length-1,this.subFilters.forEach(function(o){o.applyTo(r)})},toObject:function(){return i.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(r){return r.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(r){return!r.isNeutralState()})}}),i.Image.filters.Composed.fromObject=function(r,o){var n=r.subFilters||[],c=n.map(function(l){return new i.Image.filters[l.type](l)}),p=new i.Image.filters.Composed({subFilters:c});return o&&o(p),p}}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.Image.filters,u=i.util.createClass;a.HueRotation=u(a.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var r=this.rotation*Math.PI,o=i.util.cos(r),n=i.util.sin(r),c=1/3,p=Math.sqrt(c)*n,l=1-o;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=o+l/3,this.matrix[1]=c*l-p,this.matrix[2]=c*l+p,this.matrix[5]=c*l+p,this.matrix[6]=o+c*l,this.matrix[7]=c*l-p,this.matrix[10]=c*l-p,this.matrix[11]=c*l+p,this.matrix[12]=o+c*l},isNeutralState:function(r){return this.calculateMatrix(),a.BaseFilter.prototype.isNeutralState.call(this,r)},applyTo:function(r){this.calculateMatrix(),a.BaseFilter.prototype.applyTo.call(this,r)}}),i.Image.filters.HueRotation.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(h){var i=h.fabric||(h.fabric={}),a=i.util.object.clone;if(i.Text){i.warn("fabric.Text is already defined");return}var u="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");i.Text=i.util.createClass(i.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:i.Object.prototype.stateProperties.concat(u),cacheProperties:i.Object.prototype.cacheProperties.concat(u),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(r,o){this.styles=o?o.styles||{}:{},this.text=r,this.__skipDimension=!0,this.callSuper("initialize",o),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var r=this.path;r&&(r.segmentsInfo=i.util.getPathSegmentsInfo(r.path))},getMeasuringContext:function(){return i._measuringContext||(i._measuringContext=this.canvas&&this.canvas.contextCache||i.util.createCanvasElement().getContext("2d")),i._measuringContext},_splitText:function(){var r=this._splitTextIntoLines(this.text);return this.textLines=r.lines,this._textLines=r.graphemeLines,this._unwrappedTextLines=r._unwrappedLines,this._text=r.graphemeText,r},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var r,o,n,c,p,l,g,v=0,b=this._textLines.length;v<b;v++)if(!(this.textAlign!=="justify"&&(v===b-1||this.isEndOfWrapping(v)))&&(c=0,p=this._textLines[v],o=this.getLineWidth(v),o<this.width&&(g=this.textLines[v].match(this._reSpacesAndTabs)))){n=g.length,r=(this.width-o)/n;for(var _=0,C=p.length;_<=C;_++)l=this.__charBounds[v][_],this._reSpaceAndTab.test(p[_])?(l.width+=r,l.kernedWidth+=r,l.left+=c,c+=r):l.left+=c}},isEndOfWrapping:function(r){return r===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var r=this.callSuper("_getCacheCanvasDimensions"),o=this.fontSize;return r.width+=o*r.zoomX,r.height+=o*r.zoomY,r},_render:function(r){var o=this.path;o&&!o.isNotVisible()&&o._render(r),this._setTextStyles(r),this._renderTextLinesBackground(r),this._renderTextDecoration(r,"underline"),this._renderText(r),this._renderTextDecoration(r,"overline"),this._renderTextDecoration(r,"linethrough")},_renderText:function(r){this.paintFirst==="stroke"?(this._renderTextStroke(r),this._renderTextFill(r)):(this._renderTextFill(r),this._renderTextStroke(r))},_setTextStyles:function(r,o,n){if(r.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":r.textBaseline="middle";break;case"ascender":r.textBaseline="top";break;case"descender":r.textBaseline="bottom";break}r.font=this._getFontDeclaration(o,n)},calcTextWidth:function(){for(var r=this.getLineWidth(0),o=1,n=this._textLines.length;o<n;o++){var c=this.getLineWidth(o);c>r&&(r=c)}return r},_renderTextLine:function(r,o,n,c,p,l){this._renderChars(r,o,n,c,p,l)},_renderTextLinesBackground:function(r){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var o,n,c=r.fillStyle,p,l,g=this._getLeftOffset(),v=this._getTopOffset(),b=0,_=0,C,w,k=this.path,z,N=0,X=this._textLines.length;N<X;N++){if(o=this.getHeightOfLine(N),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",N)){v+=o;continue}p=this._textLines[N],n=this._getLineLeftOffset(N),_=0,b=0,l=this.getValueOfPropertyAt(N,0,"textBackgroundColor");for(var re=0,F=p.length;re<F;re++)C=this.__charBounds[N][re],w=this.getValueOfPropertyAt(N,re,"textBackgroundColor"),k?(r.save(),r.translate(C.renderLeft,C.renderTop),r.rotate(C.angle),r.fillStyle=w,w&&r.fillRect(-C.width/2,-o/this.lineHeight*(1-this._fontSizeFraction),C.width,o/this.lineHeight),r.restore()):w!==l?(z=g+n+b,this.direction==="rtl"&&(z=this.width-z-_),r.fillStyle=l,l&&r.fillRect(z,v,_,o/this.lineHeight),b=C.left,_=C.width,l=w):_+=C.kernedWidth;w&&!k&&(z=g+n+b,this.direction==="rtl"&&(z=this.width-z-_),r.fillStyle=w,r.fillRect(z,v,_,o/this.lineHeight)),v+=o}r.fillStyle=c,this._removeShadow(r)}},getFontCache:function(r){var o=r.fontFamily.toLowerCase();i.charWidthsCache[o]||(i.charWidthsCache[o]={});var n=i.charWidthsCache[o],c=r.fontStyle.toLowerCase()+"_"+(r.fontWeight+"").toLowerCase();return n[c]||(n[c]={}),n[c]},_measureChar:function(r,o,n,c){var p=this.getFontCache(o),l=this._getFontDeclaration(o),g=this._getFontDeclaration(c),v=n+r,b=l===g,_,C,w,k=o.fontSize/this.CACHE_FONT_SIZE,z;if(n&&p[n]!==void 0&&(w=p[n]),p[r]!==void 0&&(z=_=p[r]),b&&p[v]!==void 0&&(C=p[v],z=C-w),_===void 0||w===void 0||C===void 0){var N=this.getMeasuringContext();this._setTextStyles(N,o,!0)}return _===void 0&&(z=_=N.measureText(r).width,p[r]=_),w===void 0&&b&&n&&(w=N.measureText(n).width,p[n]=w),b&&C===void 0&&(C=N.measureText(v).width,p[v]=C,z=C-w),{width:_*k,kernedWidth:z*k}},getHeightOfChar:function(r,o){return this.getValueOfPropertyAt(r,o,"fontSize")},measureLine:function(r){var o=this._measureLine(r);return this.charSpacing!==0&&(o.width-=this._getWidthOfCharSpacing()),o.width<0&&(o.width=0),o},_measureLine:function(r){var o=0,n,c,p=this._textLines[r],l,g,v=0,b=new Array(p.length),_=0,C,w,k=this.path,z=this.pathSide==="right";for(this.__charBounds[r]=b,n=0;n<p.length;n++)c=p[n],g=this._getGraphemeBox(c,r,n,l),b[n]=g,o+=g.kernedWidth,l=c;if(b[n]={left:g?g.left+g.width:0,width:0,kernedWidth:0,height:this.fontSize},k){switch(w=k.segmentsInfo[k.segmentsInfo.length-1].length,C=i.util.getPointOnPath(k.path,0,k.segmentsInfo),C.x+=k.pathOffset.x,C.y+=k.pathOffset.y,this.textAlign){case"left":_=z?w-o:0;break;case"center":_=(w-o)/2;break;case"right":_=z?0:w-o;break}for(_+=this.pathStartOffset*(z?-1:1),n=z?p.length-1:0;z?n>=0:n<p.length;z?n--:n++)g=b[n],_>w?_%=w:_<0&&(_+=w),this._setGraphemeOnPath(_,g,C),_+=g.kernedWidth}return{width:o,numOfSpaces:v}},_setGraphemeOnPath:function(r,o,n){var c=r+o.kernedWidth/2,p=this.path,l=i.util.getPointOnPath(p.path,c,p.segmentsInfo);o.renderLeft=l.x-n.x,o.renderTop=l.y-n.y,o.angle=l.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(r,o,n,c,p){var l=this.getCompleteStyleDeclaration(o,n),g=c?this.getCompleteStyleDeclaration(o,n-1):{},v=this._measureChar(r,l,c,g),b=v.kernedWidth,_=v.width,C;this.charSpacing!==0&&(C=this._getWidthOfCharSpacing(),_+=C,b+=C);var w={width:_,left:0,height:l.fontSize,kernedWidth:b,deltaY:l.deltaY};if(n>0&&!p){var k=this.__charBounds[o][n-1];w.left=k.left+k.width+v.kernedWidth-v.width}return w},getHeightOfLine:function(r){if(this.__lineHeights[r])return this.__lineHeights[r];for(var o=this._textLines[r],n=this.getHeightOfChar(r,0),c=1,p=o.length;c<p;c++)n=Math.max(this.getHeightOfChar(r,c),n);return this.__lineHeights[r]=n*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var r,o=0,n=0,c=this._textLines.length;n<c;n++)r=this.getHeightOfLine(n),o+=n===c-1?r/this.lineHeight:r;return o},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(r,o){r.save();for(var n=0,c=this._getLeftOffset(),p=this._getTopOffset(),l=0,g=this._textLines.length;l<g;l++){var v=this.getHeightOfLine(l),b=v/this.lineHeight,_=this._getLineLeftOffset(l);this._renderTextLine(o,r,this._textLines[l],c+_,p+n+b,l),n+=v}r.restore()},_renderTextFill:function(r){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(r,"fillText")},_renderTextStroke:function(r){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(r),r.save(),this._setLineDash(r,this.strokeDashArray),r.beginPath(),this._renderTextCommon(r,"strokeText"),r.closePath(),r.restore())},_renderChars:function(r,o,n,c,p,l){var g=this.getHeightOfLine(l),v=this.textAlign.indexOf("justify")!==-1,b,_,C="",w,k=0,z,N=this.path,X=!v&&this.charSpacing===0&&this.isEmptyStyles(l)&&!N,re=this.direction==="ltr",F=this.direction==="ltr"?1:-1,K,T=o.canvas.getAttribute("dir");if(o.save(),T!==this.direction&&(o.canvas.setAttribute("dir",re?"ltr":"rtl"),o.direction=re?"ltr":"rtl",o.textAlign=re?"left":"right"),p-=g*this._fontSizeFraction/this.lineHeight,X){this._renderChar(r,o,l,0,n.join(""),c,p,g),o.restore();return}for(var J=0,ue=n.length-1;J<=ue;J++)z=J===ue||this.charSpacing||N,C+=n[J],w=this.__charBounds[l][J],k===0?(c+=F*(w.kernedWidth-w.width),k+=w.width):k+=w.kernedWidth,v&&!z&&this._reSpaceAndTab.test(n[J])&&(z=!0),z||(b=b||this.getCompleteStyleDeclaration(l,J),_=this.getCompleteStyleDeclaration(l,J+1),z=i.util.hasStyleChanged(b,_,!1)),z&&(N?(o.save(),o.translate(w.renderLeft,w.renderTop),o.rotate(w.angle),this._renderChar(r,o,l,J,C,-k/2,0,g),o.restore()):(K=c,this._renderChar(r,o,l,J,C,K,p,g)),C="",b=_,c+=F*k,k=0);o.restore()},_applyPatternGradientTransformText:function(r){var o=i.util.createCanvasElement(),n,c=this.width+this.strokeWidth,p=this.height+this.strokeWidth;return o.width=c,o.height=p,n=o.getContext("2d"),n.beginPath(),n.moveTo(0,0),n.lineTo(c,0),n.lineTo(c,p),n.lineTo(0,p),n.closePath(),n.translate(c/2,p/2),n.fillStyle=r.toLive(n),this._applyPatternGradientTransform(n,r),n.fill(),n.createPattern(o,"no-repeat")},handleFiller:function(r,o,n){var c,p;return n.toLive?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(c=-this.width/2,p=-this.height/2,r.translate(c,p),r[o]=this._applyPatternGradientTransformText(n),{offsetX:c,offsetY:p}):(r[o]=n.toLive(r,this),this._applyPatternGradientTransform(r,n)):(r[o]=n,{offsetX:0,offsetY:0})},_setStrokeStyles:function(r,o){return r.lineWidth=o.strokeWidth,r.lineCap=this.strokeLineCap,r.lineDashOffset=this.strokeDashOffset,r.lineJoin=this.strokeLineJoin,r.miterLimit=this.strokeMiterLimit,this.handleFiller(r,"strokeStyle",o.stroke)},_setFillStyles:function(r,o){return this.handleFiller(r,"fillStyle",o.fill)},_renderChar:function(r,o,n,c,p,l,g){var v=this._getStyleDeclaration(n,c),b=this.getCompleteStyleDeclaration(n,c),_=r==="fillText"&&b.fill,C=r==="strokeText"&&b.stroke&&b.strokeWidth,w,k;!C&&!_||(o.save(),_&&(w=this._setFillStyles(o,b)),C&&(k=this._setStrokeStyles(o,b)),o.font=this._getFontDeclaration(b),v&&v.textBackgroundColor&&this._removeShadow(o),v&&v.deltaY&&(g+=v.deltaY),_&&o.fillText(p,l-w.offsetX,g-w.offsetY),C&&o.strokeText(p,l-k.offsetX,g-k.offsetY),o.restore())},setSuperscript:function(r,o){return this._setScript(r,o,this.superscript)},setSubscript:function(r,o){return this._setScript(r,o,this.subscript)},_setScript:function(r,o,n){var c=this.get2DCursorLocation(r,!0),p=this.getValueOfPropertyAt(c.lineIndex,c.charIndex,"fontSize"),l=this.getValueOfPropertyAt(c.lineIndex,c.charIndex,"deltaY"),g={fontSize:p*n.size,deltaY:l+p*n.baseline};return this.setSelectionStyles(g,r,o),this},_getLineLeftOffset:function(r){var o=this.getLineWidth(r),n=this.width-o,c=this.textAlign,p=this.direction,g,l=0,g=this.isEndOfWrapping(r);return c==="justify"||c==="justify-center"&&!g||c==="justify-right"&&!g||c==="justify-left"&&!g?0:(c==="center"&&(l=n/2),c==="right"&&(l=n),c==="justify-center"&&(l=n/2),c==="justify-right"&&(l=n),p==="rtl"&&(l-=n),l)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var r=this._forceClearCache;return r||(r=this.hasStateChanged("_dimensionAffectingProps")),r&&(this.dirty=!0,this._forceClearCache=!1),r},getLineWidth:function(r){if(this.__lineWidths[r]!==void 0)return this.__lineWidths[r];var o=this.measureLine(r),n=o.width;return this.__lineWidths[r]=n,n},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(r,o,n){var c=this._getStyleDeclaration(r,o);return c&&typeof c[n]<"u"?c[n]:this[n]},_renderTextDecoration:function(r,o){if(!(!this[o]&&!this.styleHas(o))){r.save(),(o==="overline"||o==="linethrough")&&this._removeShadow(r);for(var n,c,p,l,g,v,b,_,C=this._getLeftOffset(),w=this._getTopOffset(),k,z,N,X,re,F,K,T,J=this.path,ue=this._getWidthOfCharSpacing(),ie=this.offsets[o],ae=0,A=this._textLines.length;ae<A;ae++){if(n=this.getHeightOfLine(ae),!this[o]&&!this.styleHas(o,ae)){w+=n;continue}b=this._textLines[ae],F=n/this.lineHeight,l=this._getLineLeftOffset(ae),z=0,N=0,_=this.getValueOfPropertyAt(ae,0,o),T=this.getValueOfPropertyAt(ae,0,"fill"),k=w+F*(1-this._fontSizeFraction),c=this.getHeightOfChar(ae,0),g=this.getValueOfPropertyAt(ae,0,"deltaY");for(var W=0,R=b.length;W<R;W++)if(X=this.__charBounds[ae][W],re=this.getValueOfPropertyAt(ae,W,o),K=this.getValueOfPropertyAt(ae,W,"fill"),p=this.getHeightOfChar(ae,W),v=this.getValueOfPropertyAt(ae,W,"deltaY"),J&&re&&K)r.save(),r.fillStyle=T,r.translate(X.renderLeft,X.renderTop),r.rotate(X.angle),r.fillRect(-X.kernedWidth/2,ie*p+v,X.kernedWidth,this.fontSize/15),r.restore();else if((re!==_||K!==T||p!==c||v!==g)&&N>0){var I=C+l+z;this.direction==="rtl"&&(I=this.width-I-N),_&&T&&(r.fillStyle=T,r.fillRect(I,k+ie*c+g,N,this.fontSize/15)),z=X.left,N=X.width,_=re,T=K,c=p,g=v}else N+=X.kernedWidth;var I=C+l+z;this.direction==="rtl"&&(I=this.width-I-N),r.fillStyle=K,re&&K&&r.fillRect(I,k+ie*c+g,N-ue,this.fontSize/15),w+=n}r.restore()}},_getFontDeclaration:function(r,o){var n=r||this,c=this.fontFamily,p=i.Text.genericFonts.indexOf(c.toLowerCase())>-1,l=c===void 0||c.indexOf("'")>-1||c.indexOf(",")>-1||c.indexOf('"')>-1||p?n.fontFamily:'"'+n.fontFamily+'"';return[i.isLikelyNode?n.fontWeight:n.fontStyle,i.isLikelyNode?n.fontStyle:n.fontWeight,o?this.CACHE_FONT_SIZE+"px":n.fontSize+"px",l].join(" ")},render:function(r){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",r)))},_splitTextIntoLines:function(r){for(var o=r.split(this._reNewline),n=new Array(o.length),c=[`
`],p=[],l=0;l<o.length;l++)n[l]=i.util.string.graphemeSplit(o[l]),p=p.concat(n[l],c);return p.pop(),{_unwrappedLines:n,lines:o,graphemeText:p,graphemeLines:n}},toObject:function(r){var o=u.concat(r),n=this.callSuper("toObject",o);return n.styles=i.util.stylesToArray(this.styles,this.text),n.path&&(n.path=this.path.toObject()),n},set:function(r,o){this.callSuper("set",r,o);var n=!1,c=!1;if(typeof r=="object")for(var p in r)p==="path"&&this.setPathInfo(),n=n||this._dimensionAffectingProps.indexOf(p)!==-1,c=c||p==="path";else n=this._dimensionAffectingProps.indexOf(r)!==-1,c=r==="path";return c&&this.setPathInfo(),n&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),i.Text.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),i.Text.DEFAULT_SVG_FONT_SIZE=16,i.Text.fromElement=function(r,o,n){if(!r)return o(null);var c=i.parseAttributes(r,i.Text.ATTRIBUTE_NAMES),p=c.textAnchor||"left";if(n=i.util.object.extend(n?a(n):{},c),n.top=n.top||0,n.left=n.left||0,c.textDecoration){var l=c.textDecoration;l.indexOf("underline")!==-1&&(n.underline=!0),l.indexOf("overline")!==-1&&(n.overline=!0),l.indexOf("line-through")!==-1&&(n.linethrough=!0),delete n.textDecoration}"dx"in c&&(n.left+=c.dx),"dy"in c&&(n.top+=c.dy),"fontSize"in n||(n.fontSize=i.Text.DEFAULT_SVG_FONT_SIZE);var g="";"textContent"in r?g=r.textContent:"firstChild"in r&&r.firstChild!==null&&"data"in r.firstChild&&r.firstChild.data!==null&&(g=r.firstChild.data),g=g.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var v=n.strokeWidth;n.strokeWidth=0;var b=new i.Text(g,n),_=b.getScaledHeight()/b.height,C=(b.height+b.strokeWidth)*b.lineHeight-b.height,w=C*_,k=b.getScaledHeight()+w,z=0;p==="center"&&(z=b.getScaledWidth()/2),p==="right"&&(z=b.getScaledWidth()),b.set({left:b.left-z,top:b.top-(k-b.fontSize*(.07+b._fontSizeFraction))/b.lineHeight,strokeWidth:typeof v<"u"?v:1}),o(b)},i.Text.fromObject=function(r,o){var n=a(r),c=r.path;return delete n.path,i.Object._fromObject("Text",n,function(p){p.styles=i.util.stylesFromArray(r.styles,r.text),c?i.Object._fromObject("Path",c,function(l){p.set("path",l),o(p)},"path"):o(p)},"text")},i.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],i.util.createAccessors&&i.util.createAccessors(i.Text)}(t),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(h){if(!this.styles||typeof h<"u"&&!this.styles[h])return!0;var i=typeof h>"u"?this.styles:{line:this.styles[h]};for(var a in i)for(var u in i[a])for(var r in i[a][u])return!1;return!0},styleHas:function(h,i){if(!this.styles||!h||h===""||typeof i<"u"&&!this.styles[i])return!1;var a=typeof i>"u"?this.styles:{0:this.styles[i]};for(var u in a)for(var r in a[u])if(typeof a[u][r][h]<"u")return!0;return!1},cleanStyle:function(h){if(!this.styles||!h||h==="")return!1;var i=this.styles,a=0,u,r,o=!0,n=0,c;for(var p in i){u=0;for(var l in i[p]){var c=i[p][l],g=c.hasOwnProperty(h);a++,g?(r?c[h]!==r&&(o=!1):r=c[h],c[h]===this[h]&&delete c[h]):o=!1,Object.keys(c).length!==0?u++:delete i[p][l]}u===0&&delete i[p]}for(var v=0;v<this._textLines.length;v++)n+=this._textLines[v].length;o&&a===n&&(this[h]=r,this.removeStyle(h))},removeStyle:function(h){if(!(!this.styles||!h||h==="")){var i=this.styles,a,u,r;for(u in i){a=i[u];for(r in a)delete a[r][h],Object.keys(a[r]).length===0&&delete a[r];Object.keys(a).length===0&&delete i[u]}}},_extendStyles:function(h,i){var a=this.get2DCursorLocation(h);this._getLineStyle(a.lineIndex)||this._setLineStyle(a.lineIndex),this._getStyleDeclaration(a.lineIndex,a.charIndex)||this._setStyleDeclaration(a.lineIndex,a.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(a.lineIndex,a.charIndex),i)},get2DCursorLocation:function(h,i){typeof h>"u"&&(h=this.selectionStart);for(var a=i?this._unwrappedTextLines:this._textLines,u=a.length,r=0;r<u;r++){if(h<=a[r].length)return{lineIndex:r,charIndex:h};h-=a[r].length+this.missingNewlineOffset(r,i)}return{lineIndex:r-1,charIndex:a[r-1].length<h?a[r-1].length:h}},getSelectionStyles:function(h,i,a){typeof h>"u"&&(h=this.selectionStart||0),typeof i>"u"&&(i=this.selectionEnd||h);for(var u=[],r=h;r<i;r++)u.push(this.getStyleAtPosition(r,a));return u},getStyleAtPosition:function(h,i){var a=this.get2DCursorLocation(h),u=i?this.getCompleteStyleDeclaration(a.lineIndex,a.charIndex):this._getStyleDeclaration(a.lineIndex,a.charIndex);return u||{}},setSelectionStyles:function(h,i,a){typeof i>"u"&&(i=this.selectionStart||0),typeof a>"u"&&(a=this.selectionEnd||i);for(var u=i;u<a;u++)this._extendStyles(u,h);return this._forceClearCache=!0,this},_getStyleDeclaration:function(h,i){var a=this.styles&&this.styles[h];return a?a[i]:null},getCompleteStyleDeclaration:function(h,i){for(var a=this._getStyleDeclaration(h,i)||{},u={},r,o=0;o<this._styleProperties.length;o++)r=this._styleProperties[o],u[r]=typeof a[r]>"u"?this[r]:a[r];return u},_setStyleDeclaration:function(h,i,a){this.styles[h][i]=a},_deleteStyleDeclaration:function(h,i){delete this.styles[h][i]},_getLineStyle:function(h){return!!this.styles[h]},_setLineStyle:function(h){this.styles[h]={}},_deleteLineStyle:function(h){delete this.styles[h]}})}(),function(){function h(i){i.textDecoration&&(i.textDecoration.indexOf("underline")>-1&&(i.underline=!0),i.textDecoration.indexOf("line-through")>-1&&(i.linethrough=!0),i.textDecoration.indexOf("overline")>-1&&(i.overline=!0),delete i.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(i,a){this.callSuper("initialize",i,a),this.initBehavior()},setSelectionStart:function(i){i=Math.max(i,0),this._updateAndFire("selectionStart",i)},setSelectionEnd:function(i){i=Math.min(i,this.text.length),this._updateAndFire("selectionEnd",i)},_updateAndFire:function(i,a){this[i]!==a&&(this._fireSelectionChanged(),this[i]=a),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(i){this.clearContextTop(),this.callSuper("render",i),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(i){this.callSuper("_render",i)},clearContextTop:function(i){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var a=this.canvas.contextTop,u=this.canvas.viewportTransform;a.save(),a.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this.transform(a),this._clearTextArea(a),i||a.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var i=this._getCursorBoundaries(),a=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(i,a):this.renderSelection(i,a),a.restore()}},_clearTextArea:function(i){var a=this.width+4,u=this.height+4;i.clearRect(-a/2,-u/2,a,u)},_getCursorBoundaries:function(i){typeof i>"u"&&(i=this.selectionStart);var a=this._getLeftOffset(),u=this._getTopOffset(),r=this._getCursorBoundariesOffsets(i);return{left:a,top:u,leftOffset:r.left,topOffset:r.top}},_getCursorBoundariesOffsets:function(i){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var a,u,r,o=0,n=0,c,p=this.get2DCursorLocation(i);r=p.charIndex,u=p.lineIndex;for(var l=0;l<u;l++)o+=this.getHeightOfLine(l);a=this._getLineLeftOffset(u);var g=this.__charBounds[u][r];return g&&(n=g.left),this.charSpacing!==0&&r===this._textLines[u].length&&(n-=this._getWidthOfCharSpacing()),c={top:o,left:a+(n>0?n:0)},this.direction==="rtl"&&(c.left*=-1),this.cursorOffsetCache=c,this.cursorOffsetCache},renderCursor:function(i,a){var u=this.get2DCursorLocation(),r=u.lineIndex,o=u.charIndex>0?u.charIndex-1:0,n=this.getValueOfPropertyAt(r,o,"fontSize"),c=this.scaleX*this.canvas.getZoom(),p=this.cursorWidth/c,l=i.topOffset,g=this.getValueOfPropertyAt(r,o,"deltaY");l+=(1-this._fontSizeFraction)*this.getHeightOfLine(r)/this.lineHeight-n*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(i,a),a.fillStyle=this.cursorColor||this.getValueOfPropertyAt(r,o,"fill"),a.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,a.fillRect(i.left+i.leftOffset-p/2,l+i.top+g,p,n)},renderSelection:function(i,a){for(var u=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,r=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,o=this.textAlign.indexOf("justify")!==-1,n=this.get2DCursorLocation(u),c=this.get2DCursorLocation(r),p=n.lineIndex,l=c.lineIndex,g=n.charIndex<0?0:n.charIndex,v=c.charIndex<0?0:c.charIndex,b=p;b<=l;b++){var _=this._getLineLeftOffset(b)||0,C=this.getHeightOfLine(b),w=0,k=0,z=0;if(b===p&&(k=this.__charBounds[p][g].left),b>=p&&b<l)z=o&&!this.isEndOfWrapping(b)?this.width:this.getLineWidth(b)||5;else if(b===l)if(v===0)z=this.__charBounds[l][v].left;else{var N=this._getWidthOfCharSpacing();z=this.__charBounds[l][v-1].left+this.__charBounds[l][v-1].width-N}w=C,(this.lineHeight<1||b===l&&this.lineHeight>1)&&(C/=this.lineHeight);var X=i.left+_+k,re=z-k,F=C,K=0;this.inCompositionMode?(a.fillStyle=this.compositionColor||"black",F=1,K=C):a.fillStyle=this.selectionColor,this.direction==="rtl"&&(X=this.width-X-re),a.fillRect(X,i.top+i.topOffset+K,re,F),i.topOffset+=w}},getCurrentCharFontSize:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fontSize")},getCurrentCharColor:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fill")},_getCurrentCharIndex:function(){var i=this.get2DCursorLocation(this.selectionStart,!0),a=i.charIndex>0?i.charIndex-1:0;return{l:i.lineIndex,c:a}}}),e.IText.fromObject=function(i,a){var u=e.util.stylesFromArray(i.styles,i.text),r=Object.assign({},i,{styles:u});if(delete r.path,h(r),r.styles)for(var o in r.styles)for(var n in r.styles[o])h(r.styles[o][n]);e.Object._fromObject("IText",r,function(c){i.path?e.Object._fromObject("Path",i.path,function(p){c.set("path",p),a(c)},"path"):a(c)},"text")}}(),function(){var h=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var i=this;this.on("added",function(){var a=i.canvas;a&&(a._hasITextHandlers||(a._hasITextHandlers=!0,i._initCanvasHandlers(a)),a._iTextInstances=a._iTextInstances||[],a._iTextInstances.push(i))})},initRemovedHandler:function(){var i=this;this.on("removed",function(){var a=i.canvas;a&&(a._iTextInstances=a._iTextInstances||[],e.util.removeFromArray(a._iTextInstances,i),a._iTextInstances.length===0&&(a._hasITextHandlers=!1,i._removeCanvasHandlers(a)))})},_initCanvasHandlers:function(i){i._mouseUpITextHandler=function(){i._iTextInstances&&i._iTextInstances.forEach(function(a){a.__isMousedown=!1})},i.on("mouse:up",i._mouseUpITextHandler)},_removeCanvasHandlers:function(i){i.off("mouse:up",i._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(i,a,u,r){var o;return o={isAborted:!1,abort:function(){this.isAborted=!0}},i.animate("_currentCursorOpacity",a,{duration:u,onComplete:function(){o.isAborted||i[r]()},onChange:function(){i.canvas&&i.selectionStart===i.selectionEnd&&i.renderCursorOrSelection()},abort:function(){return o.isAborted}}),o},_onTickComplete:function(){var i=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){i._currentTickCompleteState=i._animateCursor(i,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(i){var a=this,u=i?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){a._tick()},u)},abortCursorAnimation:function(){var i=this._currentTickState||this._currentTickCompleteState,a=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,i&&a&&a.clearContext(a.contextTop||a.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(i){var a=0,u=i-1;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)a++,u--;for(;/\S/.test(this._text[u])&&u>-1;)a++,u--;return i-a},findWordBoundaryRight:function(i){var a=0,u=i;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)a++,u++;for(;/\S/.test(this._text[u])&&u<this._text.length;)a++,u++;return i+a},findLineBoundaryLeft:function(i){for(var a=0,u=i-1;!/\n/.test(this._text[u])&&u>-1;)a++,u--;return i-a},findLineBoundaryRight:function(i){for(var a=0,u=i;!/\n/.test(this._text[u])&&u<this._text.length;)a++,u++;return i+a},searchWordBoundary:function(i,a){for(var u=this._text,r=this._reSpace.test(u[i])?i-1:i,o=u[r],n=e.reNonWord;!n.test(o)&&r>0&&r<u.length;)r+=a,o=u[r];return n.test(o)&&(r+=a===1?0:1),r},selectWord:function(i){i=i||this.selectionStart;var a=this.searchWordBoundary(i,-1),u=this.searchWordBoundary(i,1);this.selectionStart=a,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(i){i=i||this.selectionStart;var a=this.findLineBoundaryLeft(i),u=this.findLineBoundaryRight(i);return this.selectionStart=a,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(i){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(i),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(i){i._iTextInstances&&i._iTextInstances.forEach(function(a){a.selected=!1,a.isEditing&&a.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(i){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var a=this.getSelectionStartFromPointer(i.e),u=this.selectionStart,r=this.selectionEnd;(a!==this.__selectionStartOnMouseDown||u===r)&&(u===a||r===a)||(a>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=a):(this.selectionStart=a,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==u||this.selectionEnd!==r)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(i,a,u){var r=u.slice(0,i),o=e.util.string.graphemeSplit(r).length;if(i===a)return{selectionStart:o,selectionEnd:o};var n=u.slice(i,a),c=e.util.string.graphemeSplit(n).length;return{selectionStart:o,selectionEnd:o+c}},fromGraphemeToStringSelection:function(i,a,u){var r=u.slice(0,i),o=r.join("").length;if(i===a)return{selectionStart:o,selectionEnd:o};var n=u.slice(i,a),c=n.join("").length;return{selectionStart:o,selectionEnd:o+c}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var i=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=i.selectionStart,this.hiddenTextarea.selectionEnd=i.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var i=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=i.selectionEnd,this.inCompositionMode||(this.selectionStart=i.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var i=this._calcTextareaPosition();this.hiddenTextarea.style.left=i.left,this.hiddenTextarea.style.top=i.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var i=this.inCompositionMode?this.compositionStart:this.selectionStart,a=this._getCursorBoundaries(i),u=this.get2DCursorLocation(i),r=u.lineIndex,o=u.charIndex,n=this.getValueOfPropertyAt(r,o,"fontSize")*this.lineHeight,c=a.leftOffset,p=this.calcTransformMatrix(),l={x:a.left+c,y:a.top+a.topOffset+n},g=this.canvas.getRetinaScaling(),v=this.canvas.upperCanvasEl,b=v.width/g,_=v.height/g,C=b-n,w=_-n,k=v.clientWidth/b,z=v.clientHeight/_;return l=e.util.transformPoint(l,p),l=e.util.transformPoint(l,this.canvas.viewportTransform),l.x*=k,l.y*=z,l.x<0&&(l.x=0),l.x>C&&(l.x=C),l.y<0&&(l.y=0),l.y>w&&(l.y=w),l.x+=this.canvas._offset.left,l.y+=this.canvas._offset.top,{left:l.x+"px",top:l.y+"px",fontSize:n+"px",charHeight:n}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var i=this._textBeforeEdit!==this.text,a=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,a&&(a.blur&&a.blur(),a.parentNode&&a.parentNode.removeChild(a)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),i&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),i&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var i in this.styles)this._textLines[i]||delete this.styles[i]},removeStyleFromTo:function(i,a){var u=this.get2DCursorLocation(i,!0),r=this.get2DCursorLocation(a,!0),o=u.lineIndex,n=u.charIndex,c=r.lineIndex,p=r.charIndex,l,g;if(o!==c){if(this.styles[o])for(l=n;l<this._unwrappedTextLines[o].length;l++)delete this.styles[o][l];if(this.styles[c])for(l=p;l<this._unwrappedTextLines[c].length;l++)g=this.styles[c][l],g&&(this.styles[o]||(this.styles[o]={}),this.styles[o][n+l-p]=g);for(l=o+1;l<=c;l++)delete this.styles[l];this.shiftLineStyles(c,o-c)}else if(this.styles[o]){g=this.styles[o];var v=p-n,b,_;for(l=n;l<p;l++)delete g[l];for(_ in this.styles[o])b=parseInt(_,10),b>=p&&(g[b-v]=g[_],delete g[_])}},shiftLineStyles:function(i,a){var u=h(this.styles);for(var r in this.styles){var o=parseInt(r,10);o>i&&(this.styles[o+a]=u[o],u[o-a]||delete this.styles[o])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(i,a,u,r){var o,n={},c=!1,p=this._unwrappedTextLines[i].length,l=p===a;u||(u=1),this.shiftLineStyles(i,u),this.styles[i]&&(o=this.styles[i][a===0?a:a-1]);for(var g in this.styles[i]){var v=parseInt(g,10);v>=a&&(c=!0,n[v-a]=this.styles[i][g],l&&a===0||delete this.styles[i][g])}var b=!1;for(c&&!l&&(this.styles[i+u]=n,b=!0),(b||p>a)&&u--;u>0;)r&&r[u-1]?this.styles[i+u]={0:h(r[u-1])}:o?this.styles[i+u]={0:h(o)}:delete this.styles[i+u],u--;this._forceClearCache=!0},insertCharStyleObject:function(i,a,u,r){this.styles||(this.styles={});var o=this.styles[i],n=o?h(o):{};u||(u=1);for(var c in n){var p=parseInt(c,10);p>=a&&(o[p+u]=n[p],n[p-u]||delete o[p])}if(this._forceClearCache=!0,r){for(;u--;)Object.keys(r[u]).length&&(this.styles[i]||(this.styles[i]={}),this.styles[i][a+u]=h(r[u]));return}if(o)for(var l=o[a?a-1:1];l&&u--;)this.styles[i][a+u]=h(l)},insertNewStyleBlock:function(i,a,u){for(var r=this.get2DCursorLocation(a,!0),o=[0],n=0,c=0;c<i.length;c++)i[c]===`
`?(n++,o[n]=0):o[n]++;o[0]>0&&(this.insertCharStyleObject(r.lineIndex,r.charIndex,o[0],u),u=u&&u.slice(o[0]+1)),n&&this.insertNewlineStyleObject(r.lineIndex,r.charIndex+o[0],n);for(var c=1;c<n;c++)o[c]>0?this.insertCharStyleObject(r.lineIndex+c,0,o[c],u):u&&this.styles[r.lineIndex+c]&&u[0]&&(this.styles[r.lineIndex+c][0]=u[0]),u=u&&u.slice(o[c]+1);o[c]>0&&this.insertCharStyleObject(r.lineIndex+c,0,o[c],u)},setSelectionStartEndWithShift:function(i,a,u){u<=i?(a===i?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=i),this.selectionStart=u):u>i&&u<a?this._selectionDirection==="right"?this.selectionEnd=u:this.selectionStart=u:(a===i?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=a),this.selectionEnd=u)},setSelectionInBoundaries:function(){var i=this.text.length;this.selectionStart>i?this.selectionStart=i:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>i?this.selectionEnd=i:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(h){if(this.canvas){this.__newClickTime=+new Date;var i=h.pointer;this.isTripleClick(i)&&(this.fire("tripleclick",h),this._stopEvent(h.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=i,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(h){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===h.x&&this.__lastPointer.y===h.y},_stopEvent:function(h){h.preventDefault&&h.preventDefault(),h.stopPropagation&&h.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(h){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(h.e))},tripleClickHandler:function(h){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(h.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(h){!this.canvas||!this.editable||h.e.button&&h.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(h.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(h){!this.canvas||!this.editable||h.e.button&&h.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(h){if(this.__isMousedown=!1,!(!this.editable||this.group||h.transform&&h.transform.actionPerformed||h.e.button&&h.e.button!==1)){if(this.canvas){var i=this.canvas._activeObject;if(i&&i!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(h.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(h){var i=this.getSelectionStartFromPointer(h),a=this.selectionStart,u=this.selectionEnd;h.shiftKey?this.setSelectionStartEndWithShift(a,u,i):(this.selectionStart=i,this.selectionEnd=i),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(h){for(var i=this.getLocalPointer(h),a=0,u=0,r=0,o=0,n=0,c,p,l=0,g=this._textLines.length;l<g&&r<=i.y;l++)r+=this.getHeightOfLine(l)*this.scaleY,n=l,l>0&&(o+=this._textLines[l-1].length+this.missingNewlineOffset(l-1));c=this._getLineLeftOffset(n),u=c*this.scaleX,p=this._textLines[n],this.direction==="rtl"&&(i.x=this.width*this.scaleX-i.x+u);for(var v=0,b=p.length;v<b&&(a=u,u+=this.__charBounds[n][v].kernedWidth*this.scaleX,u<=i.x);v++)o++;return this._getNewSelectionStartFromOffset(i,a,u,o,b)},_getNewSelectionStartFromOffset:function(h,i,a,u,r){var o=h.x-i,n=a-h.x,c=n>o||n<0?0:1,p=u+c;return this.flipX&&(p=r-p),p>this._text.length&&(p=this._text.length),p}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var h=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+h.top+"; left: "+h.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+h.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(h){if(this.isEditing){var i=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(h.keyCode in i)this[i[h.keyCode]](h);else if(h.keyCode in this.ctrlKeysMapDown&&(h.ctrlKey||h.metaKey))this[this.ctrlKeysMapDown[h.keyCode]](h);else return;h.stopImmediatePropagation(),h.preventDefault(),h.keyCode>=33&&h.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(h){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(h.keyCode in this.ctrlKeysMapUp&&(h.ctrlKey||h.metaKey))this[this.ctrlKeysMapUp[h.keyCode]](h);else return;h.stopImmediatePropagation(),h.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(h){var i=this.fromPaste;if(this.fromPaste=!1,h&&h.stopPropagation(),!!this.isEditing){var a=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,u=this._text.length,r=a.length,o,n,c=r-u,p=this.selectionStart,l=this.selectionEnd,g=p!==l,v,b,_;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var C=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),w=p>C.selectionStart;g?(o=this._text.slice(p,l),c+=l-p):r<u&&(w?o=this._text.slice(l+c,l):o=this._text.slice(p,p-c)),n=a.slice(C.selectionEnd-c,C.selectionEnd),o&&o.length&&(n.length&&(v=this.getSelectionStyles(p,p+1,!1),v=n.map(function(){return v[0]})),g?(b=p,_=l):w?(b=l-o.length,_=l):(b=l,_=l+o.length),this.removeStyleFromTo(b,_)),n.length&&(i&&n.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(v=e.copiedTextStyle),this.insertNewStyleBlock(n,p,v)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(h){this.compositionStart=h.target.selectionStart,this.compositionEnd=h.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(h){return h&&h.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(h,i){var a=this._getLineLeftOffset(h),u;return i>0&&(u=this.__charBounds[h][i-1],a+=u.left+u.width),a},getDownCursorOffset:function(h,i){var a=this._getSelectionForOffset(h,i),u=this.get2DCursorLocation(a),r=u.lineIndex;if(r===this._textLines.length-1||h.metaKey||h.keyCode===34)return this._text.length-a;var o=u.charIndex,n=this._getWidthBeforeCursor(r,o),c=this._getIndexOnLine(r+1,n),p=this._textLines[r].slice(o);return p.length+c+1+this.missingNewlineOffset(r)},_getSelectionForOffset:function(h,i){return h.shiftKey&&this.selectionStart!==this.selectionEnd&&i?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(h,i){var a=this._getSelectionForOffset(h,i),u=this.get2DCursorLocation(a),r=u.lineIndex;if(r===0||h.metaKey||h.keyCode===33)return-a;var o=u.charIndex,n=this._getWidthBeforeCursor(r,o),c=this._getIndexOnLine(r-1,n),p=this._textLines[r].slice(0,o),l=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+c-p.length+(1-l)},_getIndexOnLine:function(h,i){for(var a=this._textLines[h],u=this._getLineLeftOffset(h),r=u,o=0,n,c,p=0,l=a.length;p<l;p++)if(n=this.__charBounds[h][p].width,r+=n,r>i){c=!0;var g=r-n,v=r,b=Math.abs(g-i),_=Math.abs(v-i);o=_<b?p:p-1;break}return c||(o=a.length-1),o},moveCursorDown:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",h)},moveCursorUp:function(h){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",h)},_moveCursorUpOrDown:function(h,i){var a="get"+h+"CursorOffset",u=this[a](i,this._selectionDirection==="right");i.shiftKey?this.moveCursorWithShift(u):this.moveCursorWithoutShift(u),u!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(h){var i=this._selectionDirection==="left"?this.selectionStart+h:this.selectionEnd+h;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,i),h!==0},moveCursorWithoutShift:function(h){return h<0?(this.selectionStart+=h,this.selectionEnd=this.selectionStart):(this.selectionEnd+=h,this.selectionStart=this.selectionEnd),h!==0},moveCursorLeft:function(h){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",h)},_move:function(h,i,a){var u;if(h.altKey)u=this["findWordBoundary"+a](this[i]);else if(h.metaKey||h.keyCode===35||h.keyCode===36)u=this["findLineBoundary"+a](this[i]);else return this[i]+=a==="Left"?-1:1,!0;if(typeof u<"u"&&this[i]!==u)return this[i]=u,!0},_moveLeft:function(h,i){return this._move(h,i,"Left")},_moveRight:function(h,i){return this._move(h,i,"Right")},moveCursorLeftWithoutShift:function(h){var i=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(i=this._moveLeft(h,"selectionStart")),this.selectionEnd=this.selectionStart,i},moveCursorLeftWithShift:function(h){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(h,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(h,"selectionStart")},moveCursorRight:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",h)},_moveCursorLeftOrRight:function(h,i){var a="moveCursor"+h+"With";this._currentCursorOpacity=1,i.shiftKey?a+="Shift":a+="outShift",this[a](i)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(h){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(h,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(h,"selectionEnd")},moveCursorRightWithoutShift:function(h){var i=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(i=this._moveRight(h,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,i},removeChars:function(h,i){typeof i>"u"&&(i=h+1),this.removeStyleFromTo(h,i),this._text.splice(h,i-h),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(h,i,a,u){typeof u>"u"&&(u=a),u>a&&this.removeStyleFromTo(a,u);var r=e.util.string.graphemeSplit(h);this.insertNewStyleBlock(r,a,i),this._text=[].concat(this._text.slice(0,a),r,this._text.slice(u)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var h=e.util.toFixed,i=e.util.radiansToDegrees,a=e.util.calcRotateMatrix,u=e.util.transformPoint,r=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var o=this._getSVGLeftTopOffsets(),n=this._getSVGTextAndBg(o.textTop,o.textLeft);return this._wrapSVGTextAndBg(n)},toSVG:function(o){var n=this._createBaseSVGMarkup(this._toSVG(),{reviver:o,noStyle:!0,withShadow:!0}),c=this.path;return c?n+c._createBaseSVGMarkup(c._toSVG(),{reviver:o,withShadow:!0}):n},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(o){var n=!0,c=this.getSvgTextDecoration(this);return[o.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",c?'text-decoration="'+c+'" ':"",'style="',this.getSvgStyles(n),'"',this.addPaintOrder()," >",o.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(o,n){var c=[],p=[],l=o,g;this._setSVGBg(p);for(var v=0,b=this._textLines.length;v<b;v++)g=this._getLineLeftOffset(v),(this.textBackgroundColor||this.styleHas("textBackgroundColor",v))&&this._setSVGTextLineBg(p,v,n+g,l),this._setSVGTextLineText(c,v,n+g,l),l+=this.getHeightOfLine(v);return{textSpans:c,textBgRects:p}},_createTextCharSpan:function(o,n,c,p,l){var g=o!==o.trim()||o.match(r),v=this.getSvgSpanStyles(n,g),b=v?'style="'+v+'"':"",_=n.deltaY,C="",w=e.Object.NUM_FRACTION_DIGITS,k="";if(_&&(C=' dy="'+h(_,w)+'" '),l.renderLeft!==void 0){var z=l.angle;k=' rotate="'+h(i(z),e.Object.NUM_FRACTION_DIGITS)+'" ';var N=l.width/2,X=a({angle:i(z)});X[4]=l.renderLeft,X[5]=l.renderTop;var re=u({x:-N,y:0},X);c=re.x,p=re.y}return['<tspan x="',h(c,w),'" y="',h(p,w),'" ',C,b,k,">",e.util.string.escapeXml(o),"</tspan>"].join("")},_setSVGTextLineText:function(o,n,c,p){var l=this.getHeightOfLine(n),g=this.textAlign.indexOf("justify")!==-1,v,b,_="",C,w,k=0,z=this._textLines[n],N;p+=l*(1-this._fontSizeFraction)/this.lineHeight;for(var X=0,re=z.length-1;X<=re;X++)N=X===re||this.charSpacing||this.path,_+=z[X],C=this.__charBounds[n][X],k===0?(c+=C.kernedWidth-C.width,k+=C.width):k+=C.kernedWidth,g&&!N&&this._reSpaceAndTab.test(z[X])&&(N=!0),N||(v=v||this.getCompleteStyleDeclaration(n,X),b=this.getCompleteStyleDeclaration(n,X+1),N=e.util.hasStyleChanged(v,b,!0)),N&&(w=this._getStyleDeclaration(n,X)||{},o.push(this._createTextCharSpan(_,w,c,p,C)),_="",v=b,c+=k,k=0)},_pushTextBgRect:function(o,n,c,p,l,g){var v=e.Object.NUM_FRACTION_DIGITS;o.push("		<rect ",this._getFillAttributes(n),' x="',h(c,v),'" y="',h(p,v),'" width="',h(l,v),'" height="',h(g,v),`"></rect>
`)},_setSVGTextLineBg:function(o,n,c,p){for(var l=this._textLines[n],g=this.getHeightOfLine(n)/this.lineHeight,v=0,b=0,_,C,w=this.getValueOfPropertyAt(n,0,"textBackgroundColor"),k=0,z=l.length;k<z;k++)_=this.__charBounds[n][k],C=this.getValueOfPropertyAt(n,k,"textBackgroundColor"),C!==w?(w&&this._pushTextBgRect(o,w,c+b,p,v,g),b=_.left,v=_.width,w=C):v+=_.kernedWidth;C&&this._pushTextBgRect(o,C,c+b,p,v,g)},_getFillAttributes:function(o){var n=o&&typeof o=="string"?new e.Color(o):"";return!n||!n.getSource()||n.getAlpha()===1?'fill="'+o+'"':'opacity="'+n.getAlpha()+'" fill="'+n.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(o){for(var n=0,c=0,p=0;p<o;p++)n+=this.getHeightOfLine(p);return c=this.getHeightOfLine(p),{lineTop:n,offset:(this._fontSizeMult-this._fontSizeFraction)*c/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(o){var n=e.Object.prototype.getSvgStyles.call(this,o);return n+" white-space: pre;"}})}(),function(h){var i=h.fabric||(h.fabric={});i.Textbox=i.util.createClass(i.IText,i.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:i.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(a){for(var u=0,r=0,o=0,n={},c=0;c<a.graphemeLines.length;c++)a.graphemeText[o]===`
`&&c>0?(r=0,o++,u++):!this.splitByGrapheme&&this._reSpaceAndTab.test(a.graphemeText[o])&&c>0&&(r++,o++),n[c]={line:u,offset:r},o+=a.graphemeLines[c].length,r+=a.graphemeLines[c].length;return n},styleHas:function(a,u){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[u];r&&(u=r.line)}return i.Text.prototype.styleHas.call(this,a,u)},isEmptyStyles:function(a){if(!this.styles)return!0;var u=0,r=a+1,o,n,c=!1,p=this._styleMap[a],l=this._styleMap[a+1];p&&(a=p.line,u=p.offset),l&&(r=l.line,c=r===a,o=l.offset),n=typeof a>"u"?this.styles:{line:this.styles[a]};for(var g in n)for(var v in n[g])if(v>=u&&(!c||v<o))for(var b in n[g][v])return!1;return!0},_getStyleDeclaration:function(a,u){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[a];if(!r)return null;a=r.line,u=r.offset+u}return this.callSuper("_getStyleDeclaration",a,u)},_setStyleDeclaration:function(a,u,r){var o=this._styleMap[a];a=o.line,u=o.offset+u,this.styles[a][u]=r},_deleteStyleDeclaration:function(a,u){var r=this._styleMap[a];a=r.line,u=r.offset+u,delete this.styles[a][u]},_getLineStyle:function(a){var u=this._styleMap[a];return!!this.styles[u.line]},_setLineStyle:function(a){var u=this._styleMap[a];this.styles[u.line]={}},_wrapText:function(a,u){var r=[],o;for(this.isWrapping=!0,o=0;o<a.length;o++)r=r.concat(this._wrapLine(a[o],o,u));return this.isWrapping=!1,r},_measureWord:function(a,u,r){var o=0,n,c=!0;r=r||0;for(var p=0,l=a.length;p<l;p++){var g=this._getGraphemeBox(a[p],u,p+r,n,c);o+=g.kernedWidth,n=a[p]}return o},_wrapLine:function(a,u,r,X){var n=0,c=this.splitByGrapheme,p=[],l=[],g=c?i.util.string.graphemeSplit(a):a.split(this._wordJoiners),v="",b=0,_=c?"":" ",C=0,w=0,k=0,z=!0,N=this._getWidthOfCharSpacing(),X=X||0;g.length===0&&g.push([]),r-=X;for(var re=0;re<g.length;re++)v=c?g[re]:i.util.string.graphemeSplit(g[re]),C=this._measureWord(v,u,b),b+=v.length,n+=w+C-N,n>r&&!z?(p.push(l),l=[],n=C,z=!0):n+=N,!z&&!c&&l.push(_),l=l.concat(v),w=c?0:this._measureWord([_],u,b),b++,z=!1,C>k&&(k=C);return re&&p.push(l),k+X>this.dynamicMinWidth&&(this.dynamicMinWidth=k-N+X),p},isEndOfWrapping:function(a){return!this._styleMap[a+1]||this._styleMap[a+1].line!==this._styleMap[a].line},missingNewlineOffset:function(a,u){return this.splitByGrapheme&&!u?this.isEndOfWrapping(a)?1:0:1},_splitTextIntoLines:function(a){for(var u=i.Text.prototype._splitTextIntoLines.call(this,a),r=this._wrapText(u.lines,this.width),o=new Array(r.length),n=0;n<r.length;n++)o[n]=r[n].join("");return u.lines=o,u.graphemeLines=r,u},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var a={};for(var u in this._styleMap)this._textLines[u]&&(a[this._styleMap[u].line]=1);for(var u in this.styles)a[u]||delete this.styles[u]},toObject:function(a){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(a))}}),i.Textbox.fromObject=function(a,u){var r=i.util.stylesFromArray(a.styles,a.text),o=Object.assign({},a,{styles:r});return delete o.path,i.Object._fromObject("Textbox",o,function(n){a.path?i.Object._fromObject("Path",a.path,function(c){n.set("path",c),u(n)},"path"):u(n)},"text")}}(t),function(){var h=e.controlsUtils,i=h.scaleSkewCursorStyleHandler,a=h.scaleCursorStyleHandler,u=h.scalingEqually,r=h.scalingYOrSkewingX,o=h.scalingXOrSkewingY,n=h.scaleOrSkewActionName,c=e.Object.prototype.controls;if(c.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:i,actionHandler:o,getActionName:n}),c.mr=new e.Control({x:.5,y:0,cursorStyleHandler:i,actionHandler:o,getActionName:n}),c.mb=new e.Control({x:0,y:.5,cursorStyleHandler:i,actionHandler:r,getActionName:n}),c.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:i,actionHandler:r,getActionName:n}),c.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:a,actionHandler:u}),c.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:a,actionHandler:u}),c.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:a,actionHandler:u}),c.br=new e.Control({x:.5,y:.5,cursorStyleHandler:a,actionHandler:u}),c.mtr=new e.Control({x:0,y:-.5,actionHandler:h.rotationWithSnapping,cursorStyleHandler:h.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var p=e.Textbox.prototype.controls={};p.mtr=c.mtr,p.tr=c.tr,p.br=c.br,p.tl=c.tl,p.bl=c.bl,p.mt=c.mt,p.mb=c.mb,p.mr=new e.Control({x:.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:i,actionName:"resizing"}),p.ml=new e.Control({x:-.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:i,actionName:"resizing"})}}()})(ve);const nm=[],rm={items:nm};const Gc=(t,e)=>{const s=t.__vccOpts||t;for(const[d,f]of e)s[d]=f;return s};function vn(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qc={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(s){t.exports=s()})(function(){return function s(d,f,m){function y(a,u){if(!f[a]){if(!d[a]){var r=typeof vn=="function"&&vn;if(!u&&r)return r(a,!0);if(h)return h(a,!0);var o=new Error("Cannot find module '"+a+"'");throw o.code="MODULE_NOT_FOUND",o}var n=f[a]={exports:{}};d[a][0].call(n.exports,function(c){var p=d[a][1][c];return y(p||c)},n,n.exports,s,d,f,m)}return f[a].exports}for(var h=typeof vn=="function"&&vn,i=0;i<m.length;i++)y(m[i]);return y}({1:[function(s,d,f){var m=s("./utils"),y=s("./support"),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";f.encode=function(i){for(var a,u,r,o,n,c,p,l=[],g=0,v=i.length,b=v,_=m.getTypeOf(i)!=="string";g<i.length;)b=v-g,r=_?(a=i[g++],u=g<v?i[g++]:0,g<v?i[g++]:0):(a=i.charCodeAt(g++),u=g<v?i.charCodeAt(g++):0,g<v?i.charCodeAt(g++):0),o=a>>2,n=(3&a)<<4|u>>4,c=1<b?(15&u)<<2|r>>6:64,p=2<b?63&r:64,l.push(h.charAt(o)+h.charAt(n)+h.charAt(c)+h.charAt(p));return l.join("")},f.decode=function(i){var a,u,r,o,n,c,p=0,l=0,g="data:";if(i.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var v,b=3*(i=i.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(i.charAt(i.length-1)===h.charAt(64)&&b--,i.charAt(i.length-2)===h.charAt(64)&&b--,b%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=y.uint8array?new Uint8Array(0|b):new Array(0|b);p<i.length;)a=h.indexOf(i.charAt(p++))<<2|(o=h.indexOf(i.charAt(p++)))>>4,u=(15&o)<<4|(n=h.indexOf(i.charAt(p++)))>>2,r=(3&n)<<6|(c=h.indexOf(i.charAt(p++))),v[l++]=a,n!==64&&(v[l++]=u),c!==64&&(v[l++]=r);return v}},{"./support":30,"./utils":32}],2:[function(s,d,f){var m=s("./external"),y=s("./stream/DataWorker"),h=s("./stream/Crc32Probe"),i=s("./stream/DataLengthProbe");function a(u,r,o,n,c){this.compressedSize=u,this.uncompressedSize=r,this.crc32=o,this.compression=n,this.compressedContent=c}a.prototype={getContentWorker:function(){var u=new y(m.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new i("data_length")),r=this;return u.on("end",function(){if(this.streamInfo.data_length!==r.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new y(m.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(u,r,o){return u.pipe(new h).pipe(new i("uncompressedSize")).pipe(r.compressWorker(o)).pipe(new i("compressedSize")).withStreamInfo("compression",r)},d.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(s,d,f){var m=s("./stream/GenericWorker");f.STORE={magic:"\0\0",compressWorker:function(){return new m("STORE compression")},uncompressWorker:function(){return new m("STORE decompression")}},f.DEFLATE=s("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(s,d,f){var m=s("./utils"),y=function(){for(var h,i=[],a=0;a<256;a++){h=a;for(var u=0;u<8;u++)h=1&h?3988292384^h>>>1:h>>>1;i[a]=h}return i}();d.exports=function(h,i){return h!==void 0&&h.length?m.getTypeOf(h)!=="string"?function(a,u,r,o){var n=y,c=o+r;a^=-1;for(var p=o;p<c;p++)a=a>>>8^n[255&(a^u[p])];return-1^a}(0|i,h,h.length,0):function(a,u,r,o){var n=y,c=o+r;a^=-1;for(var p=o;p<c;p++)a=a>>>8^n[255&(a^u.charCodeAt(p))];return-1^a}(0|i,h,h.length,0):0}},{"./utils":32}],5:[function(s,d,f){f.base64=!1,f.binary=!1,f.dir=!1,f.createFolders=!0,f.date=null,f.compression=null,f.compressionOptions=null,f.comment=null,f.unixPermissions=null,f.dosPermissions=null},{}],6:[function(s,d,f){var m=null;m=typeof Promise<"u"?Promise:s("lie"),d.exports={Promise:m}},{lie:37}],7:[function(s,d,f){var m=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",y=s("pako"),h=s("./utils"),i=s("./stream/GenericWorker"),a=m?"uint8array":"array";function u(r,o){i.call(this,"FlateWorker/"+r),this._pako=null,this._pakoAction=r,this._pakoOptions=o,this.meta={}}f.magic="\b\0",h.inherits(u,i),u.prototype.processChunk=function(r){this.meta=r.meta,this._pako===null&&this._createPako(),this._pako.push(h.transformTo(a,r.data),!1)},u.prototype.flush=function(){i.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new y[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var r=this;this._pako.onData=function(o){r.push({data:o,meta:r.meta})}},f.compressWorker=function(r){return new u("Deflate",r)},f.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(s,d,f){function m(n,c){var p,l="";for(p=0;p<c;p++)l+=String.fromCharCode(255&n),n>>>=8;return l}function y(n,c,p,l,g,v){var b,_,C=n.file,w=n.compression,k=v!==a.utf8encode,z=h.transformTo("string",v(C.name)),N=h.transformTo("string",a.utf8encode(C.name)),X=C.comment,re=h.transformTo("string",v(X)),F=h.transformTo("string",a.utf8encode(X)),K=N.length!==C.name.length,T=F.length!==X.length,J="",ue="",ie="",ae=C.dir,A=C.date,W={crc32:0,compressedSize:0,uncompressedSize:0};c&&!p||(W.crc32=n.crc32,W.compressedSize=n.compressedSize,W.uncompressedSize=n.uncompressedSize);var R=0;c&&(R|=8),k||!K&&!T||(R|=2048);var I=0,Q=0;ae&&(I|=16),g==="UNIX"?(Q=798,I|=function(P,Z){var H=P;return P||(H=Z?16893:33204),(65535&H)<<16}(C.unixPermissions,ae)):(Q=20,I|=function(P){return 63&(P||0)}(C.dosPermissions)),b=A.getUTCHours(),b<<=6,b|=A.getUTCMinutes(),b<<=5,b|=A.getUTCSeconds()/2,_=A.getUTCFullYear()-1980,_<<=4,_|=A.getUTCMonth()+1,_<<=5,_|=A.getUTCDate(),K&&(ue=m(1,1)+m(u(z),4)+N,J+="up"+m(ue.length,2)+ue),T&&(ie=m(1,1)+m(u(re),4)+F,J+="uc"+m(ie.length,2)+ie);var U="";return U+=`
\0`,U+=m(R,2),U+=w.magic,U+=m(b,2),U+=m(_,2),U+=m(W.crc32,4),U+=m(W.compressedSize,4),U+=m(W.uncompressedSize,4),U+=m(z.length,2),U+=m(J.length,2),{fileRecord:r.LOCAL_FILE_HEADER+U+z+J,dirRecord:r.CENTRAL_FILE_HEADER+m(Q,2)+U+m(re.length,2)+"\0\0\0\0"+m(I,4)+m(l,4)+z+J+re}}var h=s("../utils"),i=s("../stream/GenericWorker"),a=s("../utf8"),u=s("../crc32"),r=s("../signature");function o(n,c,p,l){i.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=c,this.zipPlatform=p,this.encodeFileName=l,this.streamFiles=n,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}h.inherits(o,i),o.prototype.push=function(n){var c=n.meta.percent||0,p=this.entriesCount,l=this._sources.length;this.accumulate?this.contentBuffer.push(n):(this.bytesWritten+=n.data.length,i.prototype.push.call(this,{data:n.data,meta:{currentFile:this.currentFile,percent:p?(c+100*(p-l-1))/p:100}}))},o.prototype.openedSource=function(n){this.currentSourceOffset=this.bytesWritten,this.currentFile=n.file.name;var c=this.streamFiles&&!n.file.dir;if(c){var p=y(n,c,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:p.fileRecord,meta:{percent:0}})}else this.accumulate=!0},o.prototype.closedSource=function(n){this.accumulate=!1;var c=this.streamFiles&&!n.file.dir,p=y(n,c,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(p.dirRecord),c)this.push({data:function(l){return r.DATA_DESCRIPTOR+m(l.crc32,4)+m(l.compressedSize,4)+m(l.uncompressedSize,4)}(n),meta:{percent:100}});else for(this.push({data:p.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},o.prototype.flush=function(){for(var n=this.bytesWritten,c=0;c<this.dirRecords.length;c++)this.push({data:this.dirRecords[c],meta:{percent:100}});var p=this.bytesWritten-n,l=function(g,v,b,_,C){var w=h.transformTo("string",C(_));return r.CENTRAL_DIRECTORY_END+"\0\0\0\0"+m(g,2)+m(g,2)+m(v,4)+m(b,4)+m(w.length,2)+w}(this.dirRecords.length,p,n,this.zipComment,this.encodeFileName);this.push({data:l,meta:{percent:100}})},o.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},o.prototype.registerPrevious=function(n){this._sources.push(n);var c=this;return n.on("data",function(p){c.processChunk(p)}),n.on("end",function(){c.closedSource(c.previous.streamInfo),c._sources.length?c.prepareNextSource():c.end()}),n.on("error",function(p){c.error(p)}),this},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},o.prototype.error=function(n){var c=this._sources;if(!i.prototype.error.call(this,n))return!1;for(var p=0;p<c.length;p++)try{c[p].error(n)}catch{}return!0},o.prototype.lock=function(){i.prototype.lock.call(this);for(var n=this._sources,c=0;c<n.length;c++)n[c].lock()},d.exports=o},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(s,d,f){var m=s("../compressions"),y=s("./ZipFileWorker");f.generateWorker=function(h,i,a){var u=new y(i.streamFiles,a,i.platform,i.encodeFileName),r=0;try{h.forEach(function(o,n){r++;var c=function(v,b){var _=v||b,C=m[_];if(!C)throw new Error(_+" is not a valid compression method !");return C}(n.options.compression,i.compression),p=n.options.compressionOptions||i.compressionOptions||{},l=n.dir,g=n.date;n._compressWorker(c,p).withStreamInfo("file",{name:o,dir:l,date:g,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(u)}),u.entriesCount=r}catch(o){u.error(o)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(s,d,f){function m(){if(!(this instanceof m))return new m;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var y=new m;for(var h in this)typeof this[h]!="function"&&(y[h]=this[h]);return y}}(m.prototype=s("./object")).loadAsync=s("./load"),m.support=s("./support"),m.defaults=s("./defaults"),m.version="3.10.1",m.loadAsync=function(y,h){return new m().loadAsync(y,h)},m.external=s("./external"),d.exports=m},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(s,d,f){var m=s("./utils"),y=s("./external"),h=s("./utf8"),i=s("./zipEntries"),a=s("./stream/Crc32Probe"),u=s("./nodejsUtils");function r(o){return new y.Promise(function(n,c){var p=o.decompressed.getContentWorker().pipe(new a);p.on("error",function(l){c(l)}).on("end",function(){p.streamInfo.crc32!==o.decompressed.crc32?c(new Error("Corrupted zip : CRC32 mismatch")):n()}).resume()})}d.exports=function(o,n){var c=this;return n=m.extend(n||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:h.utf8decode}),u.isNode&&u.isStream(o)?y.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):m.prepareContent("the loaded zip file",o,!0,n.optimizedBinaryString,n.base64).then(function(p){var l=new i(n);return l.load(p),l}).then(function(p){var l=[y.Promise.resolve(p)],g=p.files;if(n.checkCRC32)for(var v=0;v<g.length;v++)l.push(r(g[v]));return y.Promise.all(l)}).then(function(p){for(var l=p.shift(),g=l.files,v=0;v<g.length;v++){var b=g[v],_=b.fileNameStr,C=m.resolve(b.fileNameStr);c.file(C,b.decompressed,{binary:!0,optimizedBinaryString:!0,date:b.date,dir:b.dir,comment:b.fileCommentStr.length?b.fileCommentStr:null,unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions,createFolders:n.createFolders}),b.dir||(c.file(C).unsafeOriginalName=_)}return l.zipComment.length&&(c.comment=l.zipComment),c})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(s,d,f){var m=s("../utils"),y=s("../stream/GenericWorker");function h(i,a){y.call(this,"Nodejs stream input adapter for "+i),this._upstreamEnded=!1,this._bindStream(a)}m.inherits(h,y),h.prototype._bindStream=function(i){var a=this;(this._stream=i).pause(),i.on("data",function(u){a.push({data:u,meta:{percent:0}})}).on("error",function(u){a.isPaused?this.generatedError=u:a.error(u)}).on("end",function(){a.isPaused?a._upstreamEnded=!0:a.end()})},h.prototype.pause=function(){return!!y.prototype.pause.call(this)&&(this._stream.pause(),!0)},h.prototype.resume=function(){return!!y.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},d.exports=h},{"../stream/GenericWorker":28,"../utils":32}],13:[function(s,d,f){var m=s("readable-stream").Readable;function y(h,i,a){m.call(this,i),this._helper=h;var u=this;h.on("data",function(r,o){u.push(r)||u._helper.pause(),a&&a(o)}).on("error",function(r){u.emit("error",r)}).on("end",function(){u.push(null)})}s("../utils").inherits(y,m),y.prototype._read=function(){this._helper.resume()},d.exports=y},{"../utils":32,"readable-stream":16}],14:[function(s,d,f){d.exports={isNode:typeof Buffer<"u",newBufferFrom:function(m,y){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(m,y);if(typeof m=="number")throw new Error('The "data" argument must not be a number');return new Buffer(m,y)},allocBuffer:function(m){if(Buffer.alloc)return Buffer.alloc(m);var y=new Buffer(m);return y.fill(0),y},isBuffer:function(m){return Buffer.isBuffer(m)},isStream:function(m){return m&&typeof m.on=="function"&&typeof m.pause=="function"&&typeof m.resume=="function"}}},{}],15:[function(s,d,f){function m(C,w,k){var z,N=h.getTypeOf(w),X=h.extend(k||{},u);X.date=X.date||new Date,X.compression!==null&&(X.compression=X.compression.toUpperCase()),typeof X.unixPermissions=="string"&&(X.unixPermissions=parseInt(X.unixPermissions,8)),X.unixPermissions&&16384&X.unixPermissions&&(X.dir=!0),X.dosPermissions&&16&X.dosPermissions&&(X.dir=!0),X.dir&&(C=g(C)),X.createFolders&&(z=l(C))&&v.call(this,z,!0);var re=N==="string"&&X.binary===!1&&X.base64===!1;k&&k.binary!==void 0||(X.binary=!re),(w instanceof r&&w.uncompressedSize===0||X.dir||!w||w.length===0)&&(X.base64=!1,X.binary=!0,w="",X.compression="STORE",N="string");var F=null;F=w instanceof r||w instanceof i?w:c.isNode&&c.isStream(w)?new p(C,w):h.prepareContent(C,w,X.binary,X.optimizedBinaryString,X.base64);var K=new o(C,F,X);this.files[C]=K}var y=s("./utf8"),h=s("./utils"),i=s("./stream/GenericWorker"),a=s("./stream/StreamHelper"),u=s("./defaults"),r=s("./compressedObject"),o=s("./zipObject"),n=s("./generate"),c=s("./nodejsUtils"),p=s("./nodejs/NodejsStreamInputAdapter"),l=function(C){C.slice(-1)==="/"&&(C=C.substring(0,C.length-1));var w=C.lastIndexOf("/");return 0<w?C.substring(0,w):""},g=function(C){return C.slice(-1)!=="/"&&(C+="/"),C},v=function(C,w){return w=w!==void 0?w:u.createFolders,C=g(C),this.files[C]||m.call(this,C,null,{dir:!0,createFolders:w}),this.files[C]};function b(C){return Object.prototype.toString.call(C)==="[object RegExp]"}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(C){var w,k,z;for(w in this.files)z=this.files[w],(k=w.slice(this.root.length,w.length))&&w.slice(0,this.root.length)===this.root&&C(k,z)},filter:function(C){var w=[];return this.forEach(function(k,z){C(k,z)&&w.push(z)}),w},file:function(C,w,k){if(arguments.length!==1)return C=this.root+C,m.call(this,C,w,k),this;if(b(C)){var z=C;return this.filter(function(X,re){return!re.dir&&z.test(X)})}var N=this.files[this.root+C];return N&&!N.dir?N:null},folder:function(C){if(!C)return this;if(b(C))return this.filter(function(N,X){return X.dir&&C.test(N)});var w=this.root+C,k=v.call(this,w),z=this.clone();return z.root=k.name,z},remove:function(C){C=this.root+C;var w=this.files[C];if(w||(C.slice(-1)!=="/"&&(C+="/"),w=this.files[C]),w&&!w.dir)delete this.files[C];else for(var k=this.filter(function(N,X){return X.name.slice(0,C.length)===C}),z=0;z<k.length;z++)delete this.files[k[z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(C){var w,k={};try{if((k=h.extend(C||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:y.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");h.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var z=k.comment||this.comment||"";w=n.generateWorker(this,k,z)}catch(N){(w=new i("error")).error(N)}return new a(w,k.type||"string",k.mimeType)},generateAsync:function(C,w){return this.generateInternalStream(C).accumulate(w)},generateNodeStream:function(C,w){return(C=C||{}).type||(C.type="nodebuffer"),this.generateInternalStream(C).toNodejsStream(w)}};d.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(s,d,f){d.exports=s("stream")},{stream:void 0}],17:[function(s,d,f){var m=s("./DataReader");function y(h){m.call(this,h);for(var i=0;i<this.data.length;i++)h[i]=255&h[i]}s("../utils").inherits(y,m),y.prototype.byteAt=function(h){return this.data[this.zero+h]},y.prototype.lastIndexOfSignature=function(h){for(var i=h.charCodeAt(0),a=h.charCodeAt(1),u=h.charCodeAt(2),r=h.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===i&&this.data[o+1]===a&&this.data[o+2]===u&&this.data[o+3]===r)return o-this.zero;return-1},y.prototype.readAndCheckSignature=function(h){var i=h.charCodeAt(0),a=h.charCodeAt(1),u=h.charCodeAt(2),r=h.charCodeAt(3),o=this.readData(4);return i===o[0]&&a===o[1]&&u===o[2]&&r===o[3]},y.prototype.readData=function(h){if(this.checkOffset(h),h===0)return[];var i=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,i},d.exports=y},{"../utils":32,"./DataReader":18}],18:[function(s,d,f){var m=s("../utils");function y(h){this.data=h,this.length=h.length,this.index=0,this.zero=0}y.prototype={checkOffset:function(h){this.checkIndex(this.index+h)},checkIndex:function(h){if(this.length<this.zero+h||h<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+h+"). Corrupted zip ?")},setIndex:function(h){this.checkIndex(h),this.index=h},skip:function(h){this.setIndex(this.index+h)},byteAt:function(){},readInt:function(h){var i,a=0;for(this.checkOffset(h),i=this.index+h-1;i>=this.index;i--)a=(a<<8)+this.byteAt(i);return this.index+=h,a},readString:function(h){return m.transformTo("string",this.readData(h))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var h=this.readInt(4);return new Date(Date.UTC(1980+(h>>25&127),(h>>21&15)-1,h>>16&31,h>>11&31,h>>5&63,(31&h)<<1))}},d.exports=y},{"../utils":32}],19:[function(s,d,f){var m=s("./Uint8ArrayReader");function y(h){m.call(this,h)}s("../utils").inherits(y,m),y.prototype.readData=function(h){this.checkOffset(h);var i=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,i},d.exports=y},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(s,d,f){var m=s("./DataReader");function y(h){m.call(this,h)}s("../utils").inherits(y,m),y.prototype.byteAt=function(h){return this.data.charCodeAt(this.zero+h)},y.prototype.lastIndexOfSignature=function(h){return this.data.lastIndexOf(h)-this.zero},y.prototype.readAndCheckSignature=function(h){return h===this.readData(4)},y.prototype.readData=function(h){this.checkOffset(h);var i=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,i},d.exports=y},{"../utils":32,"./DataReader":18}],21:[function(s,d,f){var m=s("./ArrayReader");function y(h){m.call(this,h)}s("../utils").inherits(y,m),y.prototype.readData=function(h){if(this.checkOffset(h),h===0)return new Uint8Array(0);var i=this.data.subarray(this.zero+this.index,this.zero+this.index+h);return this.index+=h,i},d.exports=y},{"../utils":32,"./ArrayReader":17}],22:[function(s,d,f){var m=s("../utils"),y=s("../support"),h=s("./ArrayReader"),i=s("./StringReader"),a=s("./NodeBufferReader"),u=s("./Uint8ArrayReader");d.exports=function(r){var o=m.getTypeOf(r);return m.checkSupport(o),o!=="string"||y.uint8array?o==="nodebuffer"?new a(r):y.uint8array?new u(m.transformTo("uint8array",r)):new h(m.transformTo("array",r)):new i(r)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(s,d,f){f.LOCAL_FILE_HEADER="PK",f.CENTRAL_FILE_HEADER="PK",f.CENTRAL_DIRECTORY_END="PK",f.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",f.ZIP64_CENTRAL_DIRECTORY_END="PK",f.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(s,d,f){var m=s("./GenericWorker"),y=s("../utils");function h(i){m.call(this,"ConvertWorker to "+i),this.destType=i}y.inherits(h,m),h.prototype.processChunk=function(i){this.push({data:y.transformTo(this.destType,i.data),meta:i.meta})},d.exports=h},{"../utils":32,"./GenericWorker":28}],25:[function(s,d,f){var m=s("./GenericWorker"),y=s("../crc32");function h(){m.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}s("../utils").inherits(h,m),h.prototype.processChunk=function(i){this.streamInfo.crc32=y(i.data,this.streamInfo.crc32||0),this.push(i)},d.exports=h},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(s,d,f){var m=s("../utils"),y=s("./GenericWorker");function h(i){y.call(this,"DataLengthProbe for "+i),this.propName=i,this.withStreamInfo(i,0)}m.inherits(h,y),h.prototype.processChunk=function(i){if(i){var a=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=a+i.data.length}y.prototype.processChunk.call(this,i)},d.exports=h},{"../utils":32,"./GenericWorker":28}],27:[function(s,d,f){var m=s("../utils"),y=s("./GenericWorker");function h(i){y.call(this,"DataWorker");var a=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,i.then(function(u){a.dataIsReady=!0,a.data=u,a.max=u&&u.length||0,a.type=m.getTypeOf(u),a.isPaused||a._tickAndRepeat()},function(u){a.error(u)})}m.inherits(h,y),h.prototype.cleanUp=function(){y.prototype.cleanUp.call(this),this.data=null},h.prototype.resume=function(){return!!y.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,m.delay(this._tickAndRepeat,[],this)),!0)},h.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(m.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},h.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var i=null,a=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":i=this.data.substring(this.index,a);break;case"uint8array":i=this.data.subarray(this.index,a);break;case"array":case"nodebuffer":i=this.data.slice(this.index,a)}return this.index=a,this.push({data:i,meta:{percent:this.max?this.index/this.max*100:0}})},d.exports=h},{"../utils":32,"./GenericWorker":28}],28:[function(s,d,f){function m(y){this.name=y||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}m.prototype={push:function(y){this.emit("data",y)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(y){this.emit("error",y)}return!0},error:function(y){return!this.isFinished&&(this.isPaused?this.generatedError=y:(this.isFinished=!0,this.emit("error",y),this.previous&&this.previous.error(y),this.cleanUp()),!0)},on:function(y,h){return this._listeners[y].push(h),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(y,h){if(this._listeners[y])for(var i=0;i<this._listeners[y].length;i++)this._listeners[y][i].call(this,h)},pipe:function(y){return y.registerPrevious(this)},registerPrevious:function(y){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=y.streamInfo,this.mergeStreamInfo(),this.previous=y;var h=this;return y.on("data",function(i){h.processChunk(i)}),y.on("end",function(){h.end()}),y.on("error",function(i){h.error(i)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var y=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),y=!0),this.previous&&this.previous.resume(),!y},flush:function(){},processChunk:function(y){this.push(y)},withStreamInfo:function(y,h){return this.extraStreamInfo[y]=h,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var y in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,y)&&(this.streamInfo[y]=this.extraStreamInfo[y])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var y="Worker "+this.name;return this.previous?this.previous+" -> "+y:y}},d.exports=m},{}],29:[function(s,d,f){var m=s("../utils"),y=s("./ConvertWorker"),h=s("./GenericWorker"),i=s("../base64"),a=s("../support"),u=s("../external"),r=null;if(a.nodestream)try{r=s("../nodejs/NodejsStreamOutputAdapter")}catch{}function o(c,p){return new u.Promise(function(l,g){var v=[],b=c._internalType,_=c._outputType,C=c._mimeType;c.on("data",function(w,k){v.push(w),p&&p(k)}).on("error",function(w){v=[],g(w)}).on("end",function(){try{var w=function(k,z,N){switch(k){case"blob":return m.newBlob(m.transformTo("arraybuffer",z),N);case"base64":return i.encode(z);default:return m.transformTo(k,z)}}(_,function(k,z){var N,X=0,re=null,F=0;for(N=0;N<z.length;N++)F+=z[N].length;switch(k){case"string":return z.join("");case"array":return Array.prototype.concat.apply([],z);case"uint8array":for(re=new Uint8Array(F),N=0;N<z.length;N++)re.set(z[N],X),X+=z[N].length;return re;case"nodebuffer":return Buffer.concat(z);default:throw new Error("concat : unsupported type '"+k+"'")}}(b,v),C);l(w)}catch(k){g(k)}v=[]}).resume()})}function n(c,p,l){var g=p;switch(p){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=p,this._mimeType=l,m.checkSupport(g),this._worker=c.pipe(new y(g)),c.lock()}catch(v){this._worker=new h("error"),this._worker.error(v)}}n.prototype={accumulate:function(c){return o(this,c)},on:function(c,p){var l=this;return c==="data"?this._worker.on(c,function(g){p.call(l,g.data,g.meta)}):this._worker.on(c,function(){m.delay(p,arguments,l)}),this},resume:function(){return m.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(c){if(m.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new r(this,{objectMode:this._outputType!=="nodebuffer"},c)}},d.exports=n},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(s,d,f){if(f.base64=!0,f.array=!0,f.string=!0,f.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",f.nodebuffer=typeof Buffer<"u",f.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")f.blob=!1;else{var m=new ArrayBuffer(0);try{f.blob=new Blob([m],{type:"application/zip"}).size===0}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);y.append(m),f.blob=y.getBlob("application/zip").size===0}catch{f.blob=!1}}}try{f.nodestream=!!s("readable-stream").Readable}catch{f.nodestream=!1}},{"readable-stream":16}],31:[function(s,d,f){for(var m=s("./utils"),y=s("./support"),h=s("./nodejsUtils"),i=s("./stream/GenericWorker"),a=new Array(256),u=0;u<256;u++)a[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;a[254]=a[254]=1;function r(){i.call(this,"utf-8 decode"),this.leftOver=null}function o(){i.call(this,"utf-8 encode")}f.utf8encode=function(n){return y.nodebuffer?h.newBufferFrom(n,"utf-8"):function(c){var p,l,g,v,b,_=c.length,C=0;for(v=0;v<_;v++)(64512&(l=c.charCodeAt(v)))==55296&&v+1<_&&(64512&(g=c.charCodeAt(v+1)))==56320&&(l=65536+(l-55296<<10)+(g-56320),v++),C+=l<128?1:l<2048?2:l<65536?3:4;for(p=y.uint8array?new Uint8Array(C):new Array(C),v=b=0;b<C;v++)(64512&(l=c.charCodeAt(v)))==55296&&v+1<_&&(64512&(g=c.charCodeAt(v+1)))==56320&&(l=65536+(l-55296<<10)+(g-56320),v++),l<128?p[b++]=l:(l<2048?p[b++]=192|l>>>6:(l<65536?p[b++]=224|l>>>12:(p[b++]=240|l>>>18,p[b++]=128|l>>>12&63),p[b++]=128|l>>>6&63),p[b++]=128|63&l);return p}(n)},f.utf8decode=function(n){return y.nodebuffer?m.transformTo("nodebuffer",n).toString("utf-8"):function(c){var p,l,g,v,b=c.length,_=new Array(2*b);for(p=l=0;p<b;)if((g=c[p++])<128)_[l++]=g;else if(4<(v=a[g]))_[l++]=65533,p+=v-1;else{for(g&=v===2?31:v===3?15:7;1<v&&p<b;)g=g<<6|63&c[p++],v--;1<v?_[l++]=65533:g<65536?_[l++]=g:(g-=65536,_[l++]=55296|g>>10&1023,_[l++]=56320|1023&g)}return _.length!==l&&(_.subarray?_=_.subarray(0,l):_.length=l),m.applyFromCharCode(_)}(n=m.transformTo(y.uint8array?"uint8array":"array",n))},m.inherits(r,i),r.prototype.processChunk=function(n){var c=m.transformTo(y.uint8array?"uint8array":"array",n.data);if(this.leftOver&&this.leftOver.length){if(y.uint8array){var p=c;(c=new Uint8Array(p.length+this.leftOver.length)).set(this.leftOver,0),c.set(p,this.leftOver.length)}else c=this.leftOver.concat(c);this.leftOver=null}var l=function(v,b){var _;for((b=b||v.length)>v.length&&(b=v.length),_=b-1;0<=_&&(192&v[_])==128;)_--;return _<0||_===0?b:_+a[v[_]]>b?_:b}(c),g=c;l!==c.length&&(y.uint8array?(g=c.subarray(0,l),this.leftOver=c.subarray(l,c.length)):(g=c.slice(0,l),this.leftOver=c.slice(l,c.length))),this.push({data:f.utf8decode(g),meta:n.meta})},r.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:f.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},f.Utf8DecodeWorker=r,m.inherits(o,i),o.prototype.processChunk=function(n){this.push({data:f.utf8encode(n.data),meta:n.meta})},f.Utf8EncodeWorker=o},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(s,d,f){var m=s("./support"),y=s("./base64"),h=s("./nodejsUtils"),i=s("./external");function a(p){return p}function u(p,l){for(var g=0;g<p.length;++g)l[g]=255&p.charCodeAt(g);return l}s("setimmediate"),f.newBlob=function(p,l){f.checkSupport("blob");try{return new Blob([p],{type:l})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(p),g.getBlob(l)}catch{throw new Error("Bug : can't construct the Blob.")}}};var r={stringifyByChunk:function(p,l,g){var v=[],b=0,_=p.length;if(_<=g)return String.fromCharCode.apply(null,p);for(;b<_;)l==="array"||l==="nodebuffer"?v.push(String.fromCharCode.apply(null,p.slice(b,Math.min(b+g,_)))):v.push(String.fromCharCode.apply(null,p.subarray(b,Math.min(b+g,_)))),b+=g;return v.join("")},stringifyByChar:function(p){for(var l="",g=0;g<p.length;g++)l+=String.fromCharCode(p[g]);return l},applyCanBeUsed:{uint8array:function(){try{return m.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return m.nodebuffer&&String.fromCharCode.apply(null,h.allocBuffer(1)).length===1}catch{return!1}}()}};function o(p){var l=65536,g=f.getTypeOf(p),v=!0;if(g==="uint8array"?v=r.applyCanBeUsed.uint8array:g==="nodebuffer"&&(v=r.applyCanBeUsed.nodebuffer),v)for(;1<l;)try{return r.stringifyByChunk(p,g,l)}catch{l=Math.floor(l/2)}return r.stringifyByChar(p)}function n(p,l){for(var g=0;g<p.length;g++)l[g]=p[g];return l}f.applyFromCharCode=o;var c={};c.string={string:a,array:function(p){return u(p,new Array(p.length))},arraybuffer:function(p){return c.string.uint8array(p).buffer},uint8array:function(p){return u(p,new Uint8Array(p.length))},nodebuffer:function(p){return u(p,h.allocBuffer(p.length))}},c.array={string:o,array:a,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return h.newBufferFrom(p)}},c.arraybuffer={string:function(p){return o(new Uint8Array(p))},array:function(p){return n(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:a,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return h.newBufferFrom(new Uint8Array(p))}},c.uint8array={string:o,array:function(p){return n(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:a,nodebuffer:function(p){return h.newBufferFrom(p)}},c.nodebuffer={string:o,array:function(p){return n(p,new Array(p.length))},arraybuffer:function(p){return c.nodebuffer.uint8array(p).buffer},uint8array:function(p){return n(p,new Uint8Array(p.length))},nodebuffer:a},f.transformTo=function(p,l){if(l=l||"",!p)return l;f.checkSupport(p);var g=f.getTypeOf(l);return c[g][p](l)},f.resolve=function(p){for(var l=p.split("/"),g=[],v=0;v<l.length;v++){var b=l[v];b==="."||b===""&&v!==0&&v!==l.length-1||(b===".."?g.pop():g.push(b))}return g.join("/")},f.getTypeOf=function(p){return typeof p=="string"?"string":Object.prototype.toString.call(p)==="[object Array]"?"array":m.nodebuffer&&h.isBuffer(p)?"nodebuffer":m.uint8array&&p instanceof Uint8Array?"uint8array":m.arraybuffer&&p instanceof ArrayBuffer?"arraybuffer":void 0},f.checkSupport=function(p){if(!m[p.toLowerCase()])throw new Error(p+" is not supported by this platform")},f.MAX_VALUE_16BITS=65535,f.MAX_VALUE_32BITS=-1,f.pretty=function(p){var l,g,v="";for(g=0;g<(p||"").length;g++)v+="\\x"+((l=p.charCodeAt(g))<16?"0":"")+l.toString(16).toUpperCase();return v},f.delay=function(p,l,g){setImmediate(function(){p.apply(g||null,l||[])})},f.inherits=function(p,l){function g(){}g.prototype=l.prototype,p.prototype=new g},f.extend=function(){var p,l,g={};for(p=0;p<arguments.length;p++)for(l in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],l)&&g[l]===void 0&&(g[l]=arguments[p][l]);return g},f.prepareContent=function(p,l,g,v,b){return i.Promise.resolve(l).then(function(_){return m.blob&&(_ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(_))!==-1)&&typeof FileReader<"u"?new i.Promise(function(C,w){var k=new FileReader;k.onload=function(z){C(z.target.result)},k.onerror=function(z){w(z.target.error)},k.readAsArrayBuffer(_)}):_}).then(function(_){var C=f.getTypeOf(_);return C?(C==="arraybuffer"?_=f.transformTo("uint8array",_):C==="string"&&(b?_=y.decode(_):g&&v!==!0&&(_=function(w){return u(w,m.uint8array?new Uint8Array(w.length):new Array(w.length))}(_))),_):i.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(s,d,f){var m=s("./reader/readerFor"),y=s("./utils"),h=s("./signature"),i=s("./zipEntry"),a=s("./support");function u(r){this.files=[],this.loadOptions=r}u.prototype={checkSignature:function(r){if(!this.reader.readAndCheckSignature(r)){this.reader.index-=4;var o=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+y.pretty(o)+", expected "+y.pretty(r)+")")}},isSignature:function(r,o){var n=this.reader.index;this.reader.setIndex(r);var c=this.reader.readString(4)===o;return this.reader.setIndex(n),c},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var r=this.reader.readData(this.zipCommentLength),o=a.uint8array?"uint8array":"array",n=y.transformTo(o,r);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var r,o,n,c=this.zip64EndOfCentralSize-44;0<c;)r=this.reader.readInt(2),o=this.reader.readInt(4),n=this.reader.readData(o),this.zip64ExtensibleData[r]={id:r,length:o,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var r,o;for(r=0;r<this.files.length;r++)o=this.files[r],this.reader.setIndex(o.localHeaderOffset),this.checkSignature(h.LOCAL_FILE_HEADER),o.readLocalPart(this.reader),o.handleUTF8(),o.processAttributes()},readCentralDir:function(){var r;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(h.CENTRAL_FILE_HEADER);)(r=new i({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(r);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var r=this.reader.lastIndexOfSignature(h.CENTRAL_DIRECTORY_END);if(r<0)throw this.isSignature(0,h.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(r);var o=r;if(this.checkSignature(h.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===y.MAX_VALUE_16BITS||this.diskWithCentralDirStart===y.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===y.MAX_VALUE_16BITS||this.centralDirRecords===y.MAX_VALUE_16BITS||this.centralDirSize===y.MAX_VALUE_32BITS||this.centralDirOffset===y.MAX_VALUE_32BITS){if(this.zip64=!0,(r=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(r),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,h.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var c=o-n;if(0<c)this.isSignature(o,h.CENTRAL_FILE_HEADER)||(this.reader.zero=c);else if(c<0)throw new Error("Corrupted zip: missing "+Math.abs(c)+" bytes.")},prepareReader:function(r){this.reader=m(r)},load:function(r){this.prepareReader(r),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},d.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(s,d,f){var m=s("./reader/readerFor"),y=s("./utils"),h=s("./compressedObject"),i=s("./crc32"),a=s("./utf8"),u=s("./compressions"),r=s("./support");function o(n,c){this.options=n,this.loadOptions=c}o.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(n){var c,p;if(n.skip(22),this.fileNameLength=n.readInt(2),p=n.readInt(2),this.fileName=n.readData(this.fileNameLength),n.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((c=function(l){for(var g in u)if(Object.prototype.hasOwnProperty.call(u,g)&&u[g].magic===l)return u[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+y.pretty(this.compressionMethod)+" unknown (inner file : "+y.transformTo("string",this.fileName)+")");this.decompressed=new h(this.compressedSize,this.uncompressedSize,this.crc32,c,n.readData(this.compressedSize))},readCentralPart:function(n){this.versionMadeBy=n.readInt(2),n.skip(2),this.bitFlag=n.readInt(2),this.compressionMethod=n.readString(2),this.date=n.readDate(),this.crc32=n.readInt(4),this.compressedSize=n.readInt(4),this.uncompressedSize=n.readInt(4);var c=n.readInt(2);if(this.extraFieldsLength=n.readInt(2),this.fileCommentLength=n.readInt(2),this.diskNumberStart=n.readInt(2),this.internalFileAttributes=n.readInt(2),this.externalFileAttributes=n.readInt(4),this.localHeaderOffset=n.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");n.skip(c),this.readExtraFields(n),this.parseZIP64ExtraField(n),this.fileComment=n.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var n=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),n==0&&(this.dosPermissions=63&this.externalFileAttributes),n==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var n=m(this.extraFields[1].value);this.uncompressedSize===y.MAX_VALUE_32BITS&&(this.uncompressedSize=n.readInt(8)),this.compressedSize===y.MAX_VALUE_32BITS&&(this.compressedSize=n.readInt(8)),this.localHeaderOffset===y.MAX_VALUE_32BITS&&(this.localHeaderOffset=n.readInt(8)),this.diskNumberStart===y.MAX_VALUE_32BITS&&(this.diskNumberStart=n.readInt(4))}},readExtraFields:function(n){var c,p,l,g=n.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});n.index+4<g;)c=n.readInt(2),p=n.readInt(2),l=n.readData(p),this.extraFields[c]={id:c,length:p,value:l};n.setIndex(g)},handleUTF8:function(){var n=r.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var c=this.findExtraFieldUnicodePath();if(c!==null)this.fileNameStr=c;else{var p=y.transformTo(n,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var l=this.findExtraFieldUnicodeComment();if(l!==null)this.fileCommentStr=l;else{var g=y.transformTo(n,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var n=this.extraFields[28789];if(n){var c=m(n.value);return c.readInt(1)!==1||i(this.fileName)!==c.readInt(4)?null:a.utf8decode(c.readData(n.length-5))}return null},findExtraFieldUnicodeComment:function(){var n=this.extraFields[25461];if(n){var c=m(n.value);return c.readInt(1)!==1||i(this.fileComment)!==c.readInt(4)?null:a.utf8decode(c.readData(n.length-5))}return null}},d.exports=o},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(s,d,f){function m(c,p,l){this.name=c,this.dir=l.dir,this.date=l.date,this.comment=l.comment,this.unixPermissions=l.unixPermissions,this.dosPermissions=l.dosPermissions,this._data=p,this._dataBinary=l.binary,this.options={compression:l.compression,compressionOptions:l.compressionOptions}}var y=s("./stream/StreamHelper"),h=s("./stream/DataWorker"),i=s("./utf8"),a=s("./compressedObject"),u=s("./stream/GenericWorker");m.prototype={internalStream:function(c){var p=null,l="string";try{if(!c)throw new Error("No output type specified.");var g=(l=c.toLowerCase())==="string"||l==="text";l!=="binarystring"&&l!=="text"||(l="string"),p=this._decompressWorker();var v=!this._dataBinary;v&&!g&&(p=p.pipe(new i.Utf8EncodeWorker)),!v&&g&&(p=p.pipe(new i.Utf8DecodeWorker))}catch(b){(p=new u("error")).error(b)}return new y(p,l,"")},async:function(c,p){return this.internalStream(c).accumulate(p)},nodeStream:function(c,p){return this.internalStream(c||"nodebuffer").toNodejsStream(p)},_compressWorker:function(c,p){if(this._data instanceof a&&this._data.compression.magic===c.magic)return this._data.getCompressedWorker();var l=this._decompressWorker();return this._dataBinary||(l=l.pipe(new i.Utf8EncodeWorker)),a.createWorkerFrom(l,c,p)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof u?this._data:new h(this._data)}};for(var r=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],o=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},n=0;n<r.length;n++)m.prototype[r[n]]=o;d.exports=m},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(s,d,f){(function(m){var y,h,i=m.MutationObserver||m.WebKitMutationObserver;if(i){var a=0,u=new i(c),r=m.document.createTextNode("");u.observe(r,{characterData:!0}),y=function(){r.data=a=++a%2}}else if(m.setImmediate||m.MessageChannel===void 0)y="document"in m&&"onreadystatechange"in m.document.createElement("script")?function(){var p=m.document.createElement("script");p.onreadystatechange=function(){c(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},m.document.documentElement.appendChild(p)}:function(){setTimeout(c,0)};else{var o=new m.MessageChannel;o.port1.onmessage=c,y=function(){o.port2.postMessage(0)}}var n=[];function c(){var p,l;h=!0;for(var g=n.length;g;){for(l=n,n=[],p=-1;++p<g;)l[p]();g=n.length}h=!1}d.exports=function(p){n.push(p)!==1||h||y()}}).call(this,typeof Et<"u"?Et:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(s,d,f){var m=s("immediate");function y(){}var h={},i=["REJECTED"],a=["FULFILLED"],u=["PENDING"];function r(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,g!==y&&p(this,g)}function o(g,v,b){this.promise=g,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}function n(g,v,b){m(function(){var _;try{_=v(b)}catch(C){return h.reject(g,C)}_===g?h.reject(g,new TypeError("Cannot resolve promise with itself")):h.resolve(g,_)})}function c(g){var v=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof v=="function")return function(){v.apply(g,arguments)}}function p(g,v){var b=!1;function _(k){b||(b=!0,h.reject(g,k))}function C(k){b||(b=!0,h.resolve(g,k))}var w=l(function(){v(C,_)});w.status==="error"&&_(w.value)}function l(g,v){var b={};try{b.value=g(v),b.status="success"}catch(_){b.status="error",b.value=_}return b}(d.exports=r).prototype.finally=function(g){if(typeof g!="function")return this;var v=this.constructor;return this.then(function(b){return v.resolve(g()).then(function(){return b})},function(b){return v.resolve(g()).then(function(){throw b})})},r.prototype.catch=function(g){return this.then(null,g)},r.prototype.then=function(g,v){if(typeof g!="function"&&this.state===a||typeof v!="function"&&this.state===i)return this;var b=new this.constructor(y);return this.state!==u?n(b,this.state===a?g:v,this.outcome):this.queue.push(new o(b,g,v)),b},o.prototype.callFulfilled=function(g){h.resolve(this.promise,g)},o.prototype.otherCallFulfilled=function(g){n(this.promise,this.onFulfilled,g)},o.prototype.callRejected=function(g){h.reject(this.promise,g)},o.prototype.otherCallRejected=function(g){n(this.promise,this.onRejected,g)},h.resolve=function(g,v){var b=l(c,v);if(b.status==="error")return h.reject(g,b.value);var _=b.value;if(_)p(g,_);else{g.state=a,g.outcome=v;for(var C=-1,w=g.queue.length;++C<w;)g.queue[C].callFulfilled(v)}return g},h.reject=function(g,v){g.state=i,g.outcome=v;for(var b=-1,_=g.queue.length;++b<_;)g.queue[b].callRejected(v);return g},r.resolve=function(g){return g instanceof this?g:h.resolve(new this(y),g)},r.reject=function(g){var v=new this(y);return h.reject(v,g)},r.all=function(g){var v=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=g.length,_=!1;if(!b)return this.resolve([]);for(var C=new Array(b),w=0,k=-1,z=new this(y);++k<b;)N(g[k],k);return z;function N(X,re){v.resolve(X).then(function(F){C[re]=F,++w!==b||_||(_=!0,h.resolve(z,C))},function(F){_||(_=!0,h.reject(z,F))})}},r.race=function(g){var v=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=g.length,_=!1;if(!b)return this.resolve([]);for(var C=-1,w=new this(y);++C<b;)k=g[C],v.resolve(k).then(function(z){_||(_=!0,h.resolve(w,z))},function(z){_||(_=!0,h.reject(w,z))});var k;return w}},{immediate:36}],38:[function(s,d,f){var m={};(0,s("./lib/utils/common").assign)(m,s("./lib/deflate"),s("./lib/inflate"),s("./lib/zlib/constants")),d.exports=m},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(s,d,f){var m=s("./zlib/deflate"),y=s("./utils/common"),h=s("./utils/strings"),i=s("./zlib/messages"),a=s("./zlib/zstream"),u=Object.prototype.toString,r=0,o=-1,n=0,c=8;function p(g){if(!(this instanceof p))return new p(g);this.options=y.assign({level:o,method:c,chunkSize:16384,windowBits:15,memLevel:8,strategy:n,to:""},g||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var b=m.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(b!==r)throw new Error(i[b]);if(v.header&&m.deflateSetHeader(this.strm,v.header),v.dictionary){var _;if(_=typeof v.dictionary=="string"?h.string2buf(v.dictionary):u.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(b=m.deflateSetDictionary(this.strm,_))!==r)throw new Error(i[b]);this._dict_set=!0}}function l(g,v){var b=new p(v);if(b.push(g,!0),b.err)throw b.msg||i[b.err];return b.result}p.prototype.push=function(g,v){var b,_,C=this.strm,w=this.options.chunkSize;if(this.ended)return!1;_=v===~~v?v:v===!0?4:0,typeof g=="string"?C.input=h.string2buf(g):u.call(g)==="[object ArrayBuffer]"?C.input=new Uint8Array(g):C.input=g,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new y.Buf8(w),C.next_out=0,C.avail_out=w),(b=m.deflate(C,_))!==1&&b!==r)return this.onEnd(b),!(this.ended=!0);C.avail_out!==0&&(C.avail_in!==0||_!==4&&_!==2)||(this.options.to==="string"?this.onData(h.buf2binstring(y.shrinkBuf(C.output,C.next_out))):this.onData(y.shrinkBuf(C.output,C.next_out)))}while((0<C.avail_in||C.avail_out===0)&&b!==1);return _===4?(b=m.deflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===r):_!==2||(this.onEnd(r),!(C.avail_out=0))},p.prototype.onData=function(g){this.chunks.push(g)},p.prototype.onEnd=function(g){g===r&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=y.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},f.Deflate=p,f.deflate=l,f.deflateRaw=function(g,v){return(v=v||{}).raw=!0,l(g,v)},f.gzip=function(g,v){return(v=v||{}).gzip=!0,l(g,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(s,d,f){var m=s("./zlib/inflate"),y=s("./utils/common"),h=s("./utils/strings"),i=s("./zlib/constants"),a=s("./zlib/messages"),u=s("./zlib/zstream"),r=s("./zlib/gzheader"),o=Object.prototype.toString;function n(p){if(!(this instanceof n))return new n(p);this.options=y.assign({chunkSize:16384,windowBits:0,to:""},p||{});var l=this.options;l.raw&&0<=l.windowBits&&l.windowBits<16&&(l.windowBits=-l.windowBits,l.windowBits===0&&(l.windowBits=-15)),!(0<=l.windowBits&&l.windowBits<16)||p&&p.windowBits||(l.windowBits+=32),15<l.windowBits&&l.windowBits<48&&!(15&l.windowBits)&&(l.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var g=m.inflateInit2(this.strm,l.windowBits);if(g!==i.Z_OK)throw new Error(a[g]);this.header=new r,m.inflateGetHeader(this.strm,this.header)}function c(p,l){var g=new n(l);if(g.push(p,!0),g.err)throw g.msg||a[g.err];return g.result}n.prototype.push=function(p,l){var g,v,b,_,C,w,k=this.strm,z=this.options.chunkSize,N=this.options.dictionary,X=!1;if(this.ended)return!1;v=l===~~l?l:l===!0?i.Z_FINISH:i.Z_NO_FLUSH,typeof p=="string"?k.input=h.binstring2buf(p):o.call(p)==="[object ArrayBuffer]"?k.input=new Uint8Array(p):k.input=p,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new y.Buf8(z),k.next_out=0,k.avail_out=z),(g=m.inflate(k,i.Z_NO_FLUSH))===i.Z_NEED_DICT&&N&&(w=typeof N=="string"?h.string2buf(N):o.call(N)==="[object ArrayBuffer]"?new Uint8Array(N):N,g=m.inflateSetDictionary(this.strm,w)),g===i.Z_BUF_ERROR&&X===!0&&(g=i.Z_OK,X=!1),g!==i.Z_STREAM_END&&g!==i.Z_OK)return this.onEnd(g),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&g!==i.Z_STREAM_END&&(k.avail_in!==0||v!==i.Z_FINISH&&v!==i.Z_SYNC_FLUSH)||(this.options.to==="string"?(b=h.utf8border(k.output,k.next_out),_=k.next_out-b,C=h.buf2string(k.output,b),k.next_out=_,k.avail_out=z-_,_&&y.arraySet(k.output,k.output,b,_,0),this.onData(C)):this.onData(y.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(X=!0)}while((0<k.avail_in||k.avail_out===0)&&g!==i.Z_STREAM_END);return g===i.Z_STREAM_END&&(v=i.Z_FINISH),v===i.Z_FINISH?(g=m.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===i.Z_OK):v!==i.Z_SYNC_FLUSH||(this.onEnd(i.Z_OK),!(k.avail_out=0))},n.prototype.onData=function(p){this.chunks.push(p)},n.prototype.onEnd=function(p){p===i.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=y.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},f.Inflate=n,f.inflate=c,f.inflateRaw=function(p,l){return(l=l||{}).raw=!0,c(p,l)},f.ungzip=c},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(s,d,f){var m=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";f.assign=function(i){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var u=a.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var r in u)u.hasOwnProperty(r)&&(i[r]=u[r])}}return i},f.shrinkBuf=function(i,a){return i.length===a?i:i.subarray?i.subarray(0,a):(i.length=a,i)};var y={arraySet:function(i,a,u,r,o){if(a.subarray&&i.subarray)i.set(a.subarray(u,u+r),o);else for(var n=0;n<r;n++)i[o+n]=a[u+n]},flattenChunks:function(i){var a,u,r,o,n,c;for(a=r=0,u=i.length;a<u;a++)r+=i[a].length;for(c=new Uint8Array(r),a=o=0,u=i.length;a<u;a++)n=i[a],c.set(n,o),o+=n.length;return c}},h={arraySet:function(i,a,u,r,o){for(var n=0;n<r;n++)i[o+n]=a[u+n]},flattenChunks:function(i){return[].concat.apply([],i)}};f.setTyped=function(i){i?(f.Buf8=Uint8Array,f.Buf16=Uint16Array,f.Buf32=Int32Array,f.assign(f,y)):(f.Buf8=Array,f.Buf16=Array,f.Buf32=Array,f.assign(f,h))},f.setTyped(m)},{}],42:[function(s,d,f){var m=s("./common"),y=!0,h=!0;try{String.fromCharCode.apply(null,[0])}catch{y=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{h=!1}for(var i=new m.Buf8(256),a=0;a<256;a++)i[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function u(r,o){if(o<65537&&(r.subarray&&h||!r.subarray&&y))return String.fromCharCode.apply(null,m.shrinkBuf(r,o));for(var n="",c=0;c<o;c++)n+=String.fromCharCode(r[c]);return n}i[254]=i[254]=1,f.string2buf=function(r){var o,n,c,p,l,g=r.length,v=0;for(p=0;p<g;p++)(64512&(n=r.charCodeAt(p)))==55296&&p+1<g&&(64512&(c=r.charCodeAt(p+1)))==56320&&(n=65536+(n-55296<<10)+(c-56320),p++),v+=n<128?1:n<2048?2:n<65536?3:4;for(o=new m.Buf8(v),p=l=0;l<v;p++)(64512&(n=r.charCodeAt(p)))==55296&&p+1<g&&(64512&(c=r.charCodeAt(p+1)))==56320&&(n=65536+(n-55296<<10)+(c-56320),p++),n<128?o[l++]=n:(n<2048?o[l++]=192|n>>>6:(n<65536?o[l++]=224|n>>>12:(o[l++]=240|n>>>18,o[l++]=128|n>>>12&63),o[l++]=128|n>>>6&63),o[l++]=128|63&n);return o},f.buf2binstring=function(r){return u(r,r.length)},f.binstring2buf=function(r){for(var o=new m.Buf8(r.length),n=0,c=o.length;n<c;n++)o[n]=r.charCodeAt(n);return o},f.buf2string=function(r,o){var n,c,p,l,g=o||r.length,v=new Array(2*g);for(n=c=0;n<g;)if((p=r[n++])<128)v[c++]=p;else if(4<(l=i[p]))v[c++]=65533,n+=l-1;else{for(p&=l===2?31:l===3?15:7;1<l&&n<g;)p=p<<6|63&r[n++],l--;1<l?v[c++]=65533:p<65536?v[c++]=p:(p-=65536,v[c++]=55296|p>>10&1023,v[c++]=56320|1023&p)}return u(v,c)},f.utf8border=function(r,o){var n;for((o=o||r.length)>r.length&&(o=r.length),n=o-1;0<=n&&(192&r[n])==128;)n--;return n<0||n===0?o:n+i[r[n]]>o?n:o}},{"./common":41}],43:[function(s,d,f){d.exports=function(m,y,h,i){for(var a=65535&m|0,u=m>>>16&65535|0,r=0;h!==0;){for(h-=r=2e3<h?2e3:h;u=u+(a=a+y[i++]|0)|0,--r;);a%=65521,u%=65521}return a|u<<16|0}},{}],44:[function(s,d,f){d.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(s,d,f){var m=function(){for(var y,h=[],i=0;i<256;i++){y=i;for(var a=0;a<8;a++)y=1&y?3988292384^y>>>1:y>>>1;h[i]=y}return h}();d.exports=function(y,h,i,a){var u=m,r=a+i;y^=-1;for(var o=a;o<r;o++)y=y>>>8^u[255&(y^h[o])];return-1^y}},{}],46:[function(s,d,f){var m,y=s("../utils/common"),h=s("./trees"),i=s("./adler32"),a=s("./crc32"),u=s("./messages"),r=0,o=4,n=0,c=-2,p=-1,l=4,g=2,v=8,b=9,_=286,C=30,w=19,k=2*_+1,z=15,N=3,X=258,re=X+N+1,F=42,K=113,T=1,J=2,ue=3,ie=4;function ae(x,M){return x.msg=u[M],M}function A(x){return(x<<1)-(4<x?9:0)}function W(x){for(var M=x.length;0<=--M;)x[M]=0}function R(x){var M=x.state,L=M.pending;L>x.avail_out&&(L=x.avail_out),L!==0&&(y.arraySet(x.output,M.pending_buf,M.pending_out,L,x.next_out),x.next_out+=L,M.pending_out+=L,x.total_out+=L,x.avail_out-=L,M.pending-=L,M.pending===0&&(M.pending_out=0))}function I(x,M){h._tr_flush_block(x,0<=x.block_start?x.block_start:-1,x.strstart-x.block_start,M),x.block_start=x.strstart,R(x.strm)}function Q(x,M){x.pending_buf[x.pending++]=M}function U(x,M){x.pending_buf[x.pending++]=M>>>8&255,x.pending_buf[x.pending++]=255&M}function P(x,M){var L,S,O=x.max_chain_length,j=x.strstart,G=x.prev_length,Y=x.nice_match,D=x.strstart>x.w_size-re?x.strstart-(x.w_size-re):0,$=x.window,te=x.w_mask,ne=x.prev,he=x.strstart+X,pe=$[j+G-1],me=$[j+G];x.prev_length>=x.good_match&&(O>>=2),Y>x.lookahead&&(Y=x.lookahead);do if($[(L=M)+G]===me&&$[L+G-1]===pe&&$[L]===$[j]&&$[++L]===$[j+1]){j+=2,L++;do;while($[++j]===$[++L]&&$[++j]===$[++L]&&$[++j]===$[++L]&&$[++j]===$[++L]&&$[++j]===$[++L]&&$[++j]===$[++L]&&$[++j]===$[++L]&&$[++j]===$[++L]&&j<he);if(S=X-(he-j),j=he-X,G<S){if(x.match_start=M,Y<=(G=S))break;pe=$[j+G-1],me=$[j+G]}}while((M=ne[M&te])>D&&--O!=0);return G<=x.lookahead?G:x.lookahead}function Z(x){var M,L,S,O,j,G,Y,D,$,te,ne=x.w_size;do{if(O=x.window_size-x.lookahead-x.strstart,x.strstart>=ne+(ne-re)){for(y.arraySet(x.window,x.window,ne,ne,0),x.match_start-=ne,x.strstart-=ne,x.block_start-=ne,M=L=x.hash_size;S=x.head[--M],x.head[M]=ne<=S?S-ne:0,--L;);for(M=L=ne;S=x.prev[--M],x.prev[M]=ne<=S?S-ne:0,--L;);O+=ne}if(x.strm.avail_in===0)break;if(G=x.strm,Y=x.window,D=x.strstart+x.lookahead,$=O,te=void 0,te=G.avail_in,$<te&&(te=$),L=te===0?0:(G.avail_in-=te,y.arraySet(Y,G.input,G.next_in,te,D),G.state.wrap===1?G.adler=i(G.adler,Y,te,D):G.state.wrap===2&&(G.adler=a(G.adler,Y,te,D)),G.next_in+=te,G.total_in+=te,te),x.lookahead+=L,x.lookahead+x.insert>=N)for(j=x.strstart-x.insert,x.ins_h=x.window[j],x.ins_h=(x.ins_h<<x.hash_shift^x.window[j+1])&x.hash_mask;x.insert&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[j+N-1])&x.hash_mask,x.prev[j&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=j,j++,x.insert--,!(x.lookahead+x.insert<N)););}while(x.lookahead<re&&x.strm.avail_in!==0)}function H(x,M){for(var L,S;;){if(x.lookahead<re){if(Z(x),x.lookahead<re&&M===r)return T;if(x.lookahead===0)break}if(L=0,x.lookahead>=N&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+N-1])&x.hash_mask,L=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart),L!==0&&x.strstart-L<=x.w_size-re&&(x.match_length=P(x,L)),x.match_length>=N)if(S=h._tr_tally(x,x.strstart-x.match_start,x.match_length-N),x.lookahead-=x.match_length,x.match_length<=x.max_lazy_match&&x.lookahead>=N){for(x.match_length--;x.strstart++,x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+N-1])&x.hash_mask,L=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart,--x.match_length!=0;);x.strstart++}else x.strstart+=x.match_length,x.match_length=0,x.ins_h=x.window[x.strstart],x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+1])&x.hash_mask;else S=h._tr_tally(x,0,x.window[x.strstart]),x.lookahead--,x.strstart++;if(S&&(I(x,!1),x.strm.avail_out===0))return T}return x.insert=x.strstart<N-1?x.strstart:N-1,M===o?(I(x,!0),x.strm.avail_out===0?ue:ie):x.last_lit&&(I(x,!1),x.strm.avail_out===0)?T:J}function q(x,M){for(var L,S,O;;){if(x.lookahead<re){if(Z(x),x.lookahead<re&&M===r)return T;if(x.lookahead===0)break}if(L=0,x.lookahead>=N&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+N-1])&x.hash_mask,L=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart),x.prev_length=x.match_length,x.prev_match=x.match_start,x.match_length=N-1,L!==0&&x.prev_length<x.max_lazy_match&&x.strstart-L<=x.w_size-re&&(x.match_length=P(x,L),x.match_length<=5&&(x.strategy===1||x.match_length===N&&4096<x.strstart-x.match_start)&&(x.match_length=N-1)),x.prev_length>=N&&x.match_length<=x.prev_length){for(O=x.strstart+x.lookahead-N,S=h._tr_tally(x,x.strstart-1-x.prev_match,x.prev_length-N),x.lookahead-=x.prev_length-1,x.prev_length-=2;++x.strstart<=O&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+N-1])&x.hash_mask,L=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart),--x.prev_length!=0;);if(x.match_available=0,x.match_length=N-1,x.strstart++,S&&(I(x,!1),x.strm.avail_out===0))return T}else if(x.match_available){if((S=h._tr_tally(x,0,x.window[x.strstart-1]))&&I(x,!1),x.strstart++,x.lookahead--,x.strm.avail_out===0)return T}else x.match_available=1,x.strstart++,x.lookahead--}return x.match_available&&(S=h._tr_tally(x,0,x.window[x.strstart-1]),x.match_available=0),x.insert=x.strstart<N-1?x.strstart:N-1,M===o?(I(x,!0),x.strm.avail_out===0?ue:ie):x.last_lit&&(I(x,!1),x.strm.avail_out===0)?T:J}function V(x,M,L,S,O){this.good_length=x,this.max_lazy=M,this.nice_length=L,this.max_chain=S,this.func=O}function ee(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new y.Buf16(2*k),this.dyn_dtree=new y.Buf16(2*(2*C+1)),this.bl_tree=new y.Buf16(2*(2*w+1)),W(this.dyn_ltree),W(this.dyn_dtree),W(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new y.Buf16(z+1),this.heap=new y.Buf16(2*_+1),W(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new y.Buf16(2*_+1),W(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function se(x){var M;return x&&x.state?(x.total_in=x.total_out=0,x.data_type=g,(M=x.state).pending=0,M.pending_out=0,M.wrap<0&&(M.wrap=-M.wrap),M.status=M.wrap?F:K,x.adler=M.wrap===2?0:1,M.last_flush=r,h._tr_init(M),n):ae(x,c)}function fe(x){var M=se(x);return M===n&&function(L){L.window_size=2*L.w_size,W(L.head),L.max_lazy_match=m[L.level].max_lazy,L.good_match=m[L.level].good_length,L.nice_match=m[L.level].nice_length,L.max_chain_length=m[L.level].max_chain,L.strstart=0,L.block_start=0,L.lookahead=0,L.insert=0,L.match_length=L.prev_length=N-1,L.match_available=0,L.ins_h=0}(x.state),M}function E(x,M,L,S,O,j){if(!x)return c;var G=1;if(M===p&&(M=6),S<0?(G=0,S=-S):15<S&&(G=2,S-=16),O<1||b<O||L!==v||S<8||15<S||M<0||9<M||j<0||l<j)return ae(x,c);S===8&&(S=9);var Y=new ee;return(x.state=Y).strm=x,Y.wrap=G,Y.gzhead=null,Y.w_bits=S,Y.w_size=1<<Y.w_bits,Y.w_mask=Y.w_size-1,Y.hash_bits=O+7,Y.hash_size=1<<Y.hash_bits,Y.hash_mask=Y.hash_size-1,Y.hash_shift=~~((Y.hash_bits+N-1)/N),Y.window=new y.Buf8(2*Y.w_size),Y.head=new y.Buf16(Y.hash_size),Y.prev=new y.Buf16(Y.w_size),Y.lit_bufsize=1<<O+6,Y.pending_buf_size=4*Y.lit_bufsize,Y.pending_buf=new y.Buf8(Y.pending_buf_size),Y.d_buf=1*Y.lit_bufsize,Y.l_buf=3*Y.lit_bufsize,Y.level=M,Y.strategy=j,Y.method=L,fe(x)}m=[new V(0,0,0,0,function(x,M){var L=65535;for(L>x.pending_buf_size-5&&(L=x.pending_buf_size-5);;){if(x.lookahead<=1){if(Z(x),x.lookahead===0&&M===r)return T;if(x.lookahead===0)break}x.strstart+=x.lookahead,x.lookahead=0;var S=x.block_start+L;if((x.strstart===0||x.strstart>=S)&&(x.lookahead=x.strstart-S,x.strstart=S,I(x,!1),x.strm.avail_out===0)||x.strstart-x.block_start>=x.w_size-re&&(I(x,!1),x.strm.avail_out===0))return T}return x.insert=0,M===o?(I(x,!0),x.strm.avail_out===0?ue:ie):(x.strstart>x.block_start&&(I(x,!1),x.strm.avail_out),T)}),new V(4,4,8,4,H),new V(4,5,16,8,H),new V(4,6,32,32,H),new V(4,4,16,16,q),new V(8,16,32,32,q),new V(8,16,128,128,q),new V(8,32,128,256,q),new V(32,128,258,1024,q),new V(32,258,258,4096,q)],f.deflateInit=function(x,M){return E(x,M,v,15,8,0)},f.deflateInit2=E,f.deflateReset=fe,f.deflateResetKeep=se,f.deflateSetHeader=function(x,M){return x&&x.state?x.state.wrap!==2?c:(x.state.gzhead=M,n):c},f.deflate=function(x,M){var L,S,O,j;if(!x||!x.state||5<M||M<0)return x?ae(x,c):c;if(S=x.state,!x.output||!x.input&&x.avail_in!==0||S.status===666&&M!==o)return ae(x,x.avail_out===0?-5:c);if(S.strm=x,L=S.last_flush,S.last_flush=M,S.status===F)if(S.wrap===2)x.adler=0,Q(S,31),Q(S,139),Q(S,8),S.gzhead?(Q(S,(S.gzhead.text?1:0)+(S.gzhead.hcrc?2:0)+(S.gzhead.extra?4:0)+(S.gzhead.name?8:0)+(S.gzhead.comment?16:0)),Q(S,255&S.gzhead.time),Q(S,S.gzhead.time>>8&255),Q(S,S.gzhead.time>>16&255),Q(S,S.gzhead.time>>24&255),Q(S,S.level===9?2:2<=S.strategy||S.level<2?4:0),Q(S,255&S.gzhead.os),S.gzhead.extra&&S.gzhead.extra.length&&(Q(S,255&S.gzhead.extra.length),Q(S,S.gzhead.extra.length>>8&255)),S.gzhead.hcrc&&(x.adler=a(x.adler,S.pending_buf,S.pending,0)),S.gzindex=0,S.status=69):(Q(S,0),Q(S,0),Q(S,0),Q(S,0),Q(S,0),Q(S,S.level===9?2:2<=S.strategy||S.level<2?4:0),Q(S,3),S.status=K);else{var G=v+(S.w_bits-8<<4)<<8;G|=(2<=S.strategy||S.level<2?0:S.level<6?1:S.level===6?2:3)<<6,S.strstart!==0&&(G|=32),G+=31-G%31,S.status=K,U(S,G),S.strstart!==0&&(U(S,x.adler>>>16),U(S,65535&x.adler)),x.adler=1}if(S.status===69)if(S.gzhead.extra){for(O=S.pending;S.gzindex<(65535&S.gzhead.extra.length)&&(S.pending!==S.pending_buf_size||(S.gzhead.hcrc&&S.pending>O&&(x.adler=a(x.adler,S.pending_buf,S.pending-O,O)),R(x),O=S.pending,S.pending!==S.pending_buf_size));)Q(S,255&S.gzhead.extra[S.gzindex]),S.gzindex++;S.gzhead.hcrc&&S.pending>O&&(x.adler=a(x.adler,S.pending_buf,S.pending-O,O)),S.gzindex===S.gzhead.extra.length&&(S.gzindex=0,S.status=73)}else S.status=73;if(S.status===73)if(S.gzhead.name){O=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>O&&(x.adler=a(x.adler,S.pending_buf,S.pending-O,O)),R(x),O=S.pending,S.pending===S.pending_buf_size)){j=1;break}j=S.gzindex<S.gzhead.name.length?255&S.gzhead.name.charCodeAt(S.gzindex++):0,Q(S,j)}while(j!==0);S.gzhead.hcrc&&S.pending>O&&(x.adler=a(x.adler,S.pending_buf,S.pending-O,O)),j===0&&(S.gzindex=0,S.status=91)}else S.status=91;if(S.status===91)if(S.gzhead.comment){O=S.pending;do{if(S.pending===S.pending_buf_size&&(S.gzhead.hcrc&&S.pending>O&&(x.adler=a(x.adler,S.pending_buf,S.pending-O,O)),R(x),O=S.pending,S.pending===S.pending_buf_size)){j=1;break}j=S.gzindex<S.gzhead.comment.length?255&S.gzhead.comment.charCodeAt(S.gzindex++):0,Q(S,j)}while(j!==0);S.gzhead.hcrc&&S.pending>O&&(x.adler=a(x.adler,S.pending_buf,S.pending-O,O)),j===0&&(S.status=103)}else S.status=103;if(S.status===103&&(S.gzhead.hcrc?(S.pending+2>S.pending_buf_size&&R(x),S.pending+2<=S.pending_buf_size&&(Q(S,255&x.adler),Q(S,x.adler>>8&255),x.adler=0,S.status=K)):S.status=K),S.pending!==0){if(R(x),x.avail_out===0)return S.last_flush=-1,n}else if(x.avail_in===0&&A(M)<=A(L)&&M!==o)return ae(x,-5);if(S.status===666&&x.avail_in!==0)return ae(x,-5);if(x.avail_in!==0||S.lookahead!==0||M!==r&&S.status!==666){var Y=S.strategy===2?function(D,$){for(var te;;){if(D.lookahead===0&&(Z(D),D.lookahead===0)){if($===r)return T;break}if(D.match_length=0,te=h._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++,te&&(I(D,!1),D.strm.avail_out===0))return T}return D.insert=0,$===o?(I(D,!0),D.strm.avail_out===0?ue:ie):D.last_lit&&(I(D,!1),D.strm.avail_out===0)?T:J}(S,M):S.strategy===3?function(D,$){for(var te,ne,he,pe,me=D.window;;){if(D.lookahead<=X){if(Z(D),D.lookahead<=X&&$===r)return T;if(D.lookahead===0)break}if(D.match_length=0,D.lookahead>=N&&0<D.strstart&&(ne=me[he=D.strstart-1])===me[++he]&&ne===me[++he]&&ne===me[++he]){pe=D.strstart+X;do;while(ne===me[++he]&&ne===me[++he]&&ne===me[++he]&&ne===me[++he]&&ne===me[++he]&&ne===me[++he]&&ne===me[++he]&&ne===me[++he]&&he<pe);D.match_length=X-(pe-he),D.match_length>D.lookahead&&(D.match_length=D.lookahead)}if(D.match_length>=N?(te=h._tr_tally(D,1,D.match_length-N),D.lookahead-=D.match_length,D.strstart+=D.match_length,D.match_length=0):(te=h._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++),te&&(I(D,!1),D.strm.avail_out===0))return T}return D.insert=0,$===o?(I(D,!0),D.strm.avail_out===0?ue:ie):D.last_lit&&(I(D,!1),D.strm.avail_out===0)?T:J}(S,M):m[S.level].func(S,M);if(Y!==ue&&Y!==ie||(S.status=666),Y===T||Y===ue)return x.avail_out===0&&(S.last_flush=-1),n;if(Y===J&&(M===1?h._tr_align(S):M!==5&&(h._tr_stored_block(S,0,0,!1),M===3&&(W(S.head),S.lookahead===0&&(S.strstart=0,S.block_start=0,S.insert=0))),R(x),x.avail_out===0))return S.last_flush=-1,n}return M!==o?n:S.wrap<=0?1:(S.wrap===2?(Q(S,255&x.adler),Q(S,x.adler>>8&255),Q(S,x.adler>>16&255),Q(S,x.adler>>24&255),Q(S,255&x.total_in),Q(S,x.total_in>>8&255),Q(S,x.total_in>>16&255),Q(S,x.total_in>>24&255)):(U(S,x.adler>>>16),U(S,65535&x.adler)),R(x),0<S.wrap&&(S.wrap=-S.wrap),S.pending!==0?n:1)},f.deflateEnd=function(x){var M;return x&&x.state?(M=x.state.status)!==F&&M!==69&&M!==73&&M!==91&&M!==103&&M!==K&&M!==666?ae(x,c):(x.state=null,M===K?ae(x,-3):n):c},f.deflateSetDictionary=function(x,M){var L,S,O,j,G,Y,D,$,te=M.length;if(!x||!x.state||(j=(L=x.state).wrap)===2||j===1&&L.status!==F||L.lookahead)return c;for(j===1&&(x.adler=i(x.adler,M,te,0)),L.wrap=0,te>=L.w_size&&(j===0&&(W(L.head),L.strstart=0,L.block_start=0,L.insert=0),$=new y.Buf8(L.w_size),y.arraySet($,M,te-L.w_size,L.w_size,0),M=$,te=L.w_size),G=x.avail_in,Y=x.next_in,D=x.input,x.avail_in=te,x.next_in=0,x.input=M,Z(L);L.lookahead>=N;){for(S=L.strstart,O=L.lookahead-(N-1);L.ins_h=(L.ins_h<<L.hash_shift^L.window[S+N-1])&L.hash_mask,L.prev[S&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=S,S++,--O;);L.strstart=S,L.lookahead=N-1,Z(L)}return L.strstart+=L.lookahead,L.block_start=L.strstart,L.insert=L.lookahead,L.lookahead=0,L.match_length=L.prev_length=N-1,L.match_available=0,x.next_in=Y,x.input=D,x.avail_in=G,L.wrap=j,n},f.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(s,d,f){d.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(s,d,f){d.exports=function(m,y){var h,i,a,u,r,o,n,c,p,l,g,v,b,_,C,w,k,z,N,X,re,F,K,T,J;h=m.state,i=m.next_in,T=m.input,a=i+(m.avail_in-5),u=m.next_out,J=m.output,r=u-(y-m.avail_out),o=u+(m.avail_out-257),n=h.dmax,c=h.wsize,p=h.whave,l=h.wnext,g=h.window,v=h.hold,b=h.bits,_=h.lencode,C=h.distcode,w=(1<<h.lenbits)-1,k=(1<<h.distbits)-1;e:do{b<15&&(v+=T[i++]<<b,b+=8,v+=T[i++]<<b,b+=8),z=_[v&w];t:for(;;){if(v>>>=N=z>>>24,b-=N,(N=z>>>16&255)===0)J[u++]=65535&z;else{if(!(16&N)){if(!(64&N)){z=_[(65535&z)+(v&(1<<N)-1)];continue t}if(32&N){h.mode=12;break e}m.msg="invalid literal/length code",h.mode=30;break e}X=65535&z,(N&=15)&&(b<N&&(v+=T[i++]<<b,b+=8),X+=v&(1<<N)-1,v>>>=N,b-=N),b<15&&(v+=T[i++]<<b,b+=8,v+=T[i++]<<b,b+=8),z=C[v&k];i:for(;;){if(v>>>=N=z>>>24,b-=N,!(16&(N=z>>>16&255))){if(!(64&N)){z=C[(65535&z)+(v&(1<<N)-1)];continue i}m.msg="invalid distance code",h.mode=30;break e}if(re=65535&z,b<(N&=15)&&(v+=T[i++]<<b,(b+=8)<N&&(v+=T[i++]<<b,b+=8)),n<(re+=v&(1<<N)-1)){m.msg="invalid distance too far back",h.mode=30;break e}if(v>>>=N,b-=N,(N=u-r)<re){if(p<(N=re-N)&&h.sane){m.msg="invalid distance too far back",h.mode=30;break e}if(K=g,(F=0)===l){if(F+=c-N,N<X){for(X-=N;J[u++]=g[F++],--N;);F=u-re,K=J}}else if(l<N){if(F+=c+l-N,(N-=l)<X){for(X-=N;J[u++]=g[F++],--N;);if(F=0,l<X){for(X-=N=l;J[u++]=g[F++],--N;);F=u-re,K=J}}}else if(F+=l-N,N<X){for(X-=N;J[u++]=g[F++],--N;);F=u-re,K=J}for(;2<X;)J[u++]=K[F++],J[u++]=K[F++],J[u++]=K[F++],X-=3;X&&(J[u++]=K[F++],1<X&&(J[u++]=K[F++]))}else{for(F=u-re;J[u++]=J[F++],J[u++]=J[F++],J[u++]=J[F++],2<(X-=3););X&&(J[u++]=J[F++],1<X&&(J[u++]=J[F++]))}break}}break}}while(i<a&&u<o);i-=X=b>>3,v&=(1<<(b-=X<<3))-1,m.next_in=i,m.next_out=u,m.avail_in=i<a?a-i+5:5-(i-a),m.avail_out=u<o?o-u+257:257-(u-o),h.hold=v,h.bits=b}},{}],49:[function(s,d,f){var m=s("../utils/common"),y=s("./adler32"),h=s("./crc32"),i=s("./inffast"),a=s("./inftrees"),u=1,r=2,o=0,n=-2,c=1,p=852,l=592;function g(F){return(F>>>24&255)+(F>>>8&65280)+((65280&F)<<8)+((255&F)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new m.Buf16(320),this.work=new m.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(F){var K;return F&&F.state?(K=F.state,F.total_in=F.total_out=K.total=0,F.msg="",K.wrap&&(F.adler=1&K.wrap),K.mode=c,K.last=0,K.havedict=0,K.dmax=32768,K.head=null,K.hold=0,K.bits=0,K.lencode=K.lendyn=new m.Buf32(p),K.distcode=K.distdyn=new m.Buf32(l),K.sane=1,K.back=-1,o):n}function _(F){var K;return F&&F.state?((K=F.state).wsize=0,K.whave=0,K.wnext=0,b(F)):n}function C(F,K){var T,J;return F&&F.state?(J=F.state,K<0?(T=0,K=-K):(T=1+(K>>4),K<48&&(K&=15)),K&&(K<8||15<K)?n:(J.window!==null&&J.wbits!==K&&(J.window=null),J.wrap=T,J.wbits=K,_(F))):n}function w(F,K){var T,J;return F?(J=new v,(F.state=J).window=null,(T=C(F,K))!==o&&(F.state=null),T):n}var k,z,N=!0;function X(F){if(N){var K;for(k=new m.Buf32(512),z=new m.Buf32(32),K=0;K<144;)F.lens[K++]=8;for(;K<256;)F.lens[K++]=9;for(;K<280;)F.lens[K++]=7;for(;K<288;)F.lens[K++]=8;for(a(u,F.lens,0,288,k,0,F.work,{bits:9}),K=0;K<32;)F.lens[K++]=5;a(r,F.lens,0,32,z,0,F.work,{bits:5}),N=!1}F.lencode=k,F.lenbits=9,F.distcode=z,F.distbits=5}function re(F,K,T,J){var ue,ie=F.state;return ie.window===null&&(ie.wsize=1<<ie.wbits,ie.wnext=0,ie.whave=0,ie.window=new m.Buf8(ie.wsize)),J>=ie.wsize?(m.arraySet(ie.window,K,T-ie.wsize,ie.wsize,0),ie.wnext=0,ie.whave=ie.wsize):(J<(ue=ie.wsize-ie.wnext)&&(ue=J),m.arraySet(ie.window,K,T-J,ue,ie.wnext),(J-=ue)?(m.arraySet(ie.window,K,T-J,J,0),ie.wnext=J,ie.whave=ie.wsize):(ie.wnext+=ue,ie.wnext===ie.wsize&&(ie.wnext=0),ie.whave<ie.wsize&&(ie.whave+=ue))),0}f.inflateReset=_,f.inflateReset2=C,f.inflateResetKeep=b,f.inflateInit=function(F){return w(F,15)},f.inflateInit2=w,f.inflate=function(F,K){var T,J,ue,ie,ae,A,W,R,I,Q,U,P,Z,H,q,V,ee,se,fe,E,x,M,L,S,O=0,j=new m.Buf8(4),G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!F||!F.state||!F.output||!F.input&&F.avail_in!==0)return n;(T=F.state).mode===12&&(T.mode=13),ae=F.next_out,ue=F.output,W=F.avail_out,ie=F.next_in,J=F.input,A=F.avail_in,R=T.hold,I=T.bits,Q=A,U=W,M=o;e:for(;;)switch(T.mode){case c:if(T.wrap===0){T.mode=13;break}for(;I<16;){if(A===0)break e;A--,R+=J[ie++]<<I,I+=8}if(2&T.wrap&&R===35615){j[T.check=0]=255&R,j[1]=R>>>8&255,T.check=h(T.check,j,2,0),I=R=0,T.mode=2;break}if(T.flags=0,T.head&&(T.head.done=!1),!(1&T.wrap)||(((255&R)<<8)+(R>>8))%31){F.msg="incorrect header check",T.mode=30;break}if((15&R)!=8){F.msg="unknown compression method",T.mode=30;break}if(I-=4,x=8+(15&(R>>>=4)),T.wbits===0)T.wbits=x;else if(x>T.wbits){F.msg="invalid window size",T.mode=30;break}T.dmax=1<<x,F.adler=T.check=1,T.mode=512&R?10:12,I=R=0;break;case 2:for(;I<16;){if(A===0)break e;A--,R+=J[ie++]<<I,I+=8}if(T.flags=R,(255&T.flags)!=8){F.msg="unknown compression method",T.mode=30;break}if(57344&T.flags){F.msg="unknown header flags set",T.mode=30;break}T.head&&(T.head.text=R>>8&1),512&T.flags&&(j[0]=255&R,j[1]=R>>>8&255,T.check=h(T.check,j,2,0)),I=R=0,T.mode=3;case 3:for(;I<32;){if(A===0)break e;A--,R+=J[ie++]<<I,I+=8}T.head&&(T.head.time=R),512&T.flags&&(j[0]=255&R,j[1]=R>>>8&255,j[2]=R>>>16&255,j[3]=R>>>24&255,T.check=h(T.check,j,4,0)),I=R=0,T.mode=4;case 4:for(;I<16;){if(A===0)break e;A--,R+=J[ie++]<<I,I+=8}T.head&&(T.head.xflags=255&R,T.head.os=R>>8),512&T.flags&&(j[0]=255&R,j[1]=R>>>8&255,T.check=h(T.check,j,2,0)),I=R=0,T.mode=5;case 5:if(1024&T.flags){for(;I<16;){if(A===0)break e;A--,R+=J[ie++]<<I,I+=8}T.length=R,T.head&&(T.head.extra_len=R),512&T.flags&&(j[0]=255&R,j[1]=R>>>8&255,T.check=h(T.check,j,2,0)),I=R=0}else T.head&&(T.head.extra=null);T.mode=6;case 6:if(1024&T.flags&&(A<(P=T.length)&&(P=A),P&&(T.head&&(x=T.head.extra_len-T.length,T.head.extra||(T.head.extra=new Array(T.head.extra_len)),m.arraySet(T.head.extra,J,ie,P,x)),512&T.flags&&(T.check=h(T.check,J,P,ie)),A-=P,ie+=P,T.length-=P),T.length))break e;T.length=0,T.mode=7;case 7:if(2048&T.flags){if(A===0)break e;for(P=0;x=J[ie+P++],T.head&&x&&T.length<65536&&(T.head.name+=String.fromCharCode(x)),x&&P<A;);if(512&T.flags&&(T.check=h(T.check,J,P,ie)),A-=P,ie+=P,x)break e}else T.head&&(T.head.name=null);T.length=0,T.mode=8;case 8:if(4096&T.flags){if(A===0)break e;for(P=0;x=J[ie+P++],T.head&&x&&T.length<65536&&(T.head.comment+=String.fromCharCode(x)),x&&P<A;);if(512&T.flags&&(T.check=h(T.check,J,P,ie)),A-=P,ie+=P,x)break e}else T.head&&(T.head.comment=null);T.mode=9;case 9:if(512&T.flags){for(;I<16;){if(A===0)break e;A--,R+=J[ie++]<<I,I+=8}if(R!==(65535&T.check)){F.msg="header crc mismatch",T.mode=30;break}I=R=0}T.head&&(T.head.hcrc=T.flags>>9&1,T.head.done=!0),F.adler=T.check=0,T.mode=12;break;case 10:for(;I<32;){if(A===0)break e;A--,R+=J[ie++]<<I,I+=8}F.adler=T.check=g(R),I=R=0,T.mode=11;case 11:if(T.havedict===0)return F.next_out=ae,F.avail_out=W,F.next_in=ie,F.avail_in=A,T.hold=R,T.bits=I,2;F.adler=T.check=1,T.mode=12;case 12:if(K===5||K===6)break e;case 13:if(T.last){R>>>=7&I,I-=7&I,T.mode=27;break}for(;I<3;){if(A===0)break e;A--,R+=J[ie++]<<I,I+=8}switch(T.last=1&R,I-=1,3&(R>>>=1)){case 0:T.mode=14;break;case 1:if(X(T),T.mode=20,K!==6)break;R>>>=2,I-=2;break e;case 2:T.mode=17;break;case 3:F.msg="invalid block type",T.mode=30}R>>>=2,I-=2;break;case 14:for(R>>>=7&I,I-=7&I;I<32;){if(A===0)break e;A--,R+=J[ie++]<<I,I+=8}if((65535&R)!=(R>>>16^65535)){F.msg="invalid stored block lengths",T.mode=30;break}if(T.length=65535&R,I=R=0,T.mode=15,K===6)break e;case 15:T.mode=16;case 16:if(P=T.length){if(A<P&&(P=A),W<P&&(P=W),P===0)break e;m.arraySet(ue,J,ie,P,ae),A-=P,ie+=P,W-=P,ae+=P,T.length-=P;break}T.mode=12;break;case 17:for(;I<14;){if(A===0)break e;A--,R+=J[ie++]<<I,I+=8}if(T.nlen=257+(31&R),R>>>=5,I-=5,T.ndist=1+(31&R),R>>>=5,I-=5,T.ncode=4+(15&R),R>>>=4,I-=4,286<T.nlen||30<T.ndist){F.msg="too many length or distance symbols",T.mode=30;break}T.have=0,T.mode=18;case 18:for(;T.have<T.ncode;){for(;I<3;){if(A===0)break e;A--,R+=J[ie++]<<I,I+=8}T.lens[G[T.have++]]=7&R,R>>>=3,I-=3}for(;T.have<19;)T.lens[G[T.have++]]=0;if(T.lencode=T.lendyn,T.lenbits=7,L={bits:T.lenbits},M=a(0,T.lens,0,19,T.lencode,0,T.work,L),T.lenbits=L.bits,M){F.msg="invalid code lengths set",T.mode=30;break}T.have=0,T.mode=19;case 19:for(;T.have<T.nlen+T.ndist;){for(;V=(O=T.lencode[R&(1<<T.lenbits)-1])>>>16&255,ee=65535&O,!((q=O>>>24)<=I);){if(A===0)break e;A--,R+=J[ie++]<<I,I+=8}if(ee<16)R>>>=q,I-=q,T.lens[T.have++]=ee;else{if(ee===16){for(S=q+2;I<S;){if(A===0)break e;A--,R+=J[ie++]<<I,I+=8}if(R>>>=q,I-=q,T.have===0){F.msg="invalid bit length repeat",T.mode=30;break}x=T.lens[T.have-1],P=3+(3&R),R>>>=2,I-=2}else if(ee===17){for(S=q+3;I<S;){if(A===0)break e;A--,R+=J[ie++]<<I,I+=8}I-=q,x=0,P=3+(7&(R>>>=q)),R>>>=3,I-=3}else{for(S=q+7;I<S;){if(A===0)break e;A--,R+=J[ie++]<<I,I+=8}I-=q,x=0,P=11+(127&(R>>>=q)),R>>>=7,I-=7}if(T.have+P>T.nlen+T.ndist){F.msg="invalid bit length repeat",T.mode=30;break}for(;P--;)T.lens[T.have++]=x}}if(T.mode===30)break;if(T.lens[256]===0){F.msg="invalid code -- missing end-of-block",T.mode=30;break}if(T.lenbits=9,L={bits:T.lenbits},M=a(u,T.lens,0,T.nlen,T.lencode,0,T.work,L),T.lenbits=L.bits,M){F.msg="invalid literal/lengths set",T.mode=30;break}if(T.distbits=6,T.distcode=T.distdyn,L={bits:T.distbits},M=a(r,T.lens,T.nlen,T.ndist,T.distcode,0,T.work,L),T.distbits=L.bits,M){F.msg="invalid distances set",T.mode=30;break}if(T.mode=20,K===6)break e;case 20:T.mode=21;case 21:if(6<=A&&258<=W){F.next_out=ae,F.avail_out=W,F.next_in=ie,F.avail_in=A,T.hold=R,T.bits=I,i(F,U),ae=F.next_out,ue=F.output,W=F.avail_out,ie=F.next_in,J=F.input,A=F.avail_in,R=T.hold,I=T.bits,T.mode===12&&(T.back=-1);break}for(T.back=0;V=(O=T.lencode[R&(1<<T.lenbits)-1])>>>16&255,ee=65535&O,!((q=O>>>24)<=I);){if(A===0)break e;A--,R+=J[ie++]<<I,I+=8}if(V&&!(240&V)){for(se=q,fe=V,E=ee;V=(O=T.lencode[E+((R&(1<<se+fe)-1)>>se)])>>>16&255,ee=65535&O,!(se+(q=O>>>24)<=I);){if(A===0)break e;A--,R+=J[ie++]<<I,I+=8}R>>>=se,I-=se,T.back+=se}if(R>>>=q,I-=q,T.back+=q,T.length=ee,V===0){T.mode=26;break}if(32&V){T.back=-1,T.mode=12;break}if(64&V){F.msg="invalid literal/length code",T.mode=30;break}T.extra=15&V,T.mode=22;case 22:if(T.extra){for(S=T.extra;I<S;){if(A===0)break e;A--,R+=J[ie++]<<I,I+=8}T.length+=R&(1<<T.extra)-1,R>>>=T.extra,I-=T.extra,T.back+=T.extra}T.was=T.length,T.mode=23;case 23:for(;V=(O=T.distcode[R&(1<<T.distbits)-1])>>>16&255,ee=65535&O,!((q=O>>>24)<=I);){if(A===0)break e;A--,R+=J[ie++]<<I,I+=8}if(!(240&V)){for(se=q,fe=V,E=ee;V=(O=T.distcode[E+((R&(1<<se+fe)-1)>>se)])>>>16&255,ee=65535&O,!(se+(q=O>>>24)<=I);){if(A===0)break e;A--,R+=J[ie++]<<I,I+=8}R>>>=se,I-=se,T.back+=se}if(R>>>=q,I-=q,T.back+=q,64&V){F.msg="invalid distance code",T.mode=30;break}T.offset=ee,T.extra=15&V,T.mode=24;case 24:if(T.extra){for(S=T.extra;I<S;){if(A===0)break e;A--,R+=J[ie++]<<I,I+=8}T.offset+=R&(1<<T.extra)-1,R>>>=T.extra,I-=T.extra,T.back+=T.extra}if(T.offset>T.dmax){F.msg="invalid distance too far back",T.mode=30;break}T.mode=25;case 25:if(W===0)break e;if(P=U-W,T.offset>P){if((P=T.offset-P)>T.whave&&T.sane){F.msg="invalid distance too far back",T.mode=30;break}Z=P>T.wnext?(P-=T.wnext,T.wsize-P):T.wnext-P,P>T.length&&(P=T.length),H=T.window}else H=ue,Z=ae-T.offset,P=T.length;for(W<P&&(P=W),W-=P,T.length-=P;ue[ae++]=H[Z++],--P;);T.length===0&&(T.mode=21);break;case 26:if(W===0)break e;ue[ae++]=T.length,W--,T.mode=21;break;case 27:if(T.wrap){for(;I<32;){if(A===0)break e;A--,R|=J[ie++]<<I,I+=8}if(U-=W,F.total_out+=U,T.total+=U,U&&(F.adler=T.check=T.flags?h(T.check,ue,U,ae-U):y(T.check,ue,U,ae-U)),U=W,(T.flags?R:g(R))!==T.check){F.msg="incorrect data check",T.mode=30;break}I=R=0}T.mode=28;case 28:if(T.wrap&&T.flags){for(;I<32;){if(A===0)break e;A--,R+=J[ie++]<<I,I+=8}if(R!==(4294967295&T.total)){F.msg="incorrect length check",T.mode=30;break}I=R=0}T.mode=29;case 29:M=1;break e;case 30:M=-3;break e;case 31:return-4;case 32:default:return n}return F.next_out=ae,F.avail_out=W,F.next_in=ie,F.avail_in=A,T.hold=R,T.bits=I,(T.wsize||U!==F.avail_out&&T.mode<30&&(T.mode<27||K!==4))&&re(F,F.output,F.next_out,U-F.avail_out)?(T.mode=31,-4):(Q-=F.avail_in,U-=F.avail_out,F.total_in+=Q,F.total_out+=U,T.total+=U,T.wrap&&U&&(F.adler=T.check=T.flags?h(T.check,ue,U,F.next_out-U):y(T.check,ue,U,F.next_out-U)),F.data_type=T.bits+(T.last?64:0)+(T.mode===12?128:0)+(T.mode===20||T.mode===15?256:0),(Q==0&&U===0||K===4)&&M===o&&(M=-5),M)},f.inflateEnd=function(F){if(!F||!F.state)return n;var K=F.state;return K.window&&(K.window=null),F.state=null,o},f.inflateGetHeader=function(F,K){var T;return F&&F.state&&2&(T=F.state).wrap?((T.head=K).done=!1,o):n},f.inflateSetDictionary=function(F,K){var T,J=K.length;return F&&F.state?(T=F.state).wrap!==0&&T.mode!==11?n:T.mode===11&&y(1,K,J,0)!==T.check?-3:re(F,K,J,J)?(T.mode=31,-4):(T.havedict=1,o):n},f.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(s,d,f){var m=s("../utils/common"),y=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],h=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],i=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];d.exports=function(u,r,o,n,c,p,l,g){var v,b,_,C,w,k,z,N,X,re=g.bits,F=0,K=0,T=0,J=0,ue=0,ie=0,ae=0,A=0,W=0,R=0,I=null,Q=0,U=new m.Buf16(16),P=new m.Buf16(16),Z=null,H=0;for(F=0;F<=15;F++)U[F]=0;for(K=0;K<n;K++)U[r[o+K]]++;for(ue=re,J=15;1<=J&&U[J]===0;J--);if(J<ue&&(ue=J),J===0)return c[p++]=20971520,c[p++]=20971520,g.bits=1,0;for(T=1;T<J&&U[T]===0;T++);for(ue<T&&(ue=T),F=A=1;F<=15;F++)if(A<<=1,(A-=U[F])<0)return-1;if(0<A&&(u===0||J!==1))return-1;for(P[1]=0,F=1;F<15;F++)P[F+1]=P[F]+U[F];for(K=0;K<n;K++)r[o+K]!==0&&(l[P[r[o+K]]++]=K);if(k=u===0?(I=Z=l,19):u===1?(I=y,Q-=257,Z=h,H-=257,256):(I=i,Z=a,-1),F=T,w=p,ae=K=R=0,_=-1,C=(W=1<<(ie=ue))-1,u===1&&852<W||u===2&&592<W)return 1;for(;;){for(z=F-ae,X=l[K]<k?(N=0,l[K]):l[K]>k?(N=Z[H+l[K]],I[Q+l[K]]):(N=96,0),v=1<<F-ae,T=b=1<<ie;c[w+(R>>ae)+(b-=v)]=z<<24|N<<16|X|0,b!==0;);for(v=1<<F-1;R&v;)v>>=1;if(v!==0?(R&=v-1,R+=v):R=0,K++,--U[F]==0){if(F===J)break;F=r[o+l[K]]}if(ue<F&&(R&C)!==_){for(ae===0&&(ae=ue),w+=T,A=1<<(ie=F-ae);ie+ae<J&&!((A-=U[ie+ae])<=0);)ie++,A<<=1;if(W+=1<<ie,u===1&&852<W||u===2&&592<W)return 1;c[_=R&C]=ue<<24|ie<<16|w-p|0}}return R!==0&&(c[w+R]=F-ae<<24|64<<16|0),g.bits=ue,0}},{"../utils/common":41}],51:[function(s,d,f){d.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(s,d,f){var m=s("../utils/common"),y=0,h=1;function i(O){for(var j=O.length;0<=--j;)O[j]=0}var a=0,u=29,r=256,o=r+1+u,n=30,c=19,p=2*o+1,l=15,g=16,v=7,b=256,_=16,C=17,w=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],re=new Array(2*(o+2));i(re);var F=new Array(2*n);i(F);var K=new Array(512);i(K);var T=new Array(256);i(T);var J=new Array(u);i(J);var ue,ie,ae,A=new Array(n);function W(O,j,G,Y,D){this.static_tree=O,this.extra_bits=j,this.extra_base=G,this.elems=Y,this.max_length=D,this.has_stree=O&&O.length}function R(O,j){this.dyn_tree=O,this.max_code=0,this.stat_desc=j}function I(O){return O<256?K[O]:K[256+(O>>>7)]}function Q(O,j){O.pending_buf[O.pending++]=255&j,O.pending_buf[O.pending++]=j>>>8&255}function U(O,j,G){O.bi_valid>g-G?(O.bi_buf|=j<<O.bi_valid&65535,Q(O,O.bi_buf),O.bi_buf=j>>g-O.bi_valid,O.bi_valid+=G-g):(O.bi_buf|=j<<O.bi_valid&65535,O.bi_valid+=G)}function P(O,j,G){U(O,G[2*j],G[2*j+1])}function Z(O,j){for(var G=0;G|=1&O,O>>>=1,G<<=1,0<--j;);return G>>>1}function H(O,j,G){var Y,D,$=new Array(l+1),te=0;for(Y=1;Y<=l;Y++)$[Y]=te=te+G[Y-1]<<1;for(D=0;D<=j;D++){var ne=O[2*D+1];ne!==0&&(O[2*D]=Z($[ne]++,ne))}}function q(O){var j;for(j=0;j<o;j++)O.dyn_ltree[2*j]=0;for(j=0;j<n;j++)O.dyn_dtree[2*j]=0;for(j=0;j<c;j++)O.bl_tree[2*j]=0;O.dyn_ltree[2*b]=1,O.opt_len=O.static_len=0,O.last_lit=O.matches=0}function V(O){8<O.bi_valid?Q(O,O.bi_buf):0<O.bi_valid&&(O.pending_buf[O.pending++]=O.bi_buf),O.bi_buf=0,O.bi_valid=0}function ee(O,j,G,Y){var D=2*j,$=2*G;return O[D]<O[$]||O[D]===O[$]&&Y[j]<=Y[G]}function se(O,j,G){for(var Y=O.heap[G],D=G<<1;D<=O.heap_len&&(D<O.heap_len&&ee(j,O.heap[D+1],O.heap[D],O.depth)&&D++,!ee(j,Y,O.heap[D],O.depth));)O.heap[G]=O.heap[D],G=D,D<<=1;O.heap[G]=Y}function fe(O,j,G){var Y,D,$,te,ne=0;if(O.last_lit!==0)for(;Y=O.pending_buf[O.d_buf+2*ne]<<8|O.pending_buf[O.d_buf+2*ne+1],D=O.pending_buf[O.l_buf+ne],ne++,Y===0?P(O,D,j):(P(O,($=T[D])+r+1,j),(te=k[$])!==0&&U(O,D-=J[$],te),P(O,$=I(--Y),G),(te=z[$])!==0&&U(O,Y-=A[$],te)),ne<O.last_lit;);P(O,b,j)}function E(O,j){var G,Y,D,$=j.dyn_tree,te=j.stat_desc.static_tree,ne=j.stat_desc.has_stree,he=j.stat_desc.elems,pe=-1;for(O.heap_len=0,O.heap_max=p,G=0;G<he;G++)$[2*G]!==0?(O.heap[++O.heap_len]=pe=G,O.depth[G]=0):$[2*G+1]=0;for(;O.heap_len<2;)$[2*(D=O.heap[++O.heap_len]=pe<2?++pe:0)]=1,O.depth[D]=0,O.opt_len--,ne&&(O.static_len-=te[2*D+1]);for(j.max_code=pe,G=O.heap_len>>1;1<=G;G--)se(O,$,G);for(D=he;G=O.heap[1],O.heap[1]=O.heap[O.heap_len--],se(O,$,1),Y=O.heap[1],O.heap[--O.heap_max]=G,O.heap[--O.heap_max]=Y,$[2*D]=$[2*G]+$[2*Y],O.depth[D]=(O.depth[G]>=O.depth[Y]?O.depth[G]:O.depth[Y])+1,$[2*G+1]=$[2*Y+1]=D,O.heap[1]=D++,se(O,$,1),2<=O.heap_len;);O.heap[--O.heap_max]=O.heap[1],function(me,ye){var Ee,Te,Pe,Se,nt,Dt,De=ye.dyn_tree,rt=ye.max_code,un=ye.stat_desc.static_tree,zu=ye.stat_desc.has_stree,Nu=ye.stat_desc.extra_bits,uo=ye.stat_desc.extra_base,Ci=ye.stat_desc.max_length,hn=0;for(Se=0;Se<=l;Se++)me.bl_count[Se]=0;for(De[2*me.heap[me.heap_max]+1]=0,Ee=me.heap_max+1;Ee<p;Ee++)Ci<(Se=De[2*De[2*(Te=me.heap[Ee])+1]+1]+1)&&(Se=Ci,hn++),De[2*Te+1]=Se,rt<Te||(me.bl_count[Se]++,nt=0,uo<=Te&&(nt=Nu[Te-uo]),Dt=De[2*Te],me.opt_len+=Dt*(Se+nt),zu&&(me.static_len+=Dt*(un[2*Te+1]+nt)));if(hn!==0){do{for(Se=Ci-1;me.bl_count[Se]===0;)Se--;me.bl_count[Se]--,me.bl_count[Se+1]+=2,me.bl_count[Ci]--,hn-=2}while(0<hn);for(Se=Ci;Se!==0;Se--)for(Te=me.bl_count[Se];Te!==0;)rt<(Pe=me.heap[--Ee])||(De[2*Pe+1]!==Se&&(me.opt_len+=(Se-De[2*Pe+1])*De[2*Pe],De[2*Pe+1]=Se),Te--)}}(O,j),H($,pe,O.bl_count)}function x(O,j,G){var Y,D,$=-1,te=j[1],ne=0,he=7,pe=4;for(te===0&&(he=138,pe=3),j[2*(G+1)+1]=65535,Y=0;Y<=G;Y++)D=te,te=j[2*(Y+1)+1],++ne<he&&D===te||(ne<pe?O.bl_tree[2*D]+=ne:D!==0?(D!==$&&O.bl_tree[2*D]++,O.bl_tree[2*_]++):ne<=10?O.bl_tree[2*C]++:O.bl_tree[2*w]++,$=D,pe=(ne=0)===te?(he=138,3):D===te?(he=6,3):(he=7,4))}function M(O,j,G){var Y,D,$=-1,te=j[1],ne=0,he=7,pe=4;for(te===0&&(he=138,pe=3),Y=0;Y<=G;Y++)if(D=te,te=j[2*(Y+1)+1],!(++ne<he&&D===te)){if(ne<pe)for(;P(O,D,O.bl_tree),--ne!=0;);else D!==0?(D!==$&&(P(O,D,O.bl_tree),ne--),P(O,_,O.bl_tree),U(O,ne-3,2)):ne<=10?(P(O,C,O.bl_tree),U(O,ne-3,3)):(P(O,w,O.bl_tree),U(O,ne-11,7));$=D,pe=(ne=0)===te?(he=138,3):D===te?(he=6,3):(he=7,4)}}i(A);var L=!1;function S(O,j,G,Y){U(O,(a<<1)+(Y?1:0),3),function(D,$,te,ne){V(D),ne&&(Q(D,te),Q(D,~te)),m.arraySet(D.pending_buf,D.window,$,te,D.pending),D.pending+=te}(O,j,G,!0)}f._tr_init=function(O){L||(function(){var j,G,Y,D,$,te=new Array(l+1);for(D=Y=0;D<u-1;D++)for(J[D]=Y,j=0;j<1<<k[D];j++)T[Y++]=D;for(T[Y-1]=D,D=$=0;D<16;D++)for(A[D]=$,j=0;j<1<<z[D];j++)K[$++]=D;for($>>=7;D<n;D++)for(A[D]=$<<7,j=0;j<1<<z[D]-7;j++)K[256+$++]=D;for(G=0;G<=l;G++)te[G]=0;for(j=0;j<=143;)re[2*j+1]=8,j++,te[8]++;for(;j<=255;)re[2*j+1]=9,j++,te[9]++;for(;j<=279;)re[2*j+1]=7,j++,te[7]++;for(;j<=287;)re[2*j+1]=8,j++,te[8]++;for(H(re,o+1,te),j=0;j<n;j++)F[2*j+1]=5,F[2*j]=Z(j,5);ue=new W(re,k,r+1,o,l),ie=new W(F,z,0,n,l),ae=new W(new Array(0),N,0,c,v)}(),L=!0),O.l_desc=new R(O.dyn_ltree,ue),O.d_desc=new R(O.dyn_dtree,ie),O.bl_desc=new R(O.bl_tree,ae),O.bi_buf=0,O.bi_valid=0,q(O)},f._tr_stored_block=S,f._tr_flush_block=function(O,j,G,Y){var D,$,te=0;0<O.level?(O.strm.data_type===2&&(O.strm.data_type=function(ne){var he,pe=4093624447;for(he=0;he<=31;he++,pe>>>=1)if(1&pe&&ne.dyn_ltree[2*he]!==0)return y;if(ne.dyn_ltree[18]!==0||ne.dyn_ltree[20]!==0||ne.dyn_ltree[26]!==0)return h;for(he=32;he<r;he++)if(ne.dyn_ltree[2*he]!==0)return h;return y}(O)),E(O,O.l_desc),E(O,O.d_desc),te=function(ne){var he;for(x(ne,ne.dyn_ltree,ne.l_desc.max_code),x(ne,ne.dyn_dtree,ne.d_desc.max_code),E(ne,ne.bl_desc),he=c-1;3<=he&&ne.bl_tree[2*X[he]+1]===0;he--);return ne.opt_len+=3*(he+1)+5+5+4,he}(O),D=O.opt_len+3+7>>>3,($=O.static_len+3+7>>>3)<=D&&(D=$)):D=$=G+5,G+4<=D&&j!==-1?S(O,j,G,Y):O.strategy===4||$===D?(U(O,2+(Y?1:0),3),fe(O,re,F)):(U(O,4+(Y?1:0),3),function(ne,he,pe,me){var ye;for(U(ne,he-257,5),U(ne,pe-1,5),U(ne,me-4,4),ye=0;ye<me;ye++)U(ne,ne.bl_tree[2*X[ye]+1],3);M(ne,ne.dyn_ltree,he-1),M(ne,ne.dyn_dtree,pe-1)}(O,O.l_desc.max_code+1,O.d_desc.max_code+1,te+1),fe(O,O.dyn_ltree,O.dyn_dtree)),q(O),Y&&V(O)},f._tr_tally=function(O,j,G){return O.pending_buf[O.d_buf+2*O.last_lit]=j>>>8&255,O.pending_buf[O.d_buf+2*O.last_lit+1]=255&j,O.pending_buf[O.l_buf+O.last_lit]=255&G,O.last_lit++,j===0?O.dyn_ltree[2*G]++:(O.matches++,j--,O.dyn_ltree[2*(T[G]+r+1)]++,O.dyn_dtree[2*I(j)]++),O.last_lit===O.lit_bufsize-1},f._tr_align=function(O){U(O,2,3),P(O,b,re),function(j){j.bi_valid===16?(Q(j,j.bi_buf),j.bi_buf=0,j.bi_valid=0):8<=j.bi_valid&&(j.pending_buf[j.pending++]=255&j.bi_buf,j.bi_buf>>=8,j.bi_valid-=8)}(O)}},{"../utils/common":41}],53:[function(s,d,f){d.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(s,d,f){(function(m){(function(y,h){if(!y.setImmediate){var i,a,u,r,o=1,n={},c=!1,p=y.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(y);l=l&&l.setTimeout?l:y,i={}.toString.call(y.process)==="[object process]"?function(_){process.nextTick(function(){v(_)})}:function(){if(y.postMessage&&!y.importScripts){var _=!0,C=y.onmessage;return y.onmessage=function(){_=!1},y.postMessage("","*"),y.onmessage=C,_}}()?(r="setImmediate$"+Math.random()+"$",y.addEventListener?y.addEventListener("message",b,!1):y.attachEvent("onmessage",b),function(_){y.postMessage(r+_,"*")}):y.MessageChannel?((u=new MessageChannel).port1.onmessage=function(_){v(_.data)},function(_){u.port2.postMessage(_)}):p&&"onreadystatechange"in p.createElement("script")?(a=p.documentElement,function(_){var C=p.createElement("script");C.onreadystatechange=function(){v(_),C.onreadystatechange=null,a.removeChild(C),C=null},a.appendChild(C)}):function(_){setTimeout(v,0,_)},l.setImmediate=function(_){typeof _!="function"&&(_=new Function(""+_));for(var C=new Array(arguments.length-1),w=0;w<C.length;w++)C[w]=arguments[w+1];var k={callback:_,args:C};return n[o]=k,i(o),o++},l.clearImmediate=g}function g(_){delete n[_]}function v(_){if(c)setTimeout(v,0,_);else{var C=n[_];if(C){c=!0;try{(function(w){var k=w.callback,z=w.args;switch(z.length){case 0:k();break;case 1:k(z[0]);break;case 2:k(z[0],z[1]);break;case 3:k(z[0],z[1],z[2]);break;default:k.apply(h,z)}})(C)}finally{g(_),c=!1}}}}function b(_){_.source===y&&typeof _.data=="string"&&_.data.indexOf(r)===0&&v(+_.data.slice(r.length))}})(typeof self>"u"?m===void 0?this:m:self)}).call(this,typeof Et<"u"?Et:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(qc);var sm=qc.exports;const om=$g(sm);var Kc={exports:{}};(function(t,e){(function(s,d){d()})(Et,function(){function s(a,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function d(a,u,r){var o=new XMLHttpRequest;o.open("GET",a),o.responseType="blob",o.onload=function(){i(o.response,u,r)},o.onerror=function(){console.error("could not download file")},o.send()}function f(a){var u=new XMLHttpRequest;u.open("HEAD",a,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function m(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(u)}}var y=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Et=="object"&&Et.global===Et?Et:void 0,h=y.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),i=y.saveAs||(typeof window!="object"||window!==y?function(){}:"download"in HTMLAnchorElement.prototype&&!h?function(a,u,r){var o=y.URL||y.webkitURL,n=document.createElement("a");u=u||a.name||"download",n.download=u,n.rel="noopener",typeof a=="string"?(n.href=a,n.origin===location.origin?m(n):f(n.href)?d(a,u,r):m(n,n.target="_blank")):(n.href=o.createObjectURL(a),setTimeout(function(){o.revokeObjectURL(n.href)},4e4),setTimeout(function(){m(n)},0))}:"msSaveOrOpenBlob"in navigator?function(a,u,r){if(u=u||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(s(a,r),u);else if(f(a))d(a,u,r);else{var o=document.createElement("a");o.href=a,o.target="_blank",setTimeout(function(){m(o)})}}:function(a,u,r,o){if(o=o||open("","_blank"),o&&(o.document.title=o.document.body.innerText="downloading..."),typeof a=="string")return d(a,u,r);var n=a.type==="application/octet-stream",c=/constructor/i.test(y.HTMLElement)||y.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||n&&c||h)&&typeof FileReader<"u"){var l=new FileReader;l.onloadend=function(){var b=l.result;b=p?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=b:location=b,o=null},l.readAsDataURL(a)}else{var g=y.URL||y.webkitURL,v=g.createObjectURL(a);o?o.location=v:location.href=v,o=null,setTimeout(function(){g.revokeObjectURL(v)},4e4)}});y.saveAs=i.saveAs=i,t.exports=i})})(Kc);var am=Kc.exports;const Oa="/images/product.png",ka="/images/layout.png",Aa="/images/images.png",Ea="/images/text.png",Pa="/images/cart.png",lm="/images/phone.png",cm="/images/tablet.png",um="/images/gadget.png",Ia="/images/phoneColection.png",Ma="/images/phoneColection1.png",Ra="/images/phoneColection2.png",Da="/images/phoneColection4.png",Fa="/images/phoneColection5.png",La="/images/gadgetColection7.png";const hm={data(){return{apiKey:"",fonts:null,translations:null,dataForCollection:[],phpData:[],selectedTextIndex:0,lockMode:!1,toggleState:!0,emptyCanvas:"",noInternetConnection:!1,selectedBrandTitle:"",selectedModelTitle:"",selectedCaseTitle:"",language:"",categories:[],fetchCollection:[],items:rm,filterMenu:!1,filteredItems:[],languageFound:!1,dictionary:{},mobileDiv:this.$refs.canvasRef,deskDiv:this.$refs.canvasRef,windowWidth:window.innerWidth,mobileMode:!1,translationsData:[],historyUndo:[],brands:[],activeLayerIndex:null,activeTabIndex:null,activeProductTabIndex:1,showDialog:!0,activeTabImages:2,activeCategory:1,activeTabText:1,activeIndex:null,activeProduct:null,activeBrand:null,activeModel:null,activeCase:null,activeCaseButton:null,activePatternButton:null,activeIndexColor:7,activeTextControlsTab:1,models:[],casesTypes:[],exportMaskClipImage:{},exportPlaceholderImage:{},inputText:"",counter:tt(1),position:tt(830),inputText:"",textFamily:"Roboto",fontColor:"black",selectedType:"",selectedBrand:"",selectedModel:"",selectedCaseType:"",selectedCasePrice:"",selectedCase:"",selectedImage:[],selectedText:[],currentIndex:0,objectsWithName:[],nextButtonProduct:!1,alertMessageImageType:!1,alertMessageImageTooSmall:!1,alertMessageItemStock:!1,alertMessageNoInterntet:!1,alertMessageMaximumImageUpload:!1,alertMessageUserImagesEmpty:!0,itemStockCount:[],loading:!1,canvas:null,maxUploadedLayersSize:null,uploadedLayers:[],uploadedImages:[],uploadedText:[],textIndex:0,imageIndex:1,offsetCollage:80,offsetFakeRect:45,printImage:"",previewImage:""}},watch:{},computed:{isVisible(){return this.mobileMode}},methods:{checkForDuplicateClipPaths(){const t=this.canvas.getObjects(),e=t.filter(d=>d.type==="image"&&d.name==="canvas image"),s=t.filter(d=>d.type==="rect"&&d.name==="pattern");e.forEach(d=>{const f=d.clipPath;if(f&&s.find(y=>y.top===f.top&&y.left===f.left)){const y=e.filter(h=>h.clipPath&&h.clipPath.top===f.top&&h.clipPath.left===f.left);if(y.length>1){console.warn("Duplicate clip paths found for image:",d.id);const h=y.sort((i,a)=>a.index-i.index)[0];this.canvas.remove(h),this.canvas.renderAll(),this.uploadedLayers.findIndex(i=>i.id===h.id)}}})},canBulkGenerate(){return window.CASE_CONFIGURATOR.bulkGenerateEnabled&&this.activeIndex==1},callPhpFunction(){Ta.post("index.php",{action:"myPhpFunction"}).then(t=>{console.log(t.data)}).catch(t=>{console.error(t)})},updateSelectedTextIndex(t){this.selectedTextIndex=t},setFakeImagesOnCanvasVisibleNot(){this.canvas.getObjects().forEach((e,s)=>{e&&e.type==="image"&&e.name==="fake-image"&&(this.canvas.remove(e),this.canvas.renderAll()),e&&e.type==="rect"&&e.name==="fake-rect"&&(this.canvas.remove(e),this.canvas.renderAll()),e&&e.type==="rect"&&e.name==="pattern"&&(this.canvas.remove(e),this.canvas.renderAll())})},setActiveTabIndexAfterDelay(){setTimeout(()=>{this.activeTabIndex=1},1500)},setLockMode(){if(this.lockMode=!this.lockMode,this.lockMode){const t=this.canvas.getActiveObject();this.canvas.discardActiveObject(),this.canvas.setActiveObject(t)}},disableEventsOnAllObjects(t){this.canvas.getObjects().forEach(s=>{s&&s.type==="image"&&s.name==="canvas image"&&(s.evented=!1),s&&s.type==="i-text"&&s.name==="text"&&(s.evented=!1),s&&s.type==="rect"&&s.name==="pattern"&&(s.evented=!1),s&&s.type==="rect"&&s.name==="fake-rectangle"&&(s.evented=!1),s&&s.type==="image"&&s.name==="fake-image"&&(s.evented=!1)})},enableEventsOnAllObjects(t){this.canvas.getObjects().forEach(s=>{s&&s.type==="image"&&s.name==="canvas image"&&(s.evented=!0),s&&s.type==="i-text"&&s.name==="text"&&(s.evented=!0),s&&s.type==="rect"&&s.name==="pattern"&&(s.evented=!0),s&&s.type==="rect"&&s.name==="fake-rectangle"&&(s.evented=!0),s&&s.type==="image"&&s.name==="fake-image"&&(s.evented=!0)})},setActiveCaseButton(t){this.activeCaseButton=t},setActivePatternButton(t){this.activePatternButton=t},pauseFunction(t){return new Promise(e=>setTimeout(e,t))},checkPatternObject(){const e=this.canvas.getObjects();e.filter(d=>d.type==="rect"&&d.name==="pattern").forEach(d=>{var f=e.some(m=>m.clipPath===d);f?this.canvas.renderAll():(console.log(f),this.addPlusToSelectedClipPath(d),this.canvas.renderAll())})},removeFakeRectFromCanvas(){this.canvas.getObjects().forEach((e,s)=>{e&&e.type==="rect"&&e.name==="fake-rectangle"&&(this.canvas.remove(e),this.canvas.renderAll())})},removeObjectsForClipPath(){this.canvas.getObjects().forEach((e,s)=>{e&&e.type==="rect"&&e.name==="pattern"&&(this.canvas.remove(e),this.canvas.renderAll()),e&&e.type==="rect"&&e.name==="fake-rectangle"&&(this.canvas.remove(e),this.canvas.renderAll()),e&&e.type==="image"&&e.name==="canvas image"&&(this.canvas.remove(e),this.canvas.renderAll()),e&&e.type==="image"&&e.name==="fake-image"&&(this.canvas.remove(e),this.canvas.renderAll()),e&&e.type==="i-text"&&e.name==="text"&&(this.canvas.remove(e),this.canvas.renderAll()),e&&e.type==="text"&&e.name==="fake-text"&&this.canvas.remove(e),e&&e.type==="circle"&&e.name==="pattern"&&(this.canvas.remove(e),this.canvas.renderAll())})},addPlusToSelectedClipPath(t){const e=t.getBoundingRect();t.getCenterPoint().x,t.getCenterPoint().y;const s=new Image;s.src="/images/add-square.svg";var d=new ve.fabric.Image(s,{name:"fake-image",top:e.top+e.height/2-25,left:e.left+e.width/2-25+(this.flipCase?this.offsetCollage:0),width:s.width,height:s.height,scaleX:50/s.width,scaleY:50/s.height,selectable:!1,evented:!0});this.canvas.add(d),this.canvas.renderAll();var f=new ve.fabric.Rect({top:e.top+30,left:e.left+45,width:e.width-95,height:e.height-45,hasBorders:!0,selectable:!1,name:"fake-rectangle",hasControls:!0,opacity:1,borderStyle:"dashed",evented:!1,cornerStyle:"round",fill:"rgba(5, 5, 5, 0.2)",stroke:"black",strokeWidth:2,strokeDashArray:[10,10],globalCompositeOperation:"source-atop",hoverCursor:"pointer",rx:20,ry:20,lockMovementX:!0,lockMovementY:!0});this.canvas.add(d),this.canvas.renderAll(),d.on("mousedown",m=>{this.removeFakeRectFromCanvas(),this.canvas.setActiveObject(t),this.canvas.remove(m.target),this.canvas.add(f),this.canvas.requestRenderAll(),this.canvas.setActiveObject(t),this.setActiveTabIndex(3)})},toggleShowDialog(){this.windowWidth=window.innerWidth,this.mobileMode=this.windowWidth<=760},handleCanvasClick(){this.showDialog=!1},animateLeave(){this.$motion.leave({opacity:1,y:500,delay:300,duration:1300,easing:"ease-out"})},setActivePatterns(){var t=this.canvas.getObjects();t.forEach(e=>{e.name==="pattern"&&(e.set("active",!1),this.canvas.renderAll())})},deactivateActivePatterns(){var t=this.canvas.getObjects();t.forEach(e=>{e.name==="pattern"&&(e.setControlsVisibility({bl:!1,br:!1,tl:!1,tr:!1,mb:!1,ml:!1,mr:!1,mt:!1,mtr:!1,customControl:!0,customControl2:!1,customControl3:!1,customControl4:!1,customControl5:!1}),e.set({selectable:!0,evented:!0,hasBorders:!1}),this.canvas.renderAll())})},activateDrag(){var t=this.canvas.getActiveObject();t&&t.type==="image"&&t.name==="canvas image"&&(t.isDragging=!0,this.canvas.renderAll())},deselectObject(t){const e=t.clipPath;e&&(this.selectedObject=null,e&&(this.deactivateActivePatterns(),e.setControlsVisibility({bl:!1,br:!1,tl:!1,tr:!1,mb:!1,ml:!1,mr:!1,mt:!1,mtr:!1,customControl:!0,customControl2:!1,customControl3:!1,customControl4:!1,customControl5:!1}),e.set({selectable:!0,evented:!0,hasBorders:!1}),this.canvas.renderAll(),this.canvas.setActiveObject(e),this.canvas.renderAll()))},checkEmptyCanvas(){const t=this.canvas.getObjects();let e=!1;t.forEach((s,d)=>{(s.name==="canvas image"||s.name==="text")&&(e=!0)}),this.emptyCanvas=e},clickLastUploadedImage(){const t=this.uploadedImages[this.uploadedImages.length-1];this.$refs[`image-${t.id}`].$el.click()},updateSelectedBrandTitle(t){const e=this.brands.find(s=>s.id===t.id);this.selectedBrandTitle=e.title,this.selectedBrand=e.id},updateSelectedModelTitle(t){const e=this.models.find(s=>s.id===t.id);this.selectedModelTitle=e.title,this.selectedModel=t.id},updateSelectedCaseTitle(t){const e=this.casesTypes.find(s=>s.id===t.id);this.selectedCase=t.id,this.selectedCasePrice=t.price,this.selectedCaseTitle=e.title},setLayers(){this.$set(this,"uploadedLayers",this.canvas.getObjects())},toggleFilterMenu(){this.filterMenu=!this.filterMenu},filterByCategory(t){this.filteredItems=this.filterItemsByCategory(this.collection.items,t),this.toggleFilterMenu()},filterItemsByCategory(t,e){return t.filter(s=>s.category===e)},async fetchDataForCollection(){try{const t=await window.CASE_CONFIGURATOR.getCollection(),e=t.map(m=>({src:m.path,category:m.category})),s=t.map(m=>({category:m.category}));this.collection={items:e};const f=[...new Set(s.map(m=>m.category))].map(m=>({category:m}));this.categories={categories:f},this.items=this.collection,this.categories.categories.length>0&&this.filterByCategory(this.categories.categories[0].category)}catch(t){console.error("Error using dataForCollection:",t)}},uploadImageFromCollection(t){var s;this.alertMessageUserImagesEmpty=!1;const e=t.src;if(this.imageIndex<=6){this.uploadedImages.push({url:e,id:this.imageIndex+1});const d=((s=this.uploadedImages)==null?void 0:s.length)-1;d!==void 0&&this.addClipPathToSelectedObject(d),this.imageIndex=this.imageIndex+1,this.canvas.renderAll()}else{this.alertMessageMaximumImageUpload=!0;return}},uploadText(){if(this.textIndex<=5&&this.inputText!=="")this.uploadedText.push({id:this.imageIndex+1,text:this.inputText,textFont:this.textFamily,textColor:this.fontColor}),this.textIndex=this.textIndex+1,this.addTextCanvas(this.uploadedText.length-1);else return},findLanguageAndDictionary(){const t=this.translations.array.find(e=>e.language===this.language);t&&(this.languageFound=!0,this.dictionary=t.dictionary)},initCanvas(t){this.canvas&&this.canvas.dispose(),this.canvas=new ve.fabric.Canvas(t,{width:450,height:500,getContext:"2d",willReadFrequently:!0,renderOnAddRemove:!1,allowGroupSelection:!1,controlsAboveOverlay:!0,preserveObjectStacking:!0,selectable:!1,selection:!1,targetFindTolerance:5},{passive:!0}),this.canvas.getElement().getContext("2d",{willReadFrequently:!0});const e=new ve.fabric.Rect({width:210,height:430,rx:20,ry:20,top:20,left:0,name:"fakeClip",opacity:.5,selectable:!1,evented:!1,fill:"rgba(5, 255, 255, 0.01)",strokeWidth:2,cornerStyle:"round",strokeDashArray:[8,16],stroke:"rgba(5, 5, 5, 1)",lockMovementX:!0,lockMovementY:!0});this.canvas.add(e),e.visible=!0,e.center(),this.canvas.moveTo(e,1),this.canvas.renderAll(),e.animate("opacity",0,{duration:1e3,onLoad:this.canvas.renderAll.bind(this.canvas)})},async loadImages(){const e=this.canvas.getObjects().find(m=>m.name=="pattern"),s=await window.CASE_CONFIGURATOR.getBulkGenerateImages(),d=[];for(let m=0;m<s.length;m++)this.removeAllUserImages(),d.push(new Promise((y,h)=>{ve.fabric.Image.fromURL(s[m].path,i=>{const a=new ve.fabric.Rect({width:e.width,height:e.height,top:e.top,left:e.left,absolutePositioned:!0,fill:"",perPixelTargetFind:!1,opacity:1,hasBorders:!0,borderColor:"#3ff4ff",clipPath:e.clipPath,evented:!1,lockMovementX:!0,lockMovementY:!0});i.set({left:e.left+e.width/2,top:e.top+e.height/2,visible:!1,width:i.width,height:i.height,originX:"center",originY:"center",scaleX:e.width/i.width,scaleY:e.height/i.height,clickable:!0,targetFindTolerance:5,selectable:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!0,centerH:!0,centerV:!0,fill:"rgba(5, 5, 5, 0,.01)",name:"canvas image",clipPath:a,visible:!0,globalCompositeOperation:"source-atop"}),i.setControlsVisibility({bl:!0,br:!1,tl:!1,tr:!1,mb:!1,ml:!1,mr:!1,mt:!1,mtr:!0,customControl:!1,customControl2:!1,customControl3:!0}),this.canvas.add(i),this.canvas.preserveObjectStacking=!0,this.canvas.getObjects().forEach((r,o)=>{r&&r.type==="image"&&r.name==="transparent"&&(this.canvas.remove(r),this.canvas.bringToFront(r))}),this.canvas.sendBackwards(i),this.canvas.renderAll(),this.canvas.lowerCanvasEl.toBlob(y,"image/png")})}));const f=new om;Promise.all(d).then(m=>{m.forEach((y,h)=>f.file(`image_${h}.png`,y)),f.generateAsync({type:"blob"}).then(y=>{am.saveAs(y,"images.zip"),this.removeAllUserImages(),this.canvas.renderAll()})})},async exportImages(){await new Promise(e=>canvas.toBlob(e,"image/png"));const t=document.createElement("a");t.href=dataURL,t.download=`image${index+1}.png`,t.click()},handleResize(){this.windowWidth=window.innerWidth;const t=this.windowWidth<=750?this.$refs.canvasRef:this.$refs.canvasRef;this.windowWidth<=750?(window.location.reload(),this.initCanvas(t)):(window.location.reload(),this.initCanvas(t))},setDimensions(t){let e=t/this.canvas.getWidth(),s=e*this.canvas.getHeight();this.canvas.setDimensions({width:t,height:s}),this.canvas.calcOffset();let d=this.canvas.getObjects();for(let f in d){let m=d[f].scaleX,y=d[f].scaleY,h=d[f].left,i=d[f].top;d[f].scaleX=m*e,d[f].scaleY=y*e,d[f].left=h*e,d[f].top=i*e,d[f].setCoords()}this.canvas.getObjects().forEach(f=>{f.clipPath&&(f.clipPath.scaleX*=e,f.clipPath.scaleY*=e,f.clipPath.left*=e,f.clipPath.top*=e,f.clipPath.setCoords())})},dataURLtoBlob(t){for(var e=t.split(","),s=e[0].match(/:(.*?);/)[1],d=atob(e[1]),f=d.length,m=new Uint8Array(f);f--;)m[f]=d.charCodeAt(f);return new Blob([m],{type:s})},pngUpload(){const t=this.dataURLtoBlob(this.printImage),e=this.dataURLtoBlob(this.printImage),s=new FormData;s.append("file_preview",t,"preview.png"),s.append("file_print",e,"print.png");const d={withCredentials:!0,headers:{Accept:"application/json","Content-Type":"multipart/form-data; boundary=${dataFull._boundary}"},timeout:64e3};Ta.post("https://covers.mtpdev3.com/api/1.0/assetsblob",s,d).then(f=>{let m=f.data,y=m.preview,h=m.print;this.generateUrl(y,h),result.textContent=m.results[0].email}).catch(function(f){}).finally(function(){})},alertMessageImageTypeClose(){this.alertMessageImageType=!1},alertMessageImageTooSmallClose(){this.alertMessageImageTooSmall=!1},alertMessageItemStockClose(){this.alertMessageItemStock=!1},alertMessageNoInternetClose(){this.alertMessageNoInterntet=!0,this.activeProductTabIndex=1},alertMessageMaximumImageUploadClose(){this.alertMessageMaximumImageUpload=!1},async fetchTranslationsData(){const t=await window.CASE_CONFIGURATOR.getTranslations();this.dictionary=t},generateUrl(t,e){const s="https://www.mytrendyphone.eu/shop/showbasket.html",d=this.selectedBrand;console.log(d);const f=this.selectedModel;console.log(f);const m=this.casesTypes[this.selectedCaseType].dd_product_id;console.log(m);const y=this.selectedCase,h="Transparent",i=new URLSearchParams;i.set("ProductID",m),i.set("Add","1"),i.set("AMOUNT","1"),i.set("Variantgroup1","i"),i.set("variant1",t),i.set("Variantgroup2","p"),i.set("variant2",`${d} ${f} - ${y} - ${h}`),i.set("Variantgroup3","t"),i.set("variant3",e),i.set("PostOrigin","productinfo");const a=`${s}?${i.toString()}`;console.log(a),this.goToLink(a)},goToLink(t){window.location.href=t},toggleDialog(){this.showDialog=!this.showDialog},setActiveProductTabIndex(t){setTimeout(()=>{this.activeProductTabIndex=t},1e3)},setActiveTabIndex(t){this.mobileMode===!0?this.toggleDialog():this.showDialog=!0,this.activeTabIndex=t},setActiveTabImages(t){this.activeTabImages=t},setActiveCategory(t){this.activeCategory=t},setActiveTabText(t){this.activeTabText=t},setActiveTextControlsTab(t){this.activeTextControlsTab=t},setActiveItemIndex(t){this.activeIndex=t},setActiveColorIndex(t){this.activeIndexColor=t},setActiveProductIndex(t){this.activeProduct=t},setActiveBrandIndex(t){this.activeBrand=t},setActiveModelIndex(t){this.activeModel=t},setActiveCaseIndex(t){this.activeCase=t},moveLeft(){this.position-=400},moveRight(){this.position+=400},incrementCounter(){this.counter++},decrementCounter(){this.counter--},nextClick(){this.moveLeft(),this.incrementCounter()},backClick(){this.moveRight(),this.decrementCounter()},addFontColor(t,e){this.fontColor=t,this.setActiveColorIndex(e)},alignTextTopLeft(t){const e=this.canvas.getActiveObject();if(e&&e.type==="i-text"){const s=e.clipPath;s.getCenterPoint();const d=s.getBoundingRect();e.setPositionByOrigin({x:d.left+30,y:d.top+5},"left","top"),this.canvas.renderAll()}},alignTextRight(t){const e=this.canvas.getActiveObject();if(e&&e.type==="i-text"){const s=e.clipPath,d=s.getCenterPoint();s.getBoundingRect(),e.setPositionByOrigin({x:d.x+e.getBoundingRect().width-40,y:e.getBoundingRect().top+e.getBoundingRect().height/2},"width","center"),this.canvas.renderAll()}},alignTextLeft(t){const e=this.canvas.getActiveObject();if(e&&e.type==="i-text"){const s=e.clipPath;s.getCenterPoint();const d=s.getBoundingRect();e.set({left:d.left+50}),this.canvas.renderAll()}},alignTextCenter(t){const e=this.canvas.getActiveObject();if(e&&e.type==="i-text"){const s=e.clipPath,d=s.getCenterPoint();s.getBoundingRect(),e.setPositionByOrigin({x:d.x,y:d.y},"center","center"),this.canvas.renderAll()}},alignTextTop(t){const e=this.canvas.getActiveObject();if(e&&e.type==="i-text"){const s=e.clipPath;s.getCenterPoint();const d=s.getBoundingRect();e.set({top:d.top+e.getBoundingRect().height/2+d.height*.05}),this.canvas.renderAll()}},alignTextBottom(t){const e=this.canvas.getActiveObject();if(e&&e.type==="i-text"){const s=e.clipPath;s.getCenterPoint();const d=s.getBoundingRect();e.set({top:d.top+d.height-e.height/2-d.height*.05}),this.canvas.renderAll()}},updateSelectedText(){const t=this.canvas.getActiveObject();t&&(t.text=this.inputText,this.canvas.renderAll())},updateSelectedTextColor(){const t=this.canvas.getActiveObject();t&&(t.fill=this.fontColor,this.canvas.renderAll())},updateSelectedTextFont(t){this.textFamily=t.text;const e=this.canvas.getActiveObject();e&&(e.fontFamily=t.text,this.canvas.renderAll())},addTextCanvas(t){if(this.checkEmptyCanvas(),this.canvas.getObjects().forEach((s,d)=>{s&&s.type==="image"&&s.name==="fake-image"&&(this.canvas.remove(s),this.canvas.renderAll()),s&&s.type==="rect"&&s.name==="fake-rectangle"&&(this.canvas.remove(s),this.canvas.renderAll())}),this.canvas.getActiveObject(),this.uploadedLayers.length>=0){const s=new ve.fabric.Rect({top:30,left:90+this.offsetCollage,width:270,height:435,absolutePositioned:!0,fill:"",perPixelTargetFind:!1,hasBorders:!0,borderColor:"#3ff4ff",evented:!1}),d=new ve.fabric.IText(this.uploadedText[t].text,{left:s.left+s.width/2,top:s.top+s.height/2,id:`rect-${this.uploadedLayers.length}`,scaleX:1,scaleY:1,originX:"center",originY:"center",name:"text",fontFamily:this.textFamily,fontSize:50,globalCompositeOperation:"source-atop",clipPath:s,targetFindTolerance:5,selectable:!0,textAlign:"center",hasControls:!0,hasBorders:!0,perPixelTargetFind:!0,fill:this.uploadedText[t].textColor});let f=this.uploadedLayers.length;this.uploadedLayers.splice(0,0,{text:this.uploadedText[t].text,id:`rect-${f}`}),d.setControlsVisibility({bl:!0,br:!1,tl:!1,tr:!1,mb:!1,ml:!1,mr:!1,mt:!1,mtr:!0,customControl:!1,customControl2:!1,customControl3:!0,customControl4:!1,customControl5:!0}),d.visible=!0,d.selectable=!0,this.canvas.add(d),this.canvas.moveTo(d,20),console.log(this.uploadedLayers),d.on("mouse:down",i=>{const a=i.target;a&&a.selectable&&(this.canvas.setActiveObject(a),this.canvas.renderAll())}),this.canvas.renderAll(),this.canvas.getObjects().forEach((i,a)=>{i&&i.type==="image"&&i.name==="transparent"&&(this.canvas.remove(i),this.canvas.moveTo(i,20))}),this.canvas.renderAll();const h=this.canvas.getObjects().find(i=>i.id===this.uploadedLayers[0].id);console.log(h),this.setActiveObjectById(h.id),setTimeout(()=>{this.setActiveObjectById(h.id)},1e3)}this.checkPatternObject()},addPhoneToCanvas(t){window.CASE_CONFIGURATOR.inStock(this.selectedType,this.selectedBrand,this.selectedModel,this.selectedCase)||(this.alertMessageItemStock=!0),this.clearAllCanvas(),t.title==="Flip Case"?(this.offsetCollage=80,this.offsetCollage=this.offsetCollage-30,this.canvas.renderAll()):(this.offsetCollage=0,this.canvas.renderAll()),this.exportMaskClipImage=t.image_draw_mask,this.exportPlaceholderImage=t.image_placeholder,this.canvas.getObjects().forEach((d,f)=>{d&&d.type==="image"&&d.name==="transparent"&&this.canvas.remove(d),d&&d.type==="image"&&d.name==="background"&&this.canvas.remove(d),d&&d.type==="rect"&&d.name==="blank"&&this.canvas.remove(d),d&&d.type==="rect"&&d.name==="pattern"&&this.canvas.remove(d)}),ve.fabric.Image.fromURL(t.image_placeholder,d=>{d.scaleToHeight(320),d.scaleToWidth(320),d.left,d.top,d.opacity=0,d.evented=!1,d.selectable=!1,d.evented=!1,d.name="background",d.objectCaching=!1,d.selectable=!1,d.targetFindTolerance=5,d.perPixelTargetFind=!0,this.canvas.add(d),d.center(),this.canvas.moveTo(d,0),this.canvas.renderAll(),d.animate("opacity",1,{duration:500,onChange:this.canvas.renderAll.bind(this.canvas)})},{crossOrigin:"anonymous"}),ve.fabric.Image.fromURL(t.image_draw_mask,d=>{d.scaleToHeight(320),d.scaleToWidth(320),d.left,d.top,d.opacity=0,d.evented=!1,d.selectable=!1,d.evented=!1,d.name="transparent",d.objectCaching=!1,d.targetFindTolerance=5,d.perPixelTargetFind=!0,this.canvas.add(d),d.center(),this.canvas.moveTo(d,1),this.canvas.renderAll(),d.animate("opacity",1,{duration:500,onChange:this.canvas.renderAll.bind(this.canvas)})},{crossOrigin:"anonymous"})},addUploadedImageToCanvas(t){const e=this.uploadedImages[t];var s=new Image;s.set({crossOrigin:"anonymous"}),s.onload=()=>{ve.fabric.util.loadImage(s.src,d=>{const f=d.set({left:200,top:100,scaleX:.3,scaleY:.3,selectable:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!0,id:t,centerH:!0,centerV:!0,name:"canvas image"});this.canvas.add(f),this.canvas.moveTo(f,2),this.canvas.setActiveObject(f),this.canvas.renderAll()})},s.src=e.url},setActiveObjectById(t){const s=this.canvas.getObjects().find(d=>d.id===t);this.activeLayerIndex=t.slice(5),s&&(this.canvas.getActiveObject()===s?(this.deselectObject(s),this.canvas.renderAll()):(this.canvas.setActiveObject(s),this.canvas.renderAll()),this.canvas.renderAll()),this.canvas.renderAll()},addClipPathToSelectedObject(t){this.checkEmptyCanvas(),this.canvas.getObjects().forEach((d,f)=>{d&&d.type==="image"&&d.name==="fake-image"&&(this.canvas.remove(d),this.canvas.renderAll()),d&&d.type==="i-text"&&d.name==="text"&&(this.canvas.discardActiveObject(),this.canvas.renderAll()),d&&d.type==="rect"&&d.name==="fake-rectangle"&&(this.canvas.remove(d),this.canvas.renderAll())});var s=this.canvas.getActiveObject();if(!s||s.type===null){const f=this.canvas.getObjects().filter(m=>m.type==="rect"&&m.name==="pattern");this.canvas.setActiveObject(f[this.currentIndex]),s=f[this.currentIndex],this.currentIndex=(this.currentIndex+1)%f.length,console.log("Current Index: ",this.currentIndex)}if(s.type==="rect"&&s.name==="pattern"){const d=this.uploadedImages[t],f=new Image;f.onload=()=>{const m=new ve.fabric.Rect({width:s.width,height:s.height,top:s.top,left:s.left,absolutePositioned:!0,fill:"",perPixelTargetFind:!1,opacity:1,hasBorders:!0,borderColor:"#3ff4ff",clipPath:s.clipPath,evented:!1,lockMovementX:!0,lockMovementY:!0}),y=new ve.fabric.Image(f,{left:s.left+s.width/2,top:s.top+s.height/2,id:`rect-${this.uploadedLayers.length}`,originX:"center",originY:"center",cornerSize:this.canvas.width*.05,clickable:!0,targetFindTolerance:5,evented:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!0,centerH:!0,centerV:!0,fill:"rgba(5, 5, 5, 0,.01)",name:"canvas image",clipPath:m,globalCompositeOperation:"source-atop"});this.canvas.getObjects().indexOf(y);let i=this.uploadedLayers.length;if(this.uploadedLayers.length>=0&&!this.uploadedLayers.find(a=>a.id===`rect-${i}`)){this.uploadedLayers.splice(0,0,{url:d.url,id:`rect-${i}`}),y.setControlsVisibility({bl:!0,br:!1,tl:!1,tr:!1,mb:!0,ml:!0,mr:!0,mt:!0,mtr:!0,customControl:!1,customControl2:!1,customControl3:!0,customControl4:!1,customControl5:!0}),this.canvas.add(y),y.scaleToHeight(m.height),this.canvas.moveTo(y,8),this.canvas.renderAll();const a=this.canvas.getObjects();a.forEach((u,r)=>{u&&u.type==="image"&&u.name==="transparent"&&(this.canvas.remove(u),this.canvas.moveTo(u,9)),u&&u.type==="i-text"&&u.name==="text"&&this.canvas.moveTo(u,8)}),a.forEach((u,r)=>{console.log(`Item ${r}: ${u.type} name: ${u.name} id: ${u.id} `),console.log(u),console.log(this.uploadedLayers)}),this.canvas.renderAll(),this.checkForDuplicateClipPaths()}},f.src=d.url,f.width=d.width,f.height=d.height}if(s.type==="circle"&&s.name==="pattern"){const d=this.uploadedImages[t],f=new Image;f.onload=()=>{const m=new ve.fabric.Circle({width:s.width,height:s.height,top:s.top-25,left:s.left-25,radius:s.radius,absolutePositioned:!0,fill:"",perPixelTargetFind:!1,opacity:1,hasBorders:!0,borderColor:"#3ff4ff",clipPath:s.clipPath,evented:!1}),y=new ve.fabric.Image(f,{left:s.left+s.width/2,top:s.top+s.height/2,scaleX:.12,scaleY:.12,originX:"center",originY:"center",cornerSize:this.canvas.width*.05,clickable:!0,targetFindTolerance:5,selectable:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!0,centerH:!0,centerV:!0,name:"canvas image",clipPath:m,globalCompositeOperation:"source-atop"});y.setControlsVisibility({bl:!0,br:!1,tl:!1,tr:!1,mb:!1,ml:!1,mr:!1,mt:!1,mtr:!0,customControl:!1,customControl2:!1,customControl3:!0}),this.canvas.add(y),this.canvas.moveTo(y,4),this.canvas.getObjects().forEach((i,a)=>{i&&i.type==="image"&&i.name==="transparent"&&(this.canvas.remove(i),this.canvas.moveTo(i,9))}),this.canvas.renderAll()},f.src=d.url,f.width=d.width,f.height=d.height}this.checkPatternObject(),this.toggleDialog()},clearInput1(){this.$refs.fileInput1.value=null},clearInput(){this.$refs.fileInput.value=null},addCollage2(t){this.maxUploadedLayersSize=6,this.currentIndex=0,this.uploadedLayers=[],this.activeLayerIndex=null,this.setActiveItemIndex(t),this.removeObjectsForClipPath();var e=new ve.fabric.Rect({top:30,left:90+this.offsetCollage,width:270,height:215,selectable:!0,name:"pattern",opacity:0,hasControls:!0,hoverCursor:"pointer",cornerStyle:"round",fill:"rgba(5, 5, 5, 0.01)",globalCompositeOperation:"source-atop",hasBorders:!1,borderColor:"gray",lockMovementX:!0,lockMovementY:!0});e.setControlsVisibility({customControl:!0,customControl2:!1,customControl3:!1,customControl4:!1,customControl5:!1,bl:!1,br:!1,tl:!1,tr:!1,mb:!1,ml:!1,mr:!1,mt:!1,mtr:!1});var s=new ve.fabric.Rect({top:240,left:90+this.offsetCollage,width:270,height:230,selectable:!0,name:"pattern",hasControls:!0,opacity:0,cornerStyle:"round",fill:"rgba(5, 5, 5, 0.1)",stroke:"black",strokeWidth:2,strokeDashArray:[10,10],hasBorders:!1,borderColor:"gray",globalCompositeOperation:"source-atop",hoverCursor:"pointer",lockMovementX:!0,lockMovementY:!0});s.setControlsVisibility({customControl:!0,customControl2:!1,customControl3:!1,customControl4:!1,customControl5:!1,bl:!1,br:!1,tl:!1,tr:!1,mb:!1,ml:!1,mr:!1,mt:!1,mtr:!1}),e.on("mousedown",d=>{const f=d.target;f&&f.selectable&&(this.canvas.setActiveObject(f),this.canvas.renderAll())}),s.on("mousedown",d=>{this.checkPatternObject();const f=d.target;f&&f.selectable&&(this.canvas.setActiveObject(f),this.canvas.renderAll())}),this.canvas.add(e,s),this.canvas.moveTo(e,2),this.canvas.moveTo(s,3),e.animate("opacity",1,{duration:500,onChange:this.canvas.renderAll.bind(this.canvas)}),s.animate("opacity",1,{duration:500,onChange:this.canvas.renderAll.bind(this.canvas)}),this.addPlusToSelectedClipPath(e),this.canvas.renderAll(),this.addPlusToSelectedClipPath(s),this.canvas.renderAll()},addCollage1(t){this.maxUploadedLayersSize=1,this.currentIndex=0,this.uploadedLayers=[],this.activeLayerIndex=null,this.setActiveItemIndex(t),this.removeObjectsForClipPath();var e=new ve.fabric.Rect({top:30,left:90+this.offsetCollage,width:270,height:430,hasBorders:!1,selectable:!0,name:"pattern",hasControls:!0,opacity:0,borderStyle:"dashed",cornerStyle:"round",fill:"rgba(5, 5, 5, 0.01)",stroke:"black",strokeWidth:1,strokeDashArray:[10,10],globalCompositeOperation:"source-atop",hoverCursor:"pointer",rx:10,ry:10,lockMovementX:!0,lockMovementY:!0});e.setControlsVisibility({customControl:!0,customControl2:!1,customControl3:!1,customControl4:!1,customControl5:!1,bl:!1,br:!1,tl:!1,tr:!1,mb:!1,ml:!1,mr:!1,mt:!1,mtr:!1}),e.on("mouseover",()=>{e.set({fill:"rgba(5, 5, 5, 0.1)"}),e.animate("opacity",1,{duration:200,onChange:this.canvas.renderAll.bind(this.canvas)})}),e.on("mouseout",()=>{e.set({fill:"rgba(5, 5, 5, 0.01)"}),e.animate("opacity",0,{duration:200,onChange:this.canvas.renderAll.bind(this.canvas)})}),e.on("mousedown",s=>{const d=s.target;d&&d.selectable&&(this.canvas.setActiveObject(d),this.canvas.renderAll())}),this.canvas.add(e),this.canvas.moveTo(e,2),e.animate("opacity",1,{duration:500,onChange:this.canvas.renderAll.bind(this.canvas)}),this.addPlusToSelectedClipPath(e),this.canvas.renderAll()},addCollage3(t){this.maxUploadedLayersSize=3,this.uploadedLayers=[],this.activeLayerIndex=null,this.setActiveItemIndex(t),this.removeObjectsForClipPath();var e=new ve.fabric.Rect({top:30,left:90+this.offsetCollage,width:270,height:150,selectable:!0,name:"pattern",hasControls:!0,opacity:0,hoverCursor:"pointer",hasBorders:!1,cornerStyle:"round",fill:"rgba(5, 5, 5, 0.01)",stroke:"black",strokeWidth:2,strokeDashArray:[10,10],globalCompositeOperation:"source-atop",lockMovementX:!0,lockMovementY:!0});e.setControlsVisibility({customControl:!0,customControl2:!1,customControl3:!1,customControl4:!1,customControl5:!1,bl:!1,br:!1,tl:!1,tr:!1,mb:!1,ml:!1,mr:!1,mt:!1,mtr:!1});var s=new ve.fabric.Rect({top:327,left:90+this.offsetCollage,width:270,height:150,selectable:!0,name:"pattern",hasControls:!0,opacity:0,hasBorders:!1,cornerStyle:"round",fill:"rgba(5, 5, 5, 0.01)",stroke:"black",strokeWidth:2,strokeDashArray:[10,10],globalCompositeOperation:"source-atop",hoverCursor:"pointer",lockMovementX:!0,lockMovementY:!0});s.setControlsVisibility({customControl:!0,customControl2:!1,customControl3:!1,customControl4:!1,customControl5:!1,bl:!1,br:!1,tl:!1,tr:!1,mb:!1,ml:!1,mr:!1,mt:!1,mtr:!1});var d=new ve.fabric.Rect({top:175,left:90+this.offsetCollage,width:270,height:150,selectable:!0,name:"pattern",hasControls:!0,opacity:0,hoverCursor:"pointer",hasBorders:!1,cornerStyle:"round",fill:"rgba(5, 5, 5, 0.01)",stroke:"black",strokeWidth:0,strokeDashArray:[10,10],globalCompositeOperation:"source-atop",lockMovementX:!0,lockMovementY:!0});d.setControlsVisibility({customControl:!0,customControl2:!1,customControl3:!1,customControl4:!1,customControl5:!1,bl:!1,br:!1,tl:!1,tr:!1,mb:!1,ml:!1,mr:!1,mt:!1,mtr:!1}),e.on("mouse:down",f=>{const m=f.target;m&&m.selectable&&this.canvas.setActiveObject(m)}),d.on("mouse:down",f=>{const m=f.target;m&&m.selectable&&this.canvas.setActiveObject(m)}),s.on("mouse:down",f=>{const m=f.target;m&&m.selectable&&this.canvas.setActiveObject(m)}),this.canvas.add(e,d,s),this.canvas.moveTo(e,2),this.canvas.moveTo(d,3),this.canvas.moveTo(s,4),e.animate("opacity",1,{duration:300,onChange:this.canvas.renderAll.bind(this.canvas)}),d.animate("opacity",1,{duration:600,onChange:this.canvas.renderAll.bind(this.canvas)}),s.animate("opacity",1,{duration:900,onChange:this.canvas.renderAll.bind(this.canvas)}),this.addPlusToSelectedClipPath(e),this.addPlusToSelectedClipPath(d),this.addPlusToSelectedClipPath(s),this.canvas.renderAll()},addCollage4(t){this.maxUploadedLayersSize=4,this.currentIndex=0,this.uploadedLayers=[],this.activeLayerIndex=null,this.setActiveItemIndex(t),this.removeObjectsForClipPath();var e=new ve.fabric.Rect({top:20,left:90+this.offsetCollage,width:270,height:110,selectable:!0,name:"pattern",hasControls:!0,opacity:0,hoverCursor:"pointer",hasBorders:!1,cornerStyle:"round",fill:"rgba(5, 5, 5, 0.01)",stroke:"black",strokeWidth:2,strokeDashArray:[10,10],globalCompositeOperation:"source-atop",lockMovementX:!0,lockMovementY:!0});e.setControlsVisibility({customControl:!0,customControl2:!1,customControl3:!1,customControl4:!1,customControl5:!1,bl:!1,br:!1,tl:!1,tr:!1,mb:!1,ml:!1,mr:!1,mt:!1,mtr:!1});var s=new ve.fabric.Rect({top:132,left:90+this.offsetCollage,width:270,height:110,selectable:!0,name:"pattern",hasControls:!0,opacity:0,hasBorders:!1,cornerStyle:"round",fill:"rgba(5, 5, 5, 0.01)",globalCompositeOperation:"source-atop",lockMovementX:!0,lockMovementY:!0});s.setControlsVisibility({customControl:!0,customControl2:!1,customControl3:!1,customControl4:!1,customControl5:!1,bl:!1,br:!1,tl:!1,tr:!1,mb:!1,ml:!1,mr:!1,mt:!1,mtr:!1});var d=new ve.fabric.Rect({top:243,left:90+this.offsetCollage,width:270,height:110,selectable:!0,name:"pattern",hasControls:!0,opacity:0,hoverCursor:"pointer",hasBorders:!1,cornerStyle:"round",fill:"rgba(5, 5, 5, 0.01)",stroke:"black",strokeWidth:2,strokeDashArray:[10,10],globalCompositeOperation:"source-atop",lockMovementX:!0,lockMovementY:!0});d.setControlsVisibility({customControl:!0,customControl2:!1,customControl3:!1,customControl4:!1,customControl5:!1,bl:!1,br:!1,tl:!1,tr:!1,mb:!1,ml:!1,mr:!1,mt:!1,mtr:!1});var f=new ve.fabric.Rect({top:356,left:90+this.offsetCollage,width:270,height:110,selectable:!0,name:"pattern",hasControls:!0,opacity:0,hoverCursor:"pointer",hasBorders:!1,cornerStyle:"round",fill:"rgba(5, 5, 5, 0.01)",globalCompositeOperation:"source-atop",lockMovementX:!0,lockMovementY:!0});f.setControlsVisibility({customControl:!0,customControl2:!1,customControl3:!1,customControl4:!1,customControl5:!1,bl:!1,br:!1,tl:!1,tr:!1,mb:!1,ml:!1,mr:!1,mt:!1,mtr:!1}),e.on("mouse:down",m=>{const y=m.target;y&&y.selectable&&(this.canvas.setActiveObject(y),this.canvas.renderAll())}),s.on("mouse:down",m=>{const y=m.target;y&&y.selectable&&(this.canvas.setActiveObject(y),this.canvas.renderAll())}),d.on("mouse:down",m=>{const y=m.target;y&&y.selectable&&this.canvas.setActiveObject(y)}),f.on("mouse:down",m=>{const y=m.target;y&&y.selectable&&(this.canvas.setActiveObject(y),this.canvas.renderAll())}),this.canvas.add(e,s,d,f),this.canvas.moveTo(e,2),this.canvas.moveTo(s,3),this.canvas.moveTo(d,4),this.canvas.moveTo(f,5),e.animate("opacity",1,{duration:200,onChange:this.canvas.renderAll.bind(this.canvas)}),s.animate("opacity",1,{duration:400,onChange:this.canvas.renderAll.bind(this.canvas)}),d.animate("opacity",1,{duration:400,onChange:this.canvas.renderAll.bind(this.canvas)}),f.animate("opacity",1,{duration:400,onChange:this.canvas.renderAll.bind(this.canvas)}),this.addPlusToSelectedClipPath(e),this.canvas.renderAll(),this.addPlusToSelectedClipPath(s),this.canvas.renderAll(),this.addPlusToSelectedClipPath(d),this.canvas.renderAll(),this.addPlusToSelectedClipPath(f),this.canvas.renderAll()},addCollage5(t){this.maxUploadedLayersSize=1,this.uploadedLayers=[],this.activeLayerIndex=null,this.setActiveItemIndex(t),this.removeObjectsForClipPath();var e=new ve.fabric.Rect({top:173,left:150+this.offsetCollage,width:150,height:150,selectable:!0,name:"pattern",hasControls:!0,hoverCursor:"pointer",hasBorders:!1,cornerStyle:"round",fill:"rgba(5, 5, 5, 0.01)",stroke:"black",opacity:0,strokeWidth:2,strokeDashArray:[10,10],globalCompositeOperation:"source-atop",lockMovementX:!0,lockMovementY:!0});e.setControlsVisibility({customControl:!0,customControl2:!1,customControl3:!1,customControl4:!1,customControl5:!1,bl:!1,br:!1,tl:!1,tr:!1,mb:!1,ml:!1,mr:!1,mt:!1,mtr:!1}),e.on("mouse:down",s=>{const d=s.target;d&&d.selectable&&(this.canvas.setActiveObject(d),this.canvas.renderAll())}),this.canvas.add(e),this.canvas.moveTo(e,2),e.animate("opacity",1,{duration:500,onChange:this.canvas.renderAll.bind(this.canvas)}),this.addPlusToSelectedClipPath(e),this.canvas.renderAll()},addCollage6(t){this.uploadedLayers=[],this.activeLayerIndex=null,this.setActiveItemIndex(t),this.removeObjectsForClipPath();const e=new ve.fabric.Circle({radius:100,top:173,left:150+this.offsetCollage,width:150,height:150,backgroundColor:"",selectable:!0,name:"pattern",hasControls:!0,opacity:0,hoverCursor:"pointer",hasBorders:!1,cornerStyle:"round",fill:"rgba(5, 5, 5, 0.01)",stroke:"black",strokeWidth:2,strokeDashArray:[10,10],globalCompositeOperation:"source-atop",lockMovementX:!0,lockMovementY:!0});e.setControlsVisibility({customControl:!0,customControl2:!1,customControl3:!1,customControl4:!1,customControl5:!1,bl:!1,br:!1,tl:!1,tr:!1,mb:!1,ml:!1,mr:!1,mt:!1,mtr:!1}),e.on("mouse:down",s=>{const d=s.target;d&&d.selectable&&(this.canvas.setActiveObject(d),this.canvas.renderAll())}),this.canvas.add(e),this.canvas.moveTo(e,2),e.animate("opacity",1,{duration:500,onChange:this.canvas.renderAll.bind(this.canvas)}),this.addPlusToSelectedClipPath(e),this.canvas.renderAll()},removeAllRect(){this.canvas.forEachObject(function(t){t.type==="rect"&&canvas.remove(t)}),canvas.renderAll()},getDeviceType(t){this.$refs.phoneBrand,this.fetchBrandsData()},async fetchBrandsData(t){try{const s=await await window.CASE_CONFIGURATOR.getBrands(this.selectedType);this.brands=s,this.noInternerConnection}catch(e){console.error("Error fetching data:",e),this.noInternerConnection}},async fetchModelsData(t){try{const s=await await window.CASE_CONFIGURATOR.getModels(this.selectedType,t);this.selected,this.models=s}catch(e){console.error("Error fetching data:",e)}},async fetchCaseTypeData(t){try{const s=await await window.CASE_CONFIGURATOR.getPhoneCases(t);this.casesTypes=s}catch(e){console.error("Error fetching data:",e)}},getPhoneModels(t){this.$refs.phoneModel,this.fetchModelsData(t)},getPhoneCase(t){this.$refs.phoneCase,this.fetchCaseTypeData(t)},addImageToCanvas(){this.selectedImage&&ve.fabric.Image.fromURL(this.selectedImage,t=>{t.scaleToHeight(230),t.scaleToWidth(230),t.selectable=!1,this.canvas.clear(),this.canvas.moveTo(t,1),this.canvas.add(t),t.center()})},handleImageUpload(t){const e=t.target.files,s=e[0],d=5*1024*1024,f=800,m=6-this.uploadedImages.length,y=Array.from(e).slice(0,m);if(s&&s.type.startsWith("image/")&&s.size<d)for(let h=0;h<y.length;h++){const i=new FileReader;i.onload=a=>{const u=new Image;u.src=a.target.result,u.onload=()=>{u.width>f?(this.uploadedImages.push({url:a.target.result,id:this.imageIndex+1}),this.imageIndex=this.imageIndex+1):this.alertMessageImageTooSmall=!0}},i.readAsDataURL(y[h])}else this.alertMessageImageType=!0},handleImageUpload1(t){const e=t.target.files,s=8-this.uploadedImages.length,d=Array.from(e).slice(0,s);for(let f=0;f<d.length;f++){const m=new FileReader;m.onload=y=>{this.uploadedImages.push({url:y.target.result,id:this.imageIndex+1}),this.imageIndex=this.imageIndex+1;const h=new Image;h.onload=()=>{const i=new ve.fabric.Image(h,{left:200,top:100,scaleX:.1,scaleY:.1,clickable:!0,flipX:!1,objectCaching:!1,selectable:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!0,centerH:!0,centerV:!0,name:"canvas image"});this.canvas.add(i),this.canvas.setActiveObject(i),this.canvas.moveTo(i,this.imageIndex)},h.src=y.target.result},m.readAsDataURL(d[f])}},addButton(){var t;if(this.activeTabIndex=3,this.alertMessageUserImagesEmpty=!1,(t=this.$refs.uploadButton)==null||t.click(),this.$refs.uploadButton.removeEventListener("change",this.uploadButtonChangeListener),this.alertMessageImageTooSmall||this.alertMessageImageType||this.alertMessageMaximumImageUpload===!1)this.uploadButtonChangeListener=()=>{setTimeout(()=>{this.addClipPathToSelectedObject(this.uploadedImages.length-1)},500)};else{this.alertMessageMaximumImageUpload=!0;return}this.$refs.uploadButton.addEventListener("change",this.uploadButtonChangeListener)},selectImage(t){this.canvas.setActiveObject(this.canvas.item(t))},async exportPNG(){this.loading=!0,this.createPrintLink(),window.CASE_CONFIGURATOR.export(this.printImage)},exportPreviewPNG(){this.canvas.getObjects().forEach((e,s)=>{e&&e.type==="rect"&&e.name==="pattern"&&(e.strokeWidth=0,this.canvas.renderAll()),e&&e.type==="circle"&&e.name==="pattern"&&this.canvas.renderAll(),e&&e.type==="image"&&e.name==="transparent"&&this.canvas.renderAll(),e&&e.type==="image"&&e.name==="background"&&this.canvas.renderAll(),e&&e.type==="image"&&e.name==="text"&&(e.globalCompositeOperation="source-atop"),e&&e.type==="image"&&e.name==="canvas image"&&(e.globalCompositeOperation="source-atop",e.visible=!0,this.canvas.renderAll())}),setTimeout(()=>{},1e3)},async exportPrintPNG(){this.canvas.getObjects(),this.canvas.getObjects().forEach(t=>{t.name==="pattern"&&(t.globalCompositeOperation="source-atop",t.fill="rgba(5, 5, 5, 0.1)",t.strokeWidth=0,this.canvas.renderAll())}),this.canvas.getObjects().forEach(t=>{if(t.name==="transparent"||t.name==="background")t.visible=!1,this.canvas.renderAll();else return}),this.canvas.getObjects().forEach(t=>{if(t.name==="canvas image"){const e=(d,f,m,y,h)=>{const i=new ve.fabric.Circle({originX:"left",originY:"top",radius:h,top:m,left:y,width:d,height:f,fill:"rgba(0, 0, 0, 1)",backgroundColor:"rgba(0, 0, 0, 0)",name:"pattern",clipName:"pattern",opacity:1,globalCompositeOperation:"destination-in",selectable:!1,evented:!1,strokeWidth:2,cornerStyle:"round",strokeDashArray:[8,16],stroke:"rgba(5, 5, 5, 1)",lockMovementX:!0,lockMovementY:!0});i.center(),this.canvas.add(i),this.canvas.backgroundImage=null,this.canvas.renderAll(),this.canvas.clipPath=i,t.globalCompositeOperation=null,this.canvas.renderAll()},s=(d,f,m,y,h,i)=>{const a=new ve.fabric.Rect({width:d,height:f,rx:m,ry:y,top:h,left:i,fill:"rgba(0, 0, 0, 1)",backgroundColor:"rgba(0, 0, 0, 0)",name:"pattern",clipName:"pattern",opacity:1,globalCompositeOperation:"destination-in",selectable:!1,evented:!1,strokeWidth:2,cornerStyle:"round",strokeDashArray:[8,16],stroke:"rgba(5, 5, 5, 1)",lockMovementX:!0,lockMovementY:!0});a.center(),this.canvas.add(a),this.canvas.backgroundImage=null,this.canvas.renderAll(),this.canvas.clipPath=a,t.globalCompositeOperation=null,this.canvas.renderAll()};switch(!0){case(this.selectedType==2&&this.selectedBrand==1):s(250,395,0,0,50,100);break;case(this.selectedType==2&&this.selectedBrand==2):s(270,360,0,0,70,90);break;case(this.selectedType==2&&this.selectedBrand==3):s(250,395,0,0,50,100);break;case(this.selectedType==1&&this.selectedBrand==1||this.selectedBrand==2||this.selectedBrand==3||this.selectedBrand==4||this.selectedBrand==7||this.selectedBrand==8||this.selectedBrand==12||this.selectedBrand==13||this.selectedBrand==18):s(350,660,30,30,40,180);break;case(this.selectedType==4&&this.selectedBrand==14):s(100,100,30,30,197,175);break;case(this.selectedType==4&&this.selectedBrand==15):e(100,100,170,175,40);break;case(this.selectedType==4&&this.selectedBrand==17):e(150,150,173,150,102);break;case this.selectedCase==="Flip Case":s(195,385,0,0,55,180);break}}else return}),this.canvas.getObjects().forEach(t=>{if(t.name==="text"){t.globalCompositeOperation=null,this.canvas.renderAll();const e=(s,d,f,m,y,h)=>{const i=new ve.fabric.Rect({originX:"left",originY:"top",width:s,height:d,rx:f,ry:m,top:y,left:h,fill:"rgba(0, 0, 0, 1)",backgroundColor:"rgba(0, 0, 0, 0)",name:"pattern",clipName:"pattern",opacity:1,globalCompositeOperation:"destination-in",selectable:!1,evented:!1,strokeWidth:2,cornerStyle:"round",strokeDashArray:[8,16],stroke:"rgba(5, 5, 5, 1)",lockMovementX:!0,lockMovementY:!0});i.center(),this.canvas.add(i),this.canvas.backgroundImage=null,this.canvas.renderAll(),this.canvas.clipPath=i,t.globalCompositeOperation=null,this.canvas.renderAll()};switch(!0){case(this.selectedType==2&&this.selectedBrand==1):e(250,395,0,0,50,100);break;case(this.selectedType==2&&this.selectedBrand==2):e(270,360,0,0,70,90);break;case(this.selectedType==2&&this.selectedBrand==3):e(250,395,0,0,50,100);break;case(this.selectedType==1&&this.selectedBrand==1||this.selectedBrand==2||this.selectedBrand==3||this.selectedBrand==4||this.selectedBrand==7||this.selectedBrand==8||this.selectedBrand==12||this.selectedBrand==13||this.selectedBrand==18):e(2100,2430,20,20,30,120);break;case(this.selectedType==4&&this.selectedBrand==14):e(150,150,0,0,173,150);break;case this.casesTypes[this.selectedCaseType].title==="Flip Case":e(195,385,0,0,55,180);break}}else return}),this.canvas.renderAll()},exportPrintPNG1(){this.canvas.getObjects(),this.canvas.getObjects().forEach(t=>{t.name==="pattern"&&(t.visible=!1,this.canvas.renderAll())}),this.canvas.getObjects().forEach(t=>{if(t.name==="transparent"||t.name==="background")t.visible=!1,this.canvas.renderAll();else return}),this.canvas.getObjects().forEach(t=>{t.name==="canvas image"&&(t.globalCompositeOperation=null)}),this.canvas.getObjects().forEach(t=>{if(t.name==="text"){t.globalCompositeOperation=null,this.canvas.renderAll();const e=(s,d,f,m,y,h)=>{const i=new ve.fabric.Rect({originX:"left",originY:"top",width:s,height:d,rx:f,ry:m,top:y,left:h,fill:"rgba(0, 0, 0, 1)",backgroundColor:"rgba(0, 0, 0, 0)",name:"pattern",clipName:"pattern",opacity:1,globalCompositeOperation:"destination-in",selectable:!1,evented:!1,strokeWidth:2,cornerStyle:"round",strokeDashArray:[8,16],stroke:"rgba(5, 5, 5, 1)",lockMovementX:!0,lockMovementY:!0});i.center(),this.canvas.add(i),this.canvas.backgroundImage=null,this.canvas.renderAll(),this.canvas.clipPath=i,t.globalCompositeOperation=null,this.canvas.renderAll()};switch(!0){case(this.selectedType==2&&this.selectedBrand==1):e(250,395,0,0,50,100);break;case(this.selectedType==2&&this.selectedBrand==2):e(270,360,0,0,70,90);break;case(this.selectedType==2&&this.selectedBrand==3):console.log("tablet Huawei"),e(250,395,0,0,50,100);break;case(this.selectedType==1&&this.selectedBrand==1||this.selectedBrand==2||this.selectedBrand==3||this.selectedBrand==4||this.selectedBrand==7||this.selectedBrand==8||this.selectedBrand==12||this.selectedBrand==13||this.selectedBrand==18):e(2100,2430,20,20,30,120);break;case(this.selectedType==4&&this.selectedBrand==14):e(150,150,0,0,173,150);break;case this.casesTypes[this.selectedCaseType].title==="Flip Case":e(195,385,0,0,55,180);break}}else return}),this.canvas.renderAll(),setTimeout(()=>{this.createPrintLink()},1e3)},scaleUp(){const e=new ve.fabric.Point(this.canvas.width/2,this.canvas.height/2),s=new ve.fabric.Point(e.x*(4-1),e.y*(4-1));this.canvas.set({width:this.canvas.width*4,height:this.canvas.height*4},{backstoreOnly:!0}),this.canvas.getObjects().forEach(d=>{d.scaleX*=4,d.scaleY*=4,d.clipPath&&(d.clipPath.scaleX*=4,d.clipPath.scaleY*=4),d.left+=s.x,d.top+=s.y,d.setCoords()}),this.canvas.renderAll()},bindObjectsToCanvasSize(){const t=this.canvas.width,e=this.canvas.height;this.canvas.getObjects().forEach(s=>{const d=s.left/t,f=s.top/e;s.left=d*this.canvas.width,s.top=f*this.canvas.height,s.setCoords()}),this.canvas.renderAll()},cropMask(t){ve.fabric.Image.fromURL(this.exportMaskClipImage,e=>{e.scaleToHeight(320),e.scaleToWidth(320),e.visible=!0,e.center(),e.selectable=!1,e.globalCompositeOperation="source-atop",this.canvas.moveTo(e,0),e.center(),this.canvas.renderAll()},{crossOrigin:"anonymous"})},createPreviewLink(){this.previewImage=this.canvas.toDataURL({format:"png",multiplier:3,quality:50})},createPrintLink(){this.canvas.getObjects().forEach(t=>{t.name==="fake-image"&&(t.visible=!1,this.canvas.getObjects().forEach((s,d)=>{s&&s.type==="image"&&s.name==="fake-image"&&(s.visible=!1),s&&s.type==="rect"&&s.name==="fake-rect"&&(s.visible=!1),s&&s.type==="rect"&&s.name==="pattern"&&(s.visible=!1)}),this.canvas.renderAll())}),this.printImage=this.canvas.toDataURL({format:"png",multiplier:3,quality:50})},undoMove(){this.canvas.undo(),this.canvas.renderAll()},redoMove(){this.canvas.redo(),this.canvas.renderAll()},flipXSelectedImage(){const t=this.canvas.getActiveObject();t&&t.type==="image"&&(t.flipX=!t.flipX,this.canvas.renderAll())},shiftLayerUp(t,e){if(e>0&&e<t.length){const s=t[e];t[e]=t[e+1],t[e+1]=s}return t},shiftLayerDown(t){if(this.uploadedLayers.length>2&&t>=0&&t<this.uploadedLayers.length-1){const e=this.uploadedLayers[t];this.uploadedLayers[t]=this.uploadedLayers[t+1],this.uploadedLayers[t+1]=e}},moveLeftSelectedImage(){const t=this.canvas.getActiveObject();t&&t.type==="image"&&(t.left=t.left-10,this.canvas.renderAll()),t&&t.type==="i-text"&&(t.left=t.left-10,this.canvas.renderAll())},moveRightSelectedImage(){const t=this.canvas.getActiveObject();t&&t.type==="image"&&(t.left=t.left+10,this.canvas.renderAll()),t&&t.type==="i-text"&&(t.left=t.left+10,this.canvas.renderAll())},moveUpSelectedImage(){const t=this.canvas.getActiveObject();t&&t.type==="image"&&(t.top=t.top-10,this.canvas.renderAll()),t&&t.type==="i-text"&&(t.top=t.top-10,this.canvas.renderAll())},moveDownSelectedImage(){const t=this.canvas.getActiveObject();t&&t.type==="image"&&(t.top=t.top+10,this.canvas.renderAll()),t&&t.type==="i-text"&&(t.top=t.top+10,this.canvas.renderAll())},rotateRightBy15(){const t=this.canvas.getActiveObject();t&&t.type==="image"&&t.name==="canvas image"&&(t.angle=t.angle+15,this.canvas.renderAll())},rotateLeftBy15(){const t=this.canvas.getActiveObject();t&&t.type==="image"&&t.name==="canvas image"&&(t.angle=t.angle-15,this.canvas.renderAll())},zoomInSelectedImage(){const t=this.canvas.getActiveObject();t&&t.type==="image"&&(t.scaleX<=.8?(t.scaleX*=1.1,t.scaleY*=1.1,t.setCoords(),this.canvas.renderAll()):(t.scaleX*=1,t.scaleY*=1,this.canvas.renderAll())),t&&t.type==="i-text"&&(t.scaleX<=3?(t.scaleX*=1.1,t.scaleY*=1.1,t.setCoords(),this.canvas.renderAll()):(t.scaleX*=1,t.scaleY*=1,this.canvas.renderAll()))},zoomOutSelectedImage(){const t=this.canvas.getActiveObject();t&&t.type==="image"&&(t.scaleX>=.1?(t.scaleX*=.9,t.scaleY*=.9,this.canvas.renderAll()):(t.scaleX*=1,t.scaleY*=1,this.canvas.renderAll())),t&&t.type==="i-text"&&(t.scaleX>=1?(t.scaleX*=.9,t.scaleY*=.9,this.canvas.renderAll()):(t.scaleX*=1,t.scaleY*=1,this.canvas.renderAll()))},render(t,e,s,d,f){ve.fabric.Image.fromURL("/images/add-square.svg",m=>{m.scaleToWidth(48),m.scaleToHeight(48),t.drawImage(m._element,e-16,s-16,48,48)})},bringForward(){this.getObjectsFromCanvas();const t=this.canvas.getActiveObject();if(t&&this.canvas.getObjects().indexOf(t)<this.canvas.getObjects().length-2){const s=t.id;this.uploadedLayers.findIndex(f=>f.id===s),this.canvas.bringForward(t),this.canvas.renderAll();let d=this.getObjectsFromCanvas();this.uploadedLayers=d.map(f=>{var m;return{id:f.id,url:(m=f._originalElement)==null?void 0:m.currentSrc,text:f.text,position:this.canvas.getObjects().indexOf(f)}})}},getObjectsFromCanvas(){return this.canvas.getObjects().filter(e=>e.name==="canvas image"||e.name==="text")},sendBackwards(){const t=this.canvas.getActiveObject();if(t){const e=this.canvas.getObjects().indexOf(t);if(this.activeLayerIndex=e,e>2){const s=t.id,d=this.uploadedLayers.findIndex(m=>m.id===s);d!==-1&&(this.uploadedLayers[d].position=e),this.canvas.sendBackwards(t),this.canvas.renderAll();let f=this.getObjectsFromCanvas();this.uploadedLayers=f.map(m=>{var y;return{id:m.id,url:(y=m._originalElement)==null?void 0:y.currentSrc,text:m.text,position:this.canvas.getObjects().indexOf(m)}})}}},deleteSelectedImage(){const t=this.canvas.getActiveObject();t&&t.type==="image"&&(this.canvas.remove(t),this.canvas.discardActiveObject(),this.canvas.renderAll(),t.off(),t.controls=[],t.overlays=[],t.set({hasBorders:!1,hasControls:!1}),this.getObjectsFromCanvas(),this.canvas.remove(t),this.canvas.renderAll(),this.$forceUpdate()),t&&t.type==="i-text"&&(this.canvas.remove(t),this.canvas.discardActiveObject(),this.canvas.renderAll(),t.off(),t.controls=[],t.overlays=[],t.set({hasBorders:!1,hasControls:!1}),this.getObjectsFromCanvas(),this.canvas.remove(t),this.canvas.renderAll(),this.$forceUpdate(),this.checkEmptyCanvas()),this.deactivateActivePatterns(),this.canvas.renderAll(),this.checkEmptyCanvas()},clearCanvas(){const t=this.canvas.getObjects();t.forEach((e,s)=>{e&&e.type==="image"&&e.name==="canvas image"&&this.canvas.remove(e),e&&e.type==="i-text"&&e.name==="text"&&this.canvas.remove(e),this.uploadedLayers=[],this.activeLayerIndex=null}),t.forEach((e,s)=>{this.canvas.renderAll()})},clearAllCanvas(){this.canvas.getObjects().forEach((e,s)=>{e&&e.type==="image"&&e.name==="canvas image"&&this.canvas.remove(e),e&&e.type==="i-text"&&e.name==="text"&&this.canvas.remove(e),e&&e.type==="circle"&&e.name==="pattern"&&this.canvas.remove(e),e&&e.type==="rect"&&e.name==="pattern"&&this.canvas.remove(e)})},removeAllUserImages(){this.canvas.getObjects().forEach((e,s)=>{e&&e.type==="image"&&e.name==="canvas image"&&this.canvas.remove(e)})},addEmptyPhone(){setTimeout(()=>{const t=new ve.fabric.Rect({width:230,height:460,rx:20,ry:20,top:-20,left:0,name:"pattern",opacity:1,globalCompositeOperation:null,selectable:!1,fill:"rgba(5, 255, 255, 0.01)",strokeWidth:2,cornerStyle:"round",strokeDashArray:[8,16],stroke:"rgba(5, 5, 5, 1)",lockMovementX:!0,lockMovementY:!0});this.canvas.add(t),t.visible=!0,t.center(),this.canvas.moveTo(t,0),t.animate("opacity",1,{duration:1e3,onChange:this.canvas.renderAll.bind(this.canvas)})},1e3)}},created(){this.fonts=window.CASE_CONFIGURATOR.fonts.map(t=>({value:t.value.replace(/"/g,""),text:t.text.replace(/"/g,"")})),this.fetchDataForCollection(),this.fetchTranslationsData()},mounted(){this.windowWidth=window.innerWidth;const t=this.windowWidth<=760?this.$refs.canvasRef:this.$refs.canvasRef;this.mobileMode=this.windowWidth<=760,this.mobileMode===!0?this.setActiveTabIndexAfterDelay():this.activeTabIndex=1,this.initCanvas(t);const e=new Image;e.src="/images/rotate-left.svg";const s=new Image;s.src="/images/arrow-scale-square.svg";const d=new Image;d.src="/images/close-square-black.svg";const f=new Image;f.src="/images/zoom-in.svg";const m=new Image;m.src="/images/add-square.svg";const y=new Image;y.src="/images/command-square.svg",this.canvas.on("object:added",()=>{let o=this.canvas.getObjects();var n=new ve.fabric.ActiveSelection(o,{canvas:this.canvas});this.checkEmptyCanvas(),this.canvas.discardActiveObject(),this.canvas.setActiveObject(n),this.canvas.discardActiveObject()},{passive:!0}),this.canvas.on("selection:cleared",o=>{this.lockMode===!0?o.deselected&&o.deselected[0]&&o.deselected[0].id&&(this.setActiveObjectById(o.deselected[0].id),this.disableEventsOnAllObjects(),this.canvas.renderAll()):this.enableEventsOnAllObjects()}),this.canvas.on("mouse:down",o=>{var n=o.target;o.target===null&&(this.showDialog=!1,this.removeFakeRectFromCanvas()),this.emptyCanvas===!1&&(n==null?void 0:n.type)==="image"&&(n==null?void 0:n.name)==="canvas image"&&(this.canvas.setActiveObject(n),this.canvas.renderAll())}),this.canvas.on("object:selected",o=>{}),this.canvas.on("selection:updated",o=>{if(o.target,o.selected[0]&&o.selected[0].name==="canvas image"&&this.mobileMode===!1){let n=this.canvas.getActiveObject();this.canvas.setActiveObject(n),this.setActiveTabIndex(3),this.setActiveTabImages(1)}o.selected[0]&&o.selected[0].name==="text"&&this.mobileMode===!1&&(this.inputText=o.selected[0].text,this.setActiveTabIndex(4),this.setActiveTabText(1))},{passive:!0}),this.canvas.on("object:moved",o=>{o.target.selectable=!0,o.target.hasControls=!0,o.target.objectCaching=!0,o.target.perPixelTargetFind=!1,this.canvas.preserveObjectStacking=!0,o.target.setControlsVisibility({bl:!0,br:!1,tl:!1,tr:!1,mb:!1,ml:!1,mr:!1,mt:!1,mtr:!0,customControl:!1,customControl2:!1,customControl3:!0}),this.canvas.sendToBack(o.target),this.canvas.moveTo(o.target,8),this.canvas.renderAll();const n=this.canvas.getObjects();n.forEach((c,p)=>{c&&c.type==="text"&&c.name==="text"&&this.canvas.bringToFront(c)}),n.forEach((c,p)=>{c&&c.type==="image"&&c.name==="transparent"&&(this.canvas.remove(c),this.canvas.bringToFront(c))})},{passive:!0}),this.canvas.controlsAboveOverlay=!1;const h=new ve.fabric.Control({x:0,y:0,offsetY:0,offsetX:0,visible:!0,cursorStyle:"pointer",mouseDownHandler:o=>{console.log("Object clicked:",o)},render:function(o,n,c,p,l){o.drawImage(m,n-24,c-24,48,48)}}),i=new ve.fabric.Control({x:0,y:0,offsetY:0,offsetX:0,cursorStyle:"pointer",actionHandler:ve.fabric.controlsUtils.rotationWithSnapping,actionName:"rotate",render:function(o,n,c,p,l){o.drawImage(f,n-48,c-48,48,48)}}),a=new ve.fabric.Control({x:-.5,y:-.5,offsetY:0,offsetX:0,sizeX:48,sizeY:48,cursorStyle:"pointer",selectable:!0,mouseDownHandler:this.deleteSelectedImage,render:function(o,n,c,p,l){o.drawImage(d,n-24,c-24,48,48)}}),u=new ve.fabric.Control({x:.5,y:.5,offsetY:0,offsetX:0,cursorStyle:"pointer",mouseDownHandler:this.activateDrag,render:function(o,n,c,p,l){o.drawImage(m,n-24,c-24,48,48)}}),r=new ve.fabric.Control({x:.5,y:.5,offsetY:0,offsetX:0,sizeX:24,sizeY:24,cursorStyle:"move",mouseDownHandler:(o,n,c,p)=>{const l=this.canvas,g=l.getActiveObject();if(g){l.isDragging=!1,l.renderAll();let v,b;const _=w=>{const k=l.getPointer(w),z=g.left,N=g.top;if(v&&b){const X=k.x-v,re=k.y-b;g.set({left:z+X,top:N+re})}v=k.x,b=k.y,l.renderAll()},C=()=>{l.isDragging=!1,l.selectable=!1,l.renderAll(),l.off("mouse:move",_),l.off("mouse:up",C)};l.on("mouse:move",_),l.on("mouse:up",C)}},render:function(o,n,c,p,l){o.drawImage(y,n-24,c-24,48,48)}});ve.fabric.Object.prototype.controls.customControl=h,ve.fabric.Object.prototype.controls.customControl2=i,ve.fabric.Object.prototype.controls.customControl3=a,ve.fabric.Object.prototype.controls.customControl4=u,ve.fabric.Object.prototype.controls.customControl5=r,ve.fabric.Object.prototype.transparentCorners=!1,ve.fabric.Object.prototype.cornerColor="rgb(0, 162, 250)",ve.fabric.Object.prototype.borderColor="rgb(0, 162, 250)",ve.fabric.Object.prototype.cornerStyle="circle",ve.fabric.Object.prototype.cornerSize=16,ve.fabric.Object.prototype.strokeWidth=2,ve.fabric.Object.prototype.centeredScaling=!0,ve.fabric.Object.prototype.centeredRotation=!0,ve.fabric.Object.prototype.perPixelTargetFind=!0,ve.fabric.Object.prototype.objectCaching=!0,ve.fabric.Object.prototype.controls.mtr=new ve.fabric.Control({x:.5,y:-.5,offsetY:0,offsetX:0,cursorStyle:"pointer",actionHandler:ve.fabric.controlsUtils.rotationWithSnapping,actionName:"rotate",render:function(o,n,c,p,l){o.drawImage(e,n-24,c-24,48,48)}}),ve.fabric.Object.prototype.controls.bl=new ve.fabric.Control({x:-.5,y:.5,offsetY:0,offsetX:0,cursorStyle:"pointer",actionHandler:ve.fabric.controlsUtils.scalingEqually,actionName:"scale",render:function(o,n,c,p,l){o.drawImage(s,n-24,c-24,48,48)}})}},fm={class:"z-0 items-start justify-between lg:justify-normal flex flex-col lg:flex-row h-[calc(100vh-70px)] lg:h-[ 100vh]"},dm={class:"absolute z-50 bg-white lg:relative flex bottom-0 flex-row lg:flex-col text-md h-[70px] lg:h-[60px] text-sm font-xl text-gray-100"},pm={class:"w-[20vw] h-[50px] lg:w-full lg:h-[calc(20vh-14px)]"},gm={class:"relative"},mm={class:"w-10 h-10 mx-auto relative"},vm={key:0,initial:{opacity:0,scale:0},enter:{opacity:1,scale:1},delay:300,class:"absolute z-20 w-10 h-10 mx-auto bg-main-color-bg border-2 border-gray-200 rounded-full text-lg text-white flex items-center"},ym={key:0,initial:{opacity:.5},enter:{opacity:1},delay:300,class:"absolute text-justify bottom-1 text-xs lg:relative p-0 lg:pl-3 lg:text-xl select-none font-bold"},bm={key:1,class:"absolute bottom-1 -xs lg:relative p-0 lg:pl-3 lg:font-bold select-none lg:text-xl opacity-50 transition-all"},_m={class:"w-[20vw] h-[50px] lg:w-full lg:h-[calc(20vh-14px)]"},xm={class:"relative"},Cm={class:"w-10 h-10 mx-auto relative"},wm={key:0,initial:{opacity:0,scale:0},enter:{opacity:1,scale:1},delay:300,class:"absolute z-20 w-10 h-10 mx-auto bg-main-color-bg border-2 border-gray-200 rounded-full text-lg text-white flex items-center"},Sm={key:0,initial:{opacity:.5},enter:{opacity:1},delay:300,class:"absolute bottom-1 text-xs lg:relative p-0 lg:pl-3 lg:text-xl select-none font-bold"},Tm={key:1,class:"absolute bottom-1 text-xs lg:relative lg:block p-0 lg:pl-3 lg:font-bold select-none lg:text-xl opacity-50 transition-all"},Om={class:"w-[20vw] h-[50px] lg:w-full lg:h-[calc(20vh-14px)]"},km={class:"relative"},Am={class:"w-10 h-10 mx-auto relative"},Em={key:0,initial:{opacity:0,scale:0},enter:{opacity:1,scale:1},delay:200,class:"absolute z-20 w-10 h-10 mx-auto bg-main-color-bg border-2 border-gray-200 rounded-full text-lg text-white flex items-center"},Pm={key:0,initial:{opacity:.5},enter:{opacity:1},delay:300,class:"absolute bottom-1 text-xs lg:relative p-0 lg:pl-3 lg:text-xl select-none font-bold"},Im={key:1,class:"absolute bottom-1 text-xs lg:relative lg:block p-0 lg:pl-3 lg:font-bold select-none lg:text-xl opacity-50 transition-all"},Mm={class:"w-[20vw] h-[50px] lg:w-full lg:h-[calc(20vh-14px)]"},Rm={class:"relative"},Dm={class:"w-10 h-10 mx-auto relative"},Fm={key:0,initial:{opacity:0,scale:0},enter:{opacity:1,scale:1},delay:500,class:"absolute z-20 w-10 h-10 mx-auto bg-main-color-bg border-2 border-gray-200 rounded-full text-lg text-white flex items-center"},Lm={key:0,initial:{opacity:.5},enter:{opacity:1},delay:300,class:"absolute bottom-1 text-xs lg:relative p-0 lg:pl-3 lg:text-xl select-none font-bold"},Bm={key:1,class:"absolute bottom-1 text-xs lg:relative lg:block p-0 lg:pl-3 lg:font-bold select-none lg:text-xl opacity-50 transition-all"},jm={class:"w-[20vw] h-[50px] lg:w-full lg:h-[calc(20vh-14px)]"},zm={class:"relative"},Nm={class:"w-10 h-10 mx-auto relative"},Um={key:0,initial:{opacity:1,scale:0},enter:{opacity:1,scale:1},delay:300,class:"absolute z-20 w-10 h-10 mx-auto bg-[#73d841] border-2 border-gray-200 rounded-full text-lg text-white flex items-center"},Hm={key:0,initial:{opacity:.5},enter:{opacity:1},delay:300,class:"absolute bottom-1 text-xs lg:relative p-0 lg:pl-3 lg:text-xl select-none font-bold"},Wm={key:1,class:"absolute bottom-1 text-xs lg:relative lg:block p-0 lg:pl-3 lg:font-bold select-none lg:text-xl opacity-50 transition-all"},Vm={class:"box-border mx-auto lg:mx-0 flex relative flex-col w-full justify-center lg:justify-normal h-full bg-gray-100 lg:w-[380px]"},Xm={key:0,class:"z-40 absolute lg:relative bg-gray-100 text-gray-400 bottom-[0px] w-[100vw] lg:w-full"},Ym={class:"relative z-40 w-[100vw] lg:w-[360px] h-[450px]"},Gm={class:"hidden lg:flex flex-col ml-8 m-2 items-left"},qm={class:"font-arial text-base select-none mt-0 font-semibold leading-2 text-slate-700"},Km={class:"font-arial font-extrabold select-none leading-none tracking-tight text-slate-900 text-4xl sm:leading-[3.5rem]"},Zm={class:"font-arial mb-1 text-base select-none font-medium text-left leading-7 text-slate-700"},Jm={class:"relative bg-transparent w-[305px] h-[395px] mt-0"},Qm={class:"absolute lg:relative flex flex-col m-0 lg:ml-6 items-center bg-white bottom-0 shadow-inner ring-1 ring-slate-900/5 w-[100vw] lg:w-[320px] h-[480px] justify-center"},$m={key:0,class:"absolute m-1 w-[280px] h-[380px] ring-1 ring-slate-900/5 bg-slate-100 z-10"},e0={class:"font-arial select-none w-[260px] mt-12 px-6 text-sm whitespace-wrap font-medium text-left leading-5 text-slate-700"},t0={class:"absolute left-[80px] bottom-5 px-2 py-2 text-white text-xl button-zoom bg-white/10"},i0={class:"text-center text-base select-none font-arial font-bold text-slate-100"},n0={class:"flex flex-col items-center w-[100vw] lg:w-[320px] h-[500px]"},r0={key:0,class:"absolute -top-[30px] w-full h-[30px] border-x-1 border-y-2 border-2 bg-main-color-bg border-white"},s0={class:"text-md text-bold text-white w-full mx-auto text-center"},o0={class:"flex flex-row w-[95vw] lg:w-[320px] h-[50px] justify-evenly bg-gray-100"},a0={key:1,class:"absolute w-[320px] top-[50px] h-[500px]",initial:{opacity:0},enter:{opacity:1},delay:300,duration:300},l0={class:"flex flex-row flex-wrap items-start"},c0={key:0,class:"absolute m-0 inset-5 left-0 top-0 border-spacing-6 border-[2px] border-solid w-full h-full border-blue-400"},u0={class:"mt-2"},h0={key:0,class:"absolute m-0 inset-5 left-0 top-0 border-spacing-6 border-[2px] border-solid w-full h-full border-blue-400"},f0={class:"mt-2"},d0={key:0,class:"absolute m-0 inset-5 left-0 top-0 border-spacing-6 border-[2px] border-solid w-full h-full border-blue-400"},p0={key:2,class:"absolute w-[320px] top-[50px] h-[500px] flex flex-col items-center justify-items-center align-center m-3 z-20",initial:{opacity:.5},enter:{opacity:1},delay:300},g0={key:0,class:"absolute m-2 w-[300px] h-[345px] ring-1 ring-slate-900/5 bg-slate-50 z-10"},m0={class:"absolute left-[80px] bottom-5 px-2 py-2 text-gray-100 text-xl button-zoom bg-white/10 ring-slate-900/5"},v0={class:"text-center text-base select-none font-arial font-bold text-slate-100"},y0={class:"relative w-[300px] h-[400px] mt-4 overflow-visible overflow-y-auto"},b0=["value","data","onClick"],_0={key:0,class:"absolute m-0 inset-5 left-0 top-0 border-spacing-6 border-[2px] border-solid w-full h-full border-blue-400"},x0={key:3,class:"relative flex flex-col items-start m-2 notvalid",initial:{opacity:.5},enter:{opacity:1},delay:300},C0={class:"w-[300px] h-[400px] mt-2 overflow-y-auto"},w0=["value","data","onClick"],S0={key:0,class:"absolute m-0 inset-5 left-0 top-0 border-spacing-6 border-[2px] border-solid w-full h-full border-blue-400"},T0={key:4,class:"relative flex flex-col items-center h-[400px] w-full",initial:{opacity:.5},enter:{opacity:1},delay:300},O0={class:"relative flex flex-col items-start m-2 h-[330px] valid overflow-y-auto"},k0=["value","onClick"],A0={key:0,class:"absolute m-0 inset-5 left-0 top-0 border-spacing-6 border-[2px] border-solid w-full h-full border-blue-400"},E0={class:"h-[120px] w-[120px]"},P0=["src"],I0={class:"flex flex-col items-center justify-center"},M0={class:"h-[120px] w-[130px] flex flex-col items-center"},R0={class:"w-full bg-gray-50 my-2 text-base select-none font-medium text-left leading-2 text-slate-700"},D0={class:"w-full bg-gray-50 my-2 text-base select-none font-medium text-left leading-2 text-slate-700"},F0={key:0,class:"z-40 absolute lg:relative bottom-8 text-gray-400 bg-gray-100 h-fit w-full lg:w-full"},L0={key:0,class:"absolute z-50 bottom-0 h-[300px] border-x-2 border-y-2 border-gray-100 flex w-full flex-col items-center bg-white"},B0={class:"w-full h-[30px] border-x-1 border-y-2 border-2 bg-main-color-bg border-white"},j0={class:"text-md text-white w-full mx-auto text-center"},z0={key:0,class:"flex flex-row w-full gap-6 p-4 items-center"},N0={key:0,class:"absolute -left-2 lg:-left-4 -top-3 border-spacing-6 border-[2px] border-dashed rounded-xl w-[43px] lg:w-[50px] h-[75px] border-slate-600"},U0={key:0,d:"",class:"absolute -left-4 -top-3 border-spacing-6 border-[2px] border-dashed rounded-xl w-[60px] h-[75px] border-slate-600"},H0={key:0,class:"absolute -left-4 -top-3 border-spacing-6 border-[2px] border-dashed rounded-xl w-[60px] h-[75px] border-slate-600"},W0={key:0,class:"absolute -left-4 -top-3 border-spacing-6 border-[2px] border-dashed rounded-xl w-[60px] h-[75px] border-slate-600"},V0={key:0,class:"absolute -left-4 -top-3 border-spacing-6 border-[2px] border-dashed rounded-xl w-[60px] h-[75px] border-slate-600"},X0={key:1,class:"flex flex-row w-full gap-6 p-4 items-center"},Y0={key:0,class:"absolute -left-2 lg:-left-4 -top-3 border-spacing-6 border-[2px] border-dashed rounded-xl w-[43px] lg:w-[50px] h-[75px] border-slate-600"},G0={class:"relative px-8 py-1 border-purple-600/5 bg-main-color-bg hover:bg-main-color-bg/80 shadow-lg font-arial ring-1 ring-slate-900/10"},q0={class:"z-40 lg:p-3 absolute lg:relative mx-auto w-full lg:w-[360px] h-[460px]"},K0={class:"hidden lg:flex flex-col ml-4 mt-0 items-left"},Z0={class:"font-arial text-base select-none mt-0 font-semibold leading-2 text-slate-700"},J0={class:"font-arial select-none font-extrabold leading-none tracking-tight text-slate-900 text-5xl sm:leading-[3.5rem]"},Q0={class:"font-arial select-none my-2 text-base whitespace-nowrap font-medium text-left leading-7 text-slate-700"},$0={class:"relative bg-transparent w-[320px] h-[355px] mt-2 ring-slate-900/5"},ev={class:"absolute lg:relative flex flex-col bottom-0 items-center lg:items-start bg-gray-50 shadow-inner ring-1 ring-slate-900/5 w-[100vw] lg:w-[320px] h-[300px] lg:h-[440px] ml-[7px] mt-[7px] bg-fit bg-bottom bg-no-repeat"},tv={class:"flex flex-row items-start lg:flex-col mt-[20px] lg:items-center w-[320px] h-[300px] lg:h-[320px]"},iv={key:0,class:"font-arial select-none w-[250px] my-5 px-4 text-sm whitespace-wrap font-medium text-left leading-5 text-slate-700"},nv={key:1,class:"flex flex-row lg:mt-[50px] w-[150px] lg:w-[200px] gap-2 lg:gap-8 items-center"},rv={key:0,class:"absolute -left-2 lg:-left-4 -top-3 border-spacing-6 border-[2px] border-dashed rounded-xl w-[43px] lg:w-[50px] h-[75px] border-slate-600"},sv={key:0,d:"",class:"absolute -left-4 -top-3 border-spacing-6 border-[2px] border-dashed rounded-xl w-[60px] h-[75px] border-slate-600"},ov={key:0,class:"absolute -left-4 -top-3 border-spacing-6 border-[2px] border-dashed rounded-xl w-[60px] h-[75px] border-slate-600"},av={key:2,class:"flex flex-row lg:mt-[50px] w-[150px] lg:w-[200px] gap-2 lg:gap-8 items-center"},lv={key:0,class:"absolute -left-4 -top-3 border-spacing-6 border-[2px] border-dashed rounded-xl w-[60px] h-[75px] border-slate-600"},cv={key:0,class:"absolute -left-4 -top-3 border-spacing-6 border-[2px] border-dashed rounded-xl w-[60px] h-[75px] border-slate-600"},uv={key:3,class:"flex flex-row mt-[50px] w-[220px] gap-8 items-center"},hv={key:0,class:"absolute -left-4 -top-3 border-spacing-6 border-[2px] border-dashed rounded-xl w-[60px] h-[75px] border-slate-600"},fv={class:"absolute left-24 top-[100px] lg:bottom-6 lg:top-[370px] px-8 py-1 border-purple-600/5 bg-main-color-bg hover:bg-main-color-bg/80 shadow-lg font-arial ring-1 ring-slate-900/10"},dv={class:"z-40 absolute bottom-0 bg-gray-100 h-[500px] lg:relative text-gray-400 w-[100vw] lg:w-full"},pv={key:0,class:"relative h-dvh border-x-2 border-y-2 border-gray-100 flex w-full flex-col items-center bg-white"},gv={class:"w-full select-none h-[30px] border-x-1 border-y-2 border-2 bg-main-color-bg border-white"},mv={class:"text-md text-white w-full mx-auto text-center"},vv={key:0,class:"absolute top-0 mx-auto lg:m-0 w-full h-[300px] bg-slate-50 z-10"},yv={class:"font-arial select-none w-[300px] mt-12 px-6 text-sm whitespace-wrap font-medium text-left leading-5 text-slate-700"},bv={class:"text-center select-none text-base font-arial font-bold text-slate-100"},_v={key:1,class:"absolute top-0 mx-auto lg:m-0 w-full h-[300px] bg-slate-50 z-10"},xv={class:"font-arial select-none w-[300px] mt-12 px-6 text-sm whitespace-wrap font-medium text-left leading-5 text-slate-700"},Cv={class:"text-center select-none text-base font-arial font-bold text-slate-100"},wv={key:2,class:"absolute top-0 mx-auto lg:m-0 w-full h-[300px] bg-slate-50 z-10"},Sv={class:"font-arial select-none w-[300px] mt-12 px-6 text-sm whitespace-wrap font-medium text-left leading-5 text-slate-700"},Tv={class:"text-center select-none text-base font-arial font-bold text-slate-100"},Ov={class:"flex flex-row w-full border-2 h-[50px] justify-evenly bg-gray-100"},kv={key:3,class:"bg-transparent relative w-full"},Av={class:"flex flex-row overflow-x-auto overflow-y-hidden h-[80px] snap-x w-full bg-transparent"},Ev=["src","onClick"],Pv={class:"w-[40vw] mx-auto px-4 py-1 border-purple-600/5 bg-main-color-bg hover:bg-main-color-bg/80 font-arial ring-1 ring-slate-900/10"},Iv={key:4,class:"bg-transparent relative w-full h-[100px]"},Mv={class:"absolute flex flex-col items-start bg-slate-50 border-l-2 border-r-2 border-b-2 border-slate-900/5 w-full h-[120px] bg-fit bg-bottom bg-no-repeat"},Rv={class:"pt-0 m-1 w-full space-y-5"},Dv={class:"relative w-full h-fit flex flex-row items-center flex-wrap"},Fv=["src","onClick"],Lv={initial:{opacity:0,scale:0,translateY:100},enter:{opacity:1,scale:1,translateY:0,delay:100},class:"box-border absolute bottom-0 w-full h-[50px] bg-gray-100 flex flex-col"},Bv={class:"overflow-auto overflow-y-hidden flex flex-row w-full bottom-0"},jv=["value"],zv=["onClick"],Nv={key:5,class:"relative flex flex-col p-8 gap-3"},Uv={key:1,class:"box-border bg-gray-100 lg:bg-transparent lg:flex flex-col items-center relative w-[100vw] lg:w-[360px] lg:p-2 h-[480px]"},Hv={class:"hidden lg:flex flex-col items-left"},Wv={class:"font-arial select-none text-base font-semibold leading-2 text-slate-700"},Vv={class:"font-arial select-none font-extrabold leading-none tracking-tight text-slate-900 text-5xl sm:leading-[3.5rem]"},Xv={class:"font-arial select-none my-5 text-base whitespace-nowrap font-medium text-left leading-7 text-slate-700"},Yv={class:"relative flex flex-row h-[40px] mt-2 items-center lg:items-start w-[300px]"},Gv={key:0,class:"absolute top-0 mx-auto lg:m-0 w-[305px] h-[300px] shadow-xl ring-1 ring-slate-900/5 bg-slate-50 z-10"},qv={class:"absolute left-[80px] bottom-5 px-2 py-2 text-white text-xl button-zoom bg-white/10"},Kv={class:"text-center select-none text-base font-arial font-bold text-slate-100"},Zv={key:1,class:"absolute top-0 mx-auto lg:m-0 w-[305px] h-[300px] shadow-xl ring-1 ring-slate-900/5 bg-slate-50 z-10"},Jv={class:"font-arial select-none w-[300px] mt-12 px-6 text-sm whitespace-wrap font-medium text-left leading-5 text-slate-700"},Qv={class:"absolute left-[80px] bottom-5 px-2 py-2 rounded-full text-white text-xl button-zoom bg-white/10 ring-1 ring-slate-900/5 shadow-lg"},$v={class:"text-center select-none text-base font-arial font-bold text-slate-100"},e1={key:2,class:"absolute top-0 mx-auto lg:m-0 w-[305px] h-[300px] shadow-xl ring-1 ring-slate-900/5 bg-slate-50 z-10"},t1={class:"font-arial select-none w-[300px] mt-12 px-6 text-sm whitespace-wrap font-medium text-left leading-5 text-slate-700"},i1={class:"absolute left-[80px] bottom-5 px-2 py-2 rounded-full text-white text-xl button-zoom bg-white/10 ring-1 ring-slate-900/5 shadow-lg"},n1={class:"text-center select-none text-base font-arial font-bold text-slate-100"},r1={class:"flex flex-row w-[95vw] lg:w-[300] border-2 h-[40px] justify-evenly bg-gray-100"},s1={key:0,class:"bg-transparent relative w-[300px] h-[300px]"},o1={key:0,class:"absolute mx-auto lg:m-2 w-[280px] h-[220px] shadow-sm ring-1 ring-slate-900/5 bg-slate-50 z-10"},a1={class:"font-arial select-none w-[300px] mt-12 px-6 text-sm whitespace-wrap font-medium text-left leading-5 text-slate-700"},l1={class:"absolute flex flex-col items-start bg-slate-50 border-l-2 border-r-2 border-b-2 border-slate-900/5 w-[300px] h-[260px] bg-fit bg-bottom bg-no-repeat"},c1={class:"pt-0 space-y-5"},u1={class:"flex flex-col items-center lg:items-start lg:m-2"},h1={class:"absolute left-[25%] -bottom-7 px-2 py-2 text-white text-xl button-zoom bg-white/10 ring-slate-900/5"},f1={class:"px-4 py-1 border-purple-600/5 bg-main-color-bg hover:bg-main-color-bg/80 shadow-lg font-arial ring-1 ring-slate-900/10"},d1={class:"pt-0 m-1 space-y-5"},p1={class:"relative w-[300px] h-fit flex flex-row items-center flex-wrap"},g1=["src","onClick"],m1={key:1,class:"bg-transparent relative w-[300px] h-[300px]"},v1={class:"absolute flex flex-col items-start bg-slate-50 border-l-2 border-r-2 border-b-2 border-slate-900/5 w-[300px] h-[260px] bg-fit bg-bottom bg-no-repeat"},y1={class:"pt-0 m-1 space-y-5"},b1={class:"relative w-[300px] h-fit flex flex-row items-center flex-wrap"},_1=["src","onClick"],x1={initial:{opacity:0,scale:0,translateY:100},enter:{opacity:1,scale:1,translateY:0,delay:100},class:"box-border absolute bottom-0 w-[290px] h-[50px] bg-gray-100 flex flex-col"},C1={class:"overflow-auto overflow-y-hidden flex flex-row w-full bottom-0"},w1=["value"],S1=["onClick"],T1={key:0,class:"z-40 absolute bottom-0 h-[300px] lg:relative text-gray-400 w-[100vw] lg:w-full bg-gray-100"},O1={key:0,class:"absolute z-50 bottom-0 h-[300px] border-x-2 border-y-2 border-gray-100 flex w-full flex-col items-start bg-white"},k1={class:"w-full h-[30px] border-x-1 border-y-2 border-2 bg-main-color-bg border-white"},A1={class:"text-md text-white w-full mx-auto text-center"},E1={class:"flex flex-row justify-between w-full h-[35px] bg-transparent"},P1={key:0,class:"relative m-3 w-[80%]"},I1=["placeholder"],M1={class:"absolute top-2 right-2"},R1={key:1,class:"relative w-full h-full flex flex-row items-center justify-center"},D1={class:"w-full h-full flex flex-row items-center justify-center"},F1={key:2,class:"relative w-full h-full flex flex-row items-center justify-center"},L1={class:Ie("flex flex-row overflow-x-auto overflow-y-hidden h-[80px] snap-x w-fit bg-transparent ")},B1=["onClick"],j1={key:3,class:"relative m-3 w-full"},z1={class:"flex flex-row items-center justify-center m-2 gap-3"},N1={class:"flex flex-row place-items-center items-center gap-6 pl-4 mt-0"},U1={key:1,class:"box-border bg-gray-800 lg:bg-transparent relative w-full lg:p-6 lg:w-[360px] h-[530px]"},H1={class:"hidden lg:flex flex-col ml-2 mt-0 items-left"},W1={class:"font-arial select-none text-base mt-0 font-semibold leading-2 text-slate-700"},V1={class:"font-arial select-none font-extrabold leading-none tracking-tight text-slate-900 text-5xl sm:leading-[3.5rem]"},X1={class:"font-arial select-none my-2 text-base whitespace-nowrap font-medium text-left leading-7 text-slate-700"},Y1={class:"bg-transparent w-[300px] h-[335px] mx-auto lg:mx-0 ring-slate-900/5"},G1={class:"absolute lg:relative flex flex-col bottom-0 items-start bg-slate-50 ring-1 ring-slate-900/5 w-[300px] h-[480px] bg-fit bg-bottom bg-no-repeat"},q1={class:"flex flex-row w-[300px] h-[40px] justify-evenly bg-gray-100"},K1={key:0,class:"pt-0 space-y-5"},Z1={class:"flex flex-col items-start ml-2 gap-2"},J1={class:"flex flex-col"},Q1={class:"font-arial select-none ml-4 mt-2 text-base whitespace-nowrap font-medium text-left leading-7 text-slate-700"},$1={class:"w-full px-4 py-2"},ey={class:"mb-2"},ty={class:"relative"},iy=["placeholder"],ny={class:"absolute top-2 right-2"},ry={class:"font-arial select-none ml-4 mt-2 text-base whitespace-nowrap font-medium text-left leading-7 text-slate-700"},sy={class:"flex flex-row items-center"},oy={class:"relative w-[37px] h-[37px] ml-4 shadow-xl ring-1 ring-slate-900/5"},ay={class:"flex flex-col gap-3"},ly={class:"font-arial select-none ml-4 mt-1 text-base whitespace-nowrap font-medium text-left leading-7 text-slate-700"},cy={class:"flex flex-row place-items-center items-center gap-6 pl-4 mt-0"},uy={class:"font-arial select-none ml-4 mt-2 text-base whitespace-nowrap font-medium text-left leading-7 text-slate-700"},hy={class:Ie("flex flex-row overflow-x-auto overflow-y-hidden h-[60px] snap-x w-[280px] bg-transparent ")},fy=["onClick"],dy={key:0,class:"z-40 absolute bottom-0 h-dvh bg-gray-100 lg:relative text-gray-400 w-[100vw] lg:w-full"},py={key:0,class:"absolute lg:hidden z-50 bottom-0 h-[600px] border-x-2 border-y-2 border-gray-100 flex w-full flex-col items-center bg-white"},gy={class:"w-full h-[30px] border-x-1 border-y-2 border-2 bg-main-color-bg border-white"},my={class:"text-md text-white w-full mx-auto text-center"},vy={class:"flex flex-col h-[200px] mt-2 items-center"},yy={key:0,class:"visible font-arial select-none w-[280px] my-5 text-sm whitespace-wrap font-medium text-left leading-5 text-slate-700"},by={class:"w-[160px] h-[160px]"},_y=["src"],xy={key:1,class:"whitespace-wrap mt-2 font-extrabold text-sm text-center leading-12 text-slate-700"},Cy={key:2,class:"whitespace-wrap font-medium text-sm text-center text-slate-400"},wy={key:3,class:"whitespace-wrap font-extrabold select-none text-sm text-center leading-12 text-slate-700"},Sy={key:4,class:"whitespace-wrap font-extrabold select-none text-sm text-center leading-12 text-slate-700"},Ty={key:0,class:"py-0 whitespace-wrap font-extrabold text-lg text-center leading-7 text-slate-400"},Oy={class:"select-none text-justify text-lg text-slate-700"},ky={key:5,class:"whitespace-wrap font-extrabold select-none text-md text-center leading-12 text-slate-700"},Ay={key:1,class:"box-border bg-gray-100 lg:bg-transparent lg:flex flex-col items-center relative w-[100vw] lg:w-[360px] lg:p-2 h-[480px]"},Ey={class:"hidden lg:flex flex-col ml-4 mt-0 items-left"},Py={class:"invisible md:visible font-arial select-none text-base -mt-2 font-semibold leading-2 text-slate-700"},Iy={class:"invisible md:visible font-arial select-none font-extrabold leading-none tracking-tight text-slate-900 text-5xl sm:leading-[3.5rem]"},My={key:0,class:"visible font-arial select-none w-[280px] my-5 text-sm whitespace-wrap font-medium text-left leading-5 text-slate-700"},Ry={class:"relative flex w-[300px] h-[300px] mt-3 flex-col items-center"},Dy={key:0,class:"w-full fill-current",viewBox:"0 0 24 24",width:"100",height:"100"},Fy={key:1,class:"w-full fill-current",viewBox:"0 0 24 24",width:"100",height:"100"},Ly={key:0,class:"whitespace-wrap mt-2 font-extrabold text-sm text-center leading-12 text-slate-700"},By={key:1,class:"whitespace-wrap font-medium text-sm text-center text-slate-400"},jy={key:2,class:"whitespace-wrap mt-2 font-extrabold select-none text-sm text-center leading-12 text-slate-700"},zy={key:3,class:"whitespace-wrap font-extrabold select-none text-md text-center leading-12 text-slate-700"},Ny={key:4,class:"animate-pulse mt-[80px] sm:mt-1 m-2 px-3 py-0 whitespace-wrap font-extrabold text-xl md:text-xl text-center leading-7 text-slate-400"},Uy={class:"animate-none select-none -ml-1 text-justify text-2xl text-slate-700"},Hy={class:"absolute z-0 mt-[50px] lg:mt-[0px] lg:relative w-[100vw] h-[500px] lg:w-full items-start"},Wy={class:"z-50 hidden lg:flex lg bg-gray-100 relative w-full h-[50px]"},Vy={class:"w-max h-max mx-auto flex flex-row text-center"},Xy={class:"lg:flex gap-3 flex-row items-center align-middle justify-center m-3 z-20"},Yy={key:0,class:"whitespace-wrap font-medium ml-6 select-none text-sm text-center leading-12 text-black"},Gy={key:1,class:"whitespace-wrap font-medium select-none text-sm text-center leading-12 text-black"},qy={key:2,class:"whitespace-wrap font-medium text-sm select-none text-center text-black"},Ky={key:3,class:"whitespace-wrap font-medium select-none text-sm text-center leading-12 text-black"},Zy={key:4,class:"whitespace-wrap font-medium select-none text-sm text-center leading-12 text-black"},Jy={class:"whitespace-wrap font-medium select-none text-sm text-center leading-12 text-black"},Qy={class:"absolute z-0 lg:relative w-[100vw] h-[500px] lg:w-[500px] lg:flex flex-col justify-center justify-items-center items-start"},$y={id:"start",class:"z-0 relative w-[100vw] lg:w-[400px]",ref:"canvasRef","will-read-frequently":"true"},eb={delay:600,class:"absolute w-[30px] right-[0px] top-10 gap-3 flex flex-col m-3 z-20"},tb={class:"absolute -top-[20px] left-[130px] z-20 flex flex-row items-center gap-3"},ib=["onClick"],nb={class:"visible text-[.6vw] font-bold m-1 mt-4 mb-4"};function rb(t,e,s,d,f,m){const y=Cr("motion"),h=Cr("motion-pop"),i=Cr("motion-slide-bottom");return le(),ce("div",fm,[B("ul",dm,[B("li",pm,[B("a",{onClick:e[0]||(e[0]=a=>m.setActiveTabIndex(1)),href:"#",class:Ie(["inline-flex place-items-center pl-3 py-6 text-gray-900 active w-full  h-full bg-white",{activeTab:f.activeTabIndex===1}]),"aria-current":"page"},[B("div",gm,[B("div",mm,[f.activeTabIndex===1?be((le(),ce("div",vm,e[77]||(e[77]=[B("span",{class:"text-center text-white m-2 w-[24px] h-[24px]"},[B("img",{class:"h-full w-full",src:Oa,alt:""})],-1)]))),[[y]]):ge("",!0),e[78]||(e[78]=B("div",{class:"absolute w-10 h-10 mx-auto bg-white rounded-full ring-slate-300 ring-1 text-lg text-white flex items-center"},[B("span",{class:"text-center text-white m-2 w-[24px] h-[24px]"},[B("img",{class:"h-full w-full",src:Oa,alt:""})])],-1))])]),f.activeTabIndex===1?be((le(),ce("span",ym,[Ze(de(f.dictionary.step_one_title),1)])),[[y]]):(le(),ce("span",bm,de(f.dictionary.step_one_title),1))],2)]),B("li",_m,[B("a",{href:"#",onClick:e[1]||(e[1]=a=>m.setActiveTabIndex(2)),class:Ie(["inline-flex place-items-center pl-3 py-6 text-gray-900  active  w-[60px] lg:w-[200px] h-full bg-white",{activeTab:f.activeTabIndex===2},{"pointer-events-none":!f.activeCaseButton},{"opacity-50":!f.activeCaseButton}])},[B("div",xm,[B("div",Cm,[f.activeTabIndex===2?be((le(),ce("div",wm,e[79]||(e[79]=[B("span",{class:"text-center text-white m-2 w-[24px] h-[24px]"},[B("img",{class:"h-full w-full",src:ka,alt:""})],-1)]))),[[y]]):ge("",!0),e[80]||(e[80]=B("div",{class:"absolute w-10 h-10 mx-auto bg-white rounded-full ring-slate-300 ring-1 text-lg text-white flex items-center"},[B("span",{class:"text-center text-white m-2 w-[24px] h-[24px]"},[B("img",{class:"h-full w-full",src:ka,alt:""})])],-1))])]),f.activeTabIndex===2?be((le(),ce("span",Sm,[Ze(de(f.dictionary.step_two_title),1)])),[[y]]):(le(),ce("span",Tm,de(f.dictionary.step_two_title),1))],2)]),B("li",Om,[B("a",{onClick:e[2]||(e[2]=a=>m.setActiveTabIndex(3)),href:"#",class:Ie(["inline-flex place-items-center pl-3 py-6 text-gray-900  active  w-[60px] lg:w-[200px] h-full bg-white",{activeTab:f.activeTabIndex===3},{"pointer-events-none":!f.activeCaseButton},{"pointer-events-none":!f.activeIndex},{"opacity-50":!f.activeIndex}])},[B("div",km,[B("div",Am,[f.activeTabIndex===3?be((le(),ce("div",Em,e[81]||(e[81]=[B("span",{class:"text-center text-white w-[20px] h-[20px] m-2"},[B("img",{class:"h-full w-full",src:Aa,alt:""})],-1)]))),[[y]]):ge("",!0),e[82]||(e[82]=B("div",{class:"absolute w-10 h-10 mx-auto bg-white border-2 border-white rounded-full ring-slate-300 ring-1 text-lg text-white flex items-center"},[B("span",{class:"text-center text-white w-[20px] h-[20px] m-2"},[B("img",{class:"h-full w-full",src:Aa,alt:""})])],-1))])]),f.activeTabIndex===3?be((le(),ce("span",Pm,[Ze(de(f.dictionary.steper_image),1)])),[[y]]):(le(),ce("span",Im,de(f.dictionary.steper_image),1))],2)]),B("li",Mm,[B("a",{onClick:e[3]||(e[3]=a=>m.setActiveTabIndex(4)),href:"#",class:Ie(["inline-flex place-items-center pl-3 py-6 text-gray-900  active w-[60px] lg:w-[200px] h-full bg-white",{activeTab:f.activeTabIndex===4},{"pointer-events-none":!f.selectedCaseTitle},{"pointer-events-none":!f.activeIndex},{"opacity-50":!f.activeIndex}])},[B("div",Rm,[B("div",Dm,[f.activeTabIndex===4?be((le(),ce("div",Fm,e[83]||(e[83]=[B("span",{class:"text-center text-white w-[20px] h-[20px] m-2"},[B("img",{class:"h-full w-full",src:Ea,alt:""})],-1)]))),[[y]]):ge("",!0),e[84]||(e[84]=B("div",{class:"absolute w-10 h-10 mx-auto bg-white border-2 border-white rounded-full ring-slate-300 ring-1 text-lg text-white flex items-center"},[B("span",{class:"text-center text-white w-[20px] h-[20px] m-2"},[B("img",{class:"h-full w-full",src:Ea,alt:""})])],-1))])]),f.activeTabIndex===4?be((le(),ce("span",Lm,[Ze(de(f.dictionary.steper_text),1)])),[[y]]):(le(),ce("span",Bm,de(f.dictionary.steper_text),1))],2)]),B("li",jm,[B("a",{onClick:e[4]||(e[4]=a=>{m.setActiveTabIndex(5),this.createPrintLink()}),href:"#",class:Ie(["inline-flex place-items-center pl-3 py-6 text-gray-900 bg-[#73d841] active  w-[60px] lg:w-[200px] h-full ",{activeTabPurchase:f.activeTabIndex===5&&f.mobileMode===!1},{activeTabPurchaseMobile:f.activeTabIndex===5&&f.mobileMode===!0},{"pointer-events-none":!f.selectedCaseTitle},{"pointer-events-none":!f.activeIndex},{"pointer-events-none":!this.emptyCanvas},{"opacity-50":!this.emptyCanvas}])},[B("div",zm,[B("div",Nm,[f.activeTabIndex===5?be((le(),ce("div",Um,e[85]||(e[85]=[B("span",{class:"text-center text-white w-[20px] h-[20px] m-2"},[B("img",{class:"h-full w-full",src:Pa,alt:""})],-1)]))),[[y]]):ge("",!0),e[86]||(e[86]=B("div",{class:"absolute w-10 h-10 mx-auto bg-white border-2 border-white rounded-full ring-slate-300 ring-1 text-lg text-white flex items-center"},[B("span",{class:"text-center text-white w-[20px] h-[20px] m-2"},[B("img",{class:"h-full w-full",src:Pa,alt:""})])],-1))])]),f.activeTabIndex===5?be((le(),ce("span",Hm,[Ze(de(f.dictionary.steper_finish),1)])),[[y]]):(le(),ce("span",Wm,de(f.dictionary.steper_finish),1))],2)])]),B("div",Vm,[Be(Ti,{name:f.mobileMode===!0?"slide-fade":"box-fade"},{default:ci(()=>[(f.mobileMode?f.showDialog&&f.activeTabIndex===1:f.activeTabIndex===1)?(le(),ce("div",Xm,[B("div",Ym,[B("div",Gm,[B("p",qm,de(f.dictionary.step_one),1),B("h1",Km,de(f.dictionary.step_one_title),1),B("p",Zm,de(f.dictionary.step_one_description),1)]),B("div",Jm,[B("div",Qm,[this.alertMessageItemStock?(le(),ce("div",$m,[B("p",e0,de(f.dictionary.alert_box_out_of_stock),1),B("div",t0,[B("div",{onClick:e[5]||(e[5]=a=>m.alertMessageItemStockClose()),class:"cursor-pointer px-8 py-1 border-purple-600/5 bg-main-color-bg hover:bg-main-color-bg shadow-inner font-arial ring-1 ring-slate-900/10"},[B("p",i0,de(f.dictionary.action_close),1)])])])):ge("",!0),B("div",n0,[f.mobileMode===!0?(le(),ce("div",r0,[B("p",s0,de(f.dictionary.step_one)+" : "+de(f.dictionary.step_one_description),1)])):ge("",!0),B("div",o0,[B("div",{onClick:e[6]||(e[6]=a=>f.activeProductTabIndex=1),class:Ie(["w-full border-x-2 border-y-2  border-gray-100 p-2 text-sm  text-center inline-block align-middle bg-gray-100",{activeProductTab:f.activeProductTabIndex===1}])},[B("p",null,de(f.dictionary.product),1)],2),B("div",{onClick:e[7]||(e[7]=a=>f.activeProductTabIndex=2),class:Ie(["w-full border-x-2 border-y-2  border-gray-100 p-2 text-sm  text-center inline-block align-middle bg-gray-100",{activeProductTab:f.activeProductTabIndex===2},{"pointer-events-none":!f.selectedType},{"opacity-50":!f.selectedType}])},[B("p",null,de(f.dictionary.brand),1)],2),B("div",{onClick:e[8]||(e[8]=a=>f.activeProductTabIndex=3),class:Ie(["w-full border-x-2 border-y-2  border-gray-100 p-2 text-sm  text-center inline-block align-middle bg-gray-100",{activeProductTab:f.activeProductTabIndex===3},{"pointer-events-none":!f.selectedBrand},{"opacity-50":!f.selectedBrand}])},[B("p",null,de(f.dictionary.model),1)],2),B("div",{onClick:e[9]||(e[9]=a=>f.activeProductTabIndex=4),class:Ie(["w-full border-x-2 border-y-2  border-gray-100 p-2 text-sm  text-center inline-block align-middle bg-gray-100",{activeProductTab:f.activeProductTabIndex===4},{"pointer-events-none":!f.selectedModel},{"opacity-50":!f.selectedModel}])},[B("p",null,de(f.dictionary.cover),1)],2)]),f.activeProductTabIndex===1?be((le(),ce("div",a0,[B("div",l0,[B("div",{class:"relative flex flex-col items-center justify-center m-2 p-2 h-[140px] w-[140px]",onClick:e[10]||(e[10]=a=>{f.selectedType=1,m.getDeviceType(f.selectedType),m.setActiveProductIndex(1),m.setActiveProductTabIndex(2)})},[f.activeProduct===1?be((le(),ce("div",c0,null,512)),[[h]]):ge("",!0),e[87]||(e[87]=B("img",{src:lm,alt:""},null,-1)),B("p",u0,de(f.dictionary.phone_device),1)]),B("div",{class:"relative flex flex-col items-center justify-center m-2 p-2 h-[140px] w-[140px]",onClick:e[11]||(e[11]=a=>{f.selectedType=2,m.getDeviceType(f.selectedType),m.setActiveProductTabIndex(2),m.setActiveProductIndex(2)})},[f.activeProduct===2?be((le(),ce("div",h0,null,512)),[[h]]):ge("",!0),e[88]||(e[88]=B("img",{src:cm,alt:""},null,-1)),B("p",f0,de(f.dictionary.tablet_device),1)]),B("div",{class:"flex relative flex-col items-center justify-center m-2 p-2 h-[140px] w-[140px]",onClick:e[12]||(e[12]=a=>{f.selectedType=4,m.getDeviceType(f.selectedType),m.setActiveProductTabIndex(2),m.setActiveProductIndex(3)})},[f.activeProduct===3?be((le(),ce("div",d0,null,512)),[[h]]):ge("",!0),e[89]||(e[89]=B("img",{src:um,alt:""},null,-1)),B("p",null,de(f.dictionary.gadget_device),1)])])])),[[y]]):ge("",!0),f.activeProductTabIndex===2?be((le(),ce("div",p0,[this.alertMessageNoInterntet?(le(),ce("div",g0,[e[90]||(e[90]=B("p",{class:"font-arial select-none w-[260px] mt-12 px-6 text-sm whitespace-wrap font-medium text-left leading-5 text-slate-700"}," No Internet access, check your connection and refresh page! ",-1)),B("div",m0,[B("div",{onClick:e[13]||(e[13]=a=>m.alertMessageNoInternetClose()),class:"cursor-pointer px-8 py-1 border-purple-600/5 bg-slate-900/70 hover:bg-slate-900/80 shadow-inner font-arial ring-1 ring-slate-900/10"},[B("p",v0,de(f.dictionary.action_close),1)])])])):ge("",!0),B("div",y0,[(le(!0),ce(Le,null,ct(f.brands,a=>(le(),ce("p",{class:"relative w-[270px] border-2 ml-2 p-2 bg-gray-50 font-arial mb-1 text-base select-none font-medium text-left leading-7 text-slate-700",key:a.id,value:a.id,data:a.value,onClick:u=>{m.getPhoneModels(a.id),m.updateSelectedBrandTitle(a),m.setActiveProductTabIndex(3),m.setActiveBrandIndex(a.id)}},[f.activeBrand===a.id?be((le(),ce("div",_0,null,512)),[[h]]):ge("",!0),Ze(" "+de(a.title),1)],8,b0))),128))])])),[[y]]):ge("",!0),f.activeProductTabIndex===3?be((le(),ce("div",x0,[B("div",C0,[(le(!0),ce(Le,null,ct(f.models,a=>(le(),ce("p",{class:"relative w-[270px] border-2 ml-2 p-2 bg-gray-50 font-arial mb-1 text-base select-none font-medium text-left leading-7 text-slate-700",key:a.id,value:a.id,data:a.value,onClick:u=>{m.getPhoneCase(a.id),m.updateSelectedModelTitle(a),m.setActiveCaseIndex(null),m.setActiveCaseButton(null),m.setActiveProductTabIndex(4),m.setActiveModelIndex(a.id)}},[f.activeModel===a.id?be((le(),ce("div",S0,null,512)),[[h]]):ge("",!0),Ze(" "+de(a.title),1)],8,w0))),128))])])),[[y]]):ge("",!0),f.activeProductTabIndex===4?be((le(),ce("div",T0,[B("div",O0,[(le(!0),ce(Le,null,ct(f.casesTypes,(a,u)=>(le(),ce("div",{class:"relative flex flex-row bg-gray-50 items-start border-2 mt-1 mb-2 mx-2 h-[130px] w-[280px]",key:a.id,value:u,onClick:r=>{m.removeObjectsForClipPath(),m.addPhoneToCanvas(a),m.updateSelectedCaseTitle(a),m.setActiveCaseIndex(a.id)}},[f.activeCase===a.id?be((le(),ce("div",A0,null,512)),[[h]]):ge("",!0),B("div",E0,[B("img",{class:"p-1 bg-gray-50 font-arial mb-1 text-base select-none font-medium text-left leading-7 text-slate-700",src:a.info_image},null,8,P0)]),B("div",I0,[B("div",M0,[B("h3",R0,de(a.translated_title)+" "+de(f.selectedCaseType),1),B("h2",D0,de(a.price)+" "+de(f.dictionary.currency),1)])])],8,k0))),128))]),B("div",{class:Ie(["absolute bottom-5 lg:bottom-0 px-4 py-1 border-purple-600/5 bg-main-color-bg hover:bg-main-color-bg/80 shadow-lg font-arial ring-1 ring-slate-900/10",{"opacity-50":!this.selectedCase},{"pointer-events-none":!this.selectedCase}])},[B("p",{onClick:e[14]||(e[14]=a=>{(f.activeTabIndex=2)&&m.setActiveProductTabIndex(1),m.setActiveCaseButton(!0),m.addCollage1(1),f.showDialog=!1}),class:"px-2 py-2 text-center text-lg font-arial font-semibold leading-none tracking-tight text-slate-100"},de(f.dictionary.confirm),1)],2)])),[[y]]):ge("",!0)])])])])])):ge("",!0)]),_:1},8,["name"]),Be(Ti,{name:f.mobileMode===!0?"slide-fade":"box-fade"},{default:ci(()=>[(f.mobileMode?f.showDialog&&f.activeTabIndex===2:f.activeTabIndex===2)?(le(),ce("div",F0,[f.mobileMode===!0?(le(),ce("div",L0,[B("div",B0,[B("p",j0,de(f.dictionary.step_two)+": "+de(f.dictionary.step_two_description),1)]),this.selectedType==1||this.selectedType==2?(le(),ce("div",z0,[B("div",{onClick:e[15]||(e[15]=a=>m.addCollage1(1)),class:"relative w-[50px] h-[50px]"},[f.activeIndex===1?be((le(),ce("div",N0,null,512)),[[h]]):ge("",!0),e[91]||(e[91]=B("img",{class:"",src:Ia},null,-1))]),B("div",{onClick:e[16]||(e[16]=a=>m.addCollage2(2)),class:"relative w-[50px] h-[50px]"},[f.activeIndex===2?be((le(),ce("div",U0,null,512)),[[h]]):ge("",!0),e[92]||(e[92]=B("img",{class:"",src:Ma},null,-1))]),B("div",{onClick:e[17]||(e[17]=a=>m.addCollage3(3)),class:"relative w-[50px] h-[50px]"},[f.activeIndex===3?(le(),ce("div",H0)):ge("",!0),e[93]||(e[93]=B("img",{class:"",src:Ra},null,-1))]),B("div",{onClick:e[18]||(e[18]=a=>m.addCollage4(4)),class:"relative w-[50px] h-[50px]"},[f.activeIndex===4?be((le(),ce("div",W0,null,512)),[[h]]):ge("",!0),e[94]||(e[94]=B("img",{class:"",src:Da},null,-1))]),B("div",{onClick:e[19]||(e[19]=a=>m.addCollage5(5)),class:"relative w-[50px] h-[50px]"},[f.activeIndex===5?be((le(),ce("div",V0,null,512)),[[h]]):ge("",!0),e[95]||(e[95]=B("img",{class:"",src:Fa},null,-1))])])):ge("",!0),this.selectedType==4?(le(),ce("div",X0,[B("div",{onClick:e[20]||(e[20]=a=>m.addCollage1(7)),class:"relative w-[50px] h-[50px]"},[f.activeIndex===7?be((le(),ce("div",Y0,null,512)),[[h]]):ge("",!0),e[96]||(e[96]=B("img",{class:"",src:La},null,-1))])])):ge("",!0),B("div",G0,[B("p",{onClick:e[21]||(e[21]=a=>{m.setActiveTabIndex(3),f.showDialog=!1}),class:"px-2 py-1 text-center text-md font-arial font-semibold leading-none tracking-tight text-slate-100"},de(f.dictionary.confirm),1)])])):ge("",!0),B("div",q0,[B("div",K0,[B("p",Z0,de(f.dictionary.step_two),1),B("h1",J0,de(f.dictionary.step_two_title),1),B("p",Q0,de(f.dictionary.step_two_description),1)]),B("div",$0,[B("div",ev,[B("div",tv,[this.selectedType==""?(le(),ce("p",iv,de(f.dictionary.alert_box_stepper),1)):ge("",!0),this.selectedType==1||this.selectedType==2?(le(),ce("div",nv,[B("div",{onClick:e[22]||(e[22]=a=>m.addCollage1(1)),class:"relative w-[50px] h-[50px]"},[f.activeIndex===1?be((le(),ce("div",rv,null,512)),[[h]]):ge("",!0),e[97]||(e[97]=B("img",{class:"",src:Ia},null,-1))]),B("div",{onClick:e[23]||(e[23]=a=>m.addCollage2(2)),class:"relative w-[50px] h-[50px]"},[f.activeIndex===2?be((le(),ce("div",sv,null,512)),[[h]]):ge("",!0),e[98]||(e[98]=B("img",{class:"",src:Ma},null,-1))]),B("div",{onClick:e[24]||(e[24]=a=>m.addCollage3(3)),class:"relative w-[50px] h-[50px]"},[f.activeIndex===3?(le(),ce("div",ov)):ge("",!0),e[99]||(e[99]=B("img",{class:"",src:Ra},null,-1))])])):ge("",!0),this.selectedType==1||this.selectedType==2?(le(),ce("div",av,[B("div",{onClick:e[25]||(e[25]=a=>m.addCollage4(4)),class:"relative w-[50px] h-[50px]"},[f.activeIndex===4?be((le(),ce("div",lv,null,512)),[[h]]):ge("",!0),e[100]||(e[100]=B("img",{class:"",src:Da},null,-1))]),B("div",{onClick:e[26]||(e[26]=a=>m.addCollage5(5)),class:"relative w-[50px] h-[50px]"},[f.activeIndex===5?be((le(),ce("div",cv,null,512)),[[h]]):ge("",!0),e[101]||(e[101]=B("img",{class:"",src:Fa},null,-1))])])):ge("",!0),this.selectedType==4?(le(),ce("div",uv,[B("div",{onClick:e[27]||(e[27]=a=>m.addCollage1(7)),class:"relative w-[50px] h-[50px]"},[f.activeIndex===7?be((le(),ce("div",hv,null,512)),[[h]]):ge("",!0),e[102]||(e[102]=B("img",{class:"",src:La},null,-1))])])):ge("",!0),B("div",fv,[B("p",{onClick:e[28]||(e[28]=a=>{m.setActiveTabIndex(3),f.showDialog=!1}),class:"px-2 py-2 animate-pulse text-center text-lg font-arial font-semibold leading-none tracking-tight text-slate-100"}," Confirm ")])])])])])])):ge("",!0)]),_:1},8,["name"]),Be(Ti,{name:f.mobileMode===!0?"slide-fade":"box-fade"},{default:ci(()=>[be(B("div",dv,[f.mobileMode===!0?(le(),ce("div",pv,[B("div",gv,[B("p",mv,de(f.dictionary.step_three)+":"+de(f.dictionary.step_three_description),1)]),f.alertMessageImageTooSmall?be((le(),ce("div",vv,[B("p",yv,de(f.dictionary.alert_box_image_size),1),B("div",{onClick:e[29]||(e[29]=a=>m.alertMessageImageTooSmallClose()),class:"cursor-pointer m-6 px-4 py-1 bg-[#00aaff] hover:bg-[#00aaff]/80"},[B("p",bv,de(f.dictionary.action_close),1)])])),[[h]]):ge("",!0),f.alertMessageImageType?be((le(),ce("div",_v,[B("p",xv,de(f.dictionary.alert_box_file_type),1),B("div",{onClick:e[30]||(e[30]=a=>m.alertMessageImageTypeClose()),class:"cursor-pointer m-6 px-4 py-1 bg-[#00aaff] hover:bg-[#00aaff]/80"},[B("p",Cv,de(f.dictionary.action_close),1)])])),[[h]]):ge("",!0),f.alertMessageMaximumImageUpload?be((le(),ce("div",wv,[B("p",Sv,de(f.dictionary.alert_box_maximum_images),1),B("div",{onClick:e[31]||(e[31]=a=>m.alertMessageMaximumImageUploadClose()),class:"cursor-pointer m-6 px-4 py-1 bg-[#00aaff] hover:bg-[#00aaff]/80"},[B("p",Tv,de(f.dictionary.action_close),1)])])),[[h]]):ge("",!0),B("div",Ov,[B("div",{onClick:e[32]||(e[32]=a=>m.setActiveTabImages(1)),class:Ie(["w-full border-x-2 border-y-2 select-none  border-gray-100 p-2 text-sm  text-center inline-block align-middle bg-gray-100",{activeProductTab:f.activeTabImages===1}])},de(f.dictionary.your_images),3),B("div",{onClick:e[33]||(e[33]=a=>m.setActiveTabImages(2)),class:Ie(["w-full border-x-2 border-y-2 select-none  border-gray-100 p-2 text-sm  text-center inline-block align-middle bg-gray-100",{activeTabImages:f.activeTabImages===2}])},de(f.dictionary.collections),3)]),f.activeTabImages===1?(le(),ce("div",kv,[B("div",Av,[(le(!0),ce(Le,null,ct(this.uploadedImages,(a,u)=>be((le(),ce("div",{initial:{opacity:1,scale:1},enter:{opacity:1,scale:1},variants:{custom:{opacity:1,scale:1}},delay:300,key:a.id,class:"relative m-1 w-[50px] h-[50px]"},[(le(),ce("img",{class:"border-[2px] w-[90%] h-[90%] m-1 rounded-md border-gray-600/30",src:a.url,key:a.id,alt:"Uploaded Image",onClick:r=>m.addClipPathToSelectedObject(u)},null,8,Ev))])),[[y]])),128))]),B("div",Pv,[B("p",{onClick:e[34]||(e[34]=(...a)=>m.addButton&&m.addButton(...a)),class:"px-2 py-2 animate-pulse text-center text-lg font-arial font-semibold leading-none tracking-tight text-slate-100"},de(f.dictionary.your_images),1)])])):ge("",!0),f.activeTabImages===2?(le(),ce("div",Iv,[B("div",Mv,[B("div",Rv,[B("div",Dv,[(le(!0),ce(Le,null,ct(this.filteredItems,a=>be((le(),ce("div",{key:a.id,initial:{opacity:0,scale:0},enter:{opacity:1,scale:1},variants:{custom:{scale:1}},delay:300,class:"relative m-1 w-[50px] h-[50px]"},[(le(),ce("img",{class:"border-[2px] w-[90%] h-[90%] m-1 rounded-md border-gray-600/30",src:a.src,key:a.id,alt:"Collection Image",onClick:u=>m.uploadImageFromCollection(a)},null,8,Fv))])),[[y]])),128))]),be((le(),ce("div",Lv,[B("div",Bv,[(le(!0),ce(Le,null,ct(f.categories.categories,(a,u)=>(le(),ce("div",{key:u,value:u},[B("div",{onClick:r=>(m.filterByCategory(a.category),m.setActiveCategory(u+1)),class:Ie(["w-max box-border select-none border-x-2 border-y-2  border-gray-100 py-2 px-6 text-sm  text-center inline-block align-middle bg-gray-100",{activeCategory:f.activeCategory===u+1}])},de(a.category),11,zv)],8,jv))),128))])])),[[y]])])])])):ge("",!0),m.canBulkGenerate()?(le(),ce("div",Nv,[B("p",null,de(f.dictionary.bulk_download_msg),1),B("button",{onClick:e[35]||(e[35]=a=>m.loadImages()),class:"bg-main-color-bg px-2 py-2 text-center text-lg font-arial font-semibold leading-none tracking-tight text-slate-100"},de(f.dictionary.download),1)])):ge("",!0)])):ge("",!0),f.mobileMode===!1?(le(),ce("div",Uv,[e[105]||(e[105]=B("div",{class:"block lg:hidden h-[50px]"},null,-1)),B("div",Hv,[B("p",Wv,de(f.dictionary.step_three),1),B("h1",Vv,de(f.dictionary.step_three_title),1),B("p",Xv,de(f.dictionary.step_three_description),1)]),B("div",Yv,[f.alertMessageMaximumImageUpload?be((le(),ce("div",Gv,[e[103]||(e[103]=B("p",{class:"font-arial select-none w-[300px] mt-12 px-6 text-sm whitespace-wrap font-medium text-left leading-5 text-slate-700"}," Maksimalan broj dodatih slika je šest! ",-1)),B("div",qv,[B("div",{onClick:e[36]||(e[36]=a=>m.alertMessageMaximumImageUploadClose()),class:"cursor-pointer px-8 py-1 border-purple-600/5 bg-main-color-bg hover:bg-main-color-bg/80 shadow-lg font-arial ring-1 ring-slate-900/10"},[B("p",Kv,de(f.dictionary.action_close),1)])])])),[[h]]):ge("",!0),f.alertMessageImageTooSmall?be((le(),ce("div",Zv,[B("p",Jv,de(f.dictionary.alert_box_image_size),1),B("div",Qv,[B("div",{onClick:e[37]||(e[37]=a=>m.alertMessageImageTooSmallClose()),class:"cursor-pointer px-8 py-1 border-purple-600/5 bg-slate-900/70 hover:bg-slate-900/80 rounded-full shadow-lg font-arial ring-1 ring-slate-900/10"},[B("p",$v,de(f.dictionary.action_close),1)])])])),[[h]]):ge("",!0),f.alertMessageImageType?be((le(),ce("div",e1,[B("p",t1,de(f.dictionary.alert_box_file_type),1),B("div",i1,[B("div",{onClick:e[38]||(e[38]=a=>m.alertMessageImageTypeClose()),class:"cursor-pointer px-8 py-1 border-purple-600/5 bg-slate-900/70 hover:bg-slate-900/80 rounded-full shadow-lg font-arial ring-1 ring-slate-900/10"},[B("p",n1,de(f.dictionary.action_close),1)])])])),[[h]]):ge("",!0),B("div",r1,[B("div",{onClick:e[39]||(e[39]=a=>m.setActiveTabImages(1)),class:Ie(["w-full border-x-2 border-y-2  border-gray-100 p-2 text-sm  text-center inline-block align-middle bg-gray-100",{activeProductTab:f.activeTabImages===1}])},de(f.dictionary.your_images),3),B("div",{onClick:e[40]||(e[40]=a=>m.setActiveTabImages(2)),class:Ie(["w-full border-x-2 border-y-2  border-gray-100 p-2 text-sm  text-center inline-block align-middle bg-gray-100",{activeTabImages:f.activeTabImages===2}])},de(f.dictionary.collections),3)])]),f.activeTabImages===1?(le(),ce("div",s1,[f.alertMessageUserImagesEmpty?be((le(),ce("div",o1,[B("p",a1,de(f.dictionary.alert_box_your_images_empty),1),e[104]||(e[104]=B("div",{class:"absolute left-[80px] bottom-5 px-2 py-2 text-white text-xl button-zoom bg-white/10"},null,-1))])),[[h]]):ge("",!0),B("div",l1,[B("div",c1,[B("div",u1,[B("div",h1,[B("div",f1,[B("p",{onClick:e[41]||(e[41]=(...a)=>m.addButton&&m.addButton(...a)),class:"px-2 py-2 animate-pulse text-center text-lg font-arial font-semibold leading-none tracking-tight text-slate-100"},de(f.dictionary.upload_images),1)])]),B("div",d1,[B("div",p1,[(le(!0),ce(Le,null,ct(this.uploadedImages,(a,u)=>be((le(),ce("div",{initial:{opacity:1,scale:1},enter:{opacity:1,scale:1},variants:{custom:{opacity:1,scale:1}},delay:300,key:a.id,class:"relative m-1 w-[80px] h-[80px]"},[(le(),ce("img",{class:"border-[2px] w-[90%] h-[90%] m-1 rounded-md border-gray-600/30",src:a.url,key:a.id,alt:"Uploaded Image",onClick:r=>m.addClipPathToSelectedObject(u)},null,8,g1))])),[[y]])),128))])]),B("input",{"aria-label":"upload",id:"uploadButton",type:"file",ref:"uploadButton",style:{display:"none"},onChange:e[42]||(e[42]=(...a)=>m.handleImageUpload&&m.handleImageUpload(...a))},null,544)])])])])):ge("",!0),f.activeTabImages===2?(le(),ce("div",m1,[B("div",v1,[B("div",y1,[B("div",b1,[(le(!0),ce(Le,null,ct(this.filteredItems,a=>be((le(),ce("div",{key:a.id,initial:{opacity:0,scale:0},enter:{opacity:1,scale:1},variants:{custom:{scale:1}},delay:300,class:"relative m-1 w-[50px] h-[50px]"},[(le(),ce("img",{class:"border-[2px] w-[90%] h-[90%] m-1 rounded-md border-gray-600/30",src:a.src,key:a.id,alt:"Collection Image",onClick:u=>m.uploadImageFromCollection(a)},null,8,_1))])),[[y]])),128))]),be((le(),ce("div",x1,[B("div",C1,[(le(!0),ce(Le,null,ct(f.categories.categories,(a,u)=>(le(),ce("div",{key:u,value:u},[B("div",{onClick:r=>(m.filterByCategory(a.category),m.setActiveCategory(u+1)),class:Ie(["w-max box-border select-none border-x-2 border-y-2  border-gray-100 py-2 px-6 text-sm  text-center inline-block align-middle bg-gray-100",{activeCategory:f.activeCategory===u+1}])},de(a.category),11,S1)],8,w1))),128))])])),[[y]])])])])):ge("",!0)])):ge("",!0)],512),[[Zf,f.mobileMode?f.showDialog&&f.activeTabIndex===3:f.activeTabIndex===3]])]),_:1},8,["name"]),Be(Ti,{name:f.mobileMode===!0?"slide-fade":"box-fade"},{default:ci(()=>[(f.mobileMode?f.showDialog&&f.activeTabIndex===4:f.activeTabIndex===4)?(le(),ce("div",T1,[f.mobileMode===!0?(le(),ce("div",O1,[B("div",k1,[B("p",A1,de(f.dictionary.step_four)+": "+de(f.dictionary.step_four_description),1)]),B("div",E1,[B("button",{"aria-label":"Edit",onClick:e[43]||(e[43]=a=>m.setActiveTextControlsTab(1)),class:Ie(["w-full border-x-2    border-gray-100  text-sm  text-center inline-block p-2 align-middle bg-gray-100",{activeTextControlsTab:f.activeTextControlsTab===1}])},de(f.dictionary.action_edit),3),B("button",{"aria-label":"Select color",class:Ie(["w-full",["w-full border-x-2    border-gray-100  text-sm  text-center inline-block p-2 align-middle bg-gray-100",{activeTextControlsTab:f.activeTextControlsTab===2}]]),onClick:e[44]||(e[44]=a=>m.setActiveTextControlsTab(2))},de(f.dictionary.action_select_color),3),B("button",{"aria-label":"Select font",onClick:e[45]||(e[45]=a=>m.setActiveTextControlsTab(3)),class:Ie(["w-full border-x-2    border-gray-100  text-sm  text-center inline-block p-2 align-middle bg-gray-100",{activeTextControlsTab:f.activeTextControlsTab===3}])},de(f.dictionary.action_select_font),3),B("button",{"aria-label":"Align text to the center",onClick:e[46]||(e[46]=a=>m.setActiveTextControlsTab(4)),class:Ie(["w-full border-x-2   border-gray-100  text-sm  text-center inline-block p-2 align-middle bg-gray-100",{activeTextControlsTab:f.activeTextControlsTab===4}])},de(f.dictionary.action_font_allign_text),3)]),f.activeTextControlsTab===1?be((le(),ce("div",P1,[be(B("input",{"aria-label":"Enter text",type:"text","onUpdate:modelValue":e[47]||(e[47]=a=>f.inputText=a),onKeyup:e[48]||(e[48]=Go((...a)=>m.updateSelectedText&&m.updateSelectedText(...a),["enter"])),placeholder:f.dictionary.action_enter_text_decription,class:"w-full bg-transparent rounded-md border border-stroke dark:border-dark-3 py-[10px] pr-3 pl-12 text-dark-6 outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-gray-2"},null,40,I1),[[mn,f.inputText]]),e[106]||(e[106]=B("span",{class:"absolute top-1/2 left-4 -translate-y-1/2"},[B("svg",{width:"16px",height:"16px",viewBox:"0 0 24 24",fill:"none"},[B("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),B("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),B("g",{id:"SVGRepo_iconCarrier"},[B("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.93417 2C7.95604 2 7.97799 2 8 2L16.0658 2C16.9523 1.99995 17.7161 1.99991 18.3278 2.08215C18.9833 2.17028 19.6117 2.36902 20.1213 2.87868C20.631 3.38835 20.8297 4.0167 20.9179 4.67221C21.0001 5.28388 21.0001 6.0477 21 6.9342L21 7.95C21 8.50229 20.5523 8.95 20 8.95C19.4477 8.95 19 8.50229 19 7.95V7.00001C19 6.02893 18.9979 5.40122 18.9357 4.93871C18.8774 4.50497 18.7832 4.36902 18.7071 4.2929C18.631 4.21677 18.495 4.12263 18.0613 4.06431C17.5988 4.00213 16.9711 4 16 4H13V21C13 21.5523 12.5523 22 12 22C11.4477 22 11 21.5523 11 21V4H8C7.02893 4 6.40122 4.00213 5.93871 4.06431C5.50497 4.12263 5.36902 4.21677 5.2929 4.2929C5.21677 4.36902 5.12263 4.50497 5.06431 4.93871C5.00213 5.40122 5 6.02893 5 7.00001V7.95C5 8.50229 4.55229 8.95 4 8.95C3.44772 8.95 3 8.50229 3 7.95V7.00001C3 6.97799 3 6.95604 3 6.93418C2.99995 6.04769 2.99991 5.28387 3.08215 4.67221C3.17028 4.0167 3.36902 3.38835 3.87868 2.87868C4.38835 2.36902 5.0167 2.17028 5.67221 2.08215C6.28387 1.99991 7.04769 1.99995 7.93417 2Z",fill:"#1C274C"}),B("path",{d:"M7 21H17",stroke:"#1C274C","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])])],-1)),B("div",M1,[B("button",{"aria-label":"add text",onClick:e[49]||(e[49]=(...a)=>m.uploadText&&m.uploadText(...a)),class:"h-8 w-24 px-4 leading-6 text-white rounded-sm bg-main-color-bg hover:bg-main-color-bg/80"},de(f.dictionary.action_add_text),1)])])),[[i]]):ge("",!0),f.activeTextControlsTab===2?be((le(),ce("div",R1,[B("div",D1,[be(B("input",{class:"relative w-[130px] h-[30px]",type:"color","aria-label":"Select color",id:"favcolor",name:"favcolor","onUpdate:modelValue":e[50]||(e[50]=a=>f.fontColor=a),onChange:e[51]||(e[51]=(...a)=>m.updateSelectedTextColor&&m.updateSelectedTextColor(...a))},null,544),[[mn,f.fontColor]])])])),[[i]]):ge("",!0),f.activeTextControlsTab===3?be((le(),ce("div",F1,[B("ul",L1,[(le(!0),ce(Le,null,ct(f.fonts,(a,u)=>(le(),ce("li",{key:u,class:Ie([`font-${a.value} snap-center px-8 py-2 mx-4 w-[120px] text-nowrap cursor-pointer`,{"text-blue-400":f.selectedTextIndex===u,"font-semibold":f.selectedTextIndex===u}]),onClick:r=>{m.updateSelectedTextFont(a),m.updateSelectedTextIndex(u)}},de(a.text),11,B1))),128))])])),[[i]]):ge("",!0),f.activeTextControlsTab===4?be((le(),ce("div",j1,[B("div",z1,[B("div",N1,[B("button",{"aria-label":"Align text to the left",onClick:e[52]||(e[52]=(...a)=>m.alignTextLeft&&m.alignTextLeft(...a))},e[107]||(e[107]=[B("svg",{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.8",stroke:"currentColor",class:"w-6 h-6"},[B("path",{d:"M3 3L3 21",stroke:"#323232","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),B("path",{d:"M7 10.32C7 7.58598 7.58598 7 10.32 7H13.68C16.414 7 17 7.58598 17 10.32V13.68C17 16.414 16.414 17 13.68 17H10.32C7.58598 17 7 16.414 7 13.68V10.32Z",stroke:"#323232","stroke-width":"2"})],-1)])),B("button",{"aria-label":"Align text to the center",onClick:e[53]||(e[53]=(...a)=>m.alignTextCenter&&m.alignTextCenter(...a))},e[108]||(e[108]=[B("svg",{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.8",stroke:"currentColor",class:"w-6 h-6"},[B("path",{d:"M3 3L3 21",stroke:"#323232","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),B("path",{d:"M21 3L21 21",stroke:"#323232","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),B("path",{d:"M7 10.32C7 7.58598 7.58598 7 10.32 7H13.68C16.414 7 17 7.58598 17 10.32V13.68C17 16.414 16.414 17 13.68 17H10.32C7.58598 17 7 16.414 7 13.68V10.32Z",stroke:"#323232","stroke-width":"2"})],-1)])),B("button",{"aria-label":"Align text to the top",onClick:e[54]||(e[54]=(...a)=>m.alignTextTop&&m.alignTextTop(...a))},e[109]||(e[109]=[B("svg",{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.8",stroke:"currentColor",class:"w-6 h-6"},[B("path",{d:"M21 3L3 3",stroke:"#323232","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),B("path",{d:"M7 10.32C7 7.58598 7.58598 7 10.32 7H13.68C16.414 7 17 7.58598 17 10.32V13.68C17 16.414 16.414 17 13.68 17H10.32C7.58598 17 7 16.414 7 13.68V10.32Z",stroke:"#323232","stroke-width":"2"})],-1)])),B("button",{"aria-label":"Align text to the bottom",onClick:e[55]||(e[55]=(...a)=>m.alignTextBottom&&m.alignTextBottom(...a))},e[110]||(e[110]=[B("svg",{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.8",stroke:"currentColor",class:"w-6 h-6"},[B("path",{d:"M3 21L21 21",stroke:"#323232","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),B("path",{d:"M7 10.32C7 7.58598 7.58598 7 10.32 7H13.68C16.414 7 17 7.58598 17 10.32V13.68C17 16.414 16.414 17 13.68 17H10.32C7.58598 17 7 16.414 7 13.68V10.32Z",stroke:"#323232","stroke-width":"2"})],-1)]))])])])),[[i]]):ge("",!0)])):ge("",!0),f.mobileMode===!1?(le(),ce("div",U1,[e[118]||(e[118]=B("div",{class:"block lg:hidden h-[10px]"},null,-1)),B("div",H1,[B("p",W1,de(f.dictionary.step_four),1),B("h1",V1,de(f.dictionary.step_four_title),1),B("p",X1,de(f.dictionary.step_four_description),1)]),B("div",Y1,[B("div",G1,[B("div",q1,[B("div",{onClick:e[56]||(e[56]=a=>m.setActiveTabText(1)),class:Ie(["w-full border-x-2 border-y-2  border-gray-100 p-2 text-sm  text-center inline-block align-middle bg-gray-100",{activeProductTab:f.activeTabText===1}])},de(f.dictionary.steper_text),3)]),f.activeTabText===1?(le(),ce("div",K1,[B("div",Z1,[B("div",J1,[B("span",Q1,de(f.dictionary.action_enter_text_decription),1),B("div",$1,[B("div",ey,[B("div",ty,[be(B("input",{type:"text","onUpdate:modelValue":e[57]||(e[57]=a=>f.inputText=a),onKeyup:e[58]||(e[58]=Go((...a)=>m.updateSelectedText&&m.updateSelectedText(...a),["enter"])),placeholder:f.dictionary.action_enter_text_decription,class:"w-full bg-transparent rounded-md border border-stroke dark:border-dark-3 py-[10px] pr-3 pl-12 text-dark-6 outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-gray-2"},null,40,iy),[[mn,f.inputText]]),e[111]||(e[111]=B("span",{class:"absolute top-1/2 left-4 -translate-y-1/2"},[B("svg",{width:"16px",height:"16px",viewBox:"0 0 24 24",fill:"none"},[B("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),B("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),B("g",{id:"SVGRepo_iconCarrier"},[B("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.93417 2C7.95604 2 7.97799 2 8 2L16.0658 2C16.9523 1.99995 17.7161 1.99991 18.3278 2.08215C18.9833 2.17028 19.6117 2.36902 20.1213 2.87868C20.631 3.38835 20.8297 4.0167 20.9179 4.67221C21.0001 5.28388 21.0001 6.0477 21 6.9342L21 7.95C21 8.50229 20.5523 8.95 20 8.95C19.4477 8.95 19 8.50229 19 7.95V7.00001C19 6.02893 18.9979 5.40122 18.9357 4.93871C18.8774 4.50497 18.7832 4.36902 18.7071 4.2929C18.631 4.21677 18.495 4.12263 18.0613 4.06431C17.5988 4.00213 16.9711 4 16 4H13V21C13 21.5523 12.5523 22 12 22C11.4477 22 11 21.5523 11 21V4H8C7.02893 4 6.40122 4.00213 5.93871 4.06431C5.50497 4.12263 5.36902 4.21677 5.2929 4.2929C5.21677 4.36902 5.12263 4.50497 5.06431 4.93871C5.00213 5.40122 5 6.02893 5 7.00001V7.95C5 8.50229 4.55229 8.95 4 8.95C3.44772 8.95 3 8.50229 3 7.95V7.00001C3 6.97799 3 6.95604 3 6.93418C2.99995 6.04769 2.99991 5.28387 3.08215 4.67221C3.17028 4.0167 3.36902 3.38835 3.87868 2.87868C4.38835 2.36902 5.0167 2.17028 5.67221 2.08215C6.28387 1.99991 7.04769 1.99995 7.93417 2Z",fill:"#1C274C"}),B("path",{d:"M7 21H17",stroke:"#1C274C","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])])],-1)),B("div",ny,[B("button",{"aria-label":"add text",onClick:e[59]||(e[59]=(...a)=>m.uploadText&&m.uploadText(...a)),class:"h-8 w-16 leading-6 text-white rounded-sm bg-main-color-bg hover:bg-main-color-bg/80"},de(f.dictionary.action_add_text),1)])])])])]),B("p",ry,de(f.dictionary.action_select_color),1),B("div",sy,[B("div",oy,[be(B("input",{"aria-label":"Select color",class:"m-1 relative w-[30px] h-[30px]",type:"color",id:"favcolor",name:"favcolor","onUpdate:modelValue":e[60]||(e[60]=a=>f.fontColor=a),onChange:e[61]||(e[61]=(...a)=>m.updateSelectedTextColor&&m.updateSelectedTextColor(...a))},null,544),[[mn,f.fontColor]])])]),B("div",ay,[B("p",ly,de(f.dictionary.action_font_allign_text),1),B("div",cy,[B("button",{"aria-label":"Align text to the left",onClick:e[62]||(e[62]=(...a)=>m.alignTextLeft&&m.alignTextLeft(...a))},e[112]||(e[112]=[B("svg",{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.8",stroke:"currentColor",class:"w-6 h-6"},[B("path",{d:"M3 3L3 21",stroke:"#323232","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),B("path",{d:"M7 10.32C7 7.58598 7.58598 7 10.32 7H13.68C16.414 7 17 7.58598 17 10.32V13.68C17 16.414 16.414 17 13.68 17H10.32C7.58598 17 7 16.414 7 13.68V10.32Z",stroke:"#323232","stroke-width":"2"})],-1)])),B("button",{"aria-label":"Align text to the center",onClick:e[63]||(e[63]=(...a)=>m.alignTextCenter&&m.alignTextCenter(...a))},e[113]||(e[113]=[B("svg",{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.8",stroke:"currentColor",class:"w-6 h-6"},[B("path",{d:"M3 3L3 21",stroke:"#323232","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),B("path",{d:"M21 3L21 21",stroke:"#323232","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),B("path",{d:"M7 10.32C7 7.58598 7.58598 7 10.32 7H13.68C16.414 7 17 7.58598 17 10.32V13.68C17 16.414 16.414 17 13.68 17H10.32C7.58598 17 7 16.414 7 13.68V10.32Z",stroke:"#323232","stroke-width":"2"})],-1)])),B("button",{"aria-label":"Align text to the top",onClick:e[64]||(e[64]=(...a)=>m.alignTextTop&&m.alignTextTop(...a))},e[114]||(e[114]=[B("svg",{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.8",stroke:"currentColor",class:"w-6 h-6"},[B("path",{d:"M21 3L3 3",stroke:"#323232","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),B("path",{d:"M7 10.32C7 7.58598 7.58598 7 10.32 7H13.68C16.414 7 17 7.58598 17 10.32V13.68C17 16.414 16.414 17 13.68 17H10.32C7.58598 17 7 16.414 7 13.68V10.32Z",stroke:"#323232","stroke-width":"2"})],-1)])),B("button",{"aria-label":"Align text to the bottom",onClick:e[65]||(e[65]=(...a)=>m.alignTextBottom&&m.alignTextBottom(...a))},e[115]||(e[115]=[B("svg",{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.8",stroke:"currentColor",class:"w-6 h-6"},[B("path",{d:"M3 21L21 21",stroke:"#323232","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),B("path",{d:"M7 10.32C7 7.58598 7.58598 7 10.32 7H13.68C16.414 7 17 7.58598 17 10.32V13.68C17 16.414 16.414 17 13.68 17H10.32C7.58598 17 7 16.414 7 13.68V10.32Z",stroke:"#323232","stroke-width":"2"})],-1)]))]),B("p",uy,de(f.dictionary.action_select_font_decription),1),B("ul",hy,[(le(!0),ce(Le,null,ct(f.fonts,(a,u)=>(le(),ce("li",{key:u,class:Ie([`font-${a.value} snap-center px-8 py-2 mx-4 w-[120px] text-nowrap cursor-pointer`,{"text-blue-400":f.selectedTextIndex===u,"font-semibold":f.selectedTextIndex===u}]),onClick:r=>{m.updateSelectedTextFont(a),m.updateSelectedTextIndex(u)}},de(a.text),11,fy))),128))])]),e[116]||(e[116]=B("div",{class:"relative w-[300px] h-[10px] flex flex-row items-center flex-wrap"},null,-1)),e[117]||(e[117]=B("div",{class:"mt-0 ml-[20%] px-2 py-2 text-white text-xl button-zoom bg-white/10 ring-slate-900/5"},null,-1))])])):ge("",!0)])])])):ge("",!0)])):ge("",!0)]),_:1},8,["name"]),Be(Ti,{name:f.mobileMode===!0?"slide-fade":"box-fade"},{default:ci(()=>[(f.mobileMode?f.showDialog&&f.activeTabIndex===5:f.activeTabIndex===5)?(le(),ce("div",dy,[f.mobileMode===!0?(le(),ce("div",py,[B("div",gy,[B("p",my,de(f.dictionary.step_five)+": "+de(f.dictionary.step_five_description),1)]),B("div",vy,[f.selectedType&&f.selectedCasePrice?(le(),ce("p",yy,de(f.dictionary.alert_box_cart_finish),1)):ge("",!0),B("div",by,[B("img",{src:this.printImage,alt:""},null,8,_y)]),f.selectedType&&f.selectedCasePrice?(le(),ce("p",xy,de(this.selectedModelTitle),1)):ge("",!0),f.selectedType&&f.selectedCasePrice?(le(),ce("p",Cy,de(this.selectedCaseTitle),1)):ge("",!0),f.selectedType&&f.selectedCasePrice?(le(),ce("p",wy,de(f.dictionary.price)+": ",1)):ge("",!0),f.selectedType&&f.selectedCasePrice?(le(),ce("p",Sy,[f.selectedType&&f.selectedCasePrice?(le(),ce("span",Ty,[Ze(de(parseFloat(f.selectedCasePrice).toFixed(2))+" ",1),B("span",Oy,de(f.dictionary.currency),1)])):ge("",!0)])):(le(),ce("p",ky,de(f.dictionary.alert_box_cart),1)),this.emptyCanvas===!0?(le(),ce("button",{key:6,"aria-label":"Add to cart",type:"button",class:"text-white bg-[#73d841] hover:bg-[#73d841]/90 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium text-sm mt-6 px-6 py-2 text-center inline-flex items-center me-2 dark:focus:ring-blue-800",onClick:e[66]||(e[66]=a=>m.exportPNG())},[e[119]||(e[119]=B("svg",{class:"w-3.5 h-3.5 me-2","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 18 21"},[B("path",{d:"M15 12a1 1 0 0 0 .962-.726l2-7A1 1 0 0 0 17 3H3.77L3.175.745A1 1 0 0 0 2.208 0H1a1 1 0 0 0 0 2h.438l.6 2.255v.019l2 7 .746 2.986A3 3 0 1 0 9 17a2.966 2.966 0 0 0-.184-1h2.368c-.118.32-.18.659-.184 1a3 3 0 1 0 3-3H6.78l-.5-2H15Z"})],-1)),Ze(" "+de(f.dictionary.action_checkout),1)])):ge("",!0)])])):ge("",!0),f.mobileMode===!1?(le(),ce("div",Ay,[B("div",Ey,[B("p",Py,de(f.dictionary.step_five),1),B("h1",Iy,de(f.dictionary.step_five_title),1)]),f.selectedType&&f.selectedCasePrice?(le(),ce("p",My,de(f.dictionary.alert_box_cart_full),1)):ge("",!0),B("div",Ry,[f.selectedType&&f.selectedCasePrice?(le(),ce("svg",Dy,e[120]||(e[120]=[B("path",{opacity:"0.4",d:"M19.24 5.58006H18.84L15.46 2.20006C15.19 1.93006 14.75 1.93006 14.47 2.20006C14.2 2.47006 14.2 2.91006 14.47 3.19006L16.86 5.58006H7.14L9.53 3.19006C9.8 2.92006 9.8 2.48006 9.53 2.20006C9.26 1.93006 8.82 1.93006 8.54 2.20006L5.17 5.58006H4.77C3.87 5.58006 2 5.58006 2 8.14006C2 9.11006 2.2 9.75006 2.62 10.1701C2.86 10.4201 3.15 10.5501 3.46 10.6201C3.75 10.6901 4.06 10.7001 4.36 10.7001H19.64C19.95 10.7001 20.24 10.6801 20.52 10.6201C21.36 10.4201 22 9.82006 22 8.14006C22 5.58006 20.13 5.58006 19.24 5.58006Z",fill:"#292D32"},null,-1),B("path",{d:"M19.6609 10.7001H4.36094C4.07094 10.7001 3.75094 10.6901 3.46094 10.6101L4.72094 18.3001C5.01094 20.0201 5.76094 22.0001 9.09094 22.0001H14.7009C18.0709 22.0001 18.6709 20.3101 19.0309 18.4201L20.5409 10.6101C20.2609 10.6801 19.9609 10.7001 19.6609 10.7001ZM14.8809 15.0501L11.6309 18.0501C11.4909 18.1801 11.3009 18.2501 11.1209 18.2501C10.9309 18.2501 10.7409 18.1801 10.5909 18.0301L9.09094 16.5301C8.80094 16.2401 8.80094 15.7601 9.09094 15.4701C9.38094 15.1801 9.86094 15.1801 10.1509 15.4701L11.1409 16.4601L13.8609 13.9501C14.1609 13.6701 14.6409 13.6901 14.9209 13.9901C15.2109 14.3001 15.1909 14.7701 14.8809 15.0501Z",fill:"#292D32"},null,-1)]))):(le(),ce("svg",Fy,e[121]||(e[121]=[B("defs",{id:"defs2"},null,-1),B("path",{opacity:"0.4",d:"m 17.24,3.5825 h -0.4 L 13.46,0.20249998 c -0.27,-0.27 -0.71,-0.27 -0.99,0 -0.27,0.27 -0.27,0.71 0,0.99000002 l 2.39,2.39 H 5.1400001 l 2.39,-2.39 c 0.27,-0.27000002 0.27,-0.71000002 0,-0.99000002 -0.27,-0.27 -0.71,-0.27 -0.99,0 l -3.37,3.38000002 h -0.4 c -0.9,0 -2.76999998079071,0 -2.76999998079071,2.56 0,0.97 0.20000000079071,1.61 0.62000000079071,2.03004 0.24,0.25 0.52999998,0.38 0.83999998,0.45 0.29,0.07 0.6,0.08 0.9,0.08 H 17.64 c 0.31,0 0.6,-0.02 0.88,-0.08 0.84,-0.2 1.48,-0.80004 1.48,-2.48004 0,-2.56 -1.87,-2.56 -2.76,-2.56 z",fill:"#292d32",id:"path1",style:{display:"inline"}},null,-1),B("path",{d:"M 17.6609,8.70254 H 2.3609401 c -0.29,0 -0.61,-0.01 -0.9,-0.09 l 1.26,7.69 c 0.29,1.72 1.04,3.7 4.37,3.7 H 12.7009 c 3.37,0 3.97,-1.69 4.33,-3.58 l 1.51,-7.81 c -0.28,0.07 -0.58,0.09 -0.88,0.09 z",fill:"#292d32",id:"path2",style:{display:"inline"},"sodipodi:nodetypes":"ssccssccs"},null,-1),B("rect",{style:{fill:"#f9f9f9","stroke-width":"0.0334252"},id:"rect2",width:"6.6733665",height:"1.4472374",x:"-5.2211137",y:"16.370911",ry:"0.69866574",transform:"rotate(-42.921289)"},null,-1),B("rect",{style:{fill:"#f9f9f9","stroke-width":"0.0334252"},id:"rect2-5",width:"6.6733665",height:"1.4472374",x:"13.488276",y:"2.4306953",ry:"0.69866574",transform:"rotate(42.88728)"},null,-1)]))),B("div",null,[f.selectedType&&f.selectedCasePrice?(le(),ce("p",Ly,de(this.selectedModelTitle),1)):ge("",!0),f.selectedType&&f.selectedCasePrice?(le(),ce("p",By,de(this.selectedCaseTitle),1)):ge("",!0),f.selectedType&&f.selectedCasePrice?(le(),ce("p",jy,de(f.dictionary.price),1)):(le(),ce("p",zy,de(f.dictionary.alert_box_cart),1)),f.selectedType&&f.selectedCasePrice?(le(),ce("p",Ny,[Ze(de(parseFloat(f.selectedCasePrice).toFixed(2))+" ",1),B("span",Uy,de(f.dictionary.currency),1)])):ge("",!0)]),this.emptyCanvas===!0?(le(),ce("button",{key:2,onClick:e[67]||(e[67]=a=>m.exportPNG()),"aria-label":"Add to cart",type:"button",class:"text-white bg-[#73d841] hover:bg-[#73d841]/90 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium text-sm px-5 py-2.5 text-center inline-flex items-center me-2 dark:focus:ring-blue-800"},[e[122]||(e[122]=B("svg",{class:"w-3.5 h-3.5 me-2","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 18 21"},[B("path",{d:"M15 12a1 1 0 0 0 .962-.726l2-7A1 1 0 0 0 17 3H3.77L3.175.745A1 1 0 0 0 2.208 0H1a1 1 0 0 0 0 2h.438l.6 2.255v.019l2 7 .746 2.986A3 3 0 1 0 9 17a2.966 2.966 0 0 0-.184-1h2.368c-.118.32-.18.659-.184 1a3 3 0 1 0 3-3H6.78l-.5-2H15Z"})],-1)),Ze(" "+de(f.dictionary.action_checkout),1)])):ge("",!0)])])):ge("",!0)])):ge("",!0)]),_:1},8,["name"])]),B("div",Hy,[B("div",Wy,[B("div",Vy,[B("div",Xy,[f.selectedBrandTitle?(le(),ce("p",Yy,de(f.selectedBrandTitle),1)):ge("",!0),f.selectedBrandTitle?(le(),ce("p",Gy," / ")):ge("",!0),f.selectedModelTitle?(le(),ce("p",qy,de(f.selectedModelTitle),1)):ge("",!0),f.selectedModelTitle?(le(),ce("p",Ky," / ")):ge("",!0),f.selectedCasePrice?(le(),ce("p",Zy,[Ze(de(f.selectedCasePrice)+" ",1),B("span",Jy,de(f.dictionary.currency),1)])):ge("",!0)])])]),B("div",Qy,[B("canvas",$y,null,512),B("input",{"aria-label":"upload",id:"uploadButton",type:"file",ref:"uploadButton",style:{display:"none"},onChange:e[68]||(e[68]=(...a)=>m.handleImageUpload&&m.handleImageUpload(...a))},null,544),be((le(),ce("div",eb,[B("button",{"aria-label":"Move left",onClick:e[69]||(e[69]=(...a)=>m.moveLeftSelectedImage&&m.moveLeftSelectedImage(...a))},e[123]||(e[123]=[ai('<svg width="32px" height="32px" viewBox="0 0 24 24" fill="none" data-v-6890ee25><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-6890ee25></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-6890ee25></g><g id="SVGRepo_iconCarrier" data-v-6890ee25><path opacity="0.1" d="M3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28596 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28596 22 4.92893 22 3.46447 20.5355Z" fill="#1C274C" data-v-6890ee25></path><path d="M16 11.25C16.4142 11.25 16.75 11.5858 16.75 12C16.75 12.4142 16.4142 12.75 16 12.75H9.81066L11.5303 14.4697C11.8232 14.7626 11.8232 15.2374 11.5303 15.5303C11.2374 15.8232 10.7626 15.8232 10.4697 15.5303L7.46967 12.5303C7.32902 12.3897 7.25 12.1989 7.25 12C7.25 11.8011 7.32902 11.6103 7.46967 11.4697L10.4697 8.46967C10.7626 8.17678 11.2374 8.17678 11.5303 8.46967C11.8232 8.76256 11.8232 9.23744 11.5303 9.53033L9.81066 11.25H16Z" fill="#1C274C" data-v-6890ee25></path></g></svg>',1)])),B("button",{"aria-label":"Zoom out",onClick:e[70]||(e[70]=(...a)=>m.moveRightSelectedImage&&m.moveRightSelectedImage(...a))},e[124]||(e[124]=[ai('<svg width="32px" height="32px" viewBox="0 0 24 24" fill="none" transform="matrix(1, 0, 0, -1, 0, 0)rotate(180)" data-v-6890ee25><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-6890ee25></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-6890ee25></g><g id="SVGRepo_iconCarrier" data-v-6890ee25><path opacity="0.1" d="M3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28596 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28596 22 4.92893 22 3.46447 20.5355Z" fill="#1C274C" data-v-6890ee25></path><path d="M16 11.25C16.4142 11.25 16.75 11.5858 16.75 12C16.75 12.4142 16.4142 12.75 16 12.75H9.81066L11.5303 14.4697C11.8232 14.7626 11.8232 15.2374 11.5303 15.5303C11.2374 15.8232 10.7626 15.8232 10.4697 15.5303L7.46967 12.5303C7.32902 12.3897 7.25 12.1989 7.25 12C7.25 11.8011 7.32902 11.6103 7.46967 11.4697L10.4697 8.46967C10.7626 8.17678 11.2374 8.17678 11.5303 8.46967C11.8232 8.76256 11.8232 9.23744 11.5303 9.53033L9.81066 11.25H16Z" fill="#1C274C" data-v-6890ee25></path></g></svg>',1)])),B("button",{"aria-label":"Move up",onClick:e[71]||(e[71]=(...a)=>m.moveUpSelectedImage&&m.moveUpSelectedImage(...a))},e[125]||(e[125]=[ai('<svg width="32px" height="32px" viewBox="0 0 24 24" fill="none" transform="matrix(1, 0, 0, -1, 0, 0)rotate(270)" data-v-6890ee25><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-6890ee25></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-6890ee25></g><g id="SVGRepo_iconCarrier" data-v-6890ee25><path opacity="0.1" d="M3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28596 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28596 22 4.92893 22 3.46447 20.5355Z" fill="#1C274C" data-v-6890ee25></path><path d="M16 11.25C16.4142 11.25 16.75 11.5858 16.75 12C16.75 12.4142 16.4142 12.75 16 12.75H9.81066L11.5303 14.4697C11.8232 14.7626 11.8232 15.2374 11.5303 15.5303C11.2374 15.8232 10.7626 15.8232 10.4697 15.5303L7.46967 12.5303C7.32902 12.3897 7.25 12.1989 7.25 12C7.25 11.8011 7.32902 11.6103 7.46967 11.4697L10.4697 8.46967C10.7626 8.17678 11.2374 8.17678 11.5303 8.46967C11.8232 8.76256 11.8232 9.23744 11.5303 9.53033L9.81066 11.25H16Z" fill="#1C274C" data-v-6890ee25></path></g></svg>',1)])),B("button",{"aria-label":"Move down",onClick:e[72]||(e[72]=(...a)=>m.moveDownSelectedImage&&m.moveDownSelectedImage(...a))},e[126]||(e[126]=[ai('<svg width="32px" height="32px" viewBox="0 0 24 24" fill="none" transform="matrix(1, 0, 0, -1, 0, 0)rotate(90)" data-v-6890ee25><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-6890ee25></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-6890ee25></g><g id="SVGRepo_iconCarrier" data-v-6890ee25><path opacity="0.1" d="M3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28596 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28596 22 4.92893 22 3.46447 20.5355Z" fill="#1C274C" data-v-6890ee25></path><path d="M16 11.25C16.4142 11.25 16.75 11.5858 16.75 12C16.75 12.4142 16.4142 12.75 16 12.75H9.81066L11.5303 14.4697C11.8232 14.7626 11.8232 15.2374 11.5303 15.5303C11.2374 15.8232 10.7626 15.8232 10.4697 15.5303L7.46967 12.5303C7.32902 12.3897 7.25 12.1989 7.25 12C7.25 11.8011 7.32902 11.6103 7.46967 11.4697L10.4697 8.46967C10.7626 8.17678 11.2374 8.17678 11.5303 8.46967C11.8232 8.76256 11.8232 9.23744 11.5303 9.53033L9.81066 11.25H16Z" fill="#1C274C" data-v-6890ee25></path></g></svg>',1)])),B("button",{"aria-label":"Zoom in",onClick:e[73]||(e[73]=(...a)=>m.zoomInSelectedImage&&m.zoomInSelectedImage(...a))},e[127]||(e[127]=[B("svg",{width:"32px",height:"32px",viewBox:"-4 -4 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[B("g",{id:"SVGRepo_bgCarrier","stroke-width":"0",transform:"translate(0,0), scale(1)"},[B("rect",{x:"-4",y:"-4",width:"30",height:"30",rx:"8.64",fill:"#dee0e6",strokewidth:"0"})]),B("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round",stroke:"#CCCCCC","stroke-width":"0.288"}),B("g",{id:"SVGRepo_iconCarrier"},[B("path",{opacity:"0.15",d:"M10 17C13.866 17 17 13.866 17 10C17 6.13401 13.866 3 10 3C6.13401 3 3 6.13401 3 10C3 13.866 6.13401 17 10 17Z",fill:"#1c284d"}),Ze(),B("path",{d:"M20 20L14.9497 14.9497M14.9497 14.9497C16.2165 13.683 17 11.933 17 10C17 6.13401 13.866 3 10 3C6.13401 3 3 6.13401 3 10C3 13.866 6.13401 17 10 17C11.933 17 13.683 16.2165 14.9497 14.9497ZM7 10H13M10 7V13",stroke:"#1c284d","stroke-width":"1.6799999999999997","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)])),B("button",{"aria-label":"Zoom out",onClick:e[74]||(e[74]=(...a)=>m.zoomOutSelectedImage&&m.zoomOutSelectedImage(...a))},e[128]||(e[128]=[B("svg",{width:"32px",height:"32px",viewBox:"-4 -4 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[B("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"},[B("rect",{x:"-4",y:"-4",width:"30",height:"32",rx:"8.64",fill:"#dfe0e6",strokewidth:"0"})]),B("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),B("g",{id:"SVGRepo_iconCarrier"},[B("path",{opacity:"0.15",d:"M10 17C13.866 17 17 13.866 17 10C17 6.13401 13.866 3 10 3C6.13401 3 3 6.13401 3 10C3 13.866 6.13401 17 10 17Z",fill:"#1c284d"}),Ze(),B("path",{d:"M20 20L14.9497 14.9498M14.9497 14.9498C16.2165 13.683 17 11.933 17 10C17 6.13401 13.866 3 10 3C6.13401 3 3 6.13401 3 10C3 13.866 6.13401 17 10 17C11.933 17 13.683 16.2165 14.9497 14.9498ZM7 10H13",stroke:"#1c284d","stroke-width":"1.6799999999999997","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)])),B("button",{"aria-label":"Rotate right",onClick:e[75]||(e[75]=(...a)=>m.rotateRightBy15&&m.rotateRightBy15(...a))},e[129]||(e[129]=[ai('<svg width="32px" height="32px" viewBox="0 0 24 24" fill="none" data-v-6890ee25><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-6890ee25></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-6890ee25></g><g id="SVGRepo_iconCarrier" data-v-6890ee25><path opacity="0.1" d="M2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12Z" fill="#1C274C" data-v-6890ee25></path><path d="M16.4017 6.28616C16.4017 5.98121 16.217 5.70662 15.9346 5.59158C15.6522 5.47653 15.3283 5.54393 15.1152 5.76208L14.3647 6.53037C12.244 5.55465 9.66551 5.95905 7.92796 7.7378C5.69068 10.0281 5.69068 13.7344 7.92796 16.0247C10.1748 18.3248 13.8252 18.3248 16.072 16.0247C17.3754 14.6904 17.9168 12.8779 17.7055 11.1507C17.6552 10.7396 17.2812 10.447 16.87 10.4973C16.4589 10.5476 16.1663 10.9217 16.2166 11.3328C16.3757 12.6335 15.9667 13.9859 14.999 14.9765C13.3407 16.6742 10.6593 16.6742 9.00097 14.9765C7.33301 13.269 7.33301 10.4935 9.00097 8.78596C10.1467 7.61303 11.7795 7.25143 13.225 7.69705L12.4635 8.47659C12.2527 8.69245 12.1917 9.01364 12.3088 9.29174C12.4259 9.56984 12.6983 9.75067 13 9.75067H15.6517C16.0659 9.75067 16.4017 9.41489 16.4017 9.00067V6.28616Z" fill="#1C274C" data-v-6890ee25></path></g></svg>',1)])),B("button",{"aria-label":"Rotate left",onClick:e[76]||(e[76]=(...a)=>m.rotateLeftBy15&&m.rotateLeftBy15(...a))},e[130]||(e[130]=[ai('<svg width="32px" height="32px" viewBox="0 0 24 24" fill="none" transform="rotate(0)matrix(-1, 0, 0, 1, 0, 0)" data-v-6890ee25><g id="SVGRepo_bgCarrier" stroke-width="0" data-v-6890ee25></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" data-v-6890ee25></g><g id="SVGRepo_iconCarrier" data-v-6890ee25><path opacity="0.1" d="M2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12Z" fill="#1C274C" data-v-6890ee25></path><path d="M16.4017 6.28616C16.4017 5.98121 16.217 5.70662 15.9346 5.59158C15.6522 5.47653 15.3283 5.54393 15.1152 5.76208L14.3647 6.53037C12.244 5.55465 9.66551 5.95905 7.92796 7.7378C5.69068 10.0281 5.69068 13.7344 7.92796 16.0247C10.1748 18.3248 13.8252 18.3248 16.072 16.0247C17.3754 14.6904 17.9168 12.8779 17.7055 11.1507C17.6552 10.7396 17.2812 10.447 16.87 10.4973C16.4589 10.5476 16.1663 10.9217 16.2166 11.3328C16.3757 12.6335 15.9667 13.9859 14.999 14.9765C13.3407 16.6742 10.6593 16.6742 9.00097 14.9765C7.33301 13.269 7.33301 10.4935 9.00097 8.78596C10.1467 7.61303 11.7795 7.25143 13.225 7.69705L12.4635 8.47659C12.2527 8.69245 12.1917 9.01364 12.3088 9.29174C12.4259 9.56984 12.6983 9.75067 13 9.75067H15.6517C16.0659 9.75067 16.4017 9.41489 16.4017 9.00067V6.28616Z" fill="#1C274C" data-v-6890ee25></path></g></svg>',1)]))])),[[h]]),B("div",tb,[(le(!0),ce(Le,null,ct(f.uploadedText,(a,u)=>(le(),ce("div",{class:"hidden relative w-fit h-fit border-[2px] z-20 rounded-md border-slate-600",onClick:r=>m.addTextCanvas(u),key:a.id},[B("p",nb,de(a.text),1)],8,ib))),128))])])])])}const sb=Gc(hm,[["render",rb],["__scopeId","data-v-6890ee25"]]);const ob={__name:"HomeView",setup(t){return(e,s)=>(le(),ce("main",null,[Be(sb)]))}},ab={};function lb(t,e){return null}const cb=Gc(ab,[["render",lb]]),ub={__name:"ApiView",setup(t){return(e,s)=>(le(),ce("main",null,[Be(cb)]))}},hb=vp({history:Dd("/"),routes:[{path:"/",name:"home",component:ob},{path:"/api",name:"api",component:ub}]});function jr(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function ps(t,e,s=".",d){if(!jr(e))return ps(t,{},s,d);const f=Object.assign({},e);for(const m in t){if(m==="__proto__"||m==="constructor")continue;const y=t[m];y!=null&&(d&&d(f,m,y,s)||(Array.isArray(y)&&Array.isArray(f[m])?f[m]=[...y,...f[m]]:jr(y)&&jr(f[m])?f[m]=ps(y,f[m],(s?`${s}.`:"")+m.toString(),d):f[m]=y))}return f}function fb(t){return(...e)=>e.reduce((s,d)=>ps(s,d,"",t),{})}const db=fb();function Zc(t){return rl()?(ih(t),!0):!1}function Js(t){return typeof t=="function"?t():it(t)}const pb=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const gb=t=>t!=null,mb=Object.prototype.toString,Vn=t=>mb.call(t)==="[object Object]",En=()=>{};function vb(t){return t||rr()}function yb(t,e){vb(e)&&js(t,e)}function zi(t){var e;const s=Js(t);return(e=s==null?void 0:s.$el)!=null?e:s}const Jc=pb?window:void 0;function ft(...t){let e,s,d,f;if(typeof t[0]=="string"||Array.isArray(t[0])?([s,d,f]=t,e=Jc):[e,s,d,f]=t,!e)return En;Array.isArray(s)||(s=[s]),Array.isArray(d)||(d=[d]);const m=[],y=()=>{m.forEach(u=>u()),m.length=0},h=(u,r,o,n)=>(u.addEventListener(r,o,n),()=>u.removeEventListener(r,o,n)),i=qe(()=>[zi(e),Js(f)],([u,r])=>{if(y(),!u)return;const o=Vn(r)?{...r}:r;m.push(...s.flatMap(n=>d.map(c=>h(u,n,c,o))))},{immediate:!0,flush:"post"}),a=()=>{i(),y()};return Zc(a),a}function bb(){const t=tt(!1);return rr()&&Bs(()=>{t.value=!0}),t}function _b(t){const e=bb();return ze(()=>(e.value,!!t()))}function xb(t,e,s={}){const{root:d,rootMargin:f="0px",threshold:m=.1,window:y=Jc,immediate:h=!0}=s,i=_b(()=>y&&"IntersectionObserver"in y),a=ze(()=>{const c=Js(t);return(Array.isArray(c)?c:[c]).map(zi).filter(gb)});let u=En;const r=tt(h),o=i.value?qe(()=>[a.value,zi(d),r.value],([c,p])=>{if(u(),!r.value||!c.length)return;const l=new IntersectionObserver(e,{root:zi(p),rootMargin:f,threshold:m});c.forEach(g=>g&&l.observe(g)),u=()=>{l.disconnect(),u=En}},{immediate:h,flush:"post"}):En,n=()=>{u(),o(),r.value=!1};return Zc(n),{isSupported:i,isActive:r,pause(){u(),r.value=!1},resume(){r.value=!0},stop:n}}const Qc=1/60*1e3,Cb=typeof performance<"u"?()=>performance.now():()=>Date.now(),$c=typeof window<"u"?t=>window.requestAnimationFrame(t):t=>setTimeout(()=>t(Cb()),Qc);function wb(t){let e=[],s=[],d=0,f=!1,m=!1;const y=new WeakSet,h={schedule:(i,a=!1,u=!1)=>{const r=u&&f,o=r?e:s;return a&&y.add(i),o.indexOf(i)===-1&&(o.push(i),r&&f&&(d=e.length)),i},cancel:i=>{const a=s.indexOf(i);a!==-1&&s.splice(a,1),y.delete(i)},process:i=>{if(f){m=!0;return}if(f=!0,[e,s]=[s,e],s.length=0,d=e.length,d)for(let a=0;a<d;a++){const u=e[a];u(i),y.has(u)&&(h.schedule(u),t())}f=!1,m&&(m=!1,h.process(i))}};return h}const Sb=40;let gs=!0,$i=!1,ms=!1;const vi={delta:0,timestamp:0},on=["read","update","preRender","render","postRender"],pr=on.reduce((t,e)=>(t[e]=wb(()=>$i=!0),t),{}),vs=on.reduce((t,e)=>{const s=pr[e];return t[e]=(d,f=!1,m=!1)=>($i||kb(),s.schedule(d,f,m)),t},{}),Tb=on.reduce((t,e)=>(t[e]=pr[e].cancel,t),{});on.reduce((t,e)=>(t[e]=()=>pr[e].process(vi),t),{});const Ob=t=>pr[t].process(vi),eu=t=>{$i=!1,vi.delta=gs?Qc:Math.max(Math.min(t-vi.timestamp,Sb),1),vi.timestamp=t,ms=!0,on.forEach(Ob),ms=!1,$i&&(gs=!1,$c(eu))},kb=()=>{$i=!0,gs=!0,ms||$c(eu)},tu=()=>vi;function iu(t,e){var s={};for(var d in t)Object.prototype.hasOwnProperty.call(t,d)&&e.indexOf(d)<0&&(s[d]=t[d]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,d=Object.getOwnPropertySymbols(t);f<d.length;f++)e.indexOf(d[f])<0&&Object.prototype.propertyIsEnumerable.call(t,d[f])&&(s[d[f]]=t[d[f]]);return s}var Ab=function(){},Ba=function(){};const ys=(t,e,s)=>Math.min(Math.max(s,t),e),zr=.001,Eb=.01,ja=10,Pb=.05,Ib=1;function Mb({duration:t=800,bounce:e=.25,velocity:s=0,mass:d=1}){let f,m;Ab(t<=ja*1e3);let y=1-e;y=ys(Pb,Ib,y),t=ys(Eb,ja,t/1e3),y<1?(f=a=>{const u=a*y,r=u*t,o=u-s,n=bs(a,y),c=Math.exp(-r);return zr-o/n*c},m=a=>{const r=a*y*t,o=r*s+s,n=Math.pow(y,2)*Math.pow(a,2)*t,c=Math.exp(-r),p=bs(Math.pow(a,2),y);return(-f(a)+zr>0?-1:1)*((o-n)*c)/p}):(f=a=>{const u=Math.exp(-a*t),r=(a-s)*t+1;return-zr+u*r},m=a=>{const u=Math.exp(-a*t),r=(s-a)*(t*t);return u*r});const h=5/t,i=Db(f,m,h);if(t=t*1e3,isNaN(i))return{stiffness:100,damping:10,duration:t};{const a=Math.pow(i,2)*d;return{stiffness:a,damping:y*2*Math.sqrt(d*a),duration:t}}}const Rb=12;function Db(t,e,s){let d=s;for(let f=1;f<Rb;f++)d=d-t(d)/e(d);return d}function bs(t,e){return t*Math.sqrt(1-e*e)}const Fb=["duration","bounce"],Lb=["stiffness","damping","mass"];function za(t,e){return e.some(s=>t[s]!==void 0)}function Bb(t){let e=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},t);if(!za(t,Lb)&&za(t,Fb)){const s=Mb(t);e=Object.assign(Object.assign(Object.assign({},e),s),{velocity:0,mass:1}),e.isResolvedFromDuration=!0}return e}function Qs(t){var{from:e=0,to:s=1,restSpeed:d=2,restDelta:f}=t,m=iu(t,["from","to","restSpeed","restDelta"]);const y={done:!1,value:e};let{stiffness:h,damping:i,mass:a,velocity:u,duration:r,isResolvedFromDuration:o}=Bb(m),n=Na,c=Na;function p(){const l=u?-(u/1e3):0,g=s-e,v=i/(2*Math.sqrt(h*a)),b=Math.sqrt(h/a)/1e3;if(f===void 0&&(f=Math.min(Math.abs(s-e)/100,.4)),v<1){const _=bs(b,v);n=C=>{const w=Math.exp(-v*b*C);return s-w*((l+v*b*g)/_*Math.sin(_*C)+g*Math.cos(_*C))},c=C=>{const w=Math.exp(-v*b*C);return v*b*w*(Math.sin(_*C)*(l+v*b*g)/_+g*Math.cos(_*C))-w*(Math.cos(_*C)*(l+v*b*g)-_*g*Math.sin(_*C))}}else if(v===1)n=_=>s-Math.exp(-b*_)*(g+(l+b*g)*_);else{const _=b*Math.sqrt(v*v-1);n=C=>{const w=Math.exp(-v*b*C),k=Math.min(_*C,300);return s-w*((l+v*b*g)*Math.sinh(k)+_*g*Math.cosh(k))/_}}}return p(),{next:l=>{const g=n(l);if(o)y.done=l>=r;else{const v=c(l)*1e3,b=Math.abs(v)<=d,_=Math.abs(s-g)<=f;y.done=b&&_}return y.value=y.done?s:g,y},flipTarget:()=>{u=-u,[e,s]=[s,e],p()}}}Qs.needsInterpolation=(t,e)=>typeof t=="string"||typeof e=="string";const Na=t=>0,nu=(t,e,s)=>{const d=e-t;return d===0?1:(s-t)/d},$s=(t,e,s)=>-s*t+s*e+t,ru=(t,e)=>s=>Math.max(Math.min(s,e),t),Ni=t=>t%1?Number(t.toFixed(5)):t,en=/(-)?([\d]*\.?[\d])+/g,_s=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,jb=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function an(t){return typeof t=="string"}const ln={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ui=Object.assign(Object.assign({},ln),{transform:ru(0,1)}),yn=Object.assign(Object.assign({},ln),{default:1}),eo=t=>({test:e=>an(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Qt=eo("deg"),Hi=eo("%"),we=eo("px"),Ua=Object.assign(Object.assign({},Hi),{parse:t=>Hi.parse(t)/100,transform:t=>Hi.transform(t*100)}),to=(t,e)=>s=>!!(an(s)&&jb.test(s)&&s.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(s,e)),su=(t,e,s)=>d=>{if(!an(d))return d;const[f,m,y,h]=d.match(en);return{[t]:parseFloat(f),[e]:parseFloat(m),[s]:parseFloat(y),alpha:h!==void 0?parseFloat(h):1}},ni={test:to("hsl","hue"),parse:su("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:d=1})=>"hsla("+Math.round(t)+", "+Hi.transform(Ni(e))+", "+Hi.transform(Ni(s))+", "+Ni(Ui.transform(d))+")"},zb=ru(0,255),Nr=Object.assign(Object.assign({},ln),{transform:t=>Math.round(zb(t))}),Ut={test:to("rgb","red"),parse:su("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:d=1})=>"rgba("+Nr.transform(t)+", "+Nr.transform(e)+", "+Nr.transform(s)+", "+Ni(Ui.transform(d))+")"};function Nb(t){let e="",s="",d="",f="";return t.length>5?(e=t.substr(1,2),s=t.substr(3,2),d=t.substr(5,2),f=t.substr(7,2)):(e=t.substr(1,1),s=t.substr(2,1),d=t.substr(3,1),f=t.substr(4,1),e+=e,s+=s,d+=d,f+=f),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(d,16),alpha:f?parseInt(f,16)/255:1}}const xs={test:to("#"),parse:Nb,transform:Ut.transform},$e={test:t=>Ut.test(t)||xs.test(t)||ni.test(t),parse:t=>Ut.test(t)?Ut.parse(t):ni.test(t)?ni.parse(t):xs.parse(t),transform:t=>an(t)?t:t.hasOwnProperty("red")?Ut.transform(t):ni.transform(t)},ou="${c}",au="${n}";function Ub(t){var e,s,d,f;return isNaN(t)&&an(t)&&((s=(e=t.match(en))===null||e===void 0?void 0:e.length)!==null&&s!==void 0?s:0)+((f=(d=t.match(_s))===null||d===void 0?void 0:d.length)!==null&&f!==void 0?f:0)>0}function lu(t){typeof t=="number"&&(t=`${t}`);const e=[];let s=0;const d=t.match(_s);d&&(s=d.length,t=t.replace(_s,ou),e.push(...d.map($e.parse)));const f=t.match(en);return f&&(t=t.replace(en,au),e.push(...f.map(ln.parse))),{values:e,numColors:s,tokenised:t}}function cu(t){return lu(t).values}function uu(t){const{values:e,numColors:s,tokenised:d}=lu(t),f=e.length;return m=>{let y=d;for(let h=0;h<f;h++)y=y.replace(h<s?ou:au,h<s?$e.transform(m[h]):Ni(m[h]));return y}}const Hb=t=>typeof t=="number"?0:t;function Wb(t){const e=cu(t);return uu(t)(e.map(Hb))}const cn={test:Ub,parse:cu,createTransformer:uu,getAnimatableNone:Wb},Vb=new Set(["brightness","contrast","saturate","opacity"]);function Xb(t){let[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[d]=s.match(en)||[];if(!d)return t;const f=s.replace(d,"");let m=Vb.has(e)?1:0;return d!==s&&(m*=100),e+"("+m+f+")"}const Yb=/([a-z-]*)\(.*?\)/g,Cs=Object.assign(Object.assign({},cn),{getAnimatableNone:t=>{const e=t.match(Yb);return e?e.map(Xb).join(" "):t}});function Ur(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function Ha({hue:t,saturation:e,lightness:s,alpha:d}){t/=360,e/=100,s/=100;let f=0,m=0,y=0;if(!e)f=m=y=s;else{const h=s<.5?s*(1+e):s+e-s*e,i=2*s-h;f=Ur(i,h,t+1/3),m=Ur(i,h,t),y=Ur(i,h,t-1/3)}return{red:Math.round(f*255),green:Math.round(m*255),blue:Math.round(y*255),alpha:d}}const Gb=(t,e,s)=>{const d=t*t,f=e*e;return Math.sqrt(Math.max(0,s*(f-d)+d))},qb=[xs,Ut,ni],Wa=t=>qb.find(e=>e.test(t)),hu=(t,e)=>{let s=Wa(t),d=Wa(e),f=s.parse(t),m=d.parse(e);s===ni&&(f=Ha(f),s=Ut),d===ni&&(m=Ha(m),d=Ut);const y=Object.assign({},f);return h=>{for(const i in y)i!=="alpha"&&(y[i]=Gb(f[i],m[i],h));return y.alpha=$s(f.alpha,m.alpha,h),s.transform(y)}},Kb=t=>typeof t=="number",Zb=(t,e)=>s=>e(t(s)),fu=(...t)=>t.reduce(Zb);function du(t,e){return Kb(t)?s=>$s(t,e,s):$e.test(t)?hu(t,e):gu(t,e)}const pu=(t,e)=>{const s=[...t],d=s.length,f=t.map((m,y)=>du(m,e[y]));return m=>{for(let y=0;y<d;y++)s[y]=f[y](m);return s}},Jb=(t,e)=>{const s=Object.assign(Object.assign({},t),e),d={};for(const f in s)t[f]!==void 0&&e[f]!==void 0&&(d[f]=du(t[f],e[f]));return f=>{for(const m in d)s[m]=d[m](f);return s}};function Va(t){const e=cn.parse(t),s=e.length;let d=0,f=0,m=0;for(let y=0;y<s;y++)d||typeof e[y]=="number"?d++:e[y].hue!==void 0?m++:f++;return{parsed:e,numNumbers:d,numRGB:f,numHSL:m}}const gu=(t,e)=>{const s=cn.createTransformer(e),d=Va(t),f=Va(e);return d.numHSL===f.numHSL&&d.numRGB===f.numRGB&&d.numNumbers>=f.numNumbers?fu(pu(d.parsed,f.parsed),s):y=>`${y>0?e:t}`},Qb=(t,e)=>s=>$s(t,e,s);function $b(t){if(typeof t=="number")return Qb;if(typeof t=="string")return $e.test(t)?hu:gu;if(Array.isArray(t))return pu;if(typeof t=="object")return Jb}function e_(t,e,s){const d=[],f=s||$b(t[0]),m=t.length-1;for(let y=0;y<m;y++){let h=f(t[y],t[y+1]);if(e){const i=Array.isArray(e)?e[y]:e;h=fu(i,h)}d.push(h)}return d}function t_([t,e],[s]){return d=>s(nu(t,e,d))}function i_(t,e){const s=t.length,d=s-1;return f=>{let m=0,y=!1;if(f<=t[0]?y=!0:f>=t[d]&&(m=d-1,y=!0),!y){let i=1;for(;i<s&&!(t[i]>f||i===d);i++);m=i-1}const h=nu(t[m],t[m+1],f);return e[m](h)}}function mu(t,e,{clamp:s=!0,ease:d,mixer:f}={}){const m=t.length;Ba(m===e.length),Ba(!d||!Array.isArray(d)||d.length===m-1),t[0]>t[m-1]&&(t=[].concat(t),e=[].concat(e),t.reverse(),e.reverse());const y=e_(e,d,f),h=m===2?t_(t,y):i_(t,y);return s?i=>h(ys(t[0],t[m-1],i)):h}const gr=t=>e=>1-t(1-e),io=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,n_=t=>e=>Math.pow(e,t),vu=t=>e=>e*e*((t+1)*e-t),r_=t=>{const e=vu(t);return s=>(s*=2)<1?.5*e(s):.5*(2-Math.pow(2,-10*(s-1)))},yu=1.525,s_=4/11,o_=8/11,a_=9/10,bu=t=>t,no=n_(2),l_=gr(no),_u=io(no),xu=t=>1-Math.sin(Math.acos(t)),Cu=gr(xu),c_=io(Cu),ro=vu(yu),u_=gr(ro),h_=io(ro),f_=r_(yu),d_=4356/361,p_=35442/1805,g_=16061/1805,Xn=t=>{if(t===1||t===0)return t;const e=t*t;return t<s_?7.5625*e:t<o_?9.075*e-9.9*t+3.4:t<a_?d_*e-p_*t+g_:10.8*t*t-20.52*t+10.72},m_=gr(Xn),v_=t=>t<.5?.5*(1-Xn(1-t*2)):.5*Xn(t*2-1)+.5;function y_(t,e){return t.map(()=>e||_u).splice(0,t.length-1)}function b_(t){const e=t.length;return t.map((s,d)=>d!==0?d/(e-1):0)}function __(t,e){return t.map(s=>s*e)}function Pn({from:t=0,to:e=1,ease:s,offset:d,duration:f=300}){const m={done:!1,value:t},y=Array.isArray(e)?e:[t,e],h=__(d&&d.length===y.length?d:b_(y),f);function i(){return mu(h,y,{ease:Array.isArray(s)?s:y_(y,s)})}let a=i();return{next:u=>(m.value=a(u),m.done=u>=f,m),flipTarget:()=>{y.reverse(),a=i()}}}function x_({velocity:t=0,from:e=0,power:s=.8,timeConstant:d=350,restDelta:f=.5,modifyTarget:m}){const y={done:!1,value:e};let h=s*t;const i=e+h,a=m===void 0?i:m(i);return a!==i&&(h=a-e),{next:u=>{const r=-h*Math.exp(-u/d);return y.done=!(r>f||r<-f),y.value=y.done?a:a+r,y},flipTarget:()=>{}}}const Xa={keyframes:Pn,spring:Qs,decay:x_};function C_(t){if(Array.isArray(t.to))return Pn;if(Xa[t.type])return Xa[t.type];const e=new Set(Object.keys(t));return e.has("ease")||e.has("duration")&&!e.has("dampingRatio")?Pn:e.has("dampingRatio")||e.has("stiffness")||e.has("mass")||e.has("damping")||e.has("restSpeed")||e.has("restDelta")?Qs:Pn}function wu(t,e,s=0){return t-e-s}function w_(t,e,s=0,d=!0){return d?wu(e+-t,e,s):e-(t-e)+s}function S_(t,e,s,d){return d?t>=e+s:t<=-s}const T_=t=>{const e=({delta:s})=>t(s);return{start:()=>vs.update(e,!0),stop:()=>Tb.update(e)}};function Su(t){var e,s,{from:d,autoplay:f=!0,driver:m=T_,elapsed:y=0,repeat:h=0,repeatType:i="loop",repeatDelay:a=0,onPlay:u,onStop:r,onComplete:o,onRepeat:n,onUpdate:c}=t,p=iu(t,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]);let{to:l}=p,g,v=0,b=p.duration,_,C=!1,w=!0,k;const z=C_(p);!((s=(e=z).needsInterpolation)===null||s===void 0)&&s.call(e,d,l)&&(k=mu([0,100],[d,l],{clamp:!1}),d=0,l=100);const N=z(Object.assign(Object.assign({},p),{from:d,to:l}));function X(){v++,i==="reverse"?(w=v%2===0,y=w_(y,b,a,w)):(y=wu(y,b,a),i==="mirror"&&N.flipTarget()),C=!1,n&&n()}function re(){g.stop(),o&&o()}function F(T){if(w||(T=-T),y+=T,!C){const J=N.next(Math.max(0,y));_=J.value,k&&(_=k(_)),C=w?J.done:y<=0}c==null||c(_),C&&(v===0&&(b??(b=y)),v<h?S_(y,b,a,w)&&X():re())}function K(){u==null||u(),g=m(F),g.start()}return f&&K(),{stop:()=>{r==null||r(),g.stop()}}}function Tu(t,e){return e?t*(1e3/e):0}function O_({from:t=0,velocity:e=0,min:s,max:d,power:f=.8,timeConstant:m=750,bounceStiffness:y=500,bounceDamping:h=10,restDelta:i=1,modifyTarget:a,driver:u,onUpdate:r,onComplete:o,onStop:n}){let c;function p(b){return s!==void 0&&b<s||d!==void 0&&b>d}function l(b){return s===void 0?d:d===void 0||Math.abs(s-b)<Math.abs(d-b)?s:d}function g(b){c==null||c.stop(),c=Su(Object.assign(Object.assign({},b),{driver:u,onUpdate:_=>{var C;r==null||r(_),(C=b.onUpdate)===null||C===void 0||C.call(b,_)},onComplete:o,onStop:n}))}function v(b){g(Object.assign({type:"spring",stiffness:y,damping:h,restDelta:i},b))}if(p(t))v({from:t,velocity:e,to:l(t)});else{let b=f*e+t;typeof a<"u"&&(b=a(b));const _=l(b),C=_===s?-1:1;let w,k;const z=N=>{w=k,k=N,e=Tu(N-w,tu().delta),(C===1&&N>_||C===-1&&N<_)&&v({from:N,to:_,velocity:e})};g({type:"decay",from:t,velocity:e,timeConstant:m,power:f,restDelta:i,modifyTarget:a,onUpdate:p(b)?z:void 0})}return{stop:()=>c==null?void 0:c.stop()}}const Ou=(t,e)=>1-3*e+3*t,ku=(t,e)=>3*e-6*t,Au=t=>3*t,Yn=(t,e,s)=>((Ou(e,s)*t+ku(e,s))*t+Au(e))*t,Eu=(t,e,s)=>3*Ou(e,s)*t*t+2*ku(e,s)*t+Au(e),k_=1e-7,A_=10;function E_(t,e,s,d,f){let m,y,h=0;do y=e+(s-e)/2,m=Yn(y,d,f)-t,m>0?s=y:e=y;while(Math.abs(m)>k_&&++h<A_);return y}const P_=8,I_=.001;function M_(t,e,s,d){for(let f=0;f<P_;++f){const m=Eu(e,s,d);if(m===0)return e;const y=Yn(e,s,d)-t;e-=y/m}return e}const In=11,bn=1/(In-1);function R_(t,e,s,d){if(t===e&&s===d)return bu;const f=new Float32Array(In);for(let y=0;y<In;++y)f[y]=Yn(y*bn,t,s);function m(y){let h=0,i=1;const a=In-1;for(;i!==a&&f[i]<=y;++i)h+=bn;--i;const u=(y-f[i])/(f[i+1]-f[i]),r=h+u*bn,o=Eu(r,t,s);return o>=I_?M_(y,r,t,s):o===0?r:E_(y,h,h+bn,t,s)}return y=>y===0||y===1?y:Yn(m(y),e,d)}const Hr={};class D_{constructor(){this.subscriptions=new Set}add(e){return this.subscriptions.add(e),()=>this.subscriptions.delete(e)}notify(e,s,d){if(this.subscriptions.size)for(const f of this.subscriptions)f(e,s,d)}clear(){this.subscriptions.clear()}}function Ya(t){return!isNaN(parseFloat(t))}class F_{constructor(e){this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new D_,this.canTrackVelocity=!1,this.updateAndNotify=s=>{this.prev=this.current,this.current=s;const{delta:d,timestamp:f}=tu();this.lastUpdated!==f&&(this.timeDelta=d,this.lastUpdated=f),vs.postRender(this.scheduleVelocityCheck),this.updateSubscribers.notify(this.current)},this.scheduleVelocityCheck=()=>vs.postRender(this.velocityCheck),this.velocityCheck=({timestamp:s})=>{this.canTrackVelocity||(this.canTrackVelocity=Ya(this.current)),s!==this.lastUpdated&&(this.prev=this.current)},this.prev=this.current=e,this.canTrackVelocity=Ya(this.current)}onChange(e){return this.updateSubscribers.add(e)}clearListeners(){this.updateSubscribers.clear()}set(e){this.updateAndNotify(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Tu(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(s=>{const{stop:d}=e(s);this.stopAnimation=d}).then(()=>this.clearAnimation())}stop(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()}isAnimating(){return!!this.stopAnimation}clearAnimation(){this.stopAnimation=null}destroy(){this.updateSubscribers.clear(),this.stop()}}function L_(t){return new F_(t)}const{isArray:B_}=Array;function j_(){const t=tt({}),e=d=>{const f=m=>{t.value[m]&&(t.value[m].stop(),t.value[m].destroy(),delete t.value[m])};d?B_(d)?d.forEach(f):f(d):Object.keys(t.value).forEach(f)},s=(d,f,m)=>{if(t.value[d])return t.value[d];const y=L_(f);return y.onChange(h=>m[d]=h),t.value[d]=y,y};return yb(e),{motionValues:t,get:s,stop:e}}function z_(t){return Array.isArray(t)}function $t(){return{type:"spring",stiffness:500,damping:25,restDelta:.5,restSpeed:10}}function Wr(t){return{type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restDelta:.01,restSpeed:10}}function N_(t){return{type:"spring",stiffness:550,damping:t===0?100:30,restDelta:.01,restSpeed:10}}function Vr(){return{type:"keyframes",ease:"linear",duration:300}}function U_(t){return{type:"keyframes",duration:800,values:t}}const Ga={default:N_,x:$t,y:$t,z:$t,rotate:$t,rotateX:$t,rotateY:$t,rotateZ:$t,scaleX:Wr,scaleY:Wr,scale:Wr,backgroundColor:Vr,color:Vr,opacity:Vr};function Pu(t,e){let s;return z_(e)?s=U_:s=Ga[t]||Ga.default,{to:e,...s(e)}}const qa={...ln,transform:Math.round},Iu={color:$e,backgroundColor:$e,outlineColor:$e,fill:$e,stroke:$e,borderColor:$e,borderTopColor:$e,borderRightColor:$e,borderBottomColor:$e,borderLeftColor:$e,borderWidth:we,borderTopWidth:we,borderRightWidth:we,borderBottomWidth:we,borderLeftWidth:we,borderRadius:we,radius:we,borderTopLeftRadius:we,borderTopRightRadius:we,borderBottomRightRadius:we,borderBottomLeftRadius:we,width:we,maxWidth:we,height:we,maxHeight:we,size:we,top:we,right:we,bottom:we,left:we,padding:we,paddingTop:we,paddingRight:we,paddingBottom:we,paddingLeft:we,margin:we,marginTop:we,marginRight:we,marginBottom:we,marginLeft:we,rotate:Qt,rotateX:Qt,rotateY:Qt,rotateZ:Qt,scale:yn,scaleX:yn,scaleY:yn,scaleZ:yn,skew:Qt,skewX:Qt,skewY:Qt,distance:we,translateX:we,translateY:we,translateZ:we,x:we,y:we,z:we,perspective:we,transformPerspective:we,opacity:Ui,originX:Ua,originY:Ua,originZ:we,zIndex:qa,filter:Cs,WebkitFilter:Cs,fillOpacity:Ui,strokeOpacity:Ui,numOctaves:qa},so=t=>Iu[t];function Mu(t,e){return e&&typeof t=="number"&&e.transform?e.transform(t):t}function H_(t,e){let s=so(t);return s!==Cs&&(s=cn),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const W_={linear:bu,easeIn:no,easeInOut:_u,easeOut:l_,circIn:xu,circInOut:c_,circOut:Cu,backIn:ro,backInOut:h_,backOut:u_,anticipate:f_,bounceIn:m_,bounceInOut:v_,bounceOut:Xn};function Ka(t){if(Array.isArray(t)){const[e,s,d,f]=t;return R_(e,s,d,f)}else if(typeof t=="string")return W_[t];return t}function V_(t){return Array.isArray(t)&&typeof t[0]!="number"}function Za(t,e){return t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&cn.test(e)&&!e.startsWith("url("))}function X_(t){return Array.isArray(t.to)&&t.to[0]===null&&(t.to=[...t.to],t.to[0]=t.from),t}function Y_({ease:t,times:e,delay:s,...d}){const f={...d};return e&&(f.offset=e),t&&(f.ease=V_(t)?t.map(Ka):Ka(t)),s&&(f.elapsed=-s),f}function G_(t,e,s){return Array.isArray(e.to)&&(t.duration||(t.duration=800)),X_(e),q_(t)||(t={...t,...Pu(s,e.to)}),{...e,...Y_(t)}}function q_({delay:t,repeat:e,repeatType:s,repeatDelay:d,from:f,...m}){return!!Object.keys(m).length}function K_(t,e){return t[e]||t.default||t}function Z_(t,e,s,d,f){const m=K_(d,t);let y=m.from===null||m.from===void 0?e.get():m.from;const h=Za(t,s);y==="none"&&h&&typeof s=="string"&&(y=H_(t,s));const i=Za(t,y);function a(r){const o={from:y,to:s,velocity:d.velocity?d.velocity:e.getVelocity(),onUpdate:n=>e.set(n)};return m.type==="inertia"||m.type==="decay"?O_({...o,...m}):Su({...G_(m,o,t),onUpdate:n=>{o.onUpdate(n),m.onUpdate&&m.onUpdate(n)},onComplete:()=>{d.onComplete&&d.onComplete(),f&&f(),r&&r()}})}function u(r){return e.set(s),d.onComplete&&d.onComplete(),f&&f(),r&&r(),{stop:()=>{}}}return!i||!h||m.type===!1?u:a}function J_(){const{motionValues:t,stop:e,get:s}=j_();return{motionValues:t,stop:e,push:(f,m,y,h={},i)=>{const a=y[f],u=s(f,a,y);if(h&&h.immediate){u.set(m);return}const r=Z_(f,u,m,h,i);u.start(r)}}}function Q_(t,e={},{motionValues:s,push:d,stop:f}=J_()){const m=it(e),y=tt(!1);qe(s,r=>{y.value=Object.values(r).filter(o=>o.isAnimating()).length>0},{immediate:!0,deep:!0});const h=r=>{if(!m||!m[r])throw new Error(`The variant ${r} does not exist.`);return m[r]},i=r=>(typeof r=="string"&&(r=h(r)),Promise.all(Object.entries(r).map(([o,n])=>{if(o!=="transition")return new Promise(c=>d(o,n,t,r.transition||Pu(o,r[o]),c))}).filter(Boolean)));return{isAnimating:y,apply:i,set:r=>{const o=Vn(r)?r:h(r);Object.entries(o).forEach(([n,c])=>{n!=="transition"&&d(n,c,t,{immediate:!0})})},leave:async r=>{let o;if(m&&(m.leave&&(o=m.leave),!m.leave&&m.initial&&(o=m.initial)),!o){r();return}await i(o),r()},stop:f}}const oo=typeof window<"u",$_=()=>oo&&window.onpointerdown===null,ex=()=>oo&&window.ontouchstart===null,tx=()=>oo&&window.onmousedown===null;function ix({target:t,state:e,variants:s,apply:d}){const f=it(s),m=tt(!1),y=tt(!1),h=tt(!1),i=ze(()=>{let u=[];return f&&(f.hovered&&(u=[...u,...Object.keys(f.hovered)]),f.tapped&&(u=[...u,...Object.keys(f.tapped)]),f.focused&&(u=[...u,...Object.keys(f.focused)])),u}),a=ze(()=>{const u={};Object.assign(u,e.value),m.value&&f.hovered&&Object.assign(u,f.hovered),y.value&&f.tapped&&Object.assign(u,f.tapped),h.value&&f.focused&&Object.assign(u,f.focused);for(const r in u)i.value.includes(r)||delete u[r];return u});f.hovered&&(ft(t,"mouseenter",()=>m.value=!0),ft(t,"mouseleave",()=>{m.value=!1,y.value=!1}),ft(t,"mouseout",()=>{m.value=!1,y.value=!1})),f.tapped&&(tx()&&(ft(t,"mousedown",()=>y.value=!0),ft(t,"mouseup",()=>y.value=!1)),$_()&&(ft(t,"pointerdown",()=>y.value=!0),ft(t,"pointerup",()=>y.value=!1)),ex()&&(ft(t,"touchstart",()=>y.value=!0),ft(t,"touchend",()=>y.value=!1))),f.focused&&(ft(t,"focus",()=>h.value=!0),ft(t,"blur",()=>h.value=!1)),qe(a,d)}function nx({set:t,target:e,variants:s,variant:d}){const f=it(s);qe(()=>e,()=>{f&&(f.initial&&t("initial"),f.enter&&(d.value="enter"))},{immediate:!0,flush:"pre"})}function rx({state:t,apply:e}){qe(t,s=>{s&&e(s)},{immediate:!0})}function sx({target:t,variants:e,variant:s}){const d=it(e);d&&(d.visible||d.visibleOnce)&&xb(t,([{isIntersecting:f}])=>{d.visible?f?s.value="visible":s.value="initial":d.visibleOnce&&(f&&s.value!=="visibleOnce"?s.value="visibleOnce":s.value||(s.value="initial"))})}function ox(t,e={syncVariants:!0,lifeCycleHooks:!0,visibilityHooks:!0,eventListeners:!0}){e.lifeCycleHooks&&nx(t),e.syncVariants&&rx(t),e.visibilityHooks&&sx(t),e.eventListeners&&ix(t)}function Ru(t={}){const e=Gt({...t}),s=tt({});return qe(e,()=>{const d={};for(const[f,m]of Object.entries(e)){const y=so(f),h=Mu(m,y);d[f]=h}s.value=d},{immediate:!0,deep:!0}),{state:e,style:s}}function ao(t,e){qe(()=>zi(t),s=>{s&&e(s)},{immediate:!0})}const ax={x:"translateX",y:"translateY",z:"translateZ"};function Du(t={},e=!0){const s=Gt({...t}),d=tt("");return qe(s,f=>{let m="",y=!1;if(e&&(f.x||f.y||f.z)){const h=[f.x||0,f.y||0,f.z||0].map(we.transform).join(",");m+=`translate3d(${h}) `,y=!0}for(const[h,i]of Object.entries(f)){if(e&&(h==="x"||h==="y"||h==="z"))continue;const a=so(h),u=Mu(i,a);m+=`${ax[h]||h}(${u}) `}e&&!y&&(m+="translateZ(0px) "),d.value=m.trim()},{immediate:!0,deep:!0}),{state:s,transform:d}}const lx=["","X","Y","Z"],cx=["perspective","translate","scale","rotate","skew"],Fu=["transformPerspective","x","y","z"];cx.forEach(t=>{lx.forEach(e=>{const s=t+e;Fu.push(s)})});const ux=new Set(Fu);function lo(t){return ux.has(t)}const hx=new Set(["originX","originY","originZ"]);function Lu(t){return hx.has(t)}function fx(t){const e={},s={};return Object.entries(t).forEach(([d,f])=>{lo(d)||Lu(d)?e[d]=f:s[d]=f}),{transform:e,style:s}}function Bu(t){const{transform:e,style:s}=fx(t),{transform:d}=Du(e),{style:f}=Ru(s);return d.value&&(f.value.transform=d.value),f.value}function dx(t,e){let s,d;const{state:f,style:m}=Ru();return ao(t,y=>{d=y;for(const h of Object.keys(Iu))y.style[h]===null||y.style[h]===""||lo(h)||Lu(h)||(f[h]=y.style[h]);s&&Object.entries(s).forEach(([h,i])=>y.style[h]=i),e&&e(f)}),qe(m,y=>{if(!d){s=y;return}for(const h in y)d.style[h]=y[h]},{immediate:!0}),{style:f}}function px(t){const e=t.trim().split(/\) |\)/);if(e.length===1)return{};const s=d=>d.endsWith("px")||d.endsWith("deg")?parseFloat(d):isNaN(Number(d))?Number(d):d;return e.reduce((d,f)=>{if(!f)return d;const[m,y]=f.split("("),i=y.split(",").map(u=>s(u.endsWith(")")?u.replace(")",""):u.trim())),a=i.length===1?i[0]:i;return{...d,[m]:a}},{})}function gx(t,e){Object.entries(px(e)).forEach(([s,d])=>{const f=["x","y","z"];if(s==="translate3d"){if(d===0){f.forEach(m=>t[m]=0);return}d.forEach((m,y)=>t[f[y]]=m);return}if(d=parseFloat(d),s==="translateX"){t.x=d;return}if(s==="translateY"){t.y=d;return}if(s==="translateZ"){t.z=d;return}t[s]=d})}function mx(t,e){let s,d;const{state:f,transform:m}=Du();return ao(t,y=>{d=y,y.style.transform&&gx(f,y.style.transform),s&&(y.style.transform=s),e&&e(f)}),qe(m,y=>{if(!d){s=y;return}d.style.transform=y},{immediate:!0}),{transform:f}}function vx(t,e){const s=Gt({}),d=y=>Object.entries(y).forEach(([h,i])=>s[h]=i),{style:f}=dx(t,d),{transform:m}=mx(t,d);return qe(s,y=>{Object.entries(y).forEach(([h,i])=>{const a=lo(h)?m:f;a[h]&&a[h]===i||(a[h]=i)})},{immediate:!0,deep:!0}),ao(t,()=>e&&d(e)),{motionProperties:s,style:f,transform:m}}function yx(t={}){const e=it(t),s=tt();return{state:ze(()=>{if(s.value)return e[s.value]}),variant:s}}function ju(t,e={},s){const{motionProperties:d}=vx(t),{variant:f,state:m}=yx(e),y=Q_(d,e),h={target:t,variant:f,variants:e,state:m,motionProperties:d,...y};return ox(h,s),h}const bx=["initial","enter","leave","visible","visible-once","hovered","tapped","focused","delay"];function _x(t,e){const s=t.props?t.props:t.data&&t.data.attrs?t.data.attrs:{};s&&(s.variants&&Vn(s.variants)&&(e.value={...e.value,...s.variants}),bx.forEach(d=>{if(d==="delay"){if(s&&s[d]&&typeof s[d]=="number"){const f=s[d];e&&e.value&&(e.value.enter&&(e.value.enter.transition||(e.value.enter.transition={}),e.value.enter.transition={delay:f,...e.value.enter.transition}),e.value.visible&&(e.value.visible.transition||(e.value.visible.transition={}),e.value.visible.transition={delay:f,...e.value.visible.transition}),e.value.visibleOnce&&(e.value.visibleOnce.transition||(e.value.visibleOnce.transition={}),e.value.visibleOnce.transition={delay:f,...e.value.visibleOnce.transition}))}return}d==="visible-once"&&(d="visibleOnce"),s&&s[d]&&Vn(s[d])&&(e.value[d]=s[d])}))}function Xr(t){return{created:(s,d,f)=>{const m=d.value&&typeof d.value=="string"?d.value:f.key;m&&Hr[m]&&Hr[m].stop();const y=tt(t||{});typeof d.value=="object"&&(y.value=d.value),_x(f,y);const h=ju(s,y);s.motionInstance=h,m&&(Hr[m]=h)},getSSRProps(s,d){let{initial:f}=s.value||d&&(d==null?void 0:d.props)||{};f=it(f);const m=db((t==null?void 0:t.initial)||{},f||{});return!m||Object.keys(m).length===0?void 0:{style:Bu(m)}}}}const xx={initial:{opacity:0},enter:{opacity:1}},Cx={initial:{opacity:0},visible:{opacity:1}},wx={initial:{opacity:0},visibleOnce:{opacity:1}},Sx={initial:{scale:0,opacity:0},enter:{scale:1,opacity:1}},Tx={initial:{scale:0,opacity:0},visible:{scale:1,opacity:1}},Ox={initial:{scale:0,opacity:0},visibleOnce:{scale:1,opacity:1}},kx={initial:{x:-100,rotate:90,opacity:0},enter:{x:0,rotate:0,opacity:1}},Ax={initial:{x:-100,rotate:90,opacity:0},visible:{x:0,rotate:0,opacity:1}},Ex={initial:{x:-100,rotate:90,opacity:0},visibleOnce:{x:0,rotate:0,opacity:1}},Px={initial:{x:100,rotate:-90,opacity:0},enter:{x:0,rotate:0,opacity:1}},Ix={initial:{x:100,rotate:-90,opacity:0},visible:{x:0,rotate:0,opacity:1}},Mx={initial:{x:100,rotate:-90,opacity:0},visibleOnce:{x:0,rotate:0,opacity:1}},Rx={initial:{y:-100,rotate:-90,opacity:0},enter:{y:0,rotate:0,opacity:1}},Dx={initial:{y:-100,rotate:-90,opacity:0},visible:{y:0,rotate:0,opacity:1}},Fx={initial:{y:-100,rotate:-90,opacity:0},visibleOnce:{y:0,rotate:0,opacity:1}},Lx={initial:{y:100,rotate:90,opacity:0},enter:{y:0,rotate:0,opacity:1}},Bx={initial:{y:100,rotate:90,opacity:0},visible:{y:0,rotate:0,opacity:1}},jx={initial:{y:100,rotate:90,opacity:0},visibleOnce:{y:0,rotate:0,opacity:1}},zx={initial:{x:-100,opacity:0},enter:{x:0,opacity:1}},Nx={initial:{x:-100,opacity:0},visible:{x:0,opacity:1}},Ux={initial:{x:-100,opacity:0},visibleOnce:{x:0,opacity:1}},Hx={initial:{x:100,opacity:0},enter:{x:0,opacity:1}},Wx={initial:{x:100,opacity:0},visible:{x:0,opacity:1}},Vx={initial:{x:100,opacity:0},visibleOnce:{x:0,opacity:1}},Xx={initial:{y:-100,opacity:0},enter:{y:0,opacity:1}},Yx={initial:{y:-100,opacity:0},visible:{y:0,opacity:1}},Gx={initial:{y:-100,opacity:0},visibleOnce:{y:0,opacity:1}},qx={initial:{y:100,opacity:0},enter:{y:0,opacity:1}},Kx={initial:{y:100,opacity:0},visible:{y:0,opacity:1}},Zx={initial:{y:100,opacity:0},visibleOnce:{y:0,opacity:1}},ws={__proto__:null,fade:xx,fadeVisible:Cx,fadeVisibleOnce:wx,pop:Sx,popVisible:Tx,popVisibleOnce:Ox,rollBottom:Lx,rollLeft:kx,rollRight:Px,rollTop:Rx,rollVisibleBottom:Bx,rollVisibleLeft:Ax,rollVisibleOnceBottom:jx,rollVisibleOnceLeft:Ex,rollVisibleOnceRight:Mx,rollVisibleOnceTop:Fx,rollVisibleRight:Ix,rollVisibleTop:Dx,slideBottom:qx,slideLeft:zx,slideRight:Hx,slideTop:Xx,slideVisibleBottom:Kx,slideVisibleLeft:Nx,slideVisibleOnceBottom:Zx,slideVisibleOnceLeft:Ux,slideVisibleOnceRight:Vx,slideVisibleOnceTop:Gx,slideVisibleRight:Wx,slideVisibleTop:Yx},Jx=Ls({props:{is:{type:[String,Object],required:!1},preset:{type:String,required:!1},instance:{type:Object,required:!1},variants:{type:Object,required:!1},initial:{type:Object,required:!1},enter:{type:Object,required:!1},leave:{type:Object,required:!1},visible:{type:Object,required:!1},visibleOnce:{type:Object,required:!1},hovered:{type:Object,required:!1},tapped:{type:Object,required:!1},focused:{type:Object,required:!1},delay:{type:[Number,String],required:!1}},setup(t){var h;const e=Kh(),s=Gt({});if(!t.is&&!e.default)return()=>Ki("div",{});const d=ze(()=>{let i;return t.preset&&(i=ws[t.preset]),i}),f=ze(()=>({initial:t.initial,enter:t.enter,leave:t.leave,visible:t.visible,visibleOnce:t.visibleOnce,hovered:t.hovered,tapped:t.tapped,focused:t.focused})),m=ze(()=>{const i={...f.value,...d.value||{},...t.variants||{}};return t.delay&&(i.enter.transition={...i.enter.transition},i.enter.transition.delay=parseInt(t.delay)),i}),y=ze(()=>{if(!t.is)return;let i=t.is;return typeof y.value=="string"&&!Qu(i)&&(i=Yh(i)),i});if(((h=process==null?void 0:process.env)==null?void 0:h.NODE_ENV)==="development"||process!=null&&process.dev){const i=a=>{var u;(u=a.variants)!=null&&u.initial&&a.set("initial"),setTimeout(()=>{var r,o,n;(r=a.variants)!=null&&r.enter&&a.apply("enter"),(o=a.variants)!=null&&o.visible&&a.apply("visible"),(n=a.variants)!=null&&n.visibleOnce&&a.apply("visibleOnce")},10)};Bl(()=>Object.entries(s).forEach(([a,u])=>i(u)))}return{slots:e,component:y,motionConfig:m,instances:s}},render({slots:t,motionConfig:e,instances:s,component:d}){var h;const f=Bu(e.initial||{}),m=(i,a)=>(i.props||(i.props={}),i.props.style=f,i.props.onVnodeMounted=({el:u})=>{const r=ju(u,e);s[a]=r},i);if(d){const i=Ki(d,void 0,t);return m(i,0),i}return(((h=t.default)==null?void 0:h.call(t))||[]).map((i,a)=>m(i,a))}});function Qx(t){const e="àáâäæãåāăąçćčđďèéêëēėęěğǵḧîïíīįìłḿñńǹňôöòóœøōõőṕŕřßśšşșťțûüùúūǘůűųẃẍÿýžźż·/_,:;",s="aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------",d=new RegExp(e.split("").join("|"),"g");return t.toString().replace(/[A-Z]/g,f=>`-${f}`).toLowerCase().replace(/\s+/g,"-").replace(d,f=>s.charAt(e.indexOf(f))).replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}const $x={install(t,e){if(t.directive("motion",Xr()),t.component("Motion",Jx),!e||e&&!e.excludePresets)for(const s in ws){const d=ws[s];t.directive(`motion-${Qx(s)}`,Xr(d))}if(e&&e.directives)for(const s in e.directives){const d=e.directives[s];!d.initial&&__DEV__&&console.warn(`Your directive v-motion-${s} is missing initial variant!`),t.directive(`motion-${s}`,Xr(d))}}};const co=pd(bp);co.use(hb);co.use($x);co.mount("#app");
